{"version":3,"sources":["webpack://HyperFormula/webpack/universalModuleDefinition","webpack://HyperFormula/webpack/bootstrap","webpack://HyperFormula/./lib/index.js","webpack://HyperFormula/./lib/ArraySize.js","webpack://HyperFormula/./node_modules/core-js/modules/es.array.push.js","webpack://HyperFormula/./node_modules/core-js/internals/export.js","webpack://HyperFormula/./node_modules/core-js/internals/global.js","webpack://HyperFormula/(webpack)/buildin/global.js","webpack://HyperFormula/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://HyperFormula/./node_modules/core-js/internals/descriptors.js","webpack://HyperFormula/./node_modules/core-js/internals/fails.js","webpack://HyperFormula/./node_modules/core-js/internals/function-call.js","webpack://HyperFormula/./node_modules/core-js/internals/function-bind-native.js","webpack://HyperFormula/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://HyperFormula/./node_modules/core-js/internals/create-property-descriptor.js","webpack://HyperFormula/./node_modules/core-js/internals/to-indexed-object.js","webpack://HyperFormula/./node_modules/core-js/internals/indexed-object.js","webpack://HyperFormula/./node_modules/core-js/internals/function-uncurry-this.js","webpack://HyperFormula/./node_modules/core-js/internals/classof-raw.js","webpack://HyperFormula/./node_modules/core-js/internals/require-object-coercible.js","webpack://HyperFormula/./node_modules/core-js/internals/is-null-or-undefined.js","webpack://HyperFormula/./node_modules/core-js/internals/to-property-key.js","webpack://HyperFormula/./node_modules/core-js/internals/to-primitive.js","webpack://HyperFormula/./node_modules/core-js/internals/is-object.js","webpack://HyperFormula/./node_modules/core-js/internals/is-callable.js","webpack://HyperFormula/./node_modules/core-js/internals/document-all.js","webpack://HyperFormula/./node_modules/core-js/internals/is-symbol.js","webpack://HyperFormula/./node_modules/core-js/internals/get-built-in.js","webpack://HyperFormula/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://HyperFormula/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://HyperFormula/./node_modules/core-js/internals/symbol-constructor-detection.js","webpack://HyperFormula/./node_modules/core-js/internals/engine-v8-version.js","webpack://HyperFormula/./node_modules/core-js/internals/engine-user-agent.js","webpack://HyperFormula/./node_modules/core-js/internals/get-method.js","webpack://HyperFormula/./node_modules/core-js/internals/a-callable.js","webpack://HyperFormula/./node_modules/core-js/internals/try-to-string.js","webpack://HyperFormula/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://HyperFormula/./node_modules/core-js/internals/well-known-symbol.js","webpack://HyperFormula/./node_modules/core-js/internals/shared.js","webpack://HyperFormula/./node_modules/core-js/internals/is-pure.js","webpack://HyperFormula/./node_modules/core-js/internals/shared-store.js","webpack://HyperFormula/./node_modules/core-js/internals/define-global-property.js","webpack://HyperFormula/./node_modules/core-js/internals/has-own-property.js","webpack://HyperFormula/./node_modules/core-js/internals/to-object.js","webpack://HyperFormula/./node_modules/core-js/internals/uid.js","webpack://HyperFormula/./node_modules/core-js/internals/ie8-dom-define.js","webpack://HyperFormula/./node_modules/core-js/internals/document-create-element.js","webpack://HyperFormula/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://HyperFormula/./node_modules/core-js/internals/object-define-property.js","webpack://HyperFormula/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://HyperFormula/./node_modules/core-js/internals/an-object.js","webpack://HyperFormula/./node_modules/core-js/internals/define-built-in.js","webpack://HyperFormula/./node_modules/core-js/internals/make-built-in.js","webpack://HyperFormula/./node_modules/core-js/internals/function-name.js","webpack://HyperFormula/./node_modules/core-js/internals/inspect-source.js","webpack://HyperFormula/./node_modules/core-js/internals/internal-state.js","webpack://HyperFormula/./node_modules/core-js/internals/weak-map-basic-detection.js","webpack://HyperFormula/./node_modules/core-js/internals/shared-key.js","webpack://HyperFormula/./node_modules/core-js/internals/hidden-keys.js","webpack://HyperFormula/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://HyperFormula/./node_modules/core-js/internals/own-keys.js","webpack://HyperFormula/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://HyperFormula/./node_modules/core-js/internals/object-keys-internal.js","webpack://HyperFormula/./node_modules/core-js/internals/array-includes.js","webpack://HyperFormula/./node_modules/core-js/internals/to-absolute-index.js","webpack://HyperFormula/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://HyperFormula/./node_modules/core-js/internals/math-trunc.js","webpack://HyperFormula/./node_modules/core-js/internals/length-of-array-like.js","webpack://HyperFormula/./node_modules/core-js/internals/to-length.js","webpack://HyperFormula/./node_modules/core-js/internals/enum-bug-keys.js","webpack://HyperFormula/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://HyperFormula/./node_modules/core-js/internals/is-forced.js","webpack://HyperFormula/./node_modules/core-js/internals/array-set-length.js","webpack://HyperFormula/./node_modules/core-js/internals/is-array.js","webpack://HyperFormula/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://HyperFormula/./lib/AbsoluteCellRange.js","webpack://HyperFormula/./lib/Cell.js","webpack://HyperFormula/./lib/DependencyGraph/index.js","webpack://HyperFormula/./lib/DependencyGraph/DependencyGraph.js","webpack://HyperFormula/./lib/absolutizeDependencies.js","webpack://HyperFormula/./lib/parser/index.js","webpack://HyperFormula/./lib/parser/addressRepresentationConverters.js","webpack://HyperFormula/./lib/parser/CellAddress.js","webpack://HyperFormula/./lib/parser/ColumnAddress.js","webpack://HyperFormula/./lib/parser/RowAddress.js","webpack://HyperFormula/./lib/parser/parser-consts.js","webpack://HyperFormula/./lib/parser/ParserWithCaching.js","webpack://HyperFormula/external {\"root\":\"chevrotain\",\"commonjs2\":\"chevrotain\",\"commonjs\":\"chevrotain\",\"amd\":\"chevrotain\"}","webpack://HyperFormula/./lib/parser/Ast.js","webpack://HyperFormula/./lib/parser/binaryOpTokenMap.js","webpack://HyperFormula/./lib/parser/Cache.js","webpack://HyperFormula/./lib/parser/FormulaParser.js","webpack://HyperFormula/./lib/error-message.js","webpack://HyperFormula/./lib/parser/LexerConfig.js","webpack://HyperFormula/./lib/parser/CellReferenceMatcher.js","webpack://HyperFormula/./lib/parser/NamedExpressionMatcher.js","webpack://HyperFormula/./lib/parser/Unparser.js","webpack://HyperFormula/./lib/parser/collectDependencies.js","webpack://HyperFormula/./lib/parser/RelativeDependency.js","webpack://HyperFormula/./lib/ContentChanges.js","webpack://HyperFormula/./lib/SimpleRangeValue.js","webpack://HyperFormula/./lib/interpreter/InterpreterValue.js","webpack://HyperFormula/./lib/Span.js","webpack://HyperFormula/./lib/statistics/index.js","webpack://HyperFormula/./lib/statistics/EmptyStatistics.js","webpack://HyperFormula/./lib/statistics/Statistics.js","webpack://HyperFormula/./lib/statistics/StatType.js","webpack://HyperFormula/./lib/DependencyGraph/AddressMapping/AddressMapping.js","webpack://HyperFormula/./lib/errors.js","webpack://HyperFormula/./lib/DependencyGraph/ArrayMapping.js","webpack://HyperFormula/./lib/DependencyGraph/collectAddressesDependentToRange.js","webpack://HyperFormula/./lib/DependencyGraph/FormulaCellVertex.js","webpack://HyperFormula/./lib/ArrayValue.js","webpack://HyperFormula/./lib/DependencyGraph/RangeVertex.js","webpack://HyperFormula/./lib/DependencyGraph/Graph.js","webpack://HyperFormula/./lib/DependencyGraph/RangeMapping.js","webpack://HyperFormula/./lib/DependencyGraph/SheetMapping.js","webpack://HyperFormula/./lib/i18n/index.js","webpack://HyperFormula/./lib/i18n/TranslationPackage.js","webpack://HyperFormula/./lib/DependencyGraph/EmptyCellVertex.js","webpack://HyperFormula/./lib/DependencyGraph/ValueCellVertex.js","webpack://HyperFormula/./lib/DependencyGraph/ParsingErrorVertex.js","webpack://HyperFormula/./lib/DependencyGraph/AddressMapping/SparseStrategy.js","webpack://HyperFormula/./lib/DependencyGraph/AddressMapping/DenseStrategy.js","webpack://HyperFormula/./lib/interpreter/InterpreterState.js","webpack://HyperFormula/./lib/interpreter/plugin/FunctionPlugin.js","webpack://HyperFormula/./lib/interpreter/ArithmeticHelper.js","webpack://HyperFormula/external {\"root\":\"unorm\",\"commonjs2\":\"unorm\",\"commonjs\":\"unorm\",\"amd\":\"unorm\"}","webpack://HyperFormula/./lib/StringHelper.js","webpack://HyperFormula/./lib/CellValue.js","webpack://HyperFormula/./lib/Config.js","webpack://HyperFormula/./lib/ArgumentSanitization.js","webpack://HyperFormula/./lib/DateTimeDefault.js","webpack://HyperFormula/./lib/DateTimeHelper.js","webpack://HyperFormula/./lib/DependencyGraph/AddressMapping/ChooseAddressMappingPolicy.js","webpack://HyperFormula/./lib/format/format.js","webpack://HyperFormula/./lib/format/parser.js","webpack://HyperFormula/./lib/helpers/licenseKeyValidator.js","webpack://HyperFormula/./lib/helpers/licenseKeyHelper.js","webpack://HyperFormula/./lib/HyperFormula.js","webpack://HyperFormula/./lib/BuildEngineFactory.js","webpack://HyperFormula/./lib/CellContentParser.js","webpack://HyperFormula/./lib/ClipboardOperations.js","webpack://HyperFormula/./lib/CrudOperations.js","webpack://HyperFormula/./lib/NamedExpressions.js","webpack://HyperFormula/./lib/Operations.js","webpack://HyperFormula/./lib/dependencyTransformers/AddColumnsTransformer.js","webpack://HyperFormula/./lib/dependencyTransformers/Transformer.js","webpack://HyperFormula/./lib/dependencyTransformers/AddRowsTransformer.js","webpack://HyperFormula/./lib/dependencyTransformers/CleanOutOfScopeDependenciesTransformer.js","webpack://HyperFormula/./lib/dependencyTransformers/MoveCellsTransformer.js","webpack://HyperFormula/./lib/dependencyTransformers/RemoveColumnsTransformer.js","webpack://HyperFormula/./lib/dependencyTransformers/RemoveRowsTransformer.js","webpack://HyperFormula/./lib/dependencyTransformers/RemoveSheetTransformer.js","webpack://HyperFormula/./lib/Sheet.js","webpack://HyperFormula/./lib/UndoRedo.js","webpack://HyperFormula/./lib/Evaluator.js","webpack://HyperFormula/./lib/Exporter.js","webpack://HyperFormula/./lib/GraphBuilder.js","webpack://HyperFormula/./lib/interpreter/FunctionRegistry.js","webpack://HyperFormula/./lib/interpreter/plugin/VersionPlugin.js","webpack://HyperFormula/./lib/interpreter/Interpreter.js","webpack://HyperFormula/./lib/interpreter/Criterion.js","webpack://HyperFormula/./lib/LazilyTransformingAstService.js","webpack://HyperFormula/./lib/dependencyTransformers/CombinedTransformer.js","webpack://HyperFormula/./lib/Lookup/SearchStrategy.js","webpack://HyperFormula/./lib/Lookup/ColumnBinarySearch.js","webpack://HyperFormula/./lib/Lookup/AdvancedFind.js","webpack://HyperFormula/./lib/interpreter/binarySearch.js","webpack://HyperFormula/./lib/Lookup/ColumnIndex.js","webpack://HyperFormula/./lib/NumberLiteralHelper.js","webpack://HyperFormula/./lib/Serialization.js","webpack://HyperFormula/./lib/Destroy.js","webpack://HyperFormula/./lib/Emitter.js","webpack://HyperFormula/external {\"root\":\"TinyEmitter\",\"commonjs2\":\"tiny-emitter\",\"commonjs\":\"tiny-emitter\",\"amd\":\"tiny-emitter\"}","webpack://HyperFormula/./lib/i18n/languages/enGB.js","webpack://HyperFormula/./lib/interpreter/index.js","webpack://HyperFormula/./lib/interpreter/plugin/index.js","webpack://HyperFormula/./lib/interpreter/plugin/ArrayPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/AbsPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/BitShiftPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/BitwiseLogicOperationsPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/BooleanPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/CharPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/CodePlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/CountBlankPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/CountUniquePlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/DateTimePlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/DegreesPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/DeltaPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/ExpPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/FinancialPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/FormulaTextPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/InformationPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/IsEvenPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/IsOddPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/LogarithmPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/MathConstantsPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/MatrixPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/MedianPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/ModuloPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/NumericAggregationPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/PowerPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/RadiansPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/RadixConversionPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/RandomPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/RoundingPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/SqrtPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/ConditionalAggregationPlugin.js","webpack://HyperFormula/./lib/interpreter/CriterionFunctionCompute.js","webpack://HyperFormula/./lib/generatorUtils.js","webpack://HyperFormula/./lib/interpreter/plugin/SumprodPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/TextPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/TrigonometryPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/LookupPlugin.js","webpack://HyperFormula/./lib/Lookup/RowSearchStrategy.js","webpack://HyperFormula/./lib/interpreter/plugin/RomanPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/SimpleArithmertic.js","webpack://HyperFormula/./lib/interpreter/plugin/StatisticalPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/3rdparty/bessel/bessel.js","webpack://HyperFormula/./lib/interpreter/plugin/3rdparty/jstat/jstat.js","webpack://HyperFormula/./lib/interpreter/plugin/MathPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/ComplexPlugin.js","webpack://HyperFormula/./lib/interpreter/plugin/StatisticalAggregationPlugin.js"],"names":["_ArraySize","require","exports","ArraySize","_Cell","CellError","CellType","CellValueDetailedType","CellValueType","ErrorType","_CellValue","DetailedCellError","_Config","_ChooseAddressMappingPolicy","AlwaysDense","AlwaysSparse","DenseSparseChooseBasedOnThreshold","_errors","ConfigValueTooBigError","ConfigValueTooSmallError","EvaluationSuspendedError","ExpectedOneOfValuesError","ExpectedValueOfTypeError","FunctionPluginValidationError","InvalidAddressError","InvalidArgumentsError","LanguageAlreadyRegisteredError","LanguageNotRegisteredError","MissingTranslationError","NamedExpressionDoesNotExistError","NamedExpressionNameIsAlreadyTakenError","NamedExpressionNameIsInvalidError","NoOperationToRedoError","NoOperationToUndoError","NoRelativeAddressesAllowedError","NoSheetWithIdError","NoSheetWithNameError","NotAFormulaError","NothingToPasteError","ProtectedFunctionTranslationError","SheetNameAlreadyTakenError","SheetSizeLimitExceededError","SourceLocationHasArrayError","TargetLocationHasArrayError","UnableToParseError","_Exporter","ExportedCellChange","ExportedNamedExpressionChange","_HyperFormula","HyperFormula","_enGB","_interopRequireDefault","_interpreter","FunctionPlugin","FunctionArgumentType","plugins","_interopRequireWildcard","_SimpleRangeValue","SimpleRangeValue","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","HyperFormulaNS","defaultLanguage","Config","defaultConfig","language","registerLanguage","enGB","languages","langCode","pluginName","getOwnPropertyNames","startsWith","registerFunctionPlugin","_default","_AbsoluteCellRange","_InterpreterState","_FunctionPlugin","_parser","constructor","width","height","isRef","arguments","length","undefined","Error","fromArray","array","error","scalar","isScalar","arraySizeForBinaryOp","leftArraySize","rightArraySize","Math","max","arraySizeForUnaryOp","arraySize","ArraySizePredictor","config","functionRegistry","checkArraySize","ast","formulaAddress","checkArraySizeForAst","arraysFlag","useArrayArithmetic","state","type","AstNodeType","FUNCTION_CALL","checkArraySizeForFunction","COLUMN_RANGE","ROW_RANGE","CELL_RANGE","range","AbsoluteCellRange","fromAstOrUndef","ARRAY","heights","widths","row","args","sizes","map","h","min","size","w","reduce","total","push","STRING","NUMBER","CELL_REFERENCE","DIV_OP","CONCATENATE_OP","EQUALS_OP","GREATER_THAN_OP","GREATER_THAN_OR_EQUAL_OP","LESS_THAN_OP","LESS_THAN_OR_EQUAL_OP","MINUS_OP","NOT_EQUAL_OP","PLUS_OP","POWER_OP","TIMES_OP","left","right","MINUS_UNARY_OP","PLUS_UNARY_OP","PERCENT_OP","val","value","PARENTHESIS","expression","EMPTY","metadata","getMetadata","procedureName","pluginArraySizeFunction","getArraySizeFunction","subChecks","arg","_a","InterpreterState","arrayFunction","expandRanges","vectorizationForbidden","parameters","argumentDefinitions","repeatLastArgs","slice","maxWidth","maxHeight","i","argumentType","RANGE","ANY","_Span","WRONG_RANGE_SIZE","isSimpleCellRange","isSimpleCellAddress","start","end","simpleCellRange","sheet","SheetsNotEqual","simpleCellAddress","col","fromSimpleCellAddresses","Number","isFinite","AbsoluteRowRange","AbsoluteColumnRange","fromAst","baseAddress","fromCellRange","fromColumnRange","fromRowRangeAst","_e","x","toSimpleCellAddress","spanFrom","topLeftCorner","ret","spanFromOrUndef","fromCoordinates","x1","y1","x2","y2","doesOverlap","other","addressInRange","address","columnInRange","rowInRange","containsRange","intersectionWith","startRow","endRow","startCol","endCol","includesRow","includesColumn","column","shiftByRows","numberOfRows","expandByRows","shiftByColumns","numberOfColumns","shifted","byCols","byRows","expandByColumns","moveToSheet","toSheet","removeSpan","span","RowsSpan","removeRows","removeColumns","shouldBeRemoved","rangeWithSameWidth","rangeWithSameHeight","startColumn","toString","arrayOfAddressesInRange","result","y","withStart","newStart","sameDimensionsAs","sameAs","equalSimpleCellAddress","addressesArrayMap","dependencyGraph","op","currentRow","effectiveEndRow","currentColumn","tmp","effectiveEndColumn","addresses","limitRow","limitColumn","addressesWithDirection","bottom","getAddress","exceedsSheetSizeLimits","maxColumns","maxRows","_dependencyGraph","effectiveWidth","effectiveHeight","rowStart","rowEnd","columnStart","columnEnd","POSITIVE_INFINITY","toSimpleColumnAddress","_numberOfRows","_byRows","_maxRows","getSheetHeight","_rowStart","_rowEnd","toSimpleRowAddress","_numberOfColumns","_maxColumns","getSheetWidth","_columnStart","_columnEnd","_DependencyGraph","_errorMessage","_InterpreterValue","getCellType","vertex","ArrayVertex","isLeftCorner","ARRAYFORMULA","FormulaCellVertex","ParsingErrorVertex","FORMULA","ValueCellVertex","VALUE","CellValueNoNumber","CellValueJustNumber","assign","NumberType","CellValueTypeOrd","BOOLEAN","ERROR","getCellValueType","cellValue","EmptyValue","isExtendedNumber","getCellValueDetailedType","getTypeOfExtendedNumber","getCellValueFormat","getFormatOfExtendedNumber","message","root","parsingError","ErrorMessage","ParseError","attachRootVertex","simpleRowAddress","invalidSimpleRowAddress","simpleColumnAddress","invalidSimpleColumnAddress","invalidSimpleCellAddress","movedSimpleCellAddress","toRight","toBottom","addressKey","absoluteSheetReference","DependencyGraph","_AddressMapping","AddressMapping","_Graph","Graph","_RangeMapping","RangeMapping","_SheetMapping","SheetMapping","_ArrayMapping","ArrayMapping","_FormulaCellVertex","_EmptyCellVertex","EmptyCellVertex","_ValueCellVertex","_ParsingErrorVertex","_RangeVertex","RangeVertex","_SparseStrategy","SparseStrategy","_DenseStrategy","DenseStrategy","_absolutizeDependencies","_ContentChanges","_statistics","_2","_collectAddressesDependentToRange","addressMapping","rangeMapping","sheetMapping","arrayMapping","stats","lazilyTransformingAstService","namedExpressions","changes","ContentChanges","empty","dependencyQueryAddresses","rangeDependencyQuery","_ref","_","dependenciesResult","formulaDependencyQuery","dependencies","dependency","NamedExpressionDependency","namedExpressionOrPlaceholder","name","dependencyQueryVertices","fetchRange","namedExpression","fetchCell","allDeps","smallerRangeVertex","restRange","findSmallerRange","graph","adjacentNodes","cell","getCell","formula","FormulaVertex","getFormula","deps","collectDependencies","absolutizeDependencies","buildEmpty","chooseAddressMappingPolicy","translationPackage","setFormulaToCell","hasVolatileFunction","hasStructuralChangeFunction","newVertex","version","exchangeOrAddFormulaVertex","processCellDependencies","markNodeAsSpecialRecentlyChanged","markAsVolatile","markAsDependentOnStructureChange","correctInfiniteRangesDependency","getAndClearContentChanges","setParsingErrorToCell","errorVertex","shrinkPossibleArrayAndGetCell","exchangeOrAddGraphNode","setCell","setValueToCell","removeArray","getRange","oldValues","getValues","rawValue","setValues","parsedValue","setCellEmpty","emptyVertex","exchangeGraphNode","adjacentNodesCount","removeVertex","removeCell","ensureThatVertexIsNonArrayCellVertex","clearRecentlyChangedVertices","clearSpecialNodesRecentlyChanged","verticesToRecompute","Set","specialNodesRecentlyChanged","volatileVertices","cellDependencies","endVertex","forEach","dep","rangeVertex","setRange","addNode","markNodeAsInfiniteRange","addEdge","bruteForce","cellFromRange","removeEdge","getArray","fetchCellOrCreateEmpty","correctInfiniteRangesDependenciesByRangeVertex","sheetOfVertex","namedExpressionVertex","fetchNamedExpressionVertex","expressionName","sheetId","exchangeNode","addressFrom","addressTo","vertexFrom","vertexTo","infiniteRanges","infiniteRangeVertex","removedRows","measure","StatType","ADJUSTING_GRAPH","entriesFromRowsSpan","adjacentNode","shrinkArrayToCorner","ADJUSTING_ADDRESS_MAPPING","affectedArrays","ADJUSTING_RANGES","affectedRanges","truncateRanges","getArrayVerticesRelatedToRanges","ADJUSTING_ARRAY_MAPPING","fixArraysAfterRemovingRows","addStructuralNodesToChangeSet","contentChanges","removeSheet","removedSheetId","clearSheet","adr","sheetEntries","rangesToRemove","removeRangesInSheet","arrays","add","values","setArrayEmpty","removedColumns","entriesFromColumnsSpan","fixArraysAfterRemovingColumns","addRows","addedRows","moveAllRangesInSheetAfterRowByRows","fixRangesWhenAddingRows","verticesWithChangedSize","fixArraysAfterAddingRow","verticesFromRowsSpan","addColumns","addedColumns","moveAllRangesInSheetAfterColumnByColumns","fixRangesWhenAddingColumns","fixArraysAfterAddingColumn","verticesFromColumnsSpan","ensureNoArrayInRange","isFormulaArrayInRange","isThereSpaceForArray","arrayVertex","getRangeOrUndef","vertexUnderAddress","moveCells","sourceRange","sourceAddress","targetAddress","sourceVertex","targetVertex","rangeVerticesContainedInRange","newEmptyVertex","moveRangesInsideSourceRange","arrayRange","nodeDependencies","collectAddressesDependentToRange","addVertex","addArrayVertex","setAddressMappingForArrayVertex","arrayFormulaNodes","nodes","rowsSpan","columnsSpan","existsVertex","getCellValue","getRawValue","getScalarValue","ScalarExpected","existsEdge","fromNode","toNode","getSheetId","sheetName","fetch","getHeight","getWidth","setArray","topSortWithScc","markNodeAsSpecial","markNodeAsChangingWithStructure","forceApplyPostponedTransformations","ensureRecentData","specialNodes","ranges","arrayVertices","hasNode","Array","from","filter","node","rawValuesFromRange","entriesFromRange","oldNode","newNode","adjNodesStored","computeListOfValuesInRange","cleanAddressMappingUnderArray","adjacentVertex","adjacentArrayVertices","relevantDependencies","formulaDirectDependenciesToArray","rangeDirectDependenciesToArray","dependentToCorner","isArrayInternalCell","getAdjacentNodesAddresses","inputVertex","castVertex","intersection","oldValue","getArrayCellValue","addChange","REF","formulaDependencies","item","specialNodesStructuralChanges","originalValues","rangesInSheet","addedSubrangeInThatRange","currentRangeVertex","find","newRangeVertex","addAllFromRange","subrange","cellAddress","old","coordinate","verticesToRemove","verticesToMerge","existingVertex","mergedVertex","mergeRangeVertices","removeVertexAndCleanupDependencies","moveArrayVerticesAfterRowByRows","arraysInRows","fromRowStartAndEnd","destination","source","moveCell","setNoSpaceIfArray","moveArrayVerticesAfterColumnByColumns","arraysInCols","ColumnsSpan","fromColumnStartAndEnd","setNoSpace","removeRange","softRemoveEdge","removeNode","next","delete","candidate","absolutize","filterDependenciesOutOfScope","_addressRepresentationConverters","cellAddressFromString","simpleCellAddressFromString","simpleCellAddressToString","simpleCellRangeFromString","simpleCellRangeToString","_CellAddress","CellAddress","_ParserWithCaching","ParserWithCaching","_collectDependencies","_LexerConfig","buildLexerConfig","_FormulaParser","FormulaLexer","_Ast","ParsingErrorType","buildProcedureAst","buildCellRangeAst","buildParsingErrorAst","buildCellErrorAst","_Unparser","Unparser","_RelativeDependency","AddressDependency","CellRangeDependency","ColumnRangeDependency","RowRangeDependency","_ColumnAddress","_parserConsts","_RowAddress","addressRegex","RegExp","SHEET_NAME_PATTERN","ABSOLUTE_OPERATOR","columnRegex","rowRegex","simpleSheetNameRegex","UNQUOTED_SHEET_NAME_PATTERN","stringAddress","exec","columnLabelToIndex","extractSheetNumber","absolute","absoluteCol","absoluteRow","relative","columnAddressFromString","ColumnAddress","rowAddressFromString","RowAddress","sheetContext","split","RANGE_OPERATOR","startString","endString","sheetIndexMapping","sheetIndex","columnIndexToLabel","sheetIndexToString","columnStringRepresentation","toUpperCase","charCodeAt","nextLetter","String","fromCharCode","floor","sheetMappingFn","test","replace","regexResult","maybeSheetName","CellReferenceType","fromColAndRow","factoryMethod","isColumnAbsolute","isRowAbsolute","bind","CELL_REFERENCE_RELATIVE","CELL_REFERENCE_ABSOLUTE","CELL_REFERENCE_ABSOLUTE_COL","CELL_REFERENCE_ABSOLUTE_ROW","toColumnAddress","refType","isColumnRelative","ReferenceType","RELATIVE","ABSOLUTE","toRowAddress","isRowRelative","isAbsolute","shiftedByRows","shiftedByColumns","moved","newSheet","withSheet","isInvalid","shiftRelativeDimensions","shiftAbsoluteDimensions","hash","sheetPart","unparse","simpleAddress","rowDollar","colDollar","compareByAbsoluteAddress","colA","colB","_toBottom","dollar","rowA","rowB","ALL_WHITESPACE_PATTERN","ODFF_WHITESPACE_PATTERN","UNICODE_LETTER_PATTERN","NON_RESERVED_CHARACTER_PATTERN","QUOTED_SHEET_NAME_PATTERN","CELL_REFERENCE_PATTERN","COLUMN_REFERENCE_PATTERN","ROW_REFERENCE_PATTERN","R1C1_CELL_REFERENCE_PATTERN","CELL_REFERENCE_WITH_NEXT_CHARACTER_PATTERN","NAMED_EXPRESSION_PATTERN","ALL_DIGITS_ARRAY","ALL_UNICODE_LETTERS_ARRAY","code","_chevrotain","_binaryOpTokenMap","_Cache","statsCacheUsed","lexerConfig","lexer","formulaParser","FormulaParser","Cache","parse","text","lexerResult","tokenizeFormula","errors","e","LexingError","computeHashFromTokens","tokens","cacheResult","processedTokens","bindWhitespacesToTokens","parsingResult","parseFromTokens","astWithNoReversedRanges","convertReversedRangesToRegularRanges","ERROR_WITH_RAW_INPUT","NAMED_EXPRESSION","orderedEnds","orderCellRangeEnds","orderColumnRangeEnds","orderRowRangeEnds","valueFixed","leftFixed","rightFixed","exprFixed","argsFixed","argsRow","endA","endB","ends","sort","startSheet","endSheet","compareSheetIds","sheetA","sheetB","Infinity","fetchCachedResultForAst","computeHashFromAst","fetchCachedResult","relativeDependencies","idx","token","tokenMatcher","CellReference","image","concat","ProcedureName","canonicalProcedureName","functionMapping","ColumnRange","startAddress","endAddress","RowRange","rememberNewAst","maybeSetAndThenGet","computeHashOfAstNode","leadingWhitespace","imageWithWhitespace","formatNumber","decimalSeparator","join","functionArgSeparator","rightPart","internalWhitespace","reference","sheetReferenceType","RangeSheetReferenceType","BOTH_ABSOLUTE","getErrorTranslation","rawInput","binaryOpTokenMap","first","WhiteSpace","current","previous","buildEmptyArgAst","buildNumberAst","buildStringAst","buildCellReferenceAst","assertRangeConsistency","buildColumnRangeAst","buildRowRangeAst","buildConcatenateOpAst","buildEqualsOpAst","buildNotEqualOpAst","buildGreaterThanOpAst","buildLessThanOpAst","buildGreaterThanOrEqualOpAst","buildLessThanOrEqualOpAst","buildPlusOpAst","buildMinusOpAst","buildTimesOpAst","buildDivOpAst","buildPowerOpAst","buildMinusUnaryOpAst","buildPlusUnaryOpAst","buildPercentOpAst","buildArrayAst","buildNamedExpressionAst","buildParenthesisAst","buildErrorWithRawInputAst","buildCacheEntry","Map","astRelativeDependencies","cacheEntry","doesContainFunctions","isFunctionVolatile","isFunctionDependentOnSheetStructureChange","entryFromCache","functionCriterion","some","EmbeddedActionsParser","allTokens","outputCst","maxLookahead","booleanExpressionOrEmpty","RULE","OR","ALT","SUBRULE","booleanExpression","EMPTY_ALT","procedureExpression","procedureNameToken","CONSUME","argument","MANY","separator","ArgSeparator","SUBRULE2","rParenToken","RParen","namedExpressionExpression","NamedExpression","offsetProcedureExpression","OffsetProcedureName","LParen","MANY_SEP","SEP","DEF","handleOffsetHeuristic","columnRangeExpression","startImage","endImage","firstAddress","ACTION","secondAddress","NAME","ParserError","firstEnd","secondEnd","sheetRefType","fixSheetIdsForRangeEnds","rowRangeExpression","cellReference","endRangeReference","buildCellRange","endOfRangeExpression","ARGS","offsetProcedure","RangeOffsetNotAllowed","cellRangeExpression","CONSUME2","RangeSeparator","endRangeWithOffsetStartReference","endOfRangeWithOffsetStartExpression","offsetExpression","OPTION","insideArrayExpression","ArrayColSeparator","ArrayRowSeparator","SUBRULE3","parenthesisExpression","lParenToken","arrayExpression","ltoken","ArrayLParen","rtoken","ArrayRParen","numericStringToNumber","input","normalized","positiveAtomicExpression","atomicExpCache","number","NumberLiteral","str","StringLiteral","ErrorLiteral","errString","errorType","errorMapping","rightUnaryOpAtomicExpression","percentage","PercentOp","atomicExpression","AdditionOp","PlusOp","MinusOp","customParsingError","powerExpression","lhs","PowerOp","rhs","multiplicationExpression","MultiplicationOp","TimesOp","DivOp","additionExpression","concatenateExpression","ConcatenateOp","BooleanOp","EqualsOp","NotEqualOp","GreaterThanOp","LessThanOp","GreaterThanOrEqualOp","LessThanOrEqualOp","performSelfAnalysis","formulaWithContext","reset","rangeSheetReferenceType","secondEndFixed","cellArg","StaticOffsetError","rowsArg","rowShift","isInteger","columnsArg","colShift","heightArg","widthArg","OutOfSheet","bottomRightCorner","START_ABSOLUTE","Lexer","ensureOptimizations","lexingResult","tokenize","trimTrailingWhitespaces","skipWhitespacesInsideRanges","skipWhitespacesBeforeArgSeparators","filterTokensByNeighbors","shouldBeSkipped","filteredTokens","pop","DistinctSigns","WrongArgNumber","EmptyArg","EmptyArray","ArrayDimensions","NoSpaceForArrayResult","ValueSmall","ValueLarge","BadCriterion","RangeManySheets","CellRangeExpected","WrongDimension","NumberCoercion","NumberExpected","IntegerExpected","BadMode","DateBounds","WrongType","NaN","EqualLength","Negative","NotBinary","NotOctal","NotHex","EndStartPeriod","CellRefExpected","EmptyRange","BadRef","NumberRange","ValueNotFound","ValueBaseLarge","ValueBaseSmall","ValueBaseLong","NegativeLength","PatternNotFound","OneValue","TwoValues","ThreeValues","IndexBounds","IndexLarge","Formula","NegativeCount","SheetRef","PeriodLong","InvalidDate","BitshiftLong","EmptyString","LengthBounds","NegativeTime","NoDefault","Selector","StartEndDate","IncorrectDateTime","CharacterCodeBounds","NonZero","LessThanOne","WeekendString","InvalidRoman","WrongOrder","ComplexNumberExpected","ShouldBeIorJ","SizeMismatch","FunctionName","NamedExpressionName","LicenseKey","_CellReferenceMatcher","_NamedExpressionMatcher","createToken","pattern","NA","categories","cellReferenceMatcher","CellReferenceMatcher","match","start_chars_hint","POSSIBLE_START_CHARACTERS","line_breaks","namedExpressionMatcher","NamedExpressionMatcher","offsetProcedureNameLiteral","getFunctionTranslation","buildFunctionMapping","whitespaceTokenRegexp","ignoreWhiteSpace","arrayRowSeparator","arrayColumnSeparator","inject","cellReferenceRegexp","startOffset","lastIndex","execResult","namedExpressionRegexp","r1c1CellRefRegexp","_index","unparseAst","_b","isFunctionTranslated","originalNamedExpressionName","nearestNamedExpression","displayName","unparseSheetName","formatRange","unparsedExpr","startSheeet","unparsedStart","unparsedEnd","numericString","collectDependenciesFn","dependenciesSet","needArgument","functionNeedArgument","doesFunctionNeedArgumentToBeComputed","argAst","_baseAddress","addAll","change","newValue","addInterpreterValue","exportChanges","exporter","exportChange","isArray","getChanges","isEmpty","effectiveAddressesFromData","_data","_hasOnlyNumbers","data","ensureThatComputed","fromRange","onlyNumbers","onlyValues","onlyRange","fromScalar","isAdHoc","valuesFromTopLeftCorner","j","leftCorner","rowData","entriesFromTopLeftCorner","iterateValuesFromTopLeftCorner","numberOfElements","hasOnlyNumbers","v","rawNumbers","rawData","Symbol","num","RichNumber","format","fromNumber","cloneNumber","newVal","DateNumber","getDetailedType","NUMBER_DATE","CurrencyNumber","NUMBER_CURRENCY","TimeNumber","NUMBER_TIME","DateTimeNumber","NUMBER_DATETIME","PercentNumber","NUMBER_PERCENT","NUMBER_RAW","getTypeFormatOfExtendedNumber","fromNumberOfRows","rows","intersect","otherSpan","firstRow","fromNumberOfColumns","columns","firstColumn","_EmptyStatistics","EmptyStatistics","_Statistics","Statistics","_StatType","incrementCriterionFunctionFullCacheUsed","incrementCriterionFunctionPartialCacheUsed","_name","CRITERION_FUNCTION_FULL_CACHE_USED","CRITERION_FUNCTION_PARTIAL_CACHE_USED","startTimes","clear","Date","now","startTime","func","snapshot","policy","mapping","strategyFor","strategy","addSheet","autoAddSheet","sheetBoundaries","fill","strategyConstructor","getArrayCellRawValue","entries","getEntries","expectedArguments","sheet1","sheet2","replacer","JSON","stringify","expectedType","paramName","ConfigValueEmpty","minimum","maximum","functionNotDeclaredInPlugin","functionId","functionMethodNotFound","functionName","ProtectedFunctionError","cannotRegisterFunctionWithId","cannotUnregisterFunctionWithId","cannotUnregisterProtectedPlugin","AliasAlreadyExisting","getArrayByCorner","count","mtxKey","mtx","spansThroughSheetRows","spansThroughSheetColumn","isFormulaArrayInRow","isFormulaArrayInAllRows","isFormulaArrayInColumn","isFormulaArrayInAllColumns","isFormulaArrayAtAddress","updateArrayVerticesInSheet","fn","updated","d","_ArrayValue","updatingService","newAst","newAddress","newVersion","applyTransformations","ErroredArray","NotComputedArray","setCellValue","setErrorValue","ArrayValue","fromInterpreterValue","resize","simpleRangeValue","valueOrUndef","setArrayCellValue","SPILL","setAddress","setFormula","newFormula","isComputed","columnsFromArray","rowsFromArray","_updatingService","cachedCellValue","aboveRow","splice","nullArrays","aboveColumn","outOfBound","leftmostColumn","rightmostColumn","raw","newSize","functionCache","criterionFunctionCache","dependentCacheRanges","getFunctionValue","setFunctionValue","getCriterionFunctionValue","cacheKey","criterionString","getCriterionFunctionValues","setCriterionFunctionValues","addDependentCacheRange","dependentRange","clearCache","getStart","getEnd","NodeVisitStatus","dependencyQuery","edges","removeIncomingEdges","nodeEdges","nodesCount","edgesCount","edgesForNode","removeDependencies","getTopSortedWithSccSubgraphFrom","modifiedNodes","operatingFunction","onCycle","entranceTime","low","parent","inSCC","nodeStatus","order","time","sccNonSingletons","reverse","DFSstack","SCCstack","ON_STACK","u","t","PROCESSED","uLow","currentSCC","POPPED","shouldBeUpdatedMapping","sorted","cycled","s","getDependencies","sourceNode","getMappingSize","sheetMap","keyFromAddresses","maybeRange","entriesFromSheet","removeByKey","compareBy","oldKey","newKey","keyFromRange","getByKey","updateVerticesFromSheet","changedSize","iterator","valuesRangeEndRowLess","rowLessVertex","entry","leftStart","rightStart","leftEnd","rightEnd","_i18n","canonicalize","sheetDisplayName","toLowerCase","Sheet","id","canonicalName","mappingFromCanonicalName","mappingFromId","lastSheetId","fetchDisplayName","fetchSheetById","sheetNamePrefix","getUITranslation","UIElement","NEW_SHEET_PREFIX","newSheetDisplayName","newSheetCanonicalName","store","getDisplayName","displayNames","numberOfSheets","hasSheetWithId","hasSheetWithName","renameSheet","newDisplayName","currentDisplayName","sheetWithThisCanonicalName","currentCanonicalName","sheetNames","_TranslationPackage","buildTranslationPackage","TranslationPackage","functions","ui","_protectedTranslations","checkUI","checkErrors","checkFunctionTranslations","extendFunctions","additionalFunctionTranslations","keys","buildErrorMapping","getFunctionTranslations","functionIds","translations","getMaybeFunctionTranslation","LIC","functionNames","protectedTranslation","rawTranslationPackage","_cellValue","colMapping","rowMapping","tmpMapping","rowNumber","colNumber","rightmostRowRemoved","numberOfRowsRemoved","rightmostColumnRemoved","numberOfColumnsRemoved","verticesFromColumn","verticesFromRow","rowVertex","vertices","getCellVertex","newRows","formulaVertex","_ArithmeticHelper","interpreter","_this","coerceScalarToNumberOrError","arithmeticHelper","runFunction","functionImplementation","evaluatedArguments","evaluateArguments","argumentValues","argumentIgnorableFlags","_ref2","ignorable","argumentMetadata","buildMetadataForEachArgumentValue","isVectorizationOn","isNumberOfArgumentValuesValid","resultArrayHeight","resultArrayWidth","calculateSizeOfVectorizedResultArray","vectorizedArguments","vectorizeAndBroadcastArgumentsIfNecessary","calculateSingleCellOfResultArray","returnNumberType","resultArray","runFunctionWithReferenceArgument","noArgCallback","referenceCallback","nonReferenceCallback","returnNumberWrapper","columnSearch","serialization","arraySizePredictor","dateTimeHelper","evaluateAst","arraySizeForAst","listOfScalarValues","asts","scalarValue","coerceToType","coercedType","coerce","coerceRangeToScalar","INTEGER","coerced","maxValue","NUM","minValue","lessThan","greaterThan","coerceScalarToString","coerceScalarToBoolean","SCALAR","NOERROR","coerceToRange","COMPLEX","coerceScalarToComplex","passSubtype","argumentsMetadata","coercedArguments","coerceArgumentsToRequiredTypes","functionCalculationResult","argumentValue","defaultValue","coercedValue","isRangePassedAsAScalarArgument","vectorizeAndBroadcastRangeArgument","rowNum","colNum","targetRowNum","targetColNum","numberOfArgumentValuesPassed","isRepeatLastArgsValid","metadataForMissingArguments","areMissingArgumentsOptional","every","argMetadata","optionalArg","argumentsThatRequireVectorization","includes","params","implementedFunctions","ExtendedNumberFactory","_unorm","_StringHelper","COMPLEX_NUMBER_SYMBOL","complexParsingRegexp","ArithmeticHelper","numberLiteralsHelper","lt","compare","leq","gt","geq","eq","neq","pow","addWithEpsilonRaw","abs","actualEps","addWithEpsilon","typeOfResult","inferExtendedNumberTypeAdditive","unaryMinus","unaryPlus","unaryPercent","nonstrictadd","subtract","leftArg","rightArg","divide","DIV_BY_ZERO","inferExtendedNumberTypeMultiplicative","multiply","manyToExactComplex","coerceNumbersExactRanges","manyToNumbers","manyToExactNumbers","coerceNumbersCoerceRangesDropNulls","manyToCoercedNumbersDropNulls","manyToOnlyNumbersDropNulls","collator","collatorFromConfig","smartRounding","precisionEpsilon","eqMatcherFunction","regexp","buildRegex","normalizeString","neqMatcherFunction","searchString","index","requiresRegex","useRegularExpressions","useWildcards","matchWholeCell","c","charAt","isWildcard","needsEscape","floatCmp","mod","coerceToMaybeNumber","coerceNonDateScalarToMaybeNumber","dateStringToDateNumber","maybePercentNumber","coerceStringToMaybePercentNumber","maybeCurrencyNumber","coerceStringToMaybeCurrencyNumber","numericStringToMaybeNumber","trim","trimmedInput","endsWith","numOfPercents","parsedNumOfPercents","matchedCurrency","currencyMatcher","currencySymbol","currencyValue","parsedCurrencyValue","currency","coerceComplexExactRanges","vals","expandedVals","arr","coerceStringToComplex","typeFormat","regexpStr","escapeNoCharacters","caseSensitive","escapeNonWildcards","escapeAllCharacters","accentSensitive","leftTmp","rightTmp","coerceEmptyToValue","stringCmp","numberCmp","coerceBooleanToNumber","rangeFn","val1","parseComplexToken","val2","coerceComplexToString","symb","re","im","imStr","coerceToRangeNumbersOrError","argUppered","zeroIfEmpty","isNumberOverflow","isNaN","fixNegativeZero","escapedCharacters","leftType","leftFormat","rightType","rightFormat","forceNormalizeString","offset","form","normalize","unorm","sensitivity","caseFirst","ignorePunctuation","Intl","Collator","localeLang","valueOf","_ArgumentSanitization","_DateTimeDefault","_DateTimeHelper","_format","_licenseKeyValidator","privatePool","options","showDeprecatedWarns","binarySearchThreshold","dateFormats","evaluateNullToZero","functionPlugins","leapYear1900","licenseKey","nullYear","nullDate","parseDateTime","precisionRounding","stringifyDateTime","stringifyDuration","timeFormats","thousandSeparator","useStats","undoLimit","useColumnIndex","warnDeprecatedOptions","configValueFromParam","configValueFromParamCheck","validateNumberToBeAtLeast","validateNumberToBeAtMost","getLanguage","instanceOfSimpleDate","setupCurrencySymbol","licenseKeyValidityState","checkLicenseKeyValidity","configCheckIfParametersNotInConflict","valueAfterCheck","getConfig","getFullConfigFromPartial","mergeConfig","init","mergedConfig","warnDeprecatedIfUsed","inputValue","fromVersion","replacementName","console","warn","year","month","day","defaultParseToDateTime","defaultStringifyDateTime","defaultStringifyDuration","partialConfig","getDefaultConfig","typeCheck","valuesMap","_len","_key","param","names","duplicates","paramNames","validateArgToType","dateTimeString","dateFormat","timeFormat","ampmtoken","substring","dateItems","timeItems","defaultParseToTime","defaultParseToDate","parsedDate","parsedTime","secondsExtendedRegexp","precision","formatItems","ampm","hourIndex","indexOf","minuteIndex","secondIndex","findIndex","hourString","hours","minuteString","minutes","secondString","seconds","round","monthIndex","dayIndex","yearIndexLong","yearIndexShort","yearString","monthString","dayString","numDays","prefSumDays","SECONDS_PER_MINUTE","MINUTES_PER_HOUR","HOURS_PER_DAY","instanceOfSimpleTime","maxDate","DateTimeHelper","minDateAbsoluteValue","dateToNumberFromZero","maxDateValue","dateToNumber","epochYearZero","numberToSimpleDate","getWithinBounds","dayNumber","dateTime","parseDateTimeFromConfigFormats","timeToNumber","parseDateTimeFromFormats","getNullYear","getEpochYearZero","isValidDate","date","isLeapYear","relativeNumberToAbsoluteNumber","dateNumber","dayOfYear","dayToMonth","numberToSimpleDateTime","numberToSimpleTime","carryDays","leapYearsCount","daysInMonth","endOfMonth","toBasisUS","yearLengthForBasis","countLeapDays","parseSingleFormat","dateString","dateFormatsIterate","timeFormatsIterate","offsetMonth","totalM","truncateDayInMonth","roundToNearestSecond","roundToEpsilon","epsilon","argAsSeconds","argAsMinutes","argAsHours","toBasisEU","threshold","formatArg","dateHelper","tryDateTime","tryDuration","parseForNumberFormat","numberFormat","padLeft","padRight","countChars","char","TokenType","FREE_TEXT","tokenParts","integerFormat","decimalFormat","valueParts","toFixed","integerPart","decimalPart","padSizeInteger","substr","padSizeDecimal","parseForDateTimeFormat","fractionOfSecondPrecision","FORMAT","am","pm","dateFormatRegex","numberFormatRegex","formatToken","FormatExpressionType","matchDateFormat","m","matchNumberFormat","numberFormatToken","createTokens","regexTokens","beforeToken","lastToken","afterLastToken","dateFormatTokens","elem","isEscapeToken","DATE","numberFormatTokens","_licenseKeyHelper","consoleMessages","invalid","expired","keyValidityDate","missing","_notified","messageDescriptor","template","vars","checkKeySchema","releaseDays","getTime","keyValidityDays","extractTime","formatDate","monthNames","getMonth","getDate","getFullYear","_rl","_hd","parseInt","_pi","_nm","_ss","l","_cp","sp","a","b","padStart","_BuildEngineFactory","_CellContentParser","_Destroy","_Emitter","_FunctionRegistry","_Operations","_parser2","_config","_stats","_columnSearch","_unparser","_cellContentParser","_evaluator","_lazilyTransformingAstService","_crudOperations","_exporter","_namedExpressions","_serialization","_functionRegistry","_emitter","Emitter","_evaluationSuspended","evaluator","buildFromArray","configInput","buildFromEngineState","BuildEngineFactory","buildFromSheet","buildFromSheets","sheets","languageCode","registeredLanguages","languagePackage","unregisterLanguage","getRegisteredLanguagesCodes","plugin","FunctionRegistry","unregisterFunctionPlugin","registerFunction","unregisterFunction","unregisterAllFunctions","unregisterAll","getRegisteredFunctionNames","getRegisteredFunctionIds","getFunctionPlugin","getAllFunctionPlugins","getPlugins","engine","parser","unparser","cellContentParser","crudOperations","ensureEvaluationIsNotSuspended","getCellFormula","getCellSerialized","getSheetValues","getSheetFormulas","getSheetSerialized","getAllSheetsDimensions","genericAllSheetsGetter","getSheetDimensions","getAllSheetsValues","getAllSheetsFormulas","getAllSheetsSerialized","updateConfig","newParams","newConfig","configNewLanguage","serializedSheets","withNewConfig","serializedNamedExpressions","getAllNamedExpressionsSerialized","newEngine","rebuildWithConfig","rebuildAndRecalculate","getStats","undo","recomputeIfDependencyGraphNeedsIt","redo","isThereSomethingToUndo","isThereSomethingToRedo","isItPossibleToSetCellContents","ensureRangeInSizeLimits","it","ensureItIsPossibleToChangeContent","setCellContents","topLeftCornerAddress","cellContents","swapRowIndexes","setRowOrder","isItPossibleToSwapRowIndexes","validateSwapRowIndexes","testRowOrderForArrays","newRowOrder","mappingFromOrder","isItPossibleToSetRowOrder","swapColumnIndexes","columnMapping","setColumnOrder","isItPossibleToSwapColumnIndexes","validateSwapColumnIndexes","testColumnOrderForArrays","newColumnOrder","isItPossibleToSetColumnOrder","isItPossibleToAddRows","indexes","normalizedIndexes","normalizeAddedIndexes","ensureItIsPossibleToAddRows","_len2","_key2","isItPossibleToRemoveRows","_len3","_key3","normalizeRemovedIndexes","ensureItIsPossibleToRemoveRows","_len4","_key4","isItPossibleToAddColumns","_len5","_key5","ensureItIsPossibleToAddColumns","_len6","_key6","isItPossibleToRemoveColumns","_len7","_key7","ensureItIsPossibleToRemoveColumns","_len8","_key8","isItPossibleToMoveCells","destinationLeftCorner","operations","ensureItIsPossibleToMoveCells","isItPossibleToMoveRows","targetRow","ensureItIsPossibleToMoveRows","moveRows","isItPossibleToMoveColumns","targetColumn","ensureItIsPossibleToMoveColumns","moveColumns","copy","getRangeValues","cut","paste","targetLeftCorner","isClipboardEmpty","clearClipboard","clearRedoStack","undoRedo","clearUndoStack","cellRange","subarray","getRangeFormulas","getRangeSerialized","getFillRangeData","target","offsetsFromTarget","targetRange","isItPossibleToAddSheet","ensureItIsPossibleToAddSheet","addedSheetName","emit","Events","SheetAdded","isItPossibleToRemoveSheet","ensureScopeIdIsValid","SheetRemoved","isItPossibleToClearSheet","isItPossibleToReplaceSheetContent","ensureItIsPossibleToChangeSheetContents","setSheetContent","getCellDependents","getCellPrecedents","getSheetName","getSheetNames","doesSheetExist","doesCellHaveSimpleValue","doesCellHaveFormula","cellType","isCellEmpty","isCellPartOfArray","countSheets","isItPossibleToRenameSheet","newName","ensureItIsPossibleToRenameSheet","oldName","SheetRenamed","batch","batchOperations","suspendEvaluation","beginUndoRedoBatchMode","commitUndoRedoBatchMode","resumeEvaluation","EvaluationSuspended","EvaluationResumed","isEvaluationSuspended","isItPossibleToAddNamedExpression","scope","ensureItIsPossibleToAddNamedExpression","addNamedExpression","NamedExpressionAdded","getNamedExpressionValue","namedExpressionForScope","getNamedExpressionFormula","getNamedExpression","isItPossibleToChangeNamedExpression","newExpression","ensureItIsPossibleToChangeNamedExpression","changeNamedExpression","changeNamedExpressionExpression","isItPossibleToRemoveNamedExpression","removeNamedExpression","removedNamedExpression","NamedExpressionRemoved","listNamedExpressions","getAllNamedExpressionsNamesInScope","normalizeFormula","formulaString","extractTemporaryFormula","calculateFormula","internalCellValue","runAndForget","exportScalarOrRange","validateFormula","numberToDateTime","inputNumber","numberToDate","numberToTime","on","event","listener","once","off","destroy","objectDestroy","parsedCellContent","CellContent","verticesToRecomputeFrom","partialRun","exportedChanges","ValuesUpdated","buildDate","releaseDate","_ClipboardOperations","_CrudOperations","_Evaluator","_GraphBuilder","_Interpreter","_LazilyTransformingAstService","_SearchStrategy","_NamedExpressions","_NumberLiteralHelper","_Serialization","_Sheet","_UndoRedo","buildEngine","newsheetprefix","inputNamedExpressions","BUILD_ENGINE_TOTAL","NamedExpressions","LazilyTransformingAstService","buildColumnSearchStrategy","validateAsSheet","boundaries","findBoundaries","numberLiteralHelper","NumberLiteralHelper","CellContentParser","Operations","UndoRedo","clipboardOperations","ClipboardOperations","CrudOperations","Exporter","Serialization","Interpreter","GRAPH_BUILD","graphBuilder","GraphBuilder","buildGraph","Evaluator","run","Boolean","Empty","getSingletonInstance","instance","isFormula","isBoolean","tl","isError","upperCased","errorRegex","content","dateVal","timeVal","getHours","getMinutes","getSeconds","getMilliseconds","trimmedContent","mode","res","parseAsNum","parsedDateNumber","ClipboardOperationType","ClipboardCellType","Clipboard","sourceLeftCorner","getContent","clipboard","CUT","clipboardCell","getClipboardCell","COPY","abortCut","ensureItIsPossibleToCopyPaste","isCutClipboard","isCopyClipboard","addRowsCommand","AddRowsCommand","saveOperation","AddRowsUndoEntry","removeRowsCommand","RemoveRowsCommand","rowsRemovals","RemoveRowsUndoEntry","addColumnsCommand","AddColumnsCommand","AddColumnsUndoEntry","removeColumnsCommand","RemoveColumnsCommand","columnsRemovals","RemoveColumnsUndoEntry","overwrittenCellsData","addedGlobalNamedExpressions","MoveCellsUndoEntry","MoveRowsUndoEntry","MoveColumnsUndoEntry","ensureItIsPossibleToCopy","isPositiveInteger","oldContent","getRangeClipboardCells","restoreClipboardCells","PasteUndoEntry","beginBatchMode","commitBatchMode","AddSheetUndoEntry","originalName","oldSheetContent","getSheetClipboardCells","scopedNamedExpressions","RemoveSheetUndoEntry","RenameSheetUndoEntry","ClearSheetUndoEntry","ensureItIsPossibleToChangeCellContents","oldContents","newContent","setCellContent","SetCellContentsUndoEntry","SetSheetContentUndoEntry","SetRowOrderUndoEntry","validateRowOrColumnMapping","rowRange","SetColumnOrderUndoEntry","newOrder","rowOrColumn","limit","isUndoStackEmpty","isRedoStackEmpty","AddNamedExpressionUndoEntry","oldNamedExpression","ChangeNamedExpressionUndoEntry","RemoveNamedExpressionUndoEntry","ensureNamedExpressionNameIsValid","ensureNamedExpressionIsValid","sheetHeight","newRowsCount","numberOfRowsToAdd","isNonnegativeInteger","sheetWidth","newColumnsCount","numberOfColumnsToAdd","sourceStart","targetStart","existingSheetId","inputAddress","scopeId","sources","targets","isNameValid","isNameAvailable","parsedExpression","doesContainRelativeReferences","InternalNamedExpression","added","normalizeExpressionName","WorkbookStore","normalizedExpressionName","getExisting","remove","getAllNamedExpressions","ne","WorksheetStore","nextNamedExpressionRow","workbookStore","worksheetStores","addressCache","worksheetStore","namedExpressionInAddress","isExpressionInScope","a1CellRefRegexp","namedExpRegexp","worksheetStoreOrCreate","nextAddress","restoreNamedExpression","workbookNamedExpressionOrPlaceholder","getAllNamedExpressionsNames","storedNamedExpressions","expr","sheetNum","getAllNamedExpressionsForScope","SHEET_FOR_WORKBOOK_EXPRESSIONS","_AddColumnsTransformer","_AddRowsTransformer","_CleanOutOfScopeDependenciesTransformer","_MoveCellsTransformer","_RemoveColumnsTransformer","_RemoveRowsTransformer","_RemoveSheetTransformer","rowsSpans","normalizedIndex","columnsSpans","allocateNamedExpressionAddressSpace","cmd","rowsToRemove","rowsRemoval","doRemoveRows","doAddRows","doAddColumns","columnsToRemove","columnsRemoval","doRemoveColumns","TRANSFORM_ASTS","transformation","RemoveSheetTransformer","performEagerTransformations","addTransformation","namedexpression","removeSheetByName","rowsToAdd","beginCombinedMode","commitCombinedMode","columnsToAdd","currentDataAtTarget","valuesToRemove","removeValues","valuesToMove","moveValues","MoveCellsTransformer","updateNamedExpressionsForMovedCells","buffer","_col","storeNamedExpressionInCell","adjustNamedExpressionEdges","restoreCell","restoredNamedExpression","globalNamedExpression","isRowOrColumnRange","sourceSheetId","cells","addedNamedExpressions","updateNamedExpressionsForTargetAddress","setFormulaToCellFromCache","PARSING_ERROR","getOldContent","newCellContent","parserResult","newSheetContent","arrayChanges","applyChanges","_ref3","formulaHash","absoluteDependencies","cleanedAst","CleanOutOfScopeDependenciesTransformer","transformSingleAst","cleanedDependencies","rowEffectivelyNotInSheet","removedCells","RemoveRowsTransformer","rewriteAffectedArrays","rowFrom","rowCount","columnEffectivelyNotInSheet","RemoveColumnsTransformer","columnFrom","columnCount","AddRowsTransformer","AddColumnsTransformer","localVertex","globalVertex","sourceSheet","namedExpressionDependency","namedExpressionInTargetScope","targetScopeExpressionVertex","copyOrFetchGlobalNamedExpressionVertex","_ref4","_ref5","merged","acc","_ref6","startIndex","amount","shift","_ref7","_ref8","_ref9","_Transformer","Transformer","isIrreversible","transformRowRangeAst","_formulaAddress","transformCellRange","transformRange","transformRowRange","_start","_end","transformColumnRange","transformCellAddress","dependencyAddress","absoluteDependencySheet","absolutizedDependencyAddress","fixNodeAddress","newEnd","cachedAst","transformAst","transformCellReferenceAst","transformCellRangeAst","transformColumnRangeAst","newCellAddress","newRange","dependentFormulaTransformer","DependentFormulaTransformer","transformAddress","absoluteDependencyAddress","absoluteStart","absoluteEnd","shouldMove","actualStart","actualEnd","startSCA","endSCA","cellsCount","currentRowWidth","currentCol","currentValue","sheetSize","BaseUndoEntry","command","doUndo","undoRemoveRows","doRedo","redoRemoveRows","undoMoveCells","redoMoveCells","undoAddRows","redoAddRows","undoSetRowOrder","redoSetRowOrder","undoSetColumnOrder","redoSetColumnOrder","undoSetSheetContent","redoSetSheetContent","undoStart","undoEnd","undoMoveRows","redoMoveRows","undoMoveColumns","redoMoveColumns","undoAddColumns","redoAddColumns","undoRemoveColumns","redoRemoveColumns","undoAddSheet","redoAddSheet","undoRemoveSheet","redoRemoveSheet","undoRenameSheet","redoRenameSheet","undoClearSheet","redoClearSheet","undoSetCellContents","redoSetCellContents","undoPaste","redoPaste","undoAddNamedExpression","redoAddNamedExpression","undoRemoveNamedExpression","redoRemoveNamedExpression","undoChangeNamedExpression","redoChangeNamedExpression","BatchUndoEntry","operation","reversedOperations","undoBatch","redoBatch","oldData","undoStack","redoStack","batchUndoEntry","addUndoEntry","storeDataForVersion","astHash","currentOldData","undoEntry","batchOperation","restoreOldDataFromVersion","addedRowsSpans","addedColumnsSpans","cellContentData","oldContentAddress","restoreOperationOldContent","rowIndex","redoEntry","oldDataToRestore","entryToRestore","TOP_SORT","EVALUATION","recomputeFormulas","newCellValue","recomputeFormulaVertexValue","CYCLE","tmpRanges","evaluateAstToCellValue","interpreterValue","lazilyTransformingService","exportValue","detailedError","cellValueRounding","originAddress","magnitudeMultiplierExponent","log10","placesMultiplier","buildStrategy","SimpleStrategy","COLLECT_DEPENDENCIES","PROCESS_DEPENDENCIES","processDependencies","columnIndex","cellContent","parseResult","PARSER","shrinkArrayIfNeeded","_VersionPlugin","validateAndReturnMetadataFromName","aliases","arraySizeFunctions","volatileFunctions","arrayFunctions","structuralChangeFunctions","functionsWhichDoesNotNeedArgumentsToBeComputed","functionsMetadata","isArrayFunction","instancePlugins","loadPluginFunctions","protectedFunctions","loadFunctionUnprotected","categorizeFunction","loadTranslations","loadPluginFunction","functionIsProtected","protectedPlugin","protectedPlugins","registeredPlugin","_protectedPlugins","registry","methodName","method","initializePlugins","instances","foundPluginInstance","pluginInstance","arraySizeMethodName","arraySizeMethod","getFunction","pluginEntry","pluginFunction","functionMetadata","isVolatile","doesNotNeedArgumentsToBeComputed","isDependentOnSheetStructureChange","VersionPlugin","LICENSE_STATUS_MAP","validityState","status","_Criterion","equalOp","arg1","arg2","binaryErrorWrapper","notEqualOp","greaterThanOp","lessThanOp","greaterThanOrEqualOp","lessThanOrEqualOp","concatOp","plusOp","minusOp","timesOp","powerOp","divOp","unaryMinusOp","unaryErrorWrapper","percentOp","unaryPlusOp","criterionBuilder","CriterionBuilder","evaluateAstWithoutPostprocessing","wrapperForRootVertex","leftResult","rightResult","binaryRangeWrapper","unaryRangeWrapper","rangeSpansOneSheet","totalWidth","astRow","rowHeight","rowRet","astIt","newRaw","raw2","raw1","i1","i2","j1","j2","CriterionType","buildCriterion","operator","_c","_d","trueString","falseString","fromCellValue","criterion","parseCriterion","lambda","buildCriterionLambda","EQUAL","ANY_CRITERION_REGEX","criterionValue","criterionType","StrToCriterionType","boolvalue","NOT_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","_CombinedTransformer","transformations","combinedTransformer","CombinedTransformer","TRANSFORM_ASTS_POSTPONED","getTransformationsFrom","transformedAst","transformedAddress","_ColumnBinarySearch","_ColumnIndex","statistics","ColumnIndex","ColumnBinarySearch","_AdvancedFind","AdvancedFind","searchKey","rangeValue","searchOptions","basicFind","_binarySearch","advancedFind","keyMatcher","searchCoordinate","ordering","matchExactly","normalizedSearchKey","findNormalizedValue","findLastOccurrenceInOrderedRange","orderingDirection","searchArray","NOT_FOUND","getValueFromIndexFn","compareFn","foundIndex","findLastMatchingIndex","foundValue","findLastOccurrenceInOrderedArray","predicate","startRange","endRange","pivot","ceil","transformingService","binarySearchStrategy","arrayValue","addSingleCellValue","removeSingleValue","handlingDuplicates","resultUsingColumnIndex","findUsingColumnIndex","columnMap","getColumnMap","normalizedKey","valueIndexForTheKey","findRowBelongingToRange","valueIndex","positionInIndex","findInOrderedArray","isRowNumberBelongingToRange","getValueIndex","actualVersion","relevantTransformations","BUILD_COLUMN_INDEX","addValue","shiftRows","removeRowsFromValues","isRowNumberAlreadyInIndex","isFoundSpanValid","afterRow","handlingMisses","center","isIndexInRange","numberPattern","allThousandSeparatorsRegex","arrayVertexAddress","genericSheetGetter","getter","sheetGetter","idMap","newUnparser","object","Function","postMortem","_tinyEmitter","TinyEmitter","dictionary","FILTER","ABS","ACOS","ACOSH","ACOT","ACOTH","AND","ARABIC","ASIN","ASINH","ATAN2","ATAN","ATANH","AVERAGE","AVERAGEA","AVERAGEIF","BASE","BIN2DEC","BIN2HEX","BIN2OCT","BITAND","BITLSHIFT","BITOR","BITRSHIFT","BITXOR","CEILING","CHAR","CHOOSE","CLEAN","CODE","COLUMN","COLUMNS","CONCATENATE","CORREL","COS","COSH","COT","COTH","COUNT","COUNTA","COUNTBLANK","COUNTIF","COUNTIFS","COUNTUNIQUE","CSC","CSCH","CUMIPMT","CUMPRINC","DATEDIF","DATEVALUE","DAY","DAYS360","DAYS","DB","DDB","DEC2BIN","DEC2HEX","DEC2OCT","DECIMAL","DEGREES","DELTA","DOLLARDE","DOLLARFR","EDATE","EFFECT","EOMONTH","ERF","ERFC","EVEN","EXACT","EXP","FALSE","FIND","FORMULATEXT","FV","FVSCHEDULE","HEX2BIN","HEX2DEC","HEX2OCT","HLOOKUP","HOUR","IF","IFERROR","IFNA","INDEX","INT","INTERVAL","IPMT","ISBINARY","ISBLANK","ISERR","ISERROR","ISEVEN","ISFORMULA","ISLOGICAL","ISNA","ISNONTEXT","ISNUMBER","ISODD","ISOWEEKNUM","ISPMT","ISREF","ISTEXT","LEFT","LEN","LN","LOG10","LOG","LOWER","MATCH","MAX","MAXA","MAXIFS","MAXPOOL","MEDIAN","MEDIANPOOL","MID","MIN","MINA","MINIFS","MINUTE","MIRR","MMULT","MOD","MONTH","NETWORKDAYS","NOMINAL","NOT","NOW","NPER","NPV","OCT2BIN","OCT2DEC","OCT2HEX","ODD","OFFSET","PI","PMT","PDURATION","PRODUCT","POWER","PPMT","PROPER","PV","RADIANS","RAND","RATE","REPLACE","REPT","RIGHT","ROMAN","ROUND","ROUNDDOWN","ROUNDUP","ROW","ROWS","RRI","SEARCH","SEC","SECH","SECOND","SHEET","SHEETS","SIN","SINH","SLN","SPLIT","SQRT","STDEVA","STDEVPA","SUBSTITUTE","SUBTOTAL","SUM","SUMIF","SUMIFS","SUMPRODUCT","SUMSQ","SWITCH","SYD","T","TAN","TANH","TBILLEQ","TBILLPRICE","TBILLYIELD","TEXT","TIME","TIMEVALUE","TODAY","TRANSPOSE","TRIM","TRUE","TRUNC","UNICHAR","UNICODE","UPPER","VARA","VARPA","VLOOKUP","WEEKDAY","WEEKNUM","WORKDAY","XNPV","XOR","YEAR","YEARFRAC","VARP","VAR","STDEVP","STDEV","FISHER","FISHERINV","GAMMA","GAMMALN","GAUSS","FACT","FACTDOUBLE","COMBIN","COMBINA","GCD","LCM","MROUND","MULTINOMIAL","QUOTIENT","RANDBETWEEN","SERIESSUM","SIGN","SQRTPI","SUMX2MY2","SUMX2PY2","SUMXMY2","GAMMADIST","GAMMAINV","BETADIST","BETAINV","BINOMDIST","BESSELI","BESSELJ","BESSELK","BESSELY","CHIDIST","CHIINV","FDIST","FINV","WEIBULL","POISSON","HYPGEOMDIST","TDIST","TINV","LOGINV","LOGNORMDIST","NORMDIST","NORMINV","NORMSDIST","NORMSINV","PHI","IMABS","IMAGINARY","IMARGUMENT","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMEXP","IMLN","IMLOG10","IMLOG2","IMPOWER","IMPRODUCT","IMREAL","IMSEC","IMSECH","IMSIN","IMSINH","IMSQRT","IMSUB","IMSUM","IMTAN","LARGE","SMALL","AVEDEV","CONFIDENCE","DEVSQ","GEOMEAN","HARMEAN","CRITBINOM","PEARSON","RSQ","STANDARDIZE","ZTEST","FTEST","STEYX","SLOPE","CHITEST","TTEST","SKEW","WEIBULLDIST","VARS","TINV2T","TDISTRT","TDIST2T","STDEVS","FINVRT","FDISTRT","CHIDISTRT","CHIINVRT","COVARIANCEP","COVARIANCES","LOGNORMINV","POISSONDIST","SKEWP","FLOOR","_ArrayPlugin","ArrayPlugin","_AbsPlugin","AbsPlugin","_BitShiftPlugin","BitShiftPlugin","_BitwiseLogicOperationsPlugin","BitwiseLogicOperationsPlugin","_BooleanPlugin","BooleanPlugin","_CharPlugin","CharPlugin","_CodePlugin","CodePlugin","_CountBlankPlugin","CountBlankPlugin","_CountUniquePlugin","CountUniquePlugin","_DateTimePlugin","DateTimePlugin","_DegreesPlugin","DegreesPlugin","_DeltaPlugin","DeltaPlugin","_ExpPlugin","ExpPlugin","_FinancialPlugin","FinancialPlugin","_FormulaTextPlugin","FormulaTextPlugin","_InformationPlugin","InformationPlugin","_IsEvenPlugin","IsEvenPlugin","_IsOddPlugin","IsOddPlugin","_LogarithmPlugin","LogarithmPlugin","_MathConstantsPlugin","MathConstantsPlugin","_MatrixPlugin","MatrixPlugin","_MedianPlugin","MedianPlugin","_ModuloPlugin","ModuloPlugin","_NumericAggregationPlugin","NumericAggregationPlugin","_PowerPlugin","PowerPlugin","_RadiansPlugin","RadiansPlugin","_RadixConversionPlugin","RadixConversionPlugin","_RandomPlugin","RandomPlugin","_RoundingPlugin","RoundingPlugin","_SqrtPlugin","SqrtPlugin","_ConditionalAggregationPlugin","ConditionalAggregationPlugin","_SumprodPlugin","SumprodPlugin","_TextPlugin","TextPlugin","_TrigonometryPlugin","TrigonometryPlugin","_LookupPlugin","LookupPlugin","_RomanPlugin","RomanPlugin","_SimpleArithmertic","SimpleArithmerticPlugin","_StatisticalPlugin","StatisticalPlugin","_MathPlugin","MathPlugin","_ComplexPlugin","ComplexPlugin","_StatisticalAggregationPlugin","StatisticalAggregationPlugin","arrayformula","arrayformulaArraySize","arrayconstrain","numRows","numCols","arrayconstrainArraySize","rangeVals","rangeFilters","ok","filterArraySize","MAX_48BIT_INTEGER","SHIFT_MIN_POSITIONS","SHIFT_MAX_POSITIONS","bitlshift","shiftLeft","bitrshift","shiftRight","positions","validate","bitand","bitor","bitxor","literalTrue","literalFalse","conditionalIf","condition","arg3","and","or","not","xor","cnt","switch","selector","n","iferror","ifna","choose","trunc","unichar","fromCodePoint","unicode","codePointAt","countblank","counter","countunique","valuesSet","errorsSet","isoweeknumCore","absoluteDay","yearStart","yearStartAbsolute","firstThursdayAbs","days360Core","startDate","endDate","nStart","nEnd","delta","eomonth","numberOfMonthsToShift","days","hour","timeNumber","minute","second","numberRepresentation","weekday","weekdayOffsets","weeknum","isoweeknum","datevalue","timevalue","today","edate","newDate","datedif","unit","days360","yearfrac","interval","networkdays","holidays","networkdayscore","networkdaysintl","weekend","workday","workdaycore","workdayintl","multiplier","weekendPattern","computeWeekendPattern","filteredHolidays","simpleRangeToFilteredHolidays","countWorkdays","upper","lower","mid","sortedHolidays","ans","lowerBound","holidaysArr","processedHolidays","sortedArray","workdayPatterns","degrees","exp","pmt","pmtCore","ipmt","ipmtCore","ppmt","ppmtCore","fv","fvCore","cumipmt","rate","periods","cumprinc","db","cost","salvage","life","period","initial","ddb","factor","dollarde","fraction","dollarfr","effect","ispmt","nominal","nper","payment","present","future","log","guess","epsMax","iterMax","f","dy","df","pv","rri","sln","syd","tbilleq","settlement","maturity","discount","denom","tbillprice","tbillyield","price","fvschedule","ratios","npv","npvCore","mirr","frate","rrate","posFlag","negFlag","posValues","negValues","nom","pduration","xnpv","dates","valArr","valArrNum","dateArr","dateArrNum","term","formulatext","isbinary","iserr","iserror","isformula","isblank","isna","isnumber","islogical","isref","istext","isnontext","_f","na","_ast","_state","sheetNumber","iseven","isodd","base","ln","parseFloat","pi","sqrtpi","sqrt","arraySizeForMultiplication","arraySizeForPoolFunction","inputArray","windowSize","stride","mmult","leftMatrix","rightMatrix","outputSize","createKernel","sum","thread","mmultArraySize","maxpool","matrix","leftCornerX","leftCornerY","currentMax","medianpool","_this2","currentMin","iter","medianGuess","medianGuessCount","i3","j3","maxpoolArraySize","windowArg","window","strideArg","medianpoolArraySize","transpose","inputSize","transposeArraySize","kernel","apply","median","large","small","dividend","divisor","zeroForInfinite","MomentsAggregate","sumsq","single","compose","averageValue","varSValue","varPValue","doSum","strictlyNumbers","doMax","maxa","NEGATIVE_INFINITY","numbersBooleans","doMin","mina","doCount","counta","doCounta","average","doAverage","averagea","doVarS","varp","doVarP","vara","reduceAggregateA","varpa","stdevs","doStdevS","stdevp","doStdevP","stdeva","stdevpa","product","doProduct","subtotal","functionType","reduceAggregate","initialAccValue","reducingFunction","mapFunction","coercionFunction","evaluateRange","coercedRangeValues","err","rangeValues","rangeResult","actualRange","cachedValue","power","radians","MAX_LENGTH","DECIMAL_NUMBER_OF_BITS","MIN_BASE","MAX_BASE","ALPHABET","dec2bin","places","decimalToBaseWithExactPadding","dec2oct","dec2hex","bin2dec","binary","binaryWithSign","coerceStringToBase","twoComplementToDecimal","bin2oct","bin2hex","oct2dec","octal","octalWithSign","oct2bin","oct2hex","hex2dec","hexadecimal","hexadecimalWithSign","hex2bin","hex2oct","decimalToBaseWithMinimumPadding","decimal","maxLength","baseAlphabet","regex","maxValFromBase","minValFromBase","decimalToRadixComplement","parsed","rand","random","randbetween","findNextOddNumber","ceiled","findNextEvenNumber","roundup","numberToRound","rounddown","intFunc","coercedNumberToRound","even","odd","ceilingmath","significance","ceiling","ceilingprecise","floormath","floorprecise","_CriterionFunctionCompute","AverageResult","conditionalAggregationFunctionCacheKey","conditions","conditionsStrings","conditionRange","mapToRawScalarValue","sumif","computeFn","computeConditionalAggregationFunction","sumifs","averageif","averageResult","countif","countifs","minifs","_this3","composeFunction","minResult","maxifs","_this4","maxResult","valuesRange","conditionArgs","reduceInitialValue","conditionArg","criterionPackage","Condition","CriterionFunctionCompute","compute","_generatorUtils","findSmallerRangeForMany","conditionRanges","restValuesRange","restConditionRanges","simpleValuesRange","valuesRangeVertex","tryToGetRangeVertexForRangeValue","conditionsVertices","fullCriterionString","cachedResult","findAlreadyComputedValueInCache","buildNewCriterionCache","evaluateRangeValue","reduceFunction","iterable","criterionLambdas","conditionsIterators","filteredValues","ifFilter","simpleConditionRanges","smallerCache","newCache","rcr","newCacheValue","conditionalIterables","computableIterable","computable","conditionalSplits","conditionalIterable","cs","conditionalFirsts","zip","conditionalFirst","criterionLambda","rest","arr1","arr2","done","sumproduct","iterators","coercedVal","concatenate","stringToSplit","indexToUse","splittedString","len","proper","word","clean","exact","rept","repeat","startPosition","numberOfChars","newText","search","normalizedText","substitute","oldText","occurrence","oldTextRegexp","shiftedText","acos","asin","cos","sin","tan","atan","atan2","cot","acot","sec","csc","sinh","asinh","cosh","acosh","tanh","atanh","coth","acoth","sech","csch","_RowSearchStrategy","rowSearch","RowSearchStrategy","vlookup","doVlookup","hlookup","doHlookup","doMatch","searchInRange","searchStrategy","searchedRange","colIndex","roman","romanMode","arabic","inputString","minusSign","work","eatToken","inputAcc","absorb","valAcc","gte","lte","minus","uminus","upercent","uplus","_bessel","_jstat","erf","upperBound","erfc","expondist","cumulative","exponential","cdf","pdf","fisher","fisherinv","gamma","gammafn","gammadist","alphaVal","betaVal","gammaln","gammainv","inv","gauss","z","normal","betadist","A","B","beta","betainv","binomialdist","succ","trials","prob","binomial","binomialinv","alpha","besselifn","besseli","besseljfn","besselj","besselkfn","besselk","besselyfn","bessely","chisqdist","deg","chisquare","chisqdistrt","chisqinv","p","chisqinvrt","fdist","deg1","deg2","centralF","fdistrt","finv","finvrt","weibulldist","shape","scale","weibull","poissondist","mean","poisson","hypgeomdist","numberS","populationS","numberPop","hypgeom","tdist","studentt","tdist2t","tdistrt","tdistold","tinv","tinv2t","lognormdist","stddev","lognormal","lognorminv","normdist","norminv","normsdist","normsinv","phi","negbinomdist","nf","ns","negbin","confidencenorm","normalci","confidencet","tci","standardize","NEGBINOMDIST","EXPONDIST","M","_horner","_bessel_iter","f0","f1","sign","tdx","f2","o","_bessel_wrap","bessel0","bessel1","nonzero","bessel","b0","b1","W","b0_a1a","b0_a2a","b0_a1b","b0_a2b","a1","a2","xx","b1_a1a","b1_a2a","b1_a1b","b1_a2b","jsum","bjp","bj","bjm","tox","b0_a","b0_b","b1_a","b1_b","bip","bi","bim","cof","isneg","dd","ty","erfcinv","pp","q","fact","xden","xnum","yi","lowRegGamma","gammapinv","ser","aln","ap","del","ITMAX","an","EPS","gln","lna1","afac","std","betafn","betaln","ibeta","ibetainv","lna","lnb","al","bt","betacf","fpmin","qab","qap","qam","m2","aa","k","combination","betacdf","eps","betinc","a0","m9","c9","combinationln","factorial","factorialln","dof","df1","df2","N","scaledPDF","samplesDone","scaledCDF","dof2","mu","sigma","r","sumsqerr","meanv","variance","flag","stdev","prod","geomean","covariance","arr1Len","sq_dev","corrcoeff","factdouble","combin","combina","gcd","processedArgs","binaryGCD","MAX_SAFE_INTEGER","lcm","binaryLCM","mround","multinomial","quotient","seriessum","coefs","coef","sumx2my2","rangeX","rangeY","valsX","valsY","valX","valY","sumx2py2","sumxmy2","complex","imabs","imaginary","_re","imreal","_im","imargument","imconjugate","imcos","imcosh","imcot","div","imcsc","imcsch","imsec","imsech","imsin","imsinh","imtan","imdiv","improduct","mul","imsum","imsub","sub","imexp","imln","imlog10","imlog2","impower","imsqrt","re1","im1","re2","im2","_ref10","_ref11","_ref12","nomRe","nomIm","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","avedev","avg","devsq","harmean","correl","dataX","dataY","parseTwoArrays","rsq","covariancep","covariances","ztest","ftest","arrX","arrY","vx","vy","steyx","slope","chisqtest","ttest","tails","sx","sy","skew","_this5","skewp","_this6","COVAR","xit","yit","xval","yval"],"mappings":"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,CAAC;EACjE;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOof,wBAAwBA,CAACF,MAAM,EAAE;IACpCC,kCAAgB,CAACC,wBAAwB,CAACF,MAAM,CAAC;EACrD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOG,gBAAgBA,CAACpqB,UAAU,EAAEiqB,MAAM,EAAElf,YAAY,EAAE;IACtD,IAAA0S,uCAAiB,EAACzd,UAAU,EAAE,QAAQ,EAAE,YAAY,CAAC;IACrDkqB,kCAAgB,CAACE,gBAAgB,CAACpqB,UAAU,EAAEiqB,MAAM,EAAElf,YAAY,CAAC;EACvE;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOsf,kBAAkBA,CAACrqB,UAAU,EAAE;IAClC,IAAAyd,uCAAiB,EAACzd,UAAU,EAAE,QAAQ,EAAE,YAAY,CAAC;IACrDkqB,kCAAgB,CAACG,kBAAkB,CAACrqB,UAAU,CAAC;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOsqB,sBAAsBA,CAAA,EAAG;IAC5BJ,kCAAgB,CAACK,aAAa,EAAE;EACpC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOC,0BAA0BA,CAACjoC,IAAI,EAAE;IACpC,IAAAk7B,uCAAiB,EAACl7B,IAAI,EAAE,QAAQ,EAAE,MAAM,CAAC;IACzC,MAAMuoB,WAAW,GAAGof,kCAAgB,CAACO,wBAAwB,EAAE;IAC/D,MAAMrzD,QAAQ,GAAG,IAAI,CAACmkD,WAAW,CAACh5B,IAAI,CAAC;IACvC,OAAOnrB,QAAQ,CAACyzC,uBAAuB,CAACC,WAAW,CAAC;EACxD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAO4f,iBAAiBA,CAAC1qB,UAAU,EAAE;IACjC,IAAAyd,uCAAiB,EAACzd,UAAU,EAAE,QAAQ,EAAE,YAAY,CAAC;IACrD,OAAOkqB,kCAAgB,CAACQ,iBAAiB,CAAC1qB,UAAU,CAAC;EACzD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAO2qB,qBAAqBA,CAAA,EAAG;IAC3B,OAAOT,kCAAgB,CAACU,UAAU,EAAE;EACxC;EACA,OAAOrB,oBAAoBA,CAACsB,MAAM,EAAE;IAChC,OAAO,IAAI71D,YAAY,CAAC61D,MAAM,CAACtxD,MAAM,EAAEsxD,MAAM,CAACxgD,KAAK,EAAEwgD,MAAM,CAACxnD,eAAe,EAAEwnD,MAAM,CAACzc,YAAY,EAAEyc,MAAM,CAACC,MAAM,EAAED,MAAM,CAACE,QAAQ,EAAEF,MAAM,CAACG,iBAAiB,EAAEH,MAAM,CAACzB,SAAS,EAAEyB,MAAM,CAACvgD,4BAA4B,EAAEugD,MAAM,CAACI,cAAc,EAAEJ,MAAM,CAAC7wB,QAAQ,EAAE6wB,MAAM,CAACtgD,gBAAgB,EAAEsgD,MAAM,CAACxc,aAAa,EAAEwc,MAAM,CAACrxD,gBAAgB,CAAC;EACtU;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI0b,YAAYA,CAAC2D,WAAW,EAAE;IACtB,IAAI,CAAC,IAAAna,yBAAmB,EAACma,WAAW,CAAC,EAAE;MACnC,MAAM,IAAIxlB,gCAAwB,CAAC,mBAAmB,EAAE,aAAa,CAAC;IAC1E;IACA,IAAI,CAAC63D,8BAA8B,EAAE;IACrC,OAAO,IAAI,CAACnC,cAAc,CAAC7zC,YAAY,CAAC2D,WAAW,CAAC;EACxD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIsyC,cAAcA,CAACtyC,WAAW,EAAE;IACxB,IAAI,CAAC,IAAAna,yBAAmB,EAACma,WAAW,CAAC,EAAE;MACnC,MAAM,IAAIxlB,gCAAwB,CAAC,mBAAmB,EAAE,aAAa,CAAC;IAC1E;IACA,OAAO,IAAI,CAAC01D,cAAc,CAACoC,cAAc,CAACtyC,WAAW,CAAC;EAC1D;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIuyC,iBAAiBA,CAACvyC,WAAW,EAAE;IAC3B,IAAI,CAAC,IAAAna,yBAAmB,EAACma,WAAW,CAAC,EAAE;MACnC,MAAM,IAAIxlB,gCAAwB,CAAC,mBAAmB,EAAE,aAAa,CAAC;IAC1E;IACA,IAAI,CAAC63D,8BAA8B,EAAE;IACrC,OAAO,IAAI,CAACnC,cAAc,CAACqC,iBAAiB,CAACvyC,WAAW,CAAC;EAC7D;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIwyC,cAAcA,CAACj7C,OAAO,EAAE;IACpB,IAAAqtC,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI,CAAC86C,8BAA8B,EAAE;IACrC,OAAO,IAAI,CAACnC,cAAc,CAACsC,cAAc,CAACj7C,OAAO,CAAC;EACtD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIk7C,gBAAgBA,CAACl7C,OAAO,EAAE;IACtB,IAAAqtC,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,OAAO,IAAI,CAAC24C,cAAc,CAACuC,gBAAgB,CAACl7C,OAAO,CAAC;EACxD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIm7C,kBAAkBA,CAACn7C,OAAO,EAAE;IACxB,IAAAqtC,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI,CAAC86C,8BAA8B,EAAE;IACrC,OAAO,IAAI,CAACnC,cAAc,CAACwC,kBAAkB,CAACn7C,OAAO,CAAC;EAC1D;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIo7C,sBAAsBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACzC,cAAc,CAAC0C,sBAAsB,CAAEluD,GAAG,IAAK,IAAI,CAACmuD,kBAAkB,CAACnuD,GAAG,CAAC,CAAC;EAC5F;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACImuD,kBAAkBA,CAACt7C,OAAO,EAAE;IACxB,IAAAqtC,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,OAAO;MACHjY,KAAK,EAAE,IAAI,CAACkL,eAAe,CAACkC,aAAa,CAAC6K,OAAO,CAAC;MAClDhY,MAAM,EAAE,IAAI,CAACiL,eAAe,CAAC4B,cAAc,CAACmL,OAAO;IACvD,CAAC;EACL;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIu7C,kBAAkBA,CAAA,EAAG;IACjB,IAAI,CAACT,8BAA8B,EAAE;IACrC,OAAO,IAAI,CAACnC,cAAc,CAAC4C,kBAAkB,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,oBAAoBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAAC7C,cAAc,CAAC6C,oBAAoB,EAAE;EACrD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,sBAAsBA,CAAA,EAAG;IACrB,IAAI,CAACX,8BAA8B,EAAE;IACrC,OAAO,IAAI,CAACnC,cAAc,CAAC8C,sBAAsB,EAAE;EACvD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAACC,SAAS,EAAE;IACpB,MAAMC,SAAS,GAAG,IAAI,CAAC3D,OAAO,CAACrM,WAAW,CAAC+P,SAAS,CAAC;IACrD,MAAME,iBAAiB,GAAG,IAAI,CAAC5D,OAAO,CAACrM,WAAW,CAAC;MAAE5kD,QAAQ,EAAE20D,SAAS,CAAC30D;IAAS,CAAC,CAAC;IACpF,MAAM80D,gBAAgB,GAAG,IAAI,CAACnD,cAAc,CAACoD,aAAa,CAACF,iBAAiB,EAAE,IAAI,CAACnD,iBAAiB,CAAC,CAAC+C,sBAAsB,EAAE;IAC9H,MAAMO,0BAA0B,GAAG,IAAI,CAACrD,cAAc,CAACsD,gCAAgC,EAAE;IACzF,MAAMC,SAAS,GAAG9C,sCAAkB,CAAC+C,iBAAiB,CAACP,SAAS,EAAEE,gBAAgB,EAAEE,0BAA0B,EAAE,IAAI,CAAC9D,MAAM,CAAC;IAC5H,IAAI,CAACD,OAAO,GAAGiE,SAAS,CAAC/yD,MAAM;IAC/B,IAAI,CAAC+uD,MAAM,GAAGgE,SAAS,CAACjiD,KAAK;IAC7B,IAAI,CAAChG,gBAAgB,GAAGioD,SAAS,CAACjpD,eAAe;IACjD,IAAI,CAACklD,aAAa,GAAG+D,SAAS,CAACle,YAAY;IAC3C,IAAI,CAACn2C,OAAO,GAAGq0D,SAAS,CAACxB,MAAM;IAC/B,IAAI,CAACtC,SAAS,GAAG8D,SAAS,CAACvB,QAAQ;IACnC,IAAI,CAACtC,kBAAkB,GAAG6D,SAAS,CAACtB,iBAAiB;IACrD,IAAI,CAACtC,UAAU,GAAG4D,SAAS,CAAClD,SAAS;IACrC,IAAI,CAACT,6BAA6B,GAAG2D,SAAS,CAAChiD,4BAA4B;IAC3E,IAAI,CAACs+C,eAAe,GAAG0D,SAAS,CAACrB,cAAc;IAC/C,IAAI,CAACpC,SAAS,GAAGyD,SAAS,CAACtyB,QAAQ;IACnC,IAAI,CAAC8uB,iBAAiB,GAAGwD,SAAS,CAAC/hD,gBAAgB;IACnD,IAAI,CAACw+C,cAAc,GAAGuD,SAAS,CAACje,aAAa;IAC7C,IAAI,CAAC2a,iBAAiB,GAAGsD,SAAS,CAAC9yD,gBAAgB;EACvD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIsiD,SAASA,CAAA,EAAG;IACR,OAAO,IAAI,CAACuM,OAAO,CAACvM,SAAS,EAAE;EACnC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI0Q,qBAAqBA,CAAA,EAAG;IACpB,IAAI,CAACV,YAAY,CAAC,CAAC,CAAC,CAAC;EACzB;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIW,QAAQA,CAAA,EAAG;IACP,OAAO,IAAI,CAACnE,MAAM,CAAC/pB,QAAQ,EAAE;EACjC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACImuB,IAAIA,CAAA,EAAG;IACH,IAAI,CAAC9D,eAAe,CAAC8D,IAAI,EAAE;IAC3B,OAAO,IAAI,CAACC,iCAAiC,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,IAAIA,CAAA,EAAG;IACH,IAAI,CAAChE,eAAe,CAACgE,IAAI,EAAE;IAC3B,OAAO,IAAI,CAACD,iCAAiC,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,sBAAsBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAACjE,eAAe,CAACiE,sBAAsB,EAAE;EACxD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,sBAAsBA,CAAA,EAAG;IACrB,OAAO,IAAI,CAAClE,eAAe,CAACkE,sBAAsB,EAAE;EACxD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,6BAA6BA,CAACpsD,OAAO,EAAE;IACnC,IAAIpG,KAAK;IACT,IAAI,IAAAmE,yBAAmB,EAACiC,OAAO,CAAC,EAAE;MAC9BpG,KAAK,GAAG,IAAIC,oCAAiB,CAACmG,OAAO,EAAEA,OAAO,CAAC;IACnD,CAAC,MACI,IAAI,IAAAlC,oCAAiB,EAACkC,OAAO,CAAC,EAAE;MACjCpG,KAAK,GAAG,IAAIC,oCAAiB,CAACmG,OAAO,CAAChC,KAAK,EAAEgC,OAAO,CAAC/B,GAAG,CAAC;IAC7D,CAAC,MACI;MACD,MAAM,IAAIvL,gCAAwB,CAAC,qCAAqC,EAAE,SAAS,CAAC;IACxF;IACA,IAAI;MACA,IAAI,CAACu1D,eAAe,CAACoE,uBAAuB,CAACzyD,KAAK,CAAC;MACnD,KAAK,MAAM0yD,EAAE,IAAI1yD,KAAK,CAACqJ,SAAS,CAAC,IAAI,CAACS,gBAAgB,CAAC,EAAE;QACrD,IAAI,CAACukD,eAAe,CAACsE,iCAAiC,CAACD,EAAE,CAAC;MAC9D;IACJ,CAAC,CACD,OAAO3pC,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;IACA,OAAO,IAAI;EACf;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI6pC,eAAeA,CAACC,oBAAoB,EAAEC,YAAY,EAAE;IAChD,IAAI,CAACzE,eAAe,CAACuE,eAAe,CAACC,oBAAoB,EAAEC,YAAY,CAAC;IACxE,OAAO,IAAI,CAACV,iCAAiC,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIW,cAAcA,CAACl9C,OAAO,EAAEm7B,UAAU,EAAE;IAChC,IAAAkS,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI,CAACw4C,eAAe,CAAC2E,WAAW,CAACn9C,OAAO,EAAEm7B,UAAU,CAAC;IACrD,OAAO,IAAI,CAACohB,iCAAiC,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIa,4BAA4BA,CAACp9C,OAAO,EAAEm7B,UAAU,EAAE;IAC9C,IAAAkS,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI;MACA,IAAI,CAACw4C,eAAe,CAAC6E,sBAAsB,CAACr9C,OAAO,EAAEm7B,UAAU,CAAC;MAChE,IAAI,CAACqd,eAAe,CAAC8E,qBAAqB,CAACt9C,OAAO,EAAEm7B,UAAU,CAAC;MAC/D,OAAO,IAAI;IACf,CAAC,CACD,OAAOjoB,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIiqC,WAAWA,CAACn9C,OAAO,EAAEu9C,WAAW,EAAE;IAC9B,IAAAlQ,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,MAAMquB,OAAO,GAAG,IAAI,CAACmqB,eAAe,CAACgF,gBAAgB,CAACx9C,OAAO,EAAEu9C,WAAW,EAAE,KAAK,CAAC;IAClF,OAAO,IAAI,CAACL,cAAc,CAACl9C,OAAO,EAAEquB,OAAO,CAAC;EAChD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIovB,yBAAyBA,CAACz9C,OAAO,EAAEu9C,WAAW,EAAE;IAC5C,IAAAlQ,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI;MACA,MAAMm7B,UAAU,GAAG,IAAI,CAACqd,eAAe,CAACgF,gBAAgB,CAACx9C,OAAO,EAAEu9C,WAAW,EAAE,KAAK,CAAC;MACrF,IAAI,CAAC/E,eAAe,CAAC6E,sBAAsB,CAACr9C,OAAO,EAAEm7B,UAAU,CAAC;MAChE,IAAI,CAACqd,eAAe,CAAC8E,qBAAqB,CAACt9C,OAAO,EAAEm7B,UAAU,CAAC;MAC/D,OAAO,IAAI;IACf,CAAC,CACD,OAAOjoB,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIwqC,iBAAiBA,CAAC19C,OAAO,EAAE29C,aAAa,EAAE;IACtC,IAAAtQ,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI,CAACw4C,eAAe,CAACoF,cAAc,CAAC59C,OAAO,EAAE29C,aAAa,CAAC;IAC3D,OAAO,IAAI,CAACpB,iCAAiC,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIsB,+BAA+BA,CAAC79C,OAAO,EAAE29C,aAAa,EAAE;IACpD,IAAAtQ,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI;MACA,IAAI,CAACw4C,eAAe,CAACsF,yBAAyB,CAAC99C,OAAO,EAAE29C,aAAa,CAAC;MACtE,IAAI,CAACnF,eAAe,CAACuF,wBAAwB,CAAC/9C,OAAO,EAAE29C,aAAa,CAAC;MACrE,OAAO,IAAI;IACf,CAAC,CACD,OAAOzqC,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI0qC,cAAcA,CAAC59C,OAAO,EAAEg+C,cAAc,EAAE;IACpC,IAAA3Q,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,MAAMquB,OAAO,GAAG,IAAI,CAACmqB,eAAe,CAACgF,gBAAgB,CAACx9C,OAAO,EAAEg+C,cAAc,EAAE,QAAQ,CAAC;IACxF,OAAO,IAAI,CAACN,iBAAiB,CAAC19C,OAAO,EAAEquB,OAAO,CAAC;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI4vB,4BAA4BA,CAACj+C,O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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIo3C,GAAGA,CAACp3C,MAAM,EAAE;IACR,IAAI,CAAC,IAAAjb,oCAAiB,EAACib,MAAM,CAAC,EAAE;MAC5B,MAAM,IAAIrmB,gCAAwB,CAAC,iBAAiB,EAAE,QAAQ,CAAC;IACnE;IACA,MAAMkH,KAAK,GAAG,IAAIC,oCAAiB,CAACkf,MAAM,CAAC/a,KAAK,EAAE+a,MAAM,CAAC9a,GAAG,CAAC;IAC7D,IAAI,CAACgqD,eAAe,CAACkI,GAAG,CAACv2D,KAAK,CAACoE,KAAK,EAAEpE,KAAK,CAACpC,KAAK,EAAE,EAAEoC,KAAK,CAACnC,MAAM,EAAE,CAAC;IACpE,OAAO,IAAI,CAACy4D,cAAc,CAACn3C,MAAM,CAAC;EACtC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIq3C,KAAKA,CAACC,gBAAgB,EAAE;IACpB,IAAI,CAAC,IAAAtyD,yBAAmB,EAACsyD,gBAAgB,CAAC,EAAE;MACxC,MAAM,IAAI39D,gCAAwB,CAAC,mBAAmB,EAAE,kBAAkB,CAAC;IAC/E;IACA,IAAI,CAAC63D,8BAA8B,EAAE;IACrC,IAAI,CAACtC,eAAe,CAACmI,KAAK,CAACC,gBAAgB,CAAC;IAC5C,OAAO,IAAI,CAACrE,iCAAiC,EAAE;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIsE,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAI,CAACrI,eAAe,CAACqI,gBAAgB,EAAE;EAClD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,cAAcA,CAAA,EAAG;IACb,IAAI,CAACtI,eAAe,CAACsI,cAAc,EAAE;EACzC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,cAAcA,CAAA,EAAG;IACb,IAAI,CAACvI,eAAe,CAACwI,QAAQ,CAACD,cAAc,EAAE;EAClD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,cAAcA,CAAA,EAAG;IACb,IAAI,CAACzI,eAAe,CAACwI,QAAQ,CAACC,cAAc,EAAE;EAClD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIR,cAAcA,CAACn3C,MAAM,EAAE;IACnB,IAAI,CAAC,IAAAjb,oCAAiB,EAACib,MAAM,CAAC,EAAE;MAC5B,MAAM,IAAIrmB,gCAAwB,CAAC,iBAAiB,EAAE,QAAQ,CAAC;IACnE;IACA,MAAMi+D,SAAS,GAAG,IAAI92D,oCAAiB,CAACkf,MAAM,CAAC/a,KAAK,EAAE+a,MAAM,CAAC9a,GAAG,CAAC;IACjE,OAAO0yD,SAAS,CAAC1uD,uBAAuB,EAAE,CAAC5H,GAAG,CAAEu2D,QAAQ,IAAKA,QAAQ,CAACv2D,GAAG,CAAE2F,OAAO,IAAK,IAAI,CAACuU,YAAY,CAACvU,OAAO,CAAC,CAAC,CAAC;EACvH;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI6wD,gBAAgBA,CAAC93C,MAAM,EAAE;IACrB,IAAI,CAAC,IAAAjb,oCAAiB,EAACib,MAAM,CAAC,EAAE;MAC5B,MAAM,IAAIrmB,gCAAwB,CAAC,iBAAiB,EAAE,QAAQ,CAAC;I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CAAC;IACnD,IAAI;MACA,IAAI,CAACkzC,eAAe,CAACmJ,4BAA4B,CAACr8C,SAAS,CAAC;MAC5D,OAAO,IAAI;IACf,CAAC,CACD,OAAO4N,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIsb,QAAQA,CAAClpB,SAAS,EAAE;IAChB,IAAIA,SAAS,KAAKld,SAAS,EAAE;MACzB,IAAAilD,uCAAiB,EAAC/nC,SAAS,EAAE,QAAQ,EAAE,WAAW,CAAC;IACvD;IACA,MAAMs8C,cAAc,GAAG,IAAI,CAACpJ,eAAe,CAAChqB,QAAQ,CAAClpB,SAAS,CAAC;IAC/D,IAAI,CAACuzC,QAAQ,CAACgJ,IAAI,CAACC,eAAM,CAACC,UAAU,EAAEH,cAAc,CAAC;IACrD,OAAOA,cAAc;EACzB;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACII,yBAAyBA,CAAChiD,OAAO,EAAE;IAC/B,IAAAqtC,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,IAAI;MACA,IAAI,CAACw4C,eAAe,CAACyJ,oBAAoB,CAACjiD,OAAO,CAAC;MAClD,OAAO,IAAI;IACf,CAAC,CACD,OAAOkT,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIzR,WAAWA,CAACzB,OAAO,EAAE;IACjB,IAAAqtC,uCAAiB,EAACrtC,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC;IAC/C,MAAMwoB,WAAW,GAAG,IAAI,CAACzuB,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IAAI,CAACjG,YAAY,CAACk/B,cAAc,CAACj5B,OAAO,CAAC;EACpD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI0iD,aAAaA,CAAA,EAAG;IACZ,OAAO,IAAI,CAAC3oD,YAAY,CAAC4/B,UAAU,EAAE;EACzC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIt0B,UAAUA,CAACC,SAAS,EAAE;IAClB,IAAA+nC,uCAAiB,EAAC/nC,SAAS,EAAE,QAAQ,EAAE,WAAW,CAAC;IACnD,OAAO,IAAI,CAACvL,YAAY,CAAC/T,GAAG,CAACsf,SAAS,CAAC;EAC3C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIq9C,cAAcA,CAACr9C,SAAS,EAAE;IACtB,IAAA+nC,uCAAiB,EAAC/nC,SAAS,EAAE,QAAQ,EAAE,WAAW,CAAC;IACnD,OAAO,IAAI,CAACvL,YAAY,CAACs/B,gBAAgB,CAAC/zB,SAAS,CAAC;EACxD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI7P,WAAWA,CAACgT,WAAW,EAAE;IACrB,IAAI,CAAC,IAAAna,yBAAmB,EAACma,WAAW,CAAC,EAAE;MACnC,MAAM,IAAIxlB,gCAAwB,CAAC,mBAAmB,EAAE,aAAa,CAAC;IAC1E;IACA,MAAMyS,MAAM,GAAG,IAAI,CAACzC,eAAe,CAAC4I,OAAO,CAAC4M,WAAW,CAAC;IACxD,OAAO,IAAAhT,iBAAW,EAACC,MAAM,EAAE+S,WAAW,CAAC;EAC3C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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IAAIE,OAAO,KAAKj7D,SAAS,EAAE;MACvB,IAAI,CAACywD,QAAQ,CAACgJ,IAAI,CAACC,eAAM,CAACwB,YAAY,EAAED,OAAO,EAAEF,OAAO,CAAC;IAC7D;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACII,KAAKA,CAACC,eAAe,EAAE;IACnB,IAAI,CAACC,iBAAiB,EAAE;IACxB,IAAI,CAACjL,eAAe,CAACkL,sBAAsB,EAAE;IAC7C,IAAI;MACAF,eAAe,EAAE;IACrB,CAAC,CACD,OAAOtwC,CAAC,EAAE;MACN,IAAI,CAACslC,eAAe,CAACmL,uBAAuB,EAAE;MAC9C,IAAI,CAACC,gBAAgB,EAAE;MACvB,MAAO1wC,CAAC;IACZ;IACA,IAAI,CAACslC,eAAe,CAACmL,uBAAuB,EAAE;IAC9C,OAAO,IAAI,CAACC,gBAAgB,EAAE;EAClC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIH,iBAAiBA,CAAA,EAAG;IAChB,IAAI,CAAC1K,oBAAoB,GAAG,IAAI;IAChC,IAAI,CAACF,QAAQ,CAACgJ,IAAI,CAACC,eAAM,CAAC+B,mBAAmB,CAAC;EAClD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACID,gBAAgBA,CAAA,EAAG;IACf,IAAI,CAAC7K,oBAAoB,GAAG,KAAK;IACjC,MAAM3+C,OAAO,GAAG,IAAI,CAACmiD,iCAAiC,EAAE;IACxD,IAAI,CAAC1D,QAAQ,CAACgJ,IAAI,CAACC,eAAM,CAACgC,iBAAiB,EAAE1pD,OAAO,CAAC;IACrD,OAAOA,OAAO;EAClB;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI2pD,qBAAqBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAAChL,oBAAoB;EACpC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIiL,gCAAgCA,CAACjkD,cAAc,EAAEpT,UAAU,EAAEs3D,KAAK,EAAE;IAChE,IAAA5W,uCAAiB,EAACttC,cAAc,EAAE,QAAQ,EAAE,gBAAgB,CAAC;IAC7D,IAAIkkD,KAAK,KAAK77D,SAAS,EAAE;MACrB,IAAAilD,uCAAiB,EAAC4W,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC;IAC/C;IACA,IAAI;MACA,IAAI,CAACzL,eAAe,CAAC0L,sCAAsC,CAACnkD,cAAc,EAAEpT,UAAU,EAAEs3D,KAAK,CAAC;MAC9F,OAAO,IAAI;IACf,CAAC,CACD,OAAO/wC,CAAC,EAAE;MACN,OAAO,KAAK;IAChB;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIixC,kBAAkBA,CAACpkD,cAAc,EAAEpT,UAAU,EAAEs3D,KAAK,EAAEta,OAAO,EAAE;IAC3D,IAAA0D,uCAAiB,EAACttC,cAAc,EAAE,QAAQ,EAAE,gBAAgB,CAAC;IAC7D,IAAIkkD,KAAK,KAAK77D,SAAS,EAAE;MACrB,IAAAilD,uCAAiB,EAAC4W,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC;IAC/C;IACA,IAAI,CAACzL,eAAe,CAAC2L,kBAAkB,CAACpkD,cAAc,EAAE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A;AACA;AACA;AACA;AACA;EACI2qB,qBAAqBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAAC3B,iBAAiB,CAAC4B,UAAU,EAAE;EAC9C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIoL,gBAAgBA,CAACC,WAAW,EAAE;IAC1B,IAAAxY,uCAAiB,EAACwY,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC;IAC/C,OAAO,IAAI,CAACvN,UAAU,CAACnc,WAAW,CAACgC,cAAc,CAACkT,sBAAsB,CAACwU,WAAW,CAAC;EACzF;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAGIC,YAAYA,CAACD,WAAW,EAAE;IACtB,IAAAxY,uCAAiB,EAACwY,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC;IAC/C,OAAO,IAAI,CAACvN,UAAU,CAACnc,WAAW,CAACgC,cAAc,CAACkS,kBAAkB,CAACwV,WAAW,CAAC;EACrF;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,YAAYA,CAACF,WAAW,EAAE;IACtB,IAAAxY,uCAAiB,EAACwY,WAAW,EAAE,QAAQ,EAAE,KAAK,CAAC;IAC/C,OAAO,IAAAvU,kCAAkB,EAACuU,WAAW,CAAC;EAC1C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIG,EAAEA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IAChB,IAAI,CAACrN,QAAQ,CAACmN,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;EACrC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,IAAIA,CAACF,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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIgqB,CAAC,GAAGnhH,IAAI;AACZ;AACA,SAASohH,OAAOA,CAAC5jE,GAAG,EAAElb,CAAC,EAAE;EACrB,KAAK,IAAIr9B,CAAC,GAAG,CAAC,EAAEu3G,CAAC,GAAG,CAAC,EAAEv3G,CAAC,GAAGu4C,GAAG,CAACn+C,MAAM,EAAE,EAAE4F,CAAC,EAAE;IACxCu3G,CAAC,GAAGl6E,CAAC,GAAGk6E,CAAC,GAAGh/D,GAAG,CAACv4C,CAAC,CAAC;EACtB;EACA,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","file":"hyperformula.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"chevrotain\"), require(\"unorm\"), require(\"tiny-emitter\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"HyperFormula\", [\"chevrotain\", \"unorm\", \"tiny-emitter\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"HyperFormula\"] = factory(require(\"chevrotain\"), require(\"unorm\"), require(\"tiny-emitter\"));\n\telse\n\t\troot[\"HyperFormula\"] = factory(root[\"chevrotain\"], root[\"unorm\"], root[\"TinyEmitter\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE__85__, __WEBPACK_EXTERNAL_MODULE__125__, __WEBPACK_EXTERNAL_MODULE__172__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArraySize } from './ArraySize';\r\nimport { CellError, CellType, CellValueDetailedType, CellValueType, ErrorType } from './Cell';\r\nimport { DetailedCellError } from './CellValue';\r\nimport { Config } from './Config';\r\nimport { AlwaysDense, AlwaysSparse, DenseSparseChooseBasedOnThreshold } from './DependencyGraph/AddressMapping/ChooseAddressMappingPolicy';\r\nimport { ConfigValueTooBigError, ConfigValueTooSmallError, EvaluationSuspendedError, ExpectedOneOfValuesError, ExpectedValueOfTypeError, FunctionPluginValidationError, InvalidAddressError, InvalidArgumentsError, LanguageAlreadyRegisteredError, LanguageNotRegisteredError, MissingTranslationError, NamedExpressionDoesNotExistError, NamedExpressionNameIsAlreadyTakenError, NamedExpressionNameIsInvalidError, NoOperationToRedoError, NoOperationToUndoError, NoRelativeAddressesAllowedError, NoSheetWithIdError, NoSheetWithNameError, NotAFormulaError, NothingToPasteError, ProtectedFunctionTranslationError, SheetNameAlreadyTakenError, SheetSizeLimitExceededError, SourceLocationHasArrayError, TargetLocationHasArrayError, UnableToParseError } from './errors';\r\nimport { ExportedCellChange, ExportedNamedExpressionChange } from './Exporter';\r\nimport { HyperFormula } from './HyperFormula';\r\nimport enGB from './i18n/languages/enGB';\r\nimport { FunctionPlugin, FunctionArgumentType } from './interpreter';\r\nimport * as plugins from './interpreter/plugin';\r\nimport { SimpleRangeValue } from './SimpleRangeValue';\r\n/**\r\n * Aggregate class for default export\r\n */\r\nclass HyperFormulaNS extends HyperFormula {\r\n}\r\nHyperFormulaNS.HyperFormula = HyperFormula;\r\nHyperFormulaNS.ErrorType = ErrorType;\r\nHyperFormulaNS.CellError = CellError;\r\nHyperFormulaNS.CellType = CellType;\r\nHyperFormulaNS.CellValueType = CellValueType;\r\nHyperFormulaNS.CellValueDetailedType = CellValueDetailedType;\r\nHyperFormulaNS.DetailedCellError = DetailedCellError;\r\nHyperFormulaNS.ExportedCellChange = ExportedCellChange;\r\nHyperFormulaNS.ExportedNamedExpressionChange = ExportedNamedExpressionChange;\r\nHyperFormulaNS.ConfigValueTooBigError = ConfigValueTooBigError;\r\nHyperFormulaNS.ConfigValueTooSmallError = ConfigValueTooSmallError;\r\nHyperFormulaNS.EvaluationSuspendedError = EvaluationSuspendedError;\r\nHyperFormulaNS.ExpectedOneOfValuesError = ExpectedOneOfValuesError;\r\nHyperFormulaNS.ExpectedValueOfTypeError = ExpectedValueOfTypeError;\r\nHyperFormulaNS.ArraySize = ArraySize;\r\nHyperFormulaNS.SimpleRangeValue = SimpleRangeValue;\r\nHyperFormulaNS.FunctionPlugin = FunctionPlugin;\r\nHyperFormulaNS.FunctionArgumentType = FunctionArgumentType;\r\nHyperFormulaNS.FunctionPluginValidationError = FunctionPluginValidationError;\r\nHyperFormulaNS.InvalidAddressError = InvalidAddressError;\r\nHyperFormulaNS.InvalidArgumentsError = InvalidArgumentsError;\r\nHyperFormulaNS.LanguageNotRegisteredError = LanguageNotRegisteredError;\r\nHyperFormulaNS.LanguageAlreadyRegisteredError = LanguageAlreadyRegisteredError;\r\nHyperFormulaNS.MissingTranslationError = MissingTranslationError;\r\nHyperFormulaNS.NamedExpressionDoesNotExistError = NamedExpressionDoesNotExistError;\r\nHyperFormulaNS.NamedExpressionNameIsAlreadyTakenError = NamedExpressionNameIsAlreadyTakenError;\r\nHyperFormulaNS.NamedExpressionNameIsInvalidError = NamedExpressionNameIsInvalidError;\r\nHyperFormulaNS.NoOperationToRedoError = NoOperationToRedoError;\r\nHyperFormulaNS.NoOperationToUndoError = NoOperationToUndoError;\r\nHyperFormulaNS.NoRelativeAddressesAllowedError = NoRelativeAddressesAllowedError;\r\nHyperFormulaNS.NoSheetWithIdError = NoSheetWithIdError;\r\nHyperFormulaNS.NoSheetWithNameError = NoSheetWithNameError;\r\nHyperFormulaNS.NotAFormulaError = NotAFormulaError;\r\nHyperFormulaNS.NothingToPasteError = NothingToPasteError;\r\nHyperFormulaNS.ProtectedFunctionTranslationError = ProtectedFunctionTranslationError;\r\nHyperFormulaNS.SheetNameAlreadyTakenError = SheetNameAlreadyTakenError;\r\nHyperFormulaNS.SheetSizeLimitExceededError = SheetSizeLimitExceededError;\r\nHyperFormulaNS.SourceLocationHasArrayError = SourceLocationHasArrayError;\r\nHyperFormulaNS.TargetLocationHasArrayError = TargetLocationHasArrayError;\r\nHyperFormulaNS.UnableToParseError = UnableToParseError;\r\nconst defaultLanguage = Config.defaultConfig.language;\r\nHyperFormula.registerLanguage(defaultLanguage, enGB);\r\nHyperFormula.languages[enGB.langCode] = enGB;\r\nfor (const pluginName of Object.getOwnPropertyNames(plugins)) {\r\n    if (!pluginName.startsWith('_')) {\r\n        // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n        // @ts-ignore\r\n        HyperFormula.registerFunctionPlugin(plugins[pluginName]);\r\n    }\r\n}\r\nexport default HyperFormulaNS;\r\nexport { AlwaysDense, AlwaysSparse, DenseSparseChooseBasedOnThreshold, HyperFormula, CellType, CellValueType, CellValueDetailedType, ErrorType, ExportedCellChange, ExportedNamedExpressionChange, DetailedCellError, CellError, ConfigValueTooBigError, ConfigValueTooSmallError, EvaluationSuspendedError, ExpectedOneOfValuesError, ExpectedValueOfTypeError, ArraySize, FunctionPlugin, FunctionArgumentType, FunctionPluginValidationError, InvalidAddressError, InvalidArgumentsError, LanguageAlreadyRegisteredError, LanguageNotRegisteredError, MissingTranslationError, NamedExpressionDoesNotExistError, NamedExpressionNameIsAlreadyTakenError, NamedExpressionNameIsInvalidError, NoOperationToRedoError, NoOperationToUndoError, NoRelativeAddressesAllowedError, NoSheetWithIdError, NoSheetWithNameError, NotAFormulaError, NothingToPasteError, ProtectedFunctionTranslationError, SimpleRangeValue, SheetNameAlreadyTakenError, SheetSizeLimitExceededError, SourceLocationHasArrayError, TargetLocationHasArrayError, UnableToParseError, };\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from './AbsoluteCellRange';\r\nimport { InterpreterState } from './interpreter/InterpreterState';\r\nimport { FunctionArgumentType } from './interpreter/plugin/FunctionPlugin';\r\nimport { AstNodeType } from './parser';\r\nexport class ArraySize {\r\n    constructor(width, height, isRef = false) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.isRef = isRef;\r\n        if (width <= 0 || height <= 0) {\r\n            throw Error('Incorrect array size');\r\n        }\r\n    }\r\n    static fromArray(array) {\r\n        return new ArraySize(array.length > 0 ? array[0].length : 0, array.length);\r\n    }\r\n    static error() {\r\n        return new ArraySize(1, 1, true);\r\n    }\r\n    static scalar() {\r\n        return new ArraySize(1, 1, false);\r\n    }\r\n    isScalar() {\r\n        return (this.width <= 1 && this.height <= 1) || this.isRef;\r\n    }\r\n}\r\nfunction arraySizeForBinaryOp(leftArraySize, rightArraySize) {\r\n    return new ArraySize(Math.max(leftArraySize.width, rightArraySize.width), Math.max(leftArraySize.height, rightArraySize.height));\r\n}\r\nfunction arraySizeForUnaryOp(arraySize) {\r\n    return new ArraySize(arraySize.width, arraySize.height);\r\n}\r\nexport class ArraySizePredictor {\r\n    constructor(config, functionRegistry) {\r\n        this.config = config;\r\n        this.functionRegistry = functionRegistry;\r\n    }\r\n    checkArraySize(ast, formulaAddress) {\r\n        return this.checkArraySizeForAst(ast, { formulaAddress, arraysFlag: this.config.useArrayArithmetic });\r\n    }\r\n    checkArraySizeForAst(ast, state) {\r\n        switch (ast.type) {\r\n            case AstNodeType.FUNCTION_CALL: {\r\n                return this.checkArraySizeForFunction(ast, state);\r\n            }\r\n            case AstNodeType.COLUMN_RANGE:\r\n            case AstNodeType.ROW_RANGE:\r\n            case AstNodeType.CELL_RANGE: {\r\n                const range = AbsoluteCellRange.fromAstOrUndef(ast, state.formulaAddress);\r\n                if (range === undefined) {\r\n                    return ArraySize.error();\r\n                }\r\n                else {\r\n                    return new ArraySize(range.width(), range.height(), true);\r\n                }\r\n            }\r\n            case AstNodeType.ARRAY: {\r\n                const heights = [];\r\n                const widths = [];\r\n                for (const row of ast.args) {\r\n                    const sizes = row.map(ast => this.checkArraySizeForAst(ast, state));\r\n                    const h = Math.min(...sizes.map(size => size.height));\r\n                    const w = sizes.reduce((total, size) => total + size.width, 0);\r\n                    heights.push(h);\r\n                    widths.push(w);\r\n                }\r\n                const height = heights.reduce((total, h) => total + h, 0);\r\n                const width = Math.min(...widths);\r\n                return new ArraySize(width, height);\r\n            }\r\n            case AstNodeType.STRING:\r\n            case AstNodeType.NUMBER:\r\n                return ArraySize.scalar();\r\n            case AstNodeType.CELL_REFERENCE:\r\n                return new ArraySize(1, 1, true);\r\n            case AstNodeType.DIV_OP:\r\n            case AstNodeType.CONCATENATE_OP:\r\n            case AstNodeType.EQUALS_OP:\r\n            case AstNodeType.GREATER_THAN_OP:\r\n            case AstNodeType.GREATER_THAN_OR_EQUAL_OP:\r\n            case AstNodeType.LESS_THAN_OP:\r\n            case AstNodeType.LESS_THAN_OR_EQUAL_OP:\r\n            case AstNodeType.MINUS_OP:\r\n            case AstNodeType.NOT_EQUAL_OP:\r\n            case AstNodeType.PLUS_OP:\r\n            case AstNodeType.POWER_OP:\r\n            case AstNodeType.TIMES_OP: {\r\n                const left = this.checkArraySizeForAst(ast.left, state);\r\n                const right = this.checkArraySizeForAst(ast.right, state);\r\n                if (!state.arraysFlag && (left.height > 1 || left.width > 1 || right.height > 1 || right.width > 1)) {\r\n                    return ArraySize.error();\r\n                }\r\n                return arraySizeForBinaryOp(left, right);\r\n            }\r\n            case AstNodeType.MINUS_UNARY_OP:\r\n            case AstNodeType.PLUS_UNARY_OP:\r\n            case AstNodeType.PERCENT_OP: {\r\n                const val = this.checkArraySizeForAst(ast.value, state);\r\n                if (!state.arraysFlag && (val.height > 1 || val.width > 1)) {\r\n                    return ArraySize.error();\r\n                }\r\n                return arraySizeForUnaryOp(val);\r\n            }\r\n            case AstNodeType.PARENTHESIS: {\r\n                return this.checkArraySizeForAst(ast.expression, state);\r\n            }\r\n            case AstNodeType.EMPTY:\r\n                return ArraySize.error();\r\n            default:\r\n                return ArraySize.error();\r\n        }\r\n    }\r\n    checkArraySizeForFunction(ast, state) {\r\n        const metadata = this.functionRegistry.getMetadata(ast.procedureName);\r\n        const pluginArraySizeFunction = this.functionRegistry.getArraySizeFunction(ast.procedureName);\r\n        if (pluginArraySizeFunction !== undefined) {\r\n            return pluginArraySizeFunction(ast, state);\r\n        }\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.checkArraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        if (metadata === undefined || metadata.expandRanges || !state.arraysFlag || metadata.vectorizationForbidden || metadata.parameters === undefined) {\r\n            return new ArraySize(1, 1);\r\n        }\r\n        const argumentDefinitions = [...metadata.parameters];\r\n        if (metadata.repeatLastArgs === undefined && argumentDefinitions.length < subChecks.length) {\r\n            return ArraySize.error();\r\n        }\r\n        if (metadata.repeatLastArgs !== undefined && argumentDefinitions.length < subChecks.length &&\r\n            (subChecks.length - argumentDefinitions.length) % metadata.repeatLastArgs !== 0) {\r\n            return ArraySize.error();\r\n        }\r\n        while (argumentDefinitions.length < subChecks.length) {\r\n            argumentDefinitions.push(...argumentDefinitions.slice(argumentDefinitions.length - metadata.repeatLastArgs));\r\n        }\r\n        let maxWidth = 1;\r\n        let maxHeight = 1;\r\n        for (let i = 0; i < subChecks.length; i++) {\r\n            if (argumentDefinitions[i].argumentType !== FunctionArgumentType.RANGE && argumentDefinitions[i].argumentType !== FunctionArgumentType.ANY) {\r\n                maxHeight = Math.max(maxHeight, subChecks[i].height);\r\n                maxWidth = Math.max(maxWidth, subChecks[i].width);\r\n            }\r\n        }\r\n        return new ArraySize(maxWidth, maxHeight);\r\n    }\r\n}\r\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 and Safari <= 15.4, FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = global.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.30.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2023 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","module.exports = false;\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","var isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { equalSimpleCellAddress, isSimpleCellAddress, simpleCellAddress } from './Cell';\r\nimport { SheetsNotEqual } from './errors';\r\nimport { AstNodeType } from './parser';\r\nimport { RowsSpan } from './Span';\r\nexport const WRONG_RANGE_SIZE = 'AbsoluteCellRange: Wrong range size';\r\nexport function isSimpleCellRange(obj) {\r\n    if (obj && (typeof obj === 'object' || typeof obj === 'function')) {\r\n        return 'start' in obj && isSimpleCellAddress(obj.start) && 'end' in obj && isSimpleCellAddress(obj.end);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nexport const simpleCellRange = (start, end) => ({ start, end });\r\nexport class AbsoluteCellRange {\r\n    constructor(start, end) {\r\n        if (start.sheet !== end.sheet) {\r\n            throw new SheetsNotEqual(start.sheet, end.sheet);\r\n        }\r\n        this.start = simpleCellAddress(start.sheet, start.col, start.row);\r\n        this.end = simpleCellAddress(end.sheet, end.col, end.row);\r\n    }\r\n    get sheet() {\r\n        return this.start.sheet;\r\n    }\r\n    static fromSimpleCellAddresses(start, end) {\r\n        if (start.sheet !== end.sheet) {\r\n            throw new SheetsNotEqual(start.sheet, end.sheet);\r\n        }\r\n        const width = end.col - start.col;\r\n        const height = end.row - start.row;\r\n        if (Number.isFinite(height) && Number.isFinite(width)) {\r\n            return new AbsoluteCellRange(start, end);\r\n        }\r\n        if (Number.isFinite(height)) {\r\n            return new AbsoluteRowRange(start.sheet, start.row, end.row);\r\n        }\r\n        return new AbsoluteColumnRange(start.sheet, start.col, end.col);\r\n    }\r\n    static fromAst(ast, baseAddress) {\r\n        if (ast.type === AstNodeType.CELL_RANGE) {\r\n            return AbsoluteCellRange.fromCellRange(ast, baseAddress);\r\n        }\r\n        else if (ast.type === AstNodeType.COLUMN_RANGE) {\r\n            return AbsoluteColumnRange.fromColumnRange(ast, baseAddress);\r\n        }\r\n        else {\r\n            return AbsoluteRowRange.fromRowRangeAst(ast, baseAddress);\r\n        }\r\n    }\r\n    static fromAstOrUndef(ast, baseAddress) {\r\n        try {\r\n            return AbsoluteCellRange.fromAst(ast, baseAddress);\r\n        }\r\n        catch (_e) {\r\n            return undefined;\r\n        }\r\n    }\r\n    static fromCellRange(x, baseAddress) {\r\n        return new AbsoluteCellRange(x.start.toSimpleCellAddress(baseAddress), x.end.toSimpleCellAddress(baseAddress));\r\n    }\r\n    static spanFrom(topLeftCorner, width, height) {\r\n        const ret = AbsoluteCellRange.spanFromOrUndef(topLeftCorner, width, height);\r\n        if (ret === undefined) {\r\n            throw new Error(WRONG_RANGE_SIZE);\r\n        }\r\n        return ret;\r\n    }\r\n    static spanFromOrUndef(topLeftCorner, width, height) {\r\n        if (!Number.isFinite(width) && Number.isFinite(height)) {\r\n            if (topLeftCorner.col !== 0) {\r\n                return undefined;\r\n            }\r\n            return new AbsoluteRowRange(topLeftCorner.sheet, topLeftCorner.row, topLeftCorner.row + height - 1);\r\n        }\r\n        else if (!Number.isFinite(height) && Number.isFinite(width)) {\r\n            if (topLeftCorner.row !== 0) {\r\n                return undefined;\r\n            }\r\n            return new AbsoluteColumnRange(topLeftCorner.sheet, topLeftCorner.col, topLeftCorner.col + width - 1);\r\n        }\r\n        else if (Number.isFinite(height) && Number.isFinite(width)) {\r\n            return new AbsoluteCellRange(topLeftCorner, simpleCellAddress(topLeftCorner.sheet, topLeftCorner.col + width - 1, topLeftCorner.row + height - 1));\r\n        }\r\n        return undefined;\r\n    }\r\n    static fromCoordinates(sheet, x1, y1, x2, y2) {\r\n        return new AbsoluteCellRange(simpleCellAddress(sheet, x1, y1), simpleCellAddress(sheet, x2, y2));\r\n    }\r\n    isFinite() {\r\n        return Number.isFinite(this.size());\r\n    }\r\n    doesOverlap(other) {\r\n        if (this.start.sheet != other.start.sheet) {\r\n            return false;\r\n        }\r\n        if (this.end.row < other.start.row || this.start.row > other.end.row) {\r\n            return false;\r\n        }\r\n        if (this.end.col < other.start.col || this.start.col > other.end.col) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    addressInRange(address) {\r\n        if (this.sheet !== address.sheet) {\r\n            return false;\r\n        }\r\n        return this.start.row <= address.row\r\n            && this.end.row >= address.row\r\n            && this.start.col <= address.col\r\n            && this.end.col >= address.col;\r\n    }\r\n    columnInRange(address) {\r\n        if (this.sheet !== address.sheet) {\r\n            return false;\r\n        }\r\n        return this.start.col <= address.col && this.end.col >= address.col;\r\n    }\r\n    rowInRange(address) {\r\n        if (this.sheet !== address.sheet) {\r\n            return false;\r\n        }\r\n        return this.start.row <= address.row && this.end.row >= address.row;\r\n    }\r\n    containsRange(range) {\r\n        return this.addressInRange(range.start) && this.addressInRange(range.end);\r\n    }\r\n    intersectionWith(other) {\r\n        if (this.sheet !== other.start.sheet) {\r\n            return undefined;\r\n        }\r\n        const startRow = Math.max(this.start.row, other.start.row);\r\n        const endRow = Math.min(this.end.row, other.end.row);\r\n        const startCol = Math.max(this.start.col, other.start.col);\r\n        const endCol = Math.min(this.end.col, other.end.col);\r\n        if (startRow > endRow || startCol > endCol) {\r\n            return undefined;\r\n        }\r\n        return new AbsoluteCellRange(simpleCellAddress(this.sheet, startCol, startRow), simpleCellAddress(this.sheet, endCol, endRow));\r\n    }\r\n    includesRow(row) {\r\n        return this.start.row < row && this.end.row >= row;\r\n    }\r\n    includesColumn(column) {\r\n        return this.start.col < column && this.end.col >= column;\r\n    }\r\n    shiftByRows(numberOfRows) {\r\n        this.start.row += numberOfRows;\r\n        this.end.row += numberOfRows;\r\n    }\r\n    expandByRows(numberOfRows) {\r\n        this.end.row += numberOfRows;\r\n    }\r\n    shiftByColumns(numberOfColumns) {\r\n        this.start.col += numberOfColumns;\r\n        this.end.col += numberOfColumns;\r\n    }\r\n    shifted(byCols, byRows) {\r\n        return AbsoluteCellRange.spanFrom(simpleCellAddress(this.sheet, this.start.col + byCols, this.start.row + byRows), this.width(), this.height());\r\n    }\r\n    expandByColumns(numberOfColumns) {\r\n        this.end.col += numberOfColumns;\r\n    }\r\n    moveToSheet(toSheet) {\r\n        this.start.sheet = toSheet;\r\n        this.end.sheet = toSheet;\r\n    }\r\n    removeSpan(span) {\r\n        if (span instanceof RowsSpan) {\r\n            this.removeRows(span.start, span.end);\r\n        }\r\n        else {\r\n            this.removeColumns(span.start, span.end);\r\n        }\r\n    }\r\n    shouldBeRemoved() {\r\n        return this.width() <= 0 || this.height() <= 0;\r\n    }\r\n    rangeWithSameWidth(startRow, numberOfRows) {\r\n        return AbsoluteCellRange.spanFrom(simpleCellAddress(this.sheet, this.start.col, startRow), this.width(), numberOfRows);\r\n    }\r\n    rangeWithSameHeight(startColumn, numberOfColumns) {\r\n        return AbsoluteCellRange.spanFrom(simpleCellAddress(this.sheet, startColumn, this.start.row), numberOfColumns, this.height());\r\n    }\r\n    toString() {\r\n        return `${this.start.sheet},${this.start.col},${this.start.row},${this.end.col},${this.end.row}`;\r\n    }\r\n    width() {\r\n        return this.end.col - this.start.col + 1;\r\n    }\r\n    height() {\r\n        return this.end.row - this.start.row + 1;\r\n    }\r\n    size() {\r\n        return this.height() * this.width();\r\n    }\r\n    arrayOfAddressesInRange() {\r\n        const result = [];\r\n        for (let y = 0; y < this.height(); ++y) {\r\n            result[y] = [];\r\n            for (let x = 0; x < this.width(); ++x) {\r\n                const value = simpleCellAddress(this.sheet, this.start.col + x, this.start.row + y);\r\n                result[y].push(value);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    withStart(newStart) {\r\n        return new AbsoluteCellRange(newStart, this.end);\r\n    }\r\n    sameDimensionsAs(other) {\r\n        return this.width() === other.width() && this.height() === other.height();\r\n    }\r\n    sameAs(other) {\r\n        return equalSimpleCellAddress(this.start, other.start) && equalSimpleCellAddress(this.end, other.end);\r\n    }\r\n    addressesArrayMap(dependencyGraph, op) {\r\n        const ret = [];\r\n        let currentRow = this.start.row;\r\n        while (currentRow <= this.effectiveEndRow(dependencyGraph)) {\r\n            let currentColumn = this.start.col;\r\n            const tmp = [];\r\n            while (currentColumn <= this.effectiveEndColumn(dependencyGraph)) {\r\n                tmp.push(op(simpleCellAddress(this.start.sheet, currentColumn, currentRow)));\r\n                currentColumn++;\r\n            }\r\n            ret.push(tmp);\r\n            currentRow++;\r\n        }\r\n        return ret;\r\n    }\r\n    addresses(dependencyGraph) {\r\n        const ret = [];\r\n        let currentRow = this.start.row;\r\n        const limitRow = this.effectiveEndRow(dependencyGraph);\r\n        const limitColumn = this.effectiveEndColumn(dependencyGraph);\r\n        while (currentRow <= limitRow) {\r\n            let currentColumn = this.start.col;\r\n            while (currentColumn <= limitColumn) {\r\n                ret.push(simpleCellAddress(this.start.sheet, currentColumn, currentRow));\r\n                currentColumn++;\r\n            }\r\n            currentRow++;\r\n        }\r\n        return ret;\r\n    }\r\n    *addressesWithDirection(right, bottom, dependencyGraph) {\r\n        if (right > 0) {\r\n            if (bottom > 0) {\r\n                let currentRow = this.effectiveEndRow(dependencyGraph);\r\n                while (currentRow >= this.start.row) {\r\n                    let currentColumn = this.effectiveEndColumn(dependencyGraph);\r\n                    while (currentColumn >= this.start.col) {\r\n                        yield simpleCellAddress(this.start.sheet, currentColumn, currentRow);\r\n                        currentColumn -= 1;\r\n                    }\r\n                    currentRow -= 1;\r\n                }\r\n            }\r\n            else {\r\n                let currentRow = this.start.row;\r\n                while (currentRow <= this.effectiveEndRow(dependencyGraph)) {\r\n                    let currentColumn = this.effectiveEndColumn(dependencyGraph);\r\n                    while (currentColumn >= this.start.col) {\r\n                        yield simpleCellAddress(this.start.sheet, currentColumn, currentRow);\r\n                        currentColumn -= 1;\r\n                    }\r\n                    currentRow += 1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (bottom > 0) {\r\n                let currentRow = this.effectiveEndRow(dependencyGraph);\r\n                while (currentRow >= this.start.row) {\r\n                    let currentColumn = this.start.col;\r\n                    while (currentColumn <= this.effectiveEndColumn(dependencyGraph)) {\r\n                        yield simpleCellAddress(this.start.sheet, currentColumn, currentRow);\r\n                        currentColumn += 1;\r\n                    }\r\n                    currentRow -= 1;\r\n                }\r\n            }\r\n            else {\r\n                let currentRow = this.start.row;\r\n                while (currentRow <= this.effectiveEndRow(dependencyGraph)) {\r\n                    let currentColumn = this.start.col;\r\n                    while (currentColumn <= this.effectiveEndColumn(dependencyGraph)) {\r\n                        yield simpleCellAddress(this.start.sheet, currentColumn, currentRow);\r\n                        currentColumn += 1;\r\n                    }\r\n                    currentRow += 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getAddress(col, row) {\r\n        if (col < 0 || row < 0 || row > this.height() - 1 || col > this.width() - 1) {\r\n            throw Error('Index out of bound');\r\n        }\r\n        return simpleCellAddress(this.start.sheet, this.start.col + col, this.start.row + row);\r\n    }\r\n    exceedsSheetSizeLimits(maxColumns, maxRows) {\r\n        return this.end.col >= maxColumns || this.end.row >= maxRows;\r\n    }\r\n    effectiveEndColumn(_dependencyGraph) {\r\n        return this.end.col;\r\n    }\r\n    effectiveEndRow(_dependencyGraph) {\r\n        return this.end.row;\r\n    }\r\n    effectiveWidth(_dependencyGraph) {\r\n        return this.width();\r\n    }\r\n    effectiveHeight(_dependencyGraph) {\r\n        return this.height();\r\n    }\r\n    removeRows(rowStart, rowEnd) {\r\n        if (rowStart > this.end.row) {\r\n            return;\r\n        }\r\n        if (rowEnd < this.start.row) {\r\n            const numberOfRows = rowEnd - rowStart + 1;\r\n            return this.shiftByRows(-numberOfRows);\r\n        }\r\n        if (rowStart <= this.start.row) {\r\n            this.start.row = rowStart;\r\n        }\r\n        this.end.row -= Math.min(rowEnd, this.end.row) - rowStart + 1;\r\n    }\r\n    removeColumns(columnStart, columnEnd) {\r\n        if (columnStart > this.end.col) {\r\n            return;\r\n        }\r\n        if (columnEnd < this.start.col) {\r\n            const numberOfColumns = columnEnd - columnStart + 1;\r\n            return this.shiftByColumns(-numberOfColumns);\r\n        }\r\n        if (columnStart <= this.start.col) {\r\n            this.start.col = columnStart;\r\n        }\r\n        this.end.col -= Math.min(columnEnd, this.end.col) - columnStart + 1;\r\n    }\r\n}\r\nexport class AbsoluteColumnRange extends AbsoluteCellRange {\r\n    constructor(sheet, columnStart, columnEnd) {\r\n        super(simpleCellAddress(sheet, columnStart, 0), simpleCellAddress(sheet, columnEnd, Number.POSITIVE_INFINITY));\r\n    }\r\n    static fromColumnRange(x, baseAddress) {\r\n        const start = x.start.toSimpleColumnAddress(baseAddress);\r\n        const end = x.end.toSimpleColumnAddress(baseAddress);\r\n        if (start.sheet !== end.sheet) {\r\n            throw new SheetsNotEqual(start.sheet, end.sheet);\r\n        }\r\n        return new AbsoluteColumnRange(start.sheet, start.col, end.col);\r\n    }\r\n    shouldBeRemoved() {\r\n        return this.width() <= 0;\r\n    }\r\n    shiftByRows(_numberOfRows) {\r\n        return;\r\n    }\r\n    expandByRows(_numberOfRows) {\r\n        return;\r\n    }\r\n    shifted(byCols, _byRows) {\r\n        return new AbsoluteColumnRange(this.sheet, this.start.col + byCols, this.end.col + byCols);\r\n    }\r\n    rangeWithSameHeight(startColumn, numberOfColumns) {\r\n        return new AbsoluteColumnRange(this.sheet, startColumn, startColumn + numberOfColumns - 1);\r\n    }\r\n    exceedsSheetSizeLimits(maxColumns, _maxRows) {\r\n        return this.end.col >= maxColumns;\r\n    }\r\n    effectiveEndRow(dependencyGraph) {\r\n        return this.effectiveHeight(dependencyGraph) - 1;\r\n    }\r\n    effectiveHeight(dependencyGraph) {\r\n        return dependencyGraph.getSheetHeight(this.sheet);\r\n    }\r\n    removeRows(_rowStart, _rowEnd) {\r\n        return;\r\n    }\r\n}\r\nexport class AbsoluteRowRange extends AbsoluteCellRange {\r\n    constructor(sheet, rowStart, rowEnd) {\r\n        super(simpleCellAddress(sheet, 0, rowStart), simpleCellAddress(sheet, Number.POSITIVE_INFINITY, rowEnd));\r\n    }\r\n    static fromRowRangeAst(x, baseAddress) {\r\n        const start = x.start.toSimpleRowAddress(baseAddress);\r\n        const end = x.end.toSimpleRowAddress(baseAddress);\r\n        if (start.sheet !== end.sheet) {\r\n            throw new SheetsNotEqual(start.sheet, end.sheet);\r\n        }\r\n        return new AbsoluteRowRange(start.sheet, start.row, end.row);\r\n    }\r\n    shouldBeRemoved() {\r\n        return this.height() <= 0;\r\n    }\r\n    shiftByColumns(_numberOfColumns) {\r\n        return;\r\n    }\r\n    expandByColumns(_numberOfColumns) {\r\n        return;\r\n    }\r\n    shifted(byCols, byRows) {\r\n        return new AbsoluteRowRange(this.sheet, this.start.row + byRows, this.end.row + byRows);\r\n    }\r\n    rangeWithSameWidth(startRow, numberOfRows) {\r\n        return new AbsoluteRowRange(this.sheet, startRow, startRow + numberOfRows - 1);\r\n    }\r\n    exceedsSheetSizeLimits(_maxColumns, maxRows) {\r\n        return this.end.row >= maxRows;\r\n    }\r\n    effectiveEndColumn(dependencyGraph) {\r\n        return this.effectiveWidth(dependencyGraph) - 1;\r\n    }\r\n    effectiveWidth(dependencyGraph) {\r\n        return dependencyGraph.getSheetWidth(this.sheet);\r\n    }\r\n    removeColumns(_columnStart, _columnEnd) {\r\n        return;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArrayVertex, FormulaCellVertex, ParsingErrorVertex, ValueCellVertex } from './DependencyGraph';\r\nimport { ErrorMessage } from './error-message';\r\nimport { EmptyValue, getFormatOfExtendedNumber, getTypeOfExtendedNumber, isExtendedNumber, NumberType, } from './interpreter/InterpreterValue';\r\nimport { SimpleRangeValue } from './SimpleRangeValue';\r\n/**\r\n * Possible errors returned by our interpreter.\r\n */\r\nexport var ErrorType;\r\n(function (ErrorType) {\r\n    /** Division by zero. */\r\n    ErrorType[\"DIV_BY_ZERO\"] = \"DIV_BY_ZERO\";\r\n    /** Unknown function name. */\r\n    ErrorType[\"NAME\"] = \"NAME\";\r\n    ErrorType[\"VALUE\"] = \"VALUE\";\r\n    ErrorType[\"NUM\"] = \"NUM\";\r\n    ErrorType[\"NA\"] = \"NA\";\r\n    /** Cyclic dependency. */\r\n    ErrorType[\"CYCLE\"] = \"CYCLE\";\r\n    /** Wrong address reference. */\r\n    ErrorType[\"REF\"] = \"REF\";\r\n    /** Array spill error. */\r\n    ErrorType[\"SPILL\"] = \"SPILL\";\r\n    /** Invalid/missing licence error. */\r\n    ErrorType[\"LIC\"] = \"LIC\";\r\n    /** Generic error */\r\n    ErrorType[\"ERROR\"] = \"ERROR\";\r\n})(ErrorType || (ErrorType = {}));\r\nexport var CellType;\r\n(function (CellType) {\r\n    CellType[\"FORMULA\"] = \"FORMULA\";\r\n    CellType[\"VALUE\"] = \"VALUE\";\r\n    CellType[\"ARRAY\"] = \"ARRAY\";\r\n    CellType[\"EMPTY\"] = \"EMPTY\";\r\n    CellType[\"ARRAYFORMULA\"] = \"ARRAYFORMULA\";\r\n})(CellType || (CellType = {}));\r\nexport const getCellType = (vertex, address) => {\r\n    if (vertex instanceof ArrayVertex) {\r\n        if (vertex.isLeftCorner(address)) {\r\n            return CellType.ARRAYFORMULA;\r\n        }\r\n        else {\r\n            return CellType.ARRAY;\r\n        }\r\n    }\r\n    if (vertex instanceof FormulaCellVertex || vertex instanceof ParsingErrorVertex) {\r\n        return CellType.FORMULA;\r\n    }\r\n    if (vertex instanceof ValueCellVertex) {\r\n        return CellType.VALUE;\r\n    }\r\n    return CellType.EMPTY;\r\n};\r\nexport var CellValueNoNumber;\r\n(function (CellValueNoNumber) {\r\n    CellValueNoNumber[\"EMPTY\"] = \"EMPTY\";\r\n    CellValueNoNumber[\"NUMBER\"] = \"NUMBER\";\r\n    CellValueNoNumber[\"STRING\"] = \"STRING\";\r\n    CellValueNoNumber[\"BOOLEAN\"] = \"BOOLEAN\";\r\n    CellValueNoNumber[\"ERROR\"] = \"ERROR\";\r\n})(CellValueNoNumber || (CellValueNoNumber = {}));\r\nexport var CellValueJustNumber;\r\n(function (CellValueJustNumber) {\r\n    CellValueJustNumber[\"NUMBER\"] = \"NUMBER\";\r\n})(CellValueJustNumber || (CellValueJustNumber = {}));\r\nexport const CellValueType = Object.assign(Object.assign({}, CellValueNoNumber), CellValueJustNumber);\r\nexport const CellValueDetailedType = Object.assign(Object.assign({}, CellValueNoNumber), NumberType);\r\nexport const CellValueTypeOrd = (arg) => {\r\n    switch (arg) {\r\n        case CellValueType.EMPTY:\r\n            return 0;\r\n        case CellValueType.NUMBER:\r\n            return 1;\r\n        case CellValueType.STRING:\r\n            return 2;\r\n        case CellValueType.BOOLEAN:\r\n            return 3;\r\n        case CellValueType.ERROR:\r\n            return 4;\r\n    }\r\n    throw new Error('Cell value not computed');\r\n};\r\nexport const getCellValueType = (cellValue) => {\r\n    if (cellValue === EmptyValue) {\r\n        return CellValueType.EMPTY;\r\n    }\r\n    if (cellValue instanceof CellError || cellValue instanceof SimpleRangeValue) {\r\n        return CellValueType.ERROR;\r\n    }\r\n    if (typeof cellValue === 'string') {\r\n        return CellValueType.STRING;\r\n    }\r\n    else if (isExtendedNumber(cellValue)) {\r\n        return CellValueType.NUMBER;\r\n    }\r\n    else if (typeof cellValue === 'boolean') {\r\n        return CellValueType.BOOLEAN;\r\n    }\r\n    throw new Error('Cell value not computed');\r\n};\r\nexport const getCellValueDetailedType = (cellValue) => {\r\n    if (isExtendedNumber(cellValue)) {\r\n        return getTypeOfExtendedNumber(cellValue);\r\n    }\r\n    else {\r\n        return getCellValueType(cellValue);\r\n    }\r\n};\r\nexport const getCellValueFormat = (cellValue) => {\r\n    if (isExtendedNumber(cellValue)) {\r\n        return getFormatOfExtendedNumber(cellValue);\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n};\r\nexport class CellError {\r\n    constructor(type, message, root) {\r\n        this.type = type;\r\n        this.message = message;\r\n        this.root = root;\r\n    }\r\n    static parsingError() {\r\n        return new CellError(ErrorType.ERROR, ErrorMessage.ParseError);\r\n    }\r\n    attachRootVertex(vertex) {\r\n        if (this.root === undefined) {\r\n            return new CellError(this.type, this.message, vertex);\r\n        }\r\n        else {\r\n            return this;\r\n        }\r\n    }\r\n}\r\nexport const simpleRowAddress = (sheet, row) => ({ sheet, row });\r\nexport const invalidSimpleRowAddress = (address) => (address.row < 0);\r\nexport const simpleColumnAddress = (sheet, col) => ({ sheet, col });\r\nexport const invalidSimpleColumnAddress = (address) => (address.col < 0);\r\nexport const simpleCellAddress = (sheet, col, row) => ({ sheet, col, row });\r\nexport const invalidSimpleCellAddress = (address) => (address.col < 0 || address.row < 0);\r\nexport const movedSimpleCellAddress = (address, toSheet, toRight, toBottom) => {\r\n    return simpleCellAddress(toSheet, address.col + toRight, address.row + toBottom);\r\n};\r\nexport const addressKey = (address) => `${address.sheet},${address.row},${address.col}`;\r\nexport function isSimpleCellAddress(obj) {\r\n    if (obj && (typeof obj === 'object' || typeof obj === 'function')) {\r\n        return 'col' in obj && typeof obj.col === 'number' && 'row' in obj && typeof obj.row === 'number' && 'sheet' in obj && typeof obj.sheet === 'number';\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nexport const absoluteSheetReference = (address, baseAddress) => {\r\n    var _a;\r\n    return (_a = address.sheet) !== null && _a !== void 0 ? _a : baseAddress.sheet;\r\n};\r\nexport const equalSimpleCellAddress = (left, right) => {\r\n    return left.sheet === right.sheet && left.col === right.col && left.row === right.row;\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport { DependencyGraph } from './DependencyGraph';\r\nexport { AddressMapping } from './AddressMapping/AddressMapping';\r\nexport { Graph } from './Graph';\r\nexport { RangeMapping } from './RangeMapping';\r\nexport { SheetMapping } from './SheetMapping';\r\nexport { ArrayMapping } from './ArrayMapping';\r\nexport { FormulaCellVertex } from './FormulaCellVertex';\r\nexport { EmptyCellVertex } from './EmptyCellVertex';\r\nexport { ValueCellVertex } from './ValueCellVertex';\r\nexport { ParsingErrorVertex } from './ParsingErrorVertex';\r\nexport { RangeVertex } from './RangeVertex';\r\nexport { SparseStrategy } from './AddressMapping/SparseStrategy';\r\nexport { DenseStrategy } from './AddressMapping/DenseStrategy';\r\nexport { ArrayVertex } from './FormulaCellVertex';\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange, simpleCellRange } from '../AbsoluteCellRange';\r\nimport { absolutizeDependencies } from '../absolutizeDependencies';\r\nimport { CellError, ErrorType, isSimpleCellAddress, simpleCellAddress } from '../Cell';\r\nimport { ContentChanges } from '../ContentChanges';\r\nimport { ErrorMessage } from '../error-message';\r\nimport { EmptyValue, getRawValue } from '../interpreter/InterpreterValue';\r\nimport { SimpleRangeValue } from '../SimpleRangeValue';\r\nimport { collectDependencies, NamedExpressionDependency } from '../parser';\r\nimport { ColumnsSpan, RowsSpan } from '../Span';\r\nimport { StatType } from '../statistics';\r\nimport { ArrayVertex, EmptyCellVertex, FormulaCellVertex, RangeVertex, ValueCellVertex, } from './';\r\nimport { AddressMapping } from './AddressMapping/AddressMapping';\r\nimport { ArrayMapping } from './ArrayMapping';\r\nimport { collectAddressesDependentToRange } from './collectAddressesDependentToRange';\r\nimport { FormulaVertex } from './FormulaCellVertex';\r\nimport { Graph } from './Graph';\r\nimport { RangeMapping } from './RangeMapping';\r\nimport { SheetMapping } from './SheetMapping';\r\nexport class DependencyGraph {\r\n    constructor(addressMapping, rangeMapping, sheetMapping, arrayMapping, stats, lazilyTransformingAstService, functionRegistry, namedExpressions) {\r\n        this.addressMapping = addressMapping;\r\n        this.rangeMapping = rangeMapping;\r\n        this.sheetMapping = sheetMapping;\r\n        this.arrayMapping = arrayMapping;\r\n        this.stats = stats;\r\n        this.lazilyTransformingAstService = lazilyTransformingAstService;\r\n        this.functionRegistry = functionRegistry;\r\n        this.namedExpressions = namedExpressions;\r\n        this.changes = ContentChanges.empty();\r\n        this.dependencyQueryAddresses = (vertex) => {\r\n            if (vertex instanceof RangeVertex) {\r\n                return this.rangeDependencyQuery(vertex).map(([address, _]) => address);\r\n            }\r\n            else {\r\n                const dependenciesResult = this.formulaDependencyQuery(vertex);\r\n                if (dependenciesResult !== undefined) {\r\n                    const [address, dependencies] = dependenciesResult;\r\n                    return dependencies.map((dependency) => {\r\n                        if (dependency instanceof NamedExpressionDependency) {\r\n                            return this.namedExpressions.namedExpressionOrPlaceholder(dependency.name, address.sheet).address;\r\n                        }\r\n                        else if (isSimpleCellAddress(dependency)) {\r\n                            return dependency;\r\n                        }\r\n                        else {\r\n                            return simpleCellRange(dependency.start, dependency.end);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    return [];\r\n                }\r\n            }\r\n        };\r\n        this.dependencyQueryVertices = (vertex) => {\r\n            if (vertex instanceof RangeVertex) {\r\n                return this.rangeDependencyQuery(vertex);\r\n            }\r\n            else {\r\n                const dependenciesResult = this.formulaDependencyQuery(vertex);\r\n                if (dependenciesResult !== undefined) {\r\n                    const [address, dependencies] = dependenciesResult;\r\n                    return dependencies.map((dependency) => {\r\n                        if (dependency instanceof AbsoluteCellRange) {\r\n                            return [dependency.start, this.rangeMapping.fetchRange(dependency.start, dependency.end)];\r\n                        }\r\n                        else if (dependency instanceof NamedExpressionDependency) {\r\n                            const namedExpression = this.namedExpressions.namedExpressionOrPlaceholder(dependency.name, address.sheet);\r\n                            return [namedExpression.address, this.addressMapping.fetchCell(namedExpression.address)];\r\n                        }\r\n                        else {\r\n                            return [dependency, this.addressMapping.fetchCell(dependency)];\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    return [];\r\n                }\r\n            }\r\n        };\r\n        this.rangeDependencyQuery = (vertex) => {\r\n            const allDeps = [];\r\n            const { smallerRangeVertex, restRange } = this.rangeMapping.findSmallerRange(vertex.range); //checking whether this range was splitted by bruteForce or not\r\n            let range;\r\n            if (smallerRangeVertex !== undefined && this.graph.adjacentNodes(smallerRangeVertex).has(vertex)) {\r\n                range = restRange;\r\n                allDeps.push([new AbsoluteCellRange(smallerRangeVertex.start, smallerRangeVertex.end), smallerRangeVertex]);\r\n            }\r\n            else { //did we ever need to use full range\r\n                range = vertex.range;\r\n            }\r\n            for (const address of range.addresses(this)) {\r\n                const cell = this.addressMapping.getCell(address);\r\n                if (cell !== undefined) {\r\n                    allDeps.push([address, cell]);\r\n                }\r\n            }\r\n            return allDeps;\r\n        };\r\n        this.formulaDependencyQuery = (vertex) => {\r\n            let formula;\r\n            let address;\r\n            if (vertex instanceof FormulaVertex) {\r\n                address = vertex.getAddress(this.lazilyTransformingAstService);\r\n                formula = vertex.getFormula(this.lazilyTransformingAstService);\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n            const deps = collectDependencies(formula, this.functionRegistry);\r\n            return [address, absolutizeDependencies(deps, address)];\r\n        };\r\n        this.graph = new Graph(this.dependencyQueryVertices);\r\n    }\r\n    /**\r\n     * Invariants:\r\n     * - empty cell has associated EmptyCellVertex if and only if it is a dependency (possibly indirect, through range) to some formula\r\n     */\r\n    static buildEmpty(lazilyTransformingAstService, config, functionRegistry, namedExpressions, stats) {\r\n        return new DependencyGraph(new AddressMapping(config.chooseAddressMappingPolicy), new RangeMapping(), new SheetMapping(config.translationPackage), new ArrayMapping(), stats, lazilyTransformingAstService, functionRegistry, namedExpressions);\r\n    }\r\n    setFormulaToCell(address, ast, dependencies, size, hasVolatileFunction, hasStructuralChangeFunction) {\r\n        const newVertex = FormulaVertex.fromAst(ast, address, size, this.lazilyTransformingAstService.version());\r\n        this.exchangeOrAddFormulaVertex(newVertex);\r\n        this.processCellDependencies(dependencies, newVertex);\r\n        this.graph.markNodeAsSpecialRecentlyChanged(newVertex);\r\n        if (hasVolatileFunction) {\r\n            this.markAsVolatile(newVertex);\r\n        }\r\n        if (hasStructuralChangeFunction) {\r\n            this.markAsDependentOnStructureChange(newVertex);\r\n        }\r\n        this.correctInfiniteRangesDependency(address);\r\n        return this.getAndClearContentChanges();\r\n    }\r\n    setParsingErrorToCell(address, errorVertex) {\r\n        const vertex = this.shrinkPossibleArrayAndGetCell(address);\r\n        this.exchangeOrAddGraphNode(vertex, errorVertex);\r\n        this.addressMapping.setCell(address, errorVertex);\r\n        this.graph.markNodeAsSpecialRecentlyChanged(errorVertex);\r\n        this.correctInfiniteRangesDependency(address);\r\n        return this.getAndClearContentChanges();\r\n    }\r\n    setValueToCell(address, value) {\r\n        const vertex = this.shrinkPossibleArrayAndGetCell(address);\r\n        if (vertex instanceof ArrayVertex) {\r\n            this.arrayMapping.removeArray(vertex.getRange());\r\n        }\r\n        if (vertex instanceof ValueCellVertex) {\r\n            const oldValues = vertex.getValues();\r\n            if (oldValues.rawValue !== value.rawValue) {\r\n                vertex.setValues(value);\r\n                this.graph.markNodeAsSpecialRecentlyChanged(vertex);\r\n            }\r\n        }\r\n        else {\r\n            const newVertex = new ValueCellVertex(value.parsedValue, value.rawValue);\r\n            this.exchangeOrAddGraphNode(vertex, newVertex);\r\n            this.addressMapping.setCell(address, newVertex);\r\n            this.graph.markNodeAsSpecialRecentlyChanged(newVertex);\r\n        }\r\n        this.correctInfiniteRangesDependency(address);\r\n        return this.getAndClearContentChanges();\r\n    }\r\n    setCellEmpty(address) {\r\n        const vertex = this.shrinkPossibleArrayAndGetCell(address);\r\n        if (vertex === undefined) {\r\n            return ContentChanges.empty();\r\n        }\r\n        if (this.graph.adjacentNodes(vertex).size > 0) {\r\n            const emptyVertex = new EmptyCellVertex();\r\n            this.exchangeGraphNode(vertex, emptyVertex);\r\n            if (this.graph.adjacentNodesCount(emptyVertex) === 0) {\r\n                this.removeVertex(emptyVertex);\r\n                this.addressMapping.removeCell(address);\r\n            }\r\n            else {\r\n                this.graph.markNodeAsSpecialRecentlyChanged(emptyVertex);\r\n                this.addressMapping.setCell(address, emptyVertex);\r\n            }\r\n        }\r\n        else {\r\n            this.removeVertex(vertex);\r\n            this.addressMapping.removeCell(address);\r\n        }\r\n        return this.getAndClearContentChanges();\r\n    }\r\n    ensureThatVertexIsNonArrayCellVertex(vertex) {\r\n        if (vertex instanceof ArrayVertex) {\r\n            throw new Error('Illegal operation');\r\n        }\r\n    }\r\n    clearRecentlyChangedVertices() {\r\n        this.graph.clearSpecialNodesRecentlyChanged();\r\n    }\r\n    verticesToRecompute() {\r\n        return new Set([...this.graph.specialNodesRecentlyChanged, ...this.volatileVertices()]);\r\n    }\r\n    processCellDependencies(cellDependencies, endVertex) {\r\n        cellDependencies.forEach((dep) => {\r\n            if (dep instanceof AbsoluteCellRange) {\r\n                const range = dep;\r\n                let rangeVertex = this.getRange(range.start, range.end);\r\n                if (rangeVertex === undefined) {\r\n                    rangeVertex = new RangeVertex(range);\r\n                    this.rangeMapping.setRange(rangeVertex);\r\n                }\r\n                this.graph.addNode(rangeVertex);\r\n                if (!range.isFinite()) {\r\n                    this.graph.markNodeAsInfiniteRange(rangeVertex);\r\n                }\r\n                const { smallerRangeVertex, restRange } = this.rangeMapping.findSmallerRange(range);\r\n                if (smallerRangeVertex !== undefined) {\r\n                    this.graph.addEdge(smallerRangeVertex, rangeVertex);\r\n                    if (rangeVertex.bruteForce) {\r\n                        rangeVertex.bruteForce = false;\r\n                        for (const cellFromRange of range.addresses(this)) { //if we ever switch heuristic to processing by sorted sizes, this would be unnecessary\r\n                            this.graph.removeEdge(this.fetchCell(cellFromRange), rangeVertex);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    rangeVertex.bruteForce = true;\r\n                }\r\n                const array = this.arrayMapping.getArray(restRange);\r\n                if (array !== undefined) {\r\n                    this.graph.addEdge(array, rangeVertex);\r\n                }\r\n                else {\r\n                    for (const cellFromRange of restRange.addresses(this)) {\r\n                        this.graph.addEdge(this.fetchCellOrCreateEmpty(cellFromRange), rangeVertex);\r\n                    }\r\n                }\r\n                this.graph.addEdge(rangeVertex, endVertex);\r\n                if (range.isFinite()) {\r\n                    this.correctInfiniteRangesDependenciesByRangeVertex(rangeVertex);\r\n                }\r\n            }\r\n            else if (dep instanceof NamedExpressionDependency) {\r\n                const sheetOfVertex = endVertex.getAddress(this.lazilyTransformingAstService).sheet;\r\n                const namedExpressionVertex = this.fetchNamedExpressionVertex(dep.name, sheetOfVertex);\r\n                this.graph.addEdge(namedExpressionVertex, endVertex);\r\n            }\r\n            else {\r\n                this.graph.addEdge(this.fetchCellOrCreateEmpty(dep), endVertex);\r\n            }\r\n        });\r\n    }\r\n    fetchNamedExpressionVertex(expressionName, sheetId) {\r\n        const namedExpression = this.namedExpressions.namedExpressionOrPlaceholder(expressionName, sheetId);\r\n        return this.fetchCellOrCreateEmpty(namedExpression.address);\r\n    }\r\n    exchangeNode(addressFrom, addressTo) {\r\n        const vertexFrom = this.fetchCellOrCreateEmpty(addressFrom);\r\n        const vertexTo = this.fetchCellOrCreateEmpty(addressTo);\r\n        this.addressMapping.removeCell(addressFrom);\r\n        this.exchangeGraphNode(vertexFrom, vertexTo);\r\n    }\r\n    correctInfiniteRangesDependency(address) {\r\n        let vertex = undefined;\r\n        for (const range of this.graph.infiniteRanges) {\r\n            const infiniteRangeVertex = range;\r\n            if (infiniteRangeVertex.range.addressInRange(address)) {\r\n                vertex = vertex !== null && vertex !== void 0 ? vertex : this.fetchCellOrCreateEmpty(address);\r\n                this.graph.addEdge(vertex, infiniteRangeVertex);\r\n            }\r\n        }\r\n    }\r\n    fetchCellOrCreateEmpty(address) {\r\n        let vertex = this.addressMapping.getCell(address);\r\n        if (vertex === undefined) {\r\n            vertex = new EmptyCellVertex();\r\n            this.graph.addNode(vertex);\r\n            this.addressMapping.setCell(address, vertex);\r\n        }\r\n        return vertex;\r\n    }\r\n    removeRows(removedRows) {\r\n        this.stats.measure(StatType.ADJUSTING_GRAPH, () => {\r\n            for (const [address, vertex] of this.addressMapping.entriesFromRowsSpan(removedRows)) {\r\n                for (const adjacentNode of this.graph.adjacentNodes(vertex)) {\r\n                    this.graph.markNodeAsSpecialRecentlyChanged(adjacentNode);\r\n                }\r\n                if (vertex instanceof ArrayVertex) {\r\n                    if (vertex.isLeftCorner(address)) {\r\n                        this.shrinkArrayToCorner(vertex);\r\n                        this.arrayMapping.removeArray(vertex.getRange());\r\n                    }\r\n                    else {\r\n                        continue;\r\n                    }\r\n                }\r\n                this.removeVertex(vertex);\r\n            }\r\n        });\r\n        this.stats.measure(StatType.ADJUSTING_ADDRESS_MAPPING, () => {\r\n            this.addressMapping.removeRows(removedRows);\r\n        });\r\n        const affectedArrays = this.stats.measure(StatType.ADJUSTING_RANGES, () => {\r\n            const affectedRanges = this.truncateRanges(removedRows, address => address.row);\r\n            return this.getArrayVerticesRelatedToRanges(affectedRanges);\r\n        });\r\n        this.stats.measure(StatType.ADJUSTING_ARRAY_MAPPING, () => {\r\n            this.fixArraysAfterRemovingRows(removedRows.sheet, removedRows.rowStart, removedRows.numberOfRows);\r\n        });\r\n        this.addStructuralNodesToChangeSet();\r\n        return {\r\n            affectedArrays,\r\n            contentChanges: this.getAndClearContentChanges()\r\n        };\r\n    }\r\n    removeSheet(removedSheetId) {\r\n        this.clearSheet(removedSheetId);\r\n        for (const [adr, vertex] of this.addressMapping.sheetEntries(removedSheetId)) {\r\n            for (const adjacentNode of this.graph.adjacentNodes(vertex)) {\r\n                this.graph.markNodeAsSpecialRecentlyChanged(adjacentNode);\r\n            }\r\n            this.removeVertex(vertex);\r\n            this.addressMapping.removeCell(adr);\r\n        }\r\n        this.stats.measure(StatType.ADJUSTING_RANGES, () => {\r\n            const rangesToRemove = this.rangeMapping.removeRangesInSheet(removedSheetId);\r\n            for (const range of rangesToRemove) {\r\n                this.removeVertex(range);\r\n            }\r\n            this.stats.measure(StatType.ADJUSTING_ADDRESS_MAPPING, () => {\r\n                this.addressMapping.removeSheet(removedSheetId);\r\n            });\r\n        });\r\n    }\r\n    clearSheet(sheetId) {\r\n        const arrays = new Set();\r\n        for (const [address, vertex] of this.addressMapping.sheetEntries(sheetId)) {\r\n            if (vertex instanceof ArrayVertex) {\r\n                arrays.add(vertex);\r\n            }\r\n            else {\r\n                this.setCellEmpty(address);\r\n            }\r\n        }\r\n        for (const array of arrays.values()) {\r\n            this.setArrayEmpty(array);\r\n        }\r\n        this.addStructuralNodesToChangeSet();\r\n    }\r\n    removeColumns(removedColumns) {\r\n        this.stats.measure(StatType.ADJUSTING_GRAPH, () => {\r\n            for (const [address, vertex] of this.addressMapping.entriesFromColumnsSpan(removedColumns)) {\r\n                for (const adjacentNode of this.graph.adjacentNodes(vertex)) {\r\n                    this.graph.markNodeAsSpecialRecentlyChanged(adjacentNode);\r\n                }\r\n                if (vertex instanceof ArrayVertex) {\r\n                    if (vertex.isLeftCorner(address)) {\r\n                        this.shrinkArrayToCorner(vertex);\r\n                        this.arrayMapping.removeArray(vertex.getRange());\r\n                    }\r\n                    else {\r\n                        continue;\r\n                    }\r\n                }\r\n                this.removeVertex(vertex);\r\n            }\r\n        });\r\n        this.stats.measure(StatType.ADJUSTING_ADDRESS_MAPPING, () => {\r\n            this.addressMapping.removeColumns(removedColumns);\r\n        });\r\n        const affectedArrays = this.stats.measure(StatType.ADJUSTING_RANGES, () => {\r\n            const affectedRanges = this.truncateRanges(removedColumns, address => address.col);\r\n            return this.getArrayVerticesRelatedToRanges(affectedRanges);\r\n        });\r\n        this.stats.measure(StatType.ADJUSTING_ARRAY_MAPPING, () => {\r\n            return this.fixArraysAfterRemovingColumns(removedColumns.sheet, removedColumns.columnStart, removedColumns.numberOfColumns);\r\n        });\r\n        this.addStructuralNodesToChangeSet();\r\n        return {\r\n            affectedArrays,\r\n            contentChanges: this.getAndClearContentChanges(),\r\n        };\r\n    }\r\n    addRows(addedRows) {\r\n        this.stats.measure(StatType.ADJUSTING_ADDRESS_MAPPING, () => {\r\n            this.addressMapping.addRows(addedRows.sheet, addedRows.rowStart, addedRows.numberOfRows);\r\n        });\r\n        const affectedArrays = this.stats.measure(StatType.ADJUSTING_RANGES, () => {\r\n            const result = this.rangeMapping.moveAllRangesInSheetAfterRowByRows(addedRows.sheet, addedRows.rowStart, addedRows.numberOfRows);\r\n            this.fixRangesWhenAddingRows(addedRows.sheet, addedRows.rowStart, addedRows.numberOfRows);\r\n            return this.getArrayVerticesRelatedToRanges(result.verticesWithChangedSize);\r\n        });\r\n        this.stats.measure(StatType.ADJUSTING_ARRAY_MAPPING, () => {\r\n            this.fixArraysAfterAddingRow(addedRows.sheet, addedRows.rowStart, addedRows.numberOfRows);\r\n        });\r\n        for (const vertex of this.addressMapping.verticesFromRowsSpan(addedRows)) {\r\n            this.graph.markNodeAsSpecialRecentlyChanged(vertex);\r\n        }\r\n        this.addStructuralNodesToChangeSet();\r\n        return { affectedArrays };\r\n    }\r\n    addColumns(addedColumns) {\r\n        this.stats.measure(StatType.ADJUSTING_ADDRESS_MAPPING, () => {\r\n            this.addressMapping.addColumns(addedColumns.sheet, addedColumns.columnStart, addedColumns.numberOfColumns);\r\n        });\r\n        const affectedArrays = this.stats.measure(StatType.ADJUSTING_RANGES, () => {\r\n            const result = this.rangeMapping.moveAllRangesInSheetAfterColumnByColumns(addedColumns.sheet, addedColumns.columnStart, addedColumns.numberOfColumns);\r\n            this.fixRangesWhenAddingColumns(addedColumns.sheet, addedColumns.columnStart, addedColumns.numberOfColumns);\r\n            return this.getArrayVerticesRelatedToRanges(result.verticesWithChangedSize);\r\n        });\r\n        this.stats.measure(StatType.ADJUSTING_ARRAY_MAPPING, () => {\r\n            return this.fixArraysAfterAddingColumn(addedColumns.sheet, addedColumns.columnStart, addedColumns.numberOfColumns);\r\n        });\r\n        for (const vertex of this.addressMapping.verticesFromColumnsSpan(addedColumns)) {\r\n            this.graph.markNodeAsSpecialRecentlyChanged(vertex);\r\n        }\r\n        this.addStructuralNodesToChangeSet();\r\n        return { affectedArrays, contentChanges: this.getAndClearContentChanges() };\r\n    }\r\n    ensureNoArrayInRange(range) {\r\n        if (this.arrayMapping.isFormulaArrayInRange(range)) {\r\n            throw Error('It is not possible to move / replace cells with array');\r\n        }\r\n    }\r\n    isThereSpaceForArray(arrayVertex) {\r\n        const range = arrayVertex.getRangeOrUndef();\r\n        if (range === undefined) {\r\n            return false;\r\n        }\r\n        for (const address of range.addresses(this)) {\r\n            const vertexUnderAddress = this.addressMapping.getCell(address);\r\n            if (vertexUnderAddress !== undefined && !(vertexUnderAddress instanceof EmptyCellVertex) && vertexUnderAddress !== arrayVertex) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    moveCells(sourceRange, toRight, toBottom, toSheet) {\r\n        for (const sourceAddress of sourceRange.addressesWithDirection(toRight, toBottom, this)) {\r\n            const targetAddress = simpleCellAddress(toSheet, sourceAddress.col + toRight, sourceAddress.row + toBottom);\r\n            let sourceVertex = this.addressMapping.getCell(sourceAddress);\r\n            const targetVertex = this.addressMapping.getCell(targetAddress);\r\n            this.addressMapping.removeCell(sourceAddress);\r\n            if (sourceVertex !== undefined) {\r\n                this.graph.markNodeAsSpecialRecentlyChanged(sourceVertex);\r\n                this.addressMapping.setCell(targetAddress, sourceVertex);\r\n                let emptyVertex = undefined;\r\n                for (const adjacentNode of this.graph.adjacentNodes(sourceVertex)) {\r\n                    if (adjacentNode instanceof RangeVertex && !sourceRange.containsRange(adjacentNode.range)) {\r\n                        emptyVertex = emptyVertex !== null && emptyVertex !== void 0 ? emptyVertex : this.fetchCellOrCreateEmpty(sourceAddress);\r\n                        this.graph.addEdge(emptyVertex, adjacentNode);\r\n                        this.graph.removeEdge(sourceVertex, adjacentNode);\r\n                    }\r\n                }\r\n                if (emptyVertex) {\r\n                    this.graph.markNodeAsSpecialRecentlyChanged(emptyVertex);\r\n                    this.addressMapping.setCell(sourceAddress, emptyVertex);\r\n                }\r\n            }\r\n            if (targetVertex !== undefined) {\r\n                if (sourceVertex === undefined) {\r\n                    this.addressMapping.removeCell(targetAddress);\r\n                }\r\n                for (const adjacentNode of this.graph.adjacentNodes(targetVertex)) {\r\n                    sourceVertex = sourceVertex !== null && sourceVertex !== void 0 ? sourceVertex : this.fetchCellOrCreateEmpty(targetAddress);\r\n                    this.graph.addEdge(sourceVertex, adjacentNode);\r\n                    this.graph.markNodeAsSpecialRecentlyChanged(sourceVertex);\r\n                }\r\n                this.removeVertex(targetVertex);\r\n            }\r\n        }\r\n        for (const rangeVertex of this.rangeMapping.rangeVerticesContainedInRange(sourceRange)) {\r\n            for (const adjacentNode of this.graph.adjacentNodes(rangeVertex)) {\r\n                if (adjacentNode instanceof RangeVertex && !sourceRange.containsRange(adjacentNode.range)) {\r\n                    this.graph.removeEdge(rangeVertex, adjacentNode);\r\n                    for (const address of rangeVertex.range.addresses(this)) {\r\n                        const newEmptyVertex = this.fetchCellOrCreateEmpty(address);\r\n                        this.graph.addEdge(newEmptyVertex, adjacentNode);\r\n                        this.addressMapping.setCell(address, newEmptyVertex);\r\n                        this.graph.markNodeAsSpecialRecentlyChanged(newEmptyVertex);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.rangeMapping.moveRangesInsideSourceRange(sourceRange, toRight, toBottom, toSheet);\r\n    }\r\n    setArrayEmpty(arrayVertex) {\r\n        const arrayRange = AbsoluteCellRange.spanFrom(arrayVertex.getAddress(this.lazilyTransformingAstService), arrayVertex.width, arrayVertex.height);\r\n        const adjacentNodes = this.graph.adjacentNodes(arrayVertex);\r\n        for (const address of arrayRange.addresses(this)) {\r\n            this.addressMapping.removeCell(address);\r\n        }\r\n        for (const adjacentNode of adjacentNodes.values()) {\r\n            const nodeDependencies = collectAddressesDependentToRange(this.functionRegistry, adjacentNode, arrayVertex.getRange(), this.lazilyTransformingAstService, this);\r\n            for (const address of nodeDependencies) {\r\n                const vertex = this.fetchCellOrCreateEmpty(address);\r\n                this.graph.addEdge(vertex, adjacentNode);\r\n            }\r\n            if (nodeDependencies.length > 0) {\r\n                this.graph.markNodeAsSpecialRecentlyChanged(adjacentNode);\r\n            }\r\n        }\r\n        this.removeVertex(arrayVertex);\r\n        this.arrayMapping.removeArray(arrayVertex.getRange());\r\n    }\r\n    addVertex(address, vertex) {\r\n        this.graph.addNode(vertex);\r\n        this.addressMapping.setCell(address, vertex);\r\n    }\r\n    addArrayVertex(address, vertex) {\r\n        this.graph.addNode(vertex);\r\n        this.setAddressMappingForArrayVertex(vertex, address);\r\n    }\r\n    *arrayFormulaNodes() {\r\n        for (const vertex of this.graph.nodes) {\r\n            if (vertex instanceof ArrayVertex) {\r\n                yield vertex;\r\n            }\r\n        }\r\n    }\r\n    *entriesFromRowsSpan(rowsSpan) {\r\n        yield* this.addressMapping.entriesFromRowsSpan(rowsSpan);\r\n    }\r\n    *entriesFromColumnsSpan(columnsSpan) {\r\n        yield* this.addressMapping.entriesFromColumnsSpan(columnsSpan);\r\n    }\r\n    existsVertex(address) {\r\n        return this.addressMapping.has(address);\r\n    }\r\n    fetchCell(address) {\r\n        return this.addressMapping.fetchCell(address);\r\n    }\r\n    getCell(address) {\r\n        return this.addressMapping.getCell(address);\r\n    }\r\n    getCellValue(address) {\r\n        return this.addressMapping.getCellValue(address);\r\n    }\r\n    getRawValue(address) {\r\n        return this.addressMapping.getRawValue(address);\r\n    }\r\n    getScalarValue(address) {\r\n        const value = this.addressMapping.getCellValue(address);\r\n        if (value instanceof SimpleRangeValue) {\r\n            return new CellError(ErrorType.VALUE, ErrorMessage.ScalarExpected);\r\n        }\r\n        return value;\r\n    }\r\n    existsEdge(fromNode, toNode) {\r\n        return this.graph.existsEdge(fromNode, toNode);\r\n    }\r\n    getSheetId(sheetName) {\r\n        return this.sheetMapping.fetch(sheetName);\r\n    }\r\n    getSheetHeight(sheet) {\r\n        return this.addressMapping.getHeight(sheet);\r\n    }\r\n    getSheetWidth(sheet) {\r\n        return this.addressMapping.getWidth(sheet);\r\n    }\r\n    getArray(range) {\r\n        return this.arrayMapping.getArray(range);\r\n    }\r\n    setArray(range, vertex) {\r\n        this.arrayMapping.setArray(range, vertex);\r\n    }\r\n    getRange(start, end) {\r\n        return this.rangeMapping.getRange(start, end);\r\n    }\r\n    topSortWithScc() {\r\n        return this.graph.topSortWithScc();\r\n    }\r\n    markAsVolatile(vertex) {\r\n        this.graph.markNodeAsSpecial(vertex);\r\n    }\r\n    markAsDependentOnStructureChange(vertex) {\r\n        this.graph.markNodeAsChangingWithStructure(vertex);\r\n    }\r\n    forceApplyPostponedTransformations() {\r\n        for (const vertex of this.graph.nodes.values()) {\r\n            if (vertex instanceof FormulaCellVertex) {\r\n                vertex.ensureRecentData(this.lazilyTransformingAstService);\r\n            }\r\n        }\r\n    }\r\n    volatileVertices() {\r\n        return this.graph.specialNodes;\r\n    }\r\n    getArrayVerticesRelatedToRanges(ranges) {\r\n        const arrayVertices = ranges.map(range => {\r\n            if (this.graph.hasNode(range)) {\r\n                return Array.from(this.graph.adjacentNodes(range)).filter(node => node instanceof ArrayVertex);\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        });\r\n        return new Set(...arrayVertices);\r\n    }\r\n    *rawValuesFromRange(range) {\r\n        for (const address of range.addresses(this)) {\r\n            const value = this.getScalarValue(address);\r\n            if (value !== EmptyValue) {\r\n                yield [getRawValue(value), address];\r\n            }\r\n        }\r\n    }\r\n    *entriesFromRange(range) {\r\n        for (const address of range.addresses(this)) {\r\n            yield [address, this.getCell(address)];\r\n        }\r\n    }\r\n    exchangeGraphNode(oldNode, newNode) {\r\n        this.graph.addNode(newNode);\r\n        const adjNodesStored = this.graph.adjacentNodes(oldNode);\r\n        this.removeVertex(oldNode);\r\n        adjNodesStored.forEach((adjacentNode) => {\r\n            if (this.graph.hasNode(adjacentNode)) {\r\n                this.graph.addEdge(newNode, adjacentNode);\r\n            }\r\n        });\r\n    }\r\n    exchangeOrAddGraphNode(oldNode, newNode) {\r\n        if (oldNode) {\r\n            this.exchangeGraphNode(oldNode, newNode);\r\n        }\r\n        else {\r\n            this.graph.addNode(newNode);\r\n        }\r\n    }\r\n    computeListOfValuesInRange(range) {\r\n        const values = [];\r\n        for (const cellFromRange of range.addresses(this)) {\r\n            const value = this.getScalarValue(cellFromRange);\r\n            values.push(value);\r\n        }\r\n        return values;\r\n    }\r\n    shrinkArrayToCorner(array) {\r\n        this.cleanAddressMappingUnderArray(array);\r\n        for (const adjacentVertex of this.adjacentArrayVertices(array)) {\r\n            let relevantDependencies;\r\n            if (adjacentVertex instanceof FormulaVertex) {\r\n                relevantDependencies = this.formulaDirectDependenciesToArray(adjacentVertex, array);\r\n            }\r\n            else {\r\n                relevantDependencies = this.rangeDirectDependenciesToArray(adjacentVertex, array);\r\n            }\r\n            let dependentToCorner = false;\r\n            for (const [address, vertex] of relevantDependencies) {\r\n                if (array.isLeftCorner(address)) {\r\n                    dependentToCorner = true;\r\n                }\r\n                this.graph.addEdge(vertex, adjacentVertex);\r\n                this.graph.markNodeAsSpecialRecentlyChanged(vertex);\r\n            }\r\n            if (!dependentToCorner) {\r\n                this.graph.removeEdge(array, adjacentVertex);\r\n            }\r\n        }\r\n        this.graph.markNodeAsSpecialRecentlyChanged(array);\r\n    }\r\n    isArrayInternalCell(address) {\r\n        const vertex = this.getCell(address);\r\n        return vertex instanceof ArrayVertex && !vertex.isLeftCorner(address);\r\n    }\r\n    getAndClearContentChanges() {\r\n        const changes = this.changes;\r\n        this.changes = ContentChanges.empty();\r\n        return changes;\r\n    }\r\n    getAdjacentNodesAddresses(inputVertex) {\r\n        const deps = this.graph.adjacentNodes(inputVertex);\r\n        const ret = [];\r\n        deps.forEach((vertex) => {\r\n            const castVertex = vertex;\r\n            if (castVertex instanceof RangeVertex) {\r\n                ret.push(simpleCellRange(castVertex.start, castVertex.end));\r\n            }\r\n            else {\r\n                ret.push(castVertex.getAddress(this.lazilyTransformingAstService));\r\n            }\r\n        });\r\n        return ret;\r\n    }\r\n    correctInfiniteRangesDependenciesByRangeVertex(vertex) {\r\n        for (const range of this.graph.infiniteRanges) {\r\n            const infiniteRangeVertex = range;\r\n            const intersection = vertex.range.intersectionWith(infiniteRangeVertex.range);\r\n            if (intersection === undefined) {\r\n                continue;\r\n            }\r\n            for (const address of intersection.addresses(this)) {\r\n                this.graph.addEdge(this.fetchCellOrCreateEmpty(address), range);\r\n            }\r\n        }\r\n    }\r\n    cleanAddressMappingUnderArray(vertex) {\r\n        const arrayRange = vertex.getRange();\r\n        for (const address of arrayRange.addresses(this)) {\r\n            const oldValue = vertex.getArrayCellValue(address);\r\n            if (this.getCell(address) === vertex) {\r\n                if (vertex.isLeftCorner(address)) {\r\n                    this.changes.addChange(new CellError(ErrorType.REF), address, oldValue);\r\n                }\r\n                else {\r\n                    this.addressMapping.removeCell(address);\r\n                    this.changes.addChange(EmptyValue, address, oldValue);\r\n                }\r\n            }\r\n            else {\r\n                this.changes.addChange(EmptyValue, address, oldValue);\r\n            }\r\n        }\r\n    }\r\n    *formulaDirectDependenciesToArray(vertex, array) {\r\n        var _a;\r\n        const [, formulaDependencies] = (_a = this.formulaDependencyQuery(vertex)) !== null && _a !== void 0 ? _a : [];\r\n        if (formulaDependencies === undefined) {\r\n            return;\r\n        }\r\n        for (const dependency of formulaDependencies) {\r\n            if (dependency instanceof NamedExpressionDependency || dependency instanceof AbsoluteCellRange) {\r\n                continue;\r\n            }\r\n            if (array.getRange().addressInRange(dependency)) {\r\n                const vertex = this.fetchCellOrCreateEmpty(dependency);\r\n                yield [dependency, vertex];\r\n            }\r\n        }\r\n    }\r\n    *rangeDirectDependenciesToArray(vertex, array) {\r\n        const { restRange: range } = this.rangeMapping.findSmallerRange(vertex.range);\r\n        for (const address of range.addresses(this)) {\r\n            if (array.getRange().addressInRange(address)) {\r\n                const cell = this.fetchCellOrCreateEmpty(address);\r\n                yield [address, cell];\r\n            }\r\n        }\r\n    }\r\n    *adjacentArrayVertices(vertex) {\r\n        const adjacentNodes = this.graph.adjacentNodes(vertex);\r\n        for (const item of adjacentNodes) {\r\n            if (item instanceof FormulaVertex || item instanceof RangeVertex) {\r\n                yield item;\r\n            }\r\n        }\r\n    }\r\n    addStructuralNodesToChangeSet() {\r\n        for (const vertex of this.graph.specialNodesStructuralChanges) {\r\n            this.graph.markNodeAsSpecialRecentlyChanged(vertex);\r\n        }\r\n    }\r\n    fixRangesWhenAddingRows(sheet, row, numberOfRows) {\r\n        const originalValues = Array.from(this.rangeMapping.rangesInSheet(sheet));\r\n        for (const rangeVertex of originalValues) {\r\n            if (rangeVertex.range.includesRow(row + numberOfRows)) {\r\n                if (rangeVertex.bruteForce) {\r\n                    const addedSubrangeInThatRange = rangeVertex.range.rangeWithSameWidth(row, numberOfRows);\r\n                    for (const address of addedSubrangeInThatRange.addresses(this)) {\r\n                        this.graph.addEdge(this.fetchCellOrCreateEmpty(address), rangeVertex);\r\n                    }\r\n                }\r\n                else {\r\n                    let currentRangeVertex = rangeVertex;\r\n                    let find = this.rangeMapping.findSmallerRange(currentRangeVertex.range);\r\n                    if (find.smallerRangeVertex !== undefined) {\r\n                        continue;\r\n                    }\r\n                    while (find.smallerRangeVertex === undefined) {\r\n                        const newRangeVertex = new RangeVertex(AbsoluteCellRange.spanFrom(currentRangeVertex.range.start, currentRangeVertex.range.width(), currentRangeVertex.range.height() - 1));\r\n                        this.rangeMapping.setRange(newRangeVertex);\r\n                        this.graph.addNode(newRangeVertex);\r\n                        const restRange = new AbsoluteCellRange(simpleCellAddress(currentRangeVertex.range.start.sheet, currentRangeVertex.range.start.col, currentRangeVertex.range.end.row), currentRangeVertex.range.end);\r\n                        this.addAllFromRange(restRange, currentRangeVertex);\r\n                        this.graph.addEdge(newRangeVertex, currentRangeVertex);\r\n                        currentRangeVertex = newRangeVertex;\r\n                        find = this.rangeMapping.findSmallerRange(currentRangeVertex.range);\r\n                    }\r\n                    this.graph.addEdge(find.smallerRangeVertex, currentRangeVertex);\r\n                    this.addAllFromRange(find.restRange, currentRangeVertex);\r\n                    this.graph.removeEdge(find.smallerRangeVertex, rangeVertex);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addAllFromRange(range, vertex) {\r\n        for (const address of range.addresses(this)) {\r\n            this.graph.addEdge(this.fetchCellOrCreateEmpty(address), vertex);\r\n        }\r\n    }\r\n    fixRangesWhenAddingColumns(sheet, column, numberOfColumns) {\r\n        for (const rangeVertex of this.rangeMapping.rangesInSheet(sheet)) {\r\n            if (rangeVertex.range.includesColumn(column + numberOfColumns)) {\r\n                let subrange;\r\n                if (rangeVertex.bruteForce) {\r\n                    subrange = rangeVertex.range.rangeWithSameHeight(column, numberOfColumns);\r\n                }\r\n                else {\r\n                    subrange = AbsoluteCellRange.spanFrom(simpleCellAddress(sheet, column, rangeVertex.range.end.row), numberOfColumns, 1);\r\n                }\r\n                for (const address of subrange.addresses(this)) {\r\n                    this.graph.addEdge(this.fetchCellOrCreateEmpty(address), rangeVertex);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    exchangeOrAddFormulaVertex(vertex) {\r\n        const address = vertex.getAddress(this.lazilyTransformingAstService);\r\n        const range = AbsoluteCellRange.spanFrom(address, vertex.width, vertex.height);\r\n        const oldNode = this.shrinkPossibleArrayAndGetCell(address);\r\n        if (vertex instanceof ArrayVertex) {\r\n            this.setArray(range, vertex);\r\n        }\r\n        this.exchangeOrAddGraphNode(oldNode, vertex);\r\n        this.addressMapping.setCell(address, vertex);\r\n        if (vertex instanceof ArrayVertex) {\r\n            if (!this.isThereSpaceForArray(vertex)) {\r\n                return;\r\n            }\r\n            for (const cellAddress of range.addresses(this)) {\r\n                if (vertex.isLeftCorner(cellAddress)) {\r\n                    continue;\r\n                }\r\n                const old = this.getCell(cellAddress);\r\n                this.exchangeOrAddGraphNode(old, vertex);\r\n            }\r\n        }\r\n        for (const cellAddress of range.addresses(this)) {\r\n            this.addressMapping.setCell(cellAddress, vertex);\r\n        }\r\n    }\r\n    setAddressMappingForArrayVertex(vertex, formulaAddress) {\r\n        this.addressMapping.setCell(formulaAddress, vertex);\r\n        if (!(vertex instanceof ArrayVertex)) {\r\n            return;\r\n        }\r\n        const range = AbsoluteCellRange.spanFromOrUndef(formulaAddress, vertex.width, vertex.height);\r\n        if (range === undefined) {\r\n            return;\r\n        }\r\n        this.setArray(range, vertex);\r\n        if (!this.isThereSpaceForArray(vertex)) {\r\n            return;\r\n        }\r\n        for (const address of range.addresses(this)) {\r\n            this.addressMapping.setCell(address, vertex);\r\n        }\r\n    }\r\n    truncateRanges(span, coordinate) {\r\n        const { verticesToRemove, verticesToMerge, verticesWithChangedSize } = this.rangeMapping.truncateRanges(span, coordinate);\r\n        for (const [existingVertex, mergedVertex] of verticesToMerge) {\r\n            this.mergeRangeVertices(existingVertex, mergedVertex);\r\n        }\r\n        for (const rangeVertex of verticesToRemove) {\r\n            this.removeVertexAndCleanupDependencies(rangeVertex);\r\n        }\r\n        return verticesWithChangedSize;\r\n    }\r\n    fixArraysAfterAddingRow(sheet, rowStart, numberOfRows) {\r\n        this.arrayMapping.moveArrayVerticesAfterRowByRows(sheet, rowStart, numberOfRows);\r\n        if (rowStart <= 0) {\r\n            return;\r\n        }\r\n        for (const [, array] of this.arrayMapping.arraysInRows(RowsSpan.fromRowStartAndEnd(sheet, rowStart - 1, rowStart - 1))) {\r\n            const arrayRange = array.getRange();\r\n            for (let col = arrayRange.start.col; col <= arrayRange.end.col; ++col) {\r\n                for (let row = rowStart; row <= arrayRange.end.row; ++row) {\r\n                    const destination = simpleCellAddress(sheet, col, row);\r\n                    const source = simpleCellAddress(sheet, col, row + numberOfRows);\r\n                    const value = array.getArrayCellValue(destination);\r\n                    this.addressMapping.moveCell(source, destination);\r\n                    this.changes.addChange(EmptyValue, source, value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    fixArraysAfterRemovingRows(sheet, rowStart, numberOfRows) {\r\n        this.arrayMapping.moveArrayVerticesAfterRowByRows(sheet, rowStart, -numberOfRows);\r\n        if (rowStart <= 0) {\r\n            return;\r\n        }\r\n        for (const [, array] of this.arrayMapping.arraysInRows(RowsSpan.fromRowStartAndEnd(sheet, rowStart - 1, rowStart - 1))) {\r\n            if (this.isThereSpaceForArray(array)) {\r\n                for (const address of array.getRange().addresses(this)) {\r\n                    this.addressMapping.setCell(address, array);\r\n                }\r\n            }\r\n            else {\r\n                this.setNoSpaceIfArray(array);\r\n            }\r\n        }\r\n    }\r\n    fixArraysAfterAddingColumn(sheet, columnStart, numberOfColumns) {\r\n        this.arrayMapping.moveArrayVerticesAfterColumnByColumns(sheet, columnStart, numberOfColumns);\r\n        if (columnStart <= 0) {\r\n            return;\r\n        }\r\n        for (const [, array] of this.arrayMapping.arraysInCols(ColumnsSpan.fromColumnStartAndEnd(sheet, columnStart - 1, columnStart - 1))) {\r\n            const arrayRange = array.getRange();\r\n            for (let row = arrayRange.start.row; row <= arrayRange.end.row; ++row) {\r\n                for (let col = columnStart; col <= arrayRange.end.col; ++col) {\r\n                    const destination = simpleCellAddress(sheet, col, row);\r\n                    const source = simpleCellAddress(sheet, col + numberOfColumns, row);\r\n                    const value = array.getArrayCellValue(destination);\r\n                    this.addressMapping.moveCell(source, destination);\r\n                    this.changes.addChange(EmptyValue, source, value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    fixArraysAfterRemovingColumns(sheet, columnStart, numberOfColumns) {\r\n        this.arrayMapping.moveArrayVerticesAfterColumnByColumns(sheet, columnStart, -numberOfColumns);\r\n        if (columnStart <= 0) {\r\n            return;\r\n        }\r\n        for (const [, array] of this.arrayMapping.arraysInCols(ColumnsSpan.fromColumnStartAndEnd(sheet, columnStart - 1, columnStart - 1))) {\r\n            if (this.isThereSpaceForArray(array)) {\r\n                for (const address of array.getRange().addresses(this)) {\r\n                    this.addressMapping.setCell(address, array);\r\n                }\r\n            }\r\n            else {\r\n                this.setNoSpaceIfArray(array);\r\n            }\r\n        }\r\n    }\r\n    shrinkPossibleArrayAndGetCell(address) {\r\n        const vertex = this.getCell(address);\r\n        if (!(vertex instanceof ArrayVertex)) {\r\n            return vertex;\r\n        }\r\n        this.setNoSpaceIfArray(vertex);\r\n        return this.getCell(address);\r\n    }\r\n    setNoSpaceIfArray(vertex) {\r\n        if (vertex instanceof ArrayVertex) {\r\n            this.shrinkArrayToCorner(vertex);\r\n            vertex.setNoSpace();\r\n        }\r\n    }\r\n    removeVertex(vertex) {\r\n        this.removeVertexAndCleanupDependencies(vertex);\r\n        if (vertex instanceof RangeVertex) {\r\n            this.rangeMapping.removeRange(vertex);\r\n        }\r\n    }\r\n    mergeRangeVertices(existingVertex, newVertex) {\r\n        const adjNodesStored = this.graph.adjacentNodes(newVertex);\r\n        this.removeVertexAndCleanupDependencies(newVertex);\r\n        this.graph.softRemoveEdge(existingVertex, newVertex);\r\n        adjNodesStored.forEach((adjacentNode) => {\r\n            if (this.graph.hasNode(adjacentNode)) {\r\n                this.graph.addEdge(existingVertex, adjacentNode);\r\n            }\r\n        });\r\n    }\r\n    removeVertexAndCleanupDependencies(inputVertex) {\r\n        const dependencies = new Set(this.graph.removeNode(inputVertex));\r\n        while (dependencies.size > 0) {\r\n            const dependency = dependencies.values().next().value;\r\n            dependencies.delete(dependency);\r\n            const [address, vertex] = dependency;\r\n            if (this.graph.hasNode(vertex) && this.graph.adjacentNodesCount(vertex) === 0) {\r\n                if (vertex instanceof RangeVertex || vertex instanceof EmptyCellVertex) {\r\n                    this.graph.removeNode(vertex).forEach((candidate) => dependencies.add(candidate));\r\n                }\r\n                if (vertex instanceof RangeVertex) {\r\n                    this.rangeMapping.removeRange(vertex);\r\n                }\r\n                else if (vertex instanceof EmptyCellVertex) {\r\n                    this.addressMapping.removeCell(address);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from './AbsoluteCellRange';\r\nimport { invalidSimpleCellAddress } from './Cell';\r\nimport { NamedExpressionDependency } from './parser';\r\n/**\r\n * Converts dependencies from maybe relative addressing to absolute addressing.\r\n *\r\n * @param deps - list of addresses in R0C0 format\r\n * @param baseAddress - base address with regard to which make a convertion\r\n */\r\nexport const absolutizeDependencies = (deps, baseAddress) => {\r\n    return deps.map(dep => dep.absolutize(baseAddress));\r\n};\r\nexport const filterDependenciesOutOfScope = (deps) => {\r\n    return deps.filter(dep => {\r\n        if (dep instanceof NamedExpressionDependency) {\r\n            return true;\r\n        }\r\n        if (dep instanceof AbsoluteCellRange) {\r\n            return !(invalidSimpleCellAddress(dep.start) || invalidSimpleCellAddress(dep.end));\r\n        }\r\n        else {\r\n            return !invalidSimpleCellAddress(dep);\r\n        }\r\n    });\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport { cellAddressFromString, simpleCellAddressFromString, simpleCellAddressToString, simpleCellRangeFromString, simpleCellRangeToString, } from './addressRepresentationConverters';\r\nexport { CellAddress } from './CellAddress';\r\nexport { ParserWithCaching, } from './ParserWithCaching';\r\nexport { collectDependencies, } from './collectDependencies';\r\nexport { buildLexerConfig, } from './LexerConfig';\r\nexport { FormulaLexer, } from './FormulaParser';\r\nexport { AstNodeType, ParsingErrorType, buildProcedureAst, buildCellRangeAst, buildParsingErrorAst, buildCellErrorAst, } from './Ast';\r\nexport { Unparser } from './Unparser';\r\nexport { AddressDependency, CellRangeDependency, ColumnRangeDependency, RowRangeDependency, NamedExpressionDependency, } from './RelativeDependency';\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { simpleCellRange } from '../AbsoluteCellRange';\r\nimport { simpleCellAddress } from '../Cell';\r\nimport { CellAddress } from './CellAddress';\r\nimport { ColumnAddress } from './ColumnAddress';\r\nimport { ABSOLUTE_OPERATOR, RANGE_OPERATOR, SHEET_NAME_PATTERN, UNQUOTED_SHEET_NAME_PATTERN } from './parser-consts';\r\nimport { RowAddress } from './RowAddress';\r\nconst addressRegex = new RegExp(`^(${SHEET_NAME_PATTERN})?(\\\\${ABSOLUTE_OPERATOR}?)([A-Za-z]+)(\\\\${ABSOLUTE_OPERATOR}?)([0-9]+)$`);\r\nconst columnRegex = new RegExp(`^(${SHEET_NAME_PATTERN})?(\\\\${ABSOLUTE_OPERATOR}?)([A-Za-z]+)$`);\r\nconst rowRegex = new RegExp(`^(${SHEET_NAME_PATTERN})?(\\\\${ABSOLUTE_OPERATOR}?)([0-9]+)$`);\r\nconst simpleSheetNameRegex = new RegExp(`^${UNQUOTED_SHEET_NAME_PATTERN}$`);\r\n/**\r\n * Computes R0C0 representation of cell address based on it's string representation and base address.\r\n *\r\n * @param sheetMapping - mapping function needed to change name of a sheet to index\r\n * @param stringAddress - string representation of cell address, e.g. 'C64'\r\n * @param baseAddress - base address for R0C0 conversion\r\n * @returns object representation of address\r\n */\r\nexport const cellAddressFromString = (sheetMapping, stringAddress, baseAddress) => {\r\n    const result = addressRegex.exec(stringAddress);\r\n    const col = columnLabelToIndex(result[6]);\r\n    let sheet = extractSheetNumber(result, sheetMapping);\r\n    if (sheet === undefined) {\r\n        return undefined;\r\n    }\r\n    if (sheet === null) {\r\n        sheet = undefined;\r\n    }\r\n    const row = Number(result[8]) - 1;\r\n    if (result[5] === ABSOLUTE_OPERATOR && result[7] === ABSOLUTE_OPERATOR) {\r\n        return CellAddress.absolute(col, row, sheet);\r\n    }\r\n    else if (result[5] === ABSOLUTE_OPERATOR) {\r\n        return CellAddress.absoluteCol(col, row - baseAddress.row, sheet);\r\n    }\r\n    else if (result[7] === ABSOLUTE_OPERATOR) {\r\n        return CellAddress.absoluteRow(col - baseAddress.col, row, sheet);\r\n    }\r\n    else {\r\n        return CellAddress.relative(col - baseAddress.col, row - baseAddress.row, sheet);\r\n    }\r\n};\r\nexport const columnAddressFromString = (sheetMapping, stringAddress, baseAddress) => {\r\n    const result = columnRegex.exec(stringAddress);\r\n    let sheet = extractSheetNumber(result, sheetMapping);\r\n    if (sheet === undefined) {\r\n        return undefined;\r\n    }\r\n    if (sheet === null) {\r\n        sheet = undefined;\r\n    }\r\n    const col = columnLabelToIndex(result[6]);\r\n    if (result[5] === ABSOLUTE_OPERATOR) {\r\n        return ColumnAddress.absolute(col, sheet);\r\n    }\r\n    else {\r\n        return ColumnAddress.relative(col - baseAddress.col, sheet);\r\n    }\r\n};\r\nexport const rowAddressFromString = (sheetMapping, stringAddress, baseAddress) => {\r\n    const result = rowRegex.exec(stringAddress);\r\n    let sheet = extractSheetNumber(result, sheetMapping);\r\n    if (sheet === undefined) {\r\n        return undefined;\r\n    }\r\n    if (sheet === null) {\r\n        sheet = undefined;\r\n    }\r\n    const row = Number(result[6]) - 1;\r\n    if (result[5] === ABSOLUTE_OPERATOR) {\r\n        return RowAddress.absolute(row, sheet);\r\n    }\r\n    else {\r\n        return RowAddress.relative(row - baseAddress.row, sheet);\r\n    }\r\n};\r\n/**\r\n * Computes simple (absolute) address of a cell address based on its string representation.\r\n * If sheet name present in string representation but is not present in sheet mapping, returns undefined.\r\n * If sheet name is not present in string representation, returns {@param sheetContext} as sheet number\r\n *\r\n * @param sheetMapping - mapping function needed to change name of a sheet to index\r\n * @param stringAddress - string representation of cell address, e.g. 'C64'\r\n * @param sheetContext - sheet in context of which we should parse the address\r\n * @returns absolute representation of address, e.g. { sheet: 0, col: 1, row: 1 }\r\n */\r\nexport const simpleCellAddressFromString = (sheetMapping, stringAddress, sheetContext) => {\r\n    const result = addressRegex.exec(stringAddress);\r\n    const col = columnLabelToIndex(result[6]);\r\n    let sheet = extractSheetNumber(result, sheetMapping);\r\n    if (sheet === undefined) {\r\n        return undefined;\r\n    }\r\n    if (sheet === null) {\r\n        sheet = sheetContext;\r\n    }\r\n    const row = Number(result[8]) - 1;\r\n    return simpleCellAddress(sheet, col, row);\r\n};\r\nexport const simpleCellRangeFromString = (sheetMapping, stringAddress, sheetContext) => {\r\n    const split = stringAddress.split(RANGE_OPERATOR);\r\n    if (split.length !== 2) {\r\n        return undefined;\r\n    }\r\n    const [startString, endString] = split;\r\n    const start = simpleCellAddressFromString(sheetMapping, startString, sheetContext);\r\n    if (start === undefined) {\r\n        return undefined;\r\n    }\r\n    const end = simpleCellAddressFromString(sheetMapping, endString, start.sheet);\r\n    if (end === undefined) {\r\n        return undefined;\r\n    }\r\n    if (start.sheet !== end.sheet) {\r\n        return undefined;\r\n    }\r\n    return simpleCellRange(start, end);\r\n};\r\n/**\r\n * Returns string representation of absolute address\r\n * If sheet index is not present in sheet mapping, returns undefined\r\n *\r\n * @param sheetIndexMapping - mapping function needed to change sheet index to sheet name\r\n * @param address - object representation of absolute address\r\n * @param sheetIndex - if is not equal with address sheet index, string representation will contain sheet name\r\n */\r\nexport const simpleCellAddressToString = (sheetIndexMapping, address, sheetIndex) => {\r\n    const column = columnIndexToLabel(address.col);\r\n    const sheetName = sheetIndexToString(address.sheet, sheetIndexMapping);\r\n    if (sheetName === undefined) {\r\n        return undefined;\r\n    }\r\n    if (sheetIndex !== address.sheet) {\r\n        return `${sheetName}!${column}${address.row + 1}`;\r\n    }\r\n    else {\r\n        return `${column}${address.row + 1}`;\r\n    }\r\n};\r\nexport const simpleCellRangeToString = (sheetIndexMapping, address, sheetIndex) => {\r\n    const startString = simpleCellAddressToString(sheetIndexMapping, address.start, sheetIndex);\r\n    const endString = simpleCellAddressToString(sheetIndexMapping, address.end, address.start.sheet);\r\n    if (startString === undefined || endString === undefined) {\r\n        return undefined;\r\n    }\r\n    else {\r\n        return `${startString}${RANGE_OPERATOR}${endString}`;\r\n    }\r\n};\r\n/**\r\n * Convert column label to index\r\n *\r\n * @param columnStringRepresentation - column label (e.g. 'AAB')\r\n * @returns column index\r\n */\r\nfunction columnLabelToIndex(columnStringRepresentation) {\r\n    if (columnStringRepresentation.length === 1) {\r\n        return columnStringRepresentation.toUpperCase().charCodeAt(0) - 65;\r\n    }\r\n    else {\r\n        return columnStringRepresentation.split('').reduce((currentColumn, nextLetter) => {\r\n            return currentColumn * 26 + (nextLetter.toUpperCase().charCodeAt(0) - 64);\r\n        }, 0) - 1;\r\n    }\r\n}\r\n/**\r\n * Converts column index to label\r\n *\r\n * @param column - address to convert\r\n * @returns string representation, e.g. 'AAB'\r\n */\r\nexport function columnIndexToLabel(column) {\r\n    let result = '';\r\n    while (column >= 0) {\r\n        result = String.fromCharCode((column % 26) + 97) + result;\r\n        column = Math.floor(column / 26) - 1;\r\n    }\r\n    return result.toUpperCase();\r\n}\r\nexport function sheetIndexToString(sheetId, sheetMappingFn) {\r\n    let sheetName = sheetMappingFn(sheetId);\r\n    if (sheetName === undefined) {\r\n        return undefined;\r\n    }\r\n    if (simpleSheetNameRegex.test(sheetName)) {\r\n        return sheetName;\r\n    }\r\n    else {\r\n        sheetName = sheetName.replace(/'/g, \"''\");\r\n        return `'${sheetName}'`;\r\n    }\r\n}\r\nfunction extractSheetNumber(regexResult, sheetMapping) {\r\n    var _a;\r\n    let maybeSheetName = (_a = regexResult[3]) !== null && _a !== void 0 ? _a : regexResult[2];\r\n    if (maybeSheetName) {\r\n        maybeSheetName = maybeSheetName.replace(/''/g, \"'\");\r\n        return sheetMapping(maybeSheetName);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, invalidSimpleCellAddress, simpleCellAddress, simpleColumnAddress, simpleRowAddress, } from '../Cell';\r\nimport { columnIndexToLabel } from './addressRepresentationConverters';\r\nimport { ColumnAddress, ReferenceType } from './ColumnAddress';\r\nimport { RowAddress } from './RowAddress';\r\n/** Possible kinds of cell references */\r\nexport var CellReferenceType;\r\n(function (CellReferenceType) {\r\n    /** Cell reference with both row and column relative. */\r\n    CellReferenceType[\"CELL_REFERENCE_RELATIVE\"] = \"CELL_REFERENCE\";\r\n    /** Cell reference with both row and column absolute. */\r\n    CellReferenceType[\"CELL_REFERENCE_ABSOLUTE\"] = \"CELL_REFERENCE_ABSOLUTE\";\r\n    /** Cell reference with absolute column and relative row. */\r\n    CellReferenceType[\"CELL_REFERENCE_ABSOLUTE_COL\"] = \"CELL_REFERENCE_ABSOLUTE_COL\";\r\n    /** Cell reference with relative column and absolute row. */\r\n    CellReferenceType[\"CELL_REFERENCE_ABSOLUTE_ROW\"] = \"CELL_REFERENCE_ABSOLUTE_ROW\";\r\n})(CellReferenceType || (CellReferenceType = {}));\r\nexport class CellAddress {\r\n    constructor(col, row, type, sheet) {\r\n        this.col = col;\r\n        this.row = row;\r\n        this.type = type;\r\n        this.sheet = sheet;\r\n    }\r\n    static fromColAndRow(col, row, sheet) {\r\n        const factoryMethod = col.isColumnAbsolute() && row.isRowAbsolute()\r\n            ? CellAddress.absolute.bind(this)\r\n            : col.isColumnAbsolute()\r\n                ? CellAddress.absoluteCol.bind(this)\r\n                : row.isRowAbsolute()\r\n                    ? CellAddress.absoluteRow.bind(this)\r\n                    : CellAddress.relative.bind(this);\r\n        return factoryMethod(col.col, row.row, sheet);\r\n    }\r\n    static relative(col, row, sheet) {\r\n        return new CellAddress(col, row, CellReferenceType.CELL_REFERENCE_RELATIVE, sheet);\r\n    }\r\n    static absolute(col, row, sheet) {\r\n        return new CellAddress(col, row, CellReferenceType.CELL_REFERENCE_ABSOLUTE, sheet);\r\n    }\r\n    static absoluteCol(col, row, sheet) {\r\n        return new CellAddress(col, row, CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL, sheet);\r\n    }\r\n    static absoluteRow(col, row, sheet) {\r\n        return new CellAddress(col, row, CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW, sheet);\r\n    }\r\n    /**\r\n     * Converts R0C0 representation of cell address to simple object representation.\r\n     *\r\n     * @param baseAddress - base address for R0C0 shifts\r\n     */\r\n    toSimpleCellAddress(baseAddress) {\r\n        const sheet = absoluteSheetReference(this, baseAddress);\r\n        if (this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE) {\r\n            return simpleCellAddress(sheet, this.col, this.row);\r\n        }\r\n        else if (this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW) {\r\n            return simpleCellAddress(sheet, baseAddress.col + this.col, this.row);\r\n        }\r\n        else if (this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL) {\r\n            return simpleCellAddress(sheet, this.col, baseAddress.row + this.row);\r\n        }\r\n        else {\r\n            return simpleCellAddress(sheet, baseAddress.col + this.col, baseAddress.row + this.row);\r\n        }\r\n    }\r\n    toColumnAddress() {\r\n        const refType = this.isColumnRelative() ? ReferenceType.RELATIVE : ReferenceType.ABSOLUTE;\r\n        return new ColumnAddress(refType, this.col, this.sheet);\r\n    }\r\n    toRowAddress() {\r\n        const refType = this.isRowRelative() ? ReferenceType.RELATIVE : ReferenceType.ABSOLUTE;\r\n        return new RowAddress(refType, this.row, this.sheet);\r\n    }\r\n    toSimpleColumnAddress(baseAddress) {\r\n        const sheet = absoluteSheetReference(this, baseAddress);\r\n        let column = this.col;\r\n        if (this.isColumnRelative()) {\r\n            column += baseAddress.col;\r\n        }\r\n        return simpleColumnAddress(sheet, column);\r\n    }\r\n    toSimpleRowAddress(baseAddress) {\r\n        const sheet = absoluteSheetReference(this, baseAddress);\r\n        let row = this.row;\r\n        if (this.isRowRelative()) {\r\n            row += baseAddress.row;\r\n        }\r\n        return simpleRowAddress(sheet, row);\r\n    }\r\n    isRowAbsolute() {\r\n        return (this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE || this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW);\r\n    }\r\n    isColumnAbsolute() {\r\n        return (this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE || this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL);\r\n    }\r\n    isColumnRelative() {\r\n        return (this.type === CellReferenceType.CELL_REFERENCE_RELATIVE || this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW);\r\n    }\r\n    isRowRelative() {\r\n        return (this.type === CellReferenceType.CELL_REFERENCE_RELATIVE || this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL);\r\n    }\r\n    isAbsolute() {\r\n        return (this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE && this.sheet !== undefined);\r\n    }\r\n    shiftedByRows(numberOfRows) {\r\n        return new CellAddress(this.col, this.row + numberOfRows, this.type, this.sheet);\r\n    }\r\n    shiftedByColumns(numberOfColumns) {\r\n        return new CellAddress(this.col + numberOfColumns, this.row, this.type, this.sheet);\r\n    }\r\n    moved(toSheet, toRight, toBottom) {\r\n        const newSheet = this.sheet === undefined ? undefined : toSheet;\r\n        return new CellAddress(this.col + toRight, this.row + toBottom, this.type, newSheet);\r\n    }\r\n    withSheet(sheet) {\r\n        return new CellAddress(this.col, this.row, this.type, sheet);\r\n    }\r\n    isInvalid(baseAddress) {\r\n        return invalidSimpleCellAddress(this.toSimpleCellAddress(baseAddress));\r\n    }\r\n    shiftRelativeDimensions(toRight, toBottom) {\r\n        const col = this.isColumnAbsolute() ? this.col : this.col + toRight;\r\n        const row = this.isRowAbsolute() ? this.row : this.row + toBottom;\r\n        return new CellAddress(col, row, this.type, this.sheet);\r\n    }\r\n    shiftAbsoluteDimensions(toRight, toBottom) {\r\n        const col = this.isColumnRelative() ? this.col : this.col + toRight;\r\n        const row = this.isRowRelative() ? this.row : this.row + toBottom;\r\n        return new CellAddress(col, row, this.type, this.sheet);\r\n    }\r\n    hash(withSheet) {\r\n        const sheetPart = withSheet && this.sheet !== undefined ? `#${this.sheet}` : '';\r\n        switch (this.type) {\r\n            case CellReferenceType.CELL_REFERENCE_RELATIVE: {\r\n                return `${sheetPart}#${this.row}R${this.col}`;\r\n            }\r\n            case CellReferenceType.CELL_REFERENCE_ABSOLUTE: {\r\n                return `${sheetPart}#${this.row}A${this.col}`;\r\n            }\r\n            case CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL: {\r\n                return `${sheetPart}#${this.row}AC${this.col}`;\r\n            }\r\n            case CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW: {\r\n                return `${sheetPart}#${this.row}AR${this.col}`;\r\n            }\r\n        }\r\n    }\r\n    unparse(baseAddress) {\r\n        const simpleAddress = this.toSimpleCellAddress(baseAddress);\r\n        if (invalidSimpleCellAddress(simpleAddress)) {\r\n            return undefined;\r\n        }\r\n        const column = columnIndexToLabel(simpleAddress.col);\r\n        const rowDollar = this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE || this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW ? '$' : '';\r\n        const colDollar = this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE || this.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL ? '$' : '';\r\n        return `${colDollar}${column}${rowDollar}${simpleAddress.row + 1}`;\r\n    }\r\n    exceedsSheetSizeLimits(maxColumns, maxRows) {\r\n        return this.row >= maxRows || this.col >= maxColumns;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, invalidSimpleColumnAddress, simpleColumnAddress } from '../Cell';\r\nimport { columnIndexToLabel } from './addressRepresentationConverters';\r\nexport var ReferenceType;\r\n(function (ReferenceType) {\r\n    ReferenceType[\"RELATIVE\"] = \"RELATIVE\";\r\n    ReferenceType[\"ABSOLUTE\"] = \"ABSOLUTE\";\r\n})(ReferenceType || (ReferenceType = {}));\r\nexport class ColumnAddress {\r\n    constructor(type, col, sheet) {\r\n        this.type = type;\r\n        this.col = col;\r\n        this.sheet = sheet;\r\n    }\r\n    static absolute(column, sheet) {\r\n        return new ColumnAddress(ReferenceType.ABSOLUTE, column, sheet);\r\n    }\r\n    static relative(column, sheet) {\r\n        return new ColumnAddress(ReferenceType.RELATIVE, column, sheet);\r\n    }\r\n    static compareByAbsoluteAddress(baseAddress) {\r\n        return (colA, colB) => colA.toSimpleColumnAddress(baseAddress).col - colB.toSimpleColumnAddress(baseAddress).col;\r\n    }\r\n    isColumnAbsolute() {\r\n        return (this.type === ReferenceType.ABSOLUTE);\r\n    }\r\n    isColumnRelative() {\r\n        return (this.type === ReferenceType.RELATIVE);\r\n    }\r\n    isAbsolute() {\r\n        return (this.type === ReferenceType.ABSOLUTE && this.sheet !== undefined);\r\n    }\r\n    moved(toSheet, toRight, _toBottom) {\r\n        const newSheet = this.sheet === undefined ? undefined : toSheet;\r\n        return new ColumnAddress(this.type, this.col + toRight, newSheet);\r\n    }\r\n    shiftedByColumns(numberOfColumns) {\r\n        return new ColumnAddress(this.type, this.col + numberOfColumns, this.sheet);\r\n    }\r\n    toSimpleColumnAddress(baseAddress) {\r\n        const sheet = absoluteSheetReference(this, baseAddress);\r\n        let column = this.col;\r\n        if (this.isColumnRelative()) {\r\n            column = baseAddress.col + this.col;\r\n        }\r\n        return simpleColumnAddress(sheet, column);\r\n    }\r\n    shiftRelativeDimensions(toRight, _toBottom) {\r\n        const col = this.isColumnRelative() ? this.col + toRight : this.col;\r\n        return new ColumnAddress(this.type, col, this.sheet);\r\n    }\r\n    shiftAbsoluteDimensions(toRight, _toBottom) {\r\n        const col = this.isColumnAbsolute() ? this.col + toRight : this.col;\r\n        return new ColumnAddress(this.type, col, this.sheet);\r\n    }\r\n    withSheet(sheet) {\r\n        return new ColumnAddress(this.type, this.col, sheet);\r\n    }\r\n    isInvalid(baseAddress) {\r\n        return this.toSimpleColumnAddress(baseAddress).col < 0;\r\n    }\r\n    hash(withSheet) {\r\n        const sheetPart = withSheet && this.sheet !== undefined ? `#${this.sheet}` : '';\r\n        switch (this.type) {\r\n            case ReferenceType.RELATIVE: {\r\n                return `${sheetPart}#COLR${this.col}`;\r\n            }\r\n            case ReferenceType.ABSOLUTE: {\r\n                return `${sheetPart}#COLA${this.col}`;\r\n            }\r\n        }\r\n    }\r\n    unparse(baseAddress) {\r\n        const simpleAddress = this.toSimpleColumnAddress(baseAddress);\r\n        if (invalidSimpleColumnAddress(simpleAddress)) {\r\n            return undefined;\r\n        }\r\n        const column = columnIndexToLabel(simpleAddress.col);\r\n        const dollar = this.type === ReferenceType.ABSOLUTE ? '$' : '';\r\n        return `${dollar}${column}`;\r\n    }\r\n    exceedsSheetSizeLimits(maxColumns) {\r\n        return this.col >= maxColumns;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, invalidSimpleRowAddress, simpleRowAddress } from '../Cell';\r\nimport { ReferenceType } from './ColumnAddress';\r\nexport class RowAddress {\r\n    constructor(type, row, sheet) {\r\n        this.type = type;\r\n        this.row = row;\r\n        this.sheet = sheet;\r\n    }\r\n    static absolute(row, sheet) {\r\n        return new RowAddress(ReferenceType.ABSOLUTE, row, sheet);\r\n    }\r\n    static relative(row, sheet) {\r\n        return new RowAddress(ReferenceType.RELATIVE, row, sheet);\r\n    }\r\n    static compareByAbsoluteAddress(baseAddress) {\r\n        return (rowA, rowB) => rowA.toSimpleRowAddress(baseAddress).row - rowB.toSimpleRowAddress(baseAddress).row;\r\n    }\r\n    isRowAbsolute() {\r\n        return (this.type === ReferenceType.ABSOLUTE);\r\n    }\r\n    isRowRelative() {\r\n        return (this.type === ReferenceType.RELATIVE);\r\n    }\r\n    isAbsolute() {\r\n        return (this.type === ReferenceType.ABSOLUTE && this.sheet !== undefined);\r\n    }\r\n    moved(toSheet, toRight, toBottom) {\r\n        const newSheet = this.sheet === undefined ? undefined : toSheet;\r\n        return new RowAddress(this.type, this.row + toBottom, newSheet);\r\n    }\r\n    shiftedByRows(numberOfColumns) {\r\n        return new RowAddress(this.type, this.row + numberOfColumns, this.sheet);\r\n    }\r\n    toSimpleRowAddress(baseAddress) {\r\n        const sheet = absoluteSheetReference(this, baseAddress);\r\n        let row = this.row;\r\n        if (this.isRowRelative()) {\r\n            row = baseAddress.row + this.row;\r\n        }\r\n        return simpleRowAddress(sheet, row);\r\n    }\r\n    shiftRelativeDimensions(toRight, toBottom) {\r\n        const row = this.isRowRelative() ? this.row + toBottom : this.row;\r\n        return new RowAddress(this.type, row, this.sheet);\r\n    }\r\n    shiftAbsoluteDimensions(toRight, toBottom) {\r\n        const row = this.isRowAbsolute() ? this.row + toBottom : this.row;\r\n        return new RowAddress(this.type, row, this.sheet);\r\n    }\r\n    withSheet(sheet) {\r\n        return new RowAddress(this.type, this.row, sheet);\r\n    }\r\n    isInvalid(baseAddress) {\r\n        return this.toSimpleRowAddress(baseAddress).row < 0;\r\n    }\r\n    hash(withSheet) {\r\n        const sheetPart = withSheet && this.sheet !== undefined ? `#${this.sheet}` : '';\r\n        switch (this.type) {\r\n            case ReferenceType.RELATIVE: {\r\n                return `${sheetPart}#ROWR${this.row}`;\r\n            }\r\n            case ReferenceType.ABSOLUTE: {\r\n                return `${sheetPart}#ROWA${this.row}`;\r\n            }\r\n        }\r\n    }\r\n    unparse(baseAddress) {\r\n        const simpleAddress = this.toSimpleRowAddress(baseAddress);\r\n        if (invalidSimpleRowAddress(simpleAddress)) {\r\n            return undefined;\r\n        }\r\n        const dollar = this.type === ReferenceType.ABSOLUTE ? '$' : '';\r\n        return `${dollar}${simpleAddress.row + 1}`;\r\n    }\r\n    exceedsSheetSizeLimits(maxRows) {\r\n        return this.row >= maxRows;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport const RANGE_OPERATOR = ':';\r\nexport const ABSOLUTE_OPERATOR = '$';\r\nexport const ALL_WHITESPACE_PATTERN = '\\\\s+';\r\nexport const ODFF_WHITESPACE_PATTERN = '[ \\\\t\\\\n\\\\r]+';\r\nexport const UNICODE_LETTER_PATTERN = 'A-Za-z\\u00C0-\\u02AF';\r\nexport const NON_RESERVED_CHARACTER_PATTERN = `${UNICODE_LETTER_PATTERN}0-9_.`;\r\nexport const UNQUOTED_SHEET_NAME_PATTERN = `[${UNICODE_LETTER_PATTERN}0-9_]+`;\r\nexport const QUOTED_SHEET_NAME_PATTERN = \"'(((?!').|'')*)'\";\r\nexport const SHEET_NAME_PATTERN = `(${UNQUOTED_SHEET_NAME_PATTERN}|${QUOTED_SHEET_NAME_PATTERN})!`;\r\nexport const CELL_REFERENCE_PATTERN = `(${SHEET_NAME_PATTERN})?\\\\${ABSOLUTE_OPERATOR}?[A-Za-z]+\\\\${ABSOLUTE_OPERATOR}?[0-9]+`;\r\nexport const COLUMN_REFERENCE_PATTERN = `(${SHEET_NAME_PATTERN})?\\\\${ABSOLUTE_OPERATOR}?[A-Za-z]+`;\r\nexport const ROW_REFERENCE_PATTERN = `(${SHEET_NAME_PATTERN})?\\\\${ABSOLUTE_OPERATOR}?[0-9]+`;\r\nexport const R1C1_CELL_REFERENCE_PATTERN = '[rR][0-9]*[cC][0-9]*';\r\nexport const CELL_REFERENCE_WITH_NEXT_CHARACTER_PATTERN = `(${CELL_REFERENCE_PATTERN})[^${NON_RESERVED_CHARACTER_PATTERN}]`;\r\nexport const NAMED_EXPRESSION_PATTERN = `[${UNICODE_LETTER_PATTERN}_][${NON_RESERVED_CHARACTER_PATTERN}]*`;\r\nexport const ALL_DIGITS_ARRAY = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\r\nexport const ALL_UNICODE_LETTERS_ARRAY = [\r\n    ...Array.from(Array(26)).map((_, i) => i + 'A'.charCodeAt(0)),\r\n    ...Array.from(Array(26)).map((_, i) => i + 'a'.charCodeAt(0)),\r\n    ...Array.from(Array(0x02AF - 0x00C0 + 1)).map((_, i) => i + 0x00C0),\r\n].map(code => String.fromCharCode(code));\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { tokenMatcher } from 'chevrotain';\r\nimport { ErrorType } from '../Cell';\r\nimport { AstNodeType, buildParsingErrorAst, CellAddress, collectDependencies } from './';\r\nimport { cellAddressFromString, columnAddressFromString, rowAddressFromString, } from './addressRepresentationConverters';\r\nimport { imageWithWhitespace, ParsingErrorType, RangeSheetReferenceType } from './Ast';\r\nimport { binaryOpTokenMap } from './binaryOpTokenMap';\r\nimport { Cache } from './Cache';\r\nimport { FormulaLexer, FormulaParser } from './FormulaParser';\r\nimport { buildLexerConfig, CellReference, ColumnRange, ProcedureName, RowRange, } from './LexerConfig';\r\nimport { formatNumber } from './Unparser';\r\nimport { ColumnAddress } from './ColumnAddress';\r\nimport { RowAddress } from './RowAddress';\r\n/**\r\n * Parses formula using caching if feasible.\r\n */\r\nexport class ParserWithCaching {\r\n    constructor(config, functionRegistry, sheetMapping) {\r\n        this.config = config;\r\n        this.functionRegistry = functionRegistry;\r\n        this.sheetMapping = sheetMapping;\r\n        this.statsCacheUsed = 0;\r\n        this.lexerConfig = buildLexerConfig(config);\r\n        this.lexer = new FormulaLexer(this.lexerConfig);\r\n        this.formulaParser = new FormulaParser(this.lexerConfig, this.sheetMapping);\r\n        this.cache = new Cache(this.functionRegistry);\r\n    }\r\n    /**\r\n     * Parses a formula.\r\n     *\r\n     * @param text - formula to parse\r\n     * @param formulaAddress - address with regard to which formula should be parsed. Impacts computed addresses in R0C0 format.\r\n     */\r\n    parse(text, formulaAddress) {\r\n        this.formulaAddress = formulaAddress;\r\n        const lexerResult = this.tokenizeFormula(text);\r\n        if (lexerResult.errors.length > 0) {\r\n            const errors = lexerResult.errors.map((e) => ({\r\n                type: ParsingErrorType.LexingError,\r\n                message: e.message,\r\n            }));\r\n            return {\r\n                ast: buildParsingErrorAst(),\r\n                errors,\r\n                hasVolatileFunction: false,\r\n                hasStructuralChangeFunction: false,\r\n                dependencies: []\r\n            };\r\n        }\r\n        const hash = this.computeHashFromTokens(lexerResult.tokens, formulaAddress);\r\n        let cacheResult = this.cache.get(hash);\r\n        if (cacheResult !== undefined) {\r\n            ++this.statsCacheUsed;\r\n        }\r\n        else {\r\n            const processedTokens = this.bindWhitespacesToTokens(lexerResult.tokens);\r\n            const parsingResult = this.formulaParser.parseFromTokens(processedTokens, formulaAddress);\r\n            if (parsingResult.errors.length > 0) {\r\n                return Object.assign(Object.assign({}, parsingResult), { hasVolatileFunction: false, hasStructuralChangeFunction: false, dependencies: [] });\r\n            }\r\n            else {\r\n                cacheResult = this.cache.set(hash, parsingResult.ast);\r\n            }\r\n        }\r\n        const { ast, hasVolatileFunction, hasStructuralChangeFunction } = cacheResult;\r\n        const astWithNoReversedRanges = this.convertReversedRangesToRegularRanges(ast);\r\n        const dependencies = collectDependencies(astWithNoReversedRanges, this.functionRegistry);\r\n        return { ast: astWithNoReversedRanges, errors: [], hasVolatileFunction, hasStructuralChangeFunction, dependencies };\r\n    }\r\n    convertReversedRangesToRegularRanges(ast) {\r\n        switch (ast.type) {\r\n            case AstNodeType.EMPTY:\r\n            case AstNodeType.NUMBER:\r\n            case AstNodeType.STRING:\r\n            case AstNodeType.ERROR:\r\n            case AstNodeType.ERROR_WITH_RAW_INPUT:\r\n            case AstNodeType.CELL_REFERENCE:\r\n            case AstNodeType.NAMED_EXPRESSION:\r\n                return ast;\r\n            case AstNodeType.CELL_RANGE: {\r\n                const { start, end } = ast;\r\n                const orderedEnds = this.orderCellRangeEnds(start, end);\r\n                return Object.assign(Object.assign({}, ast), { start: orderedEnds.start, end: orderedEnds.end });\r\n            }\r\n            case AstNodeType.COLUMN_RANGE: {\r\n                const { start, end } = ast;\r\n                const orderedEnds = this.orderColumnRangeEnds(start, end);\r\n                return Object.assign(Object.assign({}, ast), { start: orderedEnds.start, end: orderedEnds.end });\r\n            }\r\n            case AstNodeType.ROW_RANGE: {\r\n                const { start, end } = ast;\r\n                const orderedEnds = this.orderRowRangeEnds(start, end);\r\n                return Object.assign(Object.assign({}, ast), { start: orderedEnds.start, end: orderedEnds.end });\r\n            }\r\n            case AstNodeType.PERCENT_OP:\r\n            case AstNodeType.PLUS_UNARY_OP:\r\n            case AstNodeType.MINUS_UNARY_OP: {\r\n                const valueFixed = this.convertReversedRangesToRegularRanges(ast.value);\r\n                return Object.assign(Object.assign({}, ast), { value: valueFixed });\r\n            }\r\n            case AstNodeType.CONCATENATE_OP:\r\n            case AstNodeType.EQUALS_OP:\r\n            case AstNodeType.NOT_EQUAL_OP:\r\n            case AstNodeType.LESS_THAN_OP:\r\n            case AstNodeType.GREATER_THAN_OP:\r\n            case AstNodeType.LESS_THAN_OR_EQUAL_OP:\r\n            case AstNodeType.GREATER_THAN_OR_EQUAL_OP:\r\n            case AstNodeType.MINUS_OP:\r\n            case AstNodeType.PLUS_OP:\r\n            case AstNodeType.TIMES_OP:\r\n            case AstNodeType.DIV_OP:\r\n            case AstNodeType.POWER_OP: {\r\n                const leftFixed = this.convertReversedRangesToRegularRanges(ast.left);\r\n                const rightFixed = this.convertReversedRangesToRegularRanges(ast.right);\r\n                return Object.assign(Object.assign({}, ast), { left: leftFixed, right: rightFixed });\r\n            }\r\n            case AstNodeType.PARENTHESIS: {\r\n                const exprFixed = this.convertReversedRangesToRegularRanges(ast.expression);\r\n                return Object.assign(Object.assign({}, ast), { expression: exprFixed });\r\n            }\r\n            case AstNodeType.FUNCTION_CALL: {\r\n                const argsFixed = ast.args.map(arg => this.convertReversedRangesToRegularRanges(arg));\r\n                return Object.assign(Object.assign({}, ast), { args: argsFixed });\r\n            }\r\n            case AstNodeType.ARRAY: {\r\n                const argsFixed = ast.args.map(argsRow => argsRow.map(arg => this.convertReversedRangesToRegularRanges(arg)));\r\n                return Object.assign(Object.assign({}, ast), { args: argsFixed });\r\n            }\r\n        }\r\n    }\r\n    orderCellRangeEnds(endA, endB) {\r\n        const ends = [endA, endB];\r\n        const [startCol, endCol] = ends.map(e => e.toColumnAddress()).sort(ColumnAddress.compareByAbsoluteAddress(this.formulaAddress));\r\n        const [startRow, endRow] = ends.map(e => e.toRowAddress()).sort(RowAddress.compareByAbsoluteAddress(this.formulaAddress));\r\n        const [startSheet, endSheet] = ends.map(e => e.sheet).sort(ParserWithCaching.compareSheetIds.bind(this));\r\n        return {\r\n            start: CellAddress.fromColAndRow(startCol, startRow, startSheet),\r\n            end: CellAddress.fromColAndRow(endCol, endRow, endSheet),\r\n        };\r\n    }\r\n    orderColumnRangeEnds(endA, endB) {\r\n        const ends = [endA, endB];\r\n        const [startCol, endCol] = ends.sort(ColumnAddress.compareByAbsoluteAddress(this.formulaAddress));\r\n        const [startSheet, endSheet] = ends.map(e => e.sheet).sort(ParserWithCaching.compareSheetIds.bind(this));\r\n        return {\r\n            start: new ColumnAddress(startCol.type, startCol.col, startSheet),\r\n            end: new ColumnAddress(endCol.type, endCol.col, endSheet),\r\n        };\r\n    }\r\n    orderRowRangeEnds(endA, endB) {\r\n        const ends = [endA, endB];\r\n        const [startRow, endRow] = ends.sort(RowAddress.compareByAbsoluteAddress(this.formulaAddress));\r\n        const [startSheet, endSheet] = ends.map(e => e.sheet).sort(ParserWithCaching.compareSheetIds.bind(this));\r\n        return {\r\n            start: new RowAddress(startRow.type, startRow.row, startSheet),\r\n            end: new RowAddress(endRow.type, endRow.row, endSheet),\r\n        };\r\n    }\r\n    static compareSheetIds(sheetA, sheetB) {\r\n        sheetA = sheetA != null ? sheetA : Infinity;\r\n        sheetB = sheetB != null ? sheetB : Infinity;\r\n        return sheetA - sheetB;\r\n    }\r\n    fetchCachedResultForAst(ast) {\r\n        const hash = this.computeHashFromAst(ast);\r\n        return this.fetchCachedResult(hash);\r\n    }\r\n    fetchCachedResult(hash) {\r\n        const cacheResult = this.cache.get(hash);\r\n        if (cacheResult === undefined) {\r\n            throw new Error('There is no AST with such key in the cache');\r\n        }\r\n        else {\r\n            const { ast, hasVolatileFunction, hasStructuralChangeFunction, relativeDependencies } = cacheResult;\r\n            return { ast, errors: [], hasVolatileFunction, hasStructuralChangeFunction, dependencies: relativeDependencies };\r\n        }\r\n    }\r\n    computeHashFromTokens(tokens, baseAddress) {\r\n        var _a;\r\n        let hash = '';\r\n        let idx = 0;\r\n        while (idx < tokens.length) {\r\n            const token = tokens[idx];\r\n            if (tokenMatcher(token, CellReference)) {\r\n                const cellAddress = cellAddressFromString(this.sheetMapping, token.image, baseAddress);\r\n                if (cellAddress === undefined) {\r\n                    hash = hash.concat(token.image);\r\n                }\r\n                else {\r\n                    hash = hash.concat(cellAddress.hash(true));\r\n                }\r\n            }\r\n            else if (tokenMatcher(token, ProcedureName)) {\r\n                const procedureName = token.image.toUpperCase().slice(0, -1);\r\n                const canonicalProcedureName = (_a = this.lexerConfig.functionMapping[procedureName]) !== null && _a !== void 0 ? _a : procedureName;\r\n                hash = hash.concat(canonicalProcedureName, '(');\r\n            }\r\n            else if (tokenMatcher(token, ColumnRange)) {\r\n                const [start, end] = token.image.split(':');\r\n                const startAddress = columnAddressFromString(this.sheetMapping, start, baseAddress);\r\n                const endAddress = columnAddressFromString(this.sheetMapping, end, baseAddress);\r\n                if (startAddress === undefined || endAddress === undefined) {\r\n                    hash = hash.concat('!REF');\r\n                }\r\n                else {\r\n                    hash = hash.concat(startAddress.hash(true), ':', endAddress.hash(true));\r\n                }\r\n            }\r\n            else if (tokenMatcher(token, RowRange)) {\r\n                const [start, end] = token.image.split(':');\r\n                const startAddress = rowAddressFromString(this.sheetMapping, start, baseAddress);\r\n                const endAddress = rowAddressFromString(this.sheetMapping, end, baseAddress);\r\n                if (startAddress === undefined || endAddress === undefined) {\r\n                    hash = hash.concat('!REF');\r\n                }\r\n                else {\r\n                    hash = hash.concat(startAddress.hash(true), ':', endAddress.hash(true));\r\n                }\r\n            }\r\n            else {\r\n                hash = hash.concat(token.image);\r\n            }\r\n            idx++;\r\n        }\r\n        return hash;\r\n    }\r\n    rememberNewAst(ast) {\r\n        const hash = this.computeHashFromAst(ast);\r\n        return this.cache.maybeSetAndThenGet(hash, ast);\r\n    }\r\n    computeHashFromAst(ast) {\r\n        return '=' + this.computeHashOfAstNode(ast);\r\n    }\r\n    computeHashOfAstNode(ast) {\r\n        switch (ast.type) {\r\n            case AstNodeType.EMPTY: {\r\n                return ast.leadingWhitespace || '';\r\n            }\r\n            case AstNodeType.NUMBER: {\r\n                return imageWithWhitespace(formatNumber(ast.value, this.config.decimalSeparator), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.STRING: {\r\n                return imageWithWhitespace('\"' + ast.value + '\"', ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.NAMED_EXPRESSION: {\r\n                return imageWithWhitespace(ast.expressionName, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.FUNCTION_CALL: {\r\n                const args = ast.args.map((arg) => this.computeHashOfAstNode(arg)).join(this.config.functionArgSeparator);\r\n                const rightPart = ast.procedureName + '(' + args + imageWithWhitespace(')', ast.internalWhitespace);\r\n                return imageWithWhitespace(rightPart, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.CELL_REFERENCE: {\r\n                return imageWithWhitespace(ast.reference.hash(true), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.COLUMN_RANGE:\r\n            case AstNodeType.ROW_RANGE:\r\n            case AstNodeType.CELL_RANGE: {\r\n                const start = ast.start.hash(ast.sheetReferenceType !== RangeSheetReferenceType.RELATIVE);\r\n                const end = ast.end.hash(ast.sheetReferenceType === RangeSheetReferenceType.BOTH_ABSOLUTE);\r\n                return imageWithWhitespace(start + ':' + end, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.MINUS_UNARY_OP: {\r\n                return imageWithWhitespace('-' + this.computeHashOfAstNode(ast.value), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.PLUS_UNARY_OP: {\r\n                return imageWithWhitespace('+' + this.computeHashOfAstNode(ast.value), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.PERCENT_OP: {\r\n                return this.computeHashOfAstNode(ast.value) + imageWithWhitespace('%', ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.ERROR: {\r\n                const image = this.config.translationPackage.getErrorTranslation(ast.error ? ast.error.type : ErrorType.ERROR);\r\n                return imageWithWhitespace(image, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.ERROR_WITH_RAW_INPUT: {\r\n                return imageWithWhitespace(ast.rawInput, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.ARRAY: {\r\n                const args = ast.args.map(row => row.map(val => this.computeHashOfAstNode(val)).join(',')).join(';');\r\n                return imageWithWhitespace('{' + args + imageWithWhitespace('}', ast.internalWhitespace), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.PARENTHESIS: {\r\n                const expression = this.computeHashOfAstNode(ast.expression);\r\n                const rightPart = '(' + expression + imageWithWhitespace(')', ast.internalWhitespace);\r\n                return imageWithWhitespace(rightPart, ast.leadingWhitespace);\r\n            }\r\n            default: {\r\n                return this.computeHashOfAstNode(ast.left) + imageWithWhitespace(binaryOpTokenMap[ast.type], ast.leadingWhitespace) + this.computeHashOfAstNode(ast.right);\r\n            }\r\n        }\r\n    }\r\n    bindWhitespacesToTokens(tokens) {\r\n        const processedTokens = [];\r\n        const first = tokens[0];\r\n        if (!tokenMatcher(first, this.lexerConfig.WhiteSpace)) {\r\n            processedTokens.push(first);\r\n        }\r\n        for (let i = 1; i < tokens.length; ++i) {\r\n            const current = tokens[i];\r\n            if (tokenMatcher(current, this.lexerConfig.WhiteSpace)) {\r\n                continue;\r\n            }\r\n            const previous = tokens[i - 1];\r\n            if (tokenMatcher(previous, this.lexerConfig.WhiteSpace)) {\r\n                current.leadingWhitespace = previous;\r\n            }\r\n            processedTokens.push(current);\r\n        }\r\n        return processedTokens;\r\n    }\r\n    tokenizeFormula(text) {\r\n        return this.lexer.tokenizeFormula(text);\r\n    }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__85__;","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError } from '../Cell';\r\nexport const parsingError = (type, message) => ({\r\n    type, message\r\n});\r\nexport var ParsingErrorType;\r\n(function (ParsingErrorType) {\r\n    ParsingErrorType[\"LexingError\"] = \"LexingError\";\r\n    ParsingErrorType[\"ParserError\"] = \"ParsingError\";\r\n    ParsingErrorType[\"StaticOffsetError\"] = \"StaticOffsetError\";\r\n    ParsingErrorType[\"StaticOffsetOutOfRangeError\"] = \"StaticOffsetOutOfRangeError\";\r\n    ParsingErrorType[\"RangeOffsetNotAllowed\"] = \"RangeOffsetNotAllowed\";\r\n})(ParsingErrorType || (ParsingErrorType = {}));\r\nexport var AstNodeType;\r\n(function (AstNodeType) {\r\n    AstNodeType[\"EMPTY\"] = \"EMPTY\";\r\n    AstNodeType[\"NUMBER\"] = \"NUMBER\";\r\n    AstNodeType[\"STRING\"] = \"STRING\";\r\n    AstNodeType[\"MINUS_UNARY_OP\"] = \"MINUS_UNARY_OP\";\r\n    AstNodeType[\"PLUS_UNARY_OP\"] = \"PLUS_UNARY_OP\";\r\n    AstNodeType[\"PERCENT_OP\"] = \"PERCENT_OP\";\r\n    AstNodeType[\"CONCATENATE_OP\"] = \"CONCATENATE_OP\";\r\n    AstNodeType[\"EQUALS_OP\"] = \"EQUALS_OP\";\r\n    AstNodeType[\"NOT_EQUAL_OP\"] = \"NOT_EQUAL_OP\";\r\n    AstNodeType[\"GREATER_THAN_OP\"] = \"GREATER_THAN_OP\";\r\n    AstNodeType[\"LESS_THAN_OP\"] = \"LESS_THAN_OP\";\r\n    AstNodeType[\"GREATER_THAN_OR_EQUAL_OP\"] = \"GREATER_THAN_OR_EQUAL_OP\";\r\n    AstNodeType[\"LESS_THAN_OR_EQUAL_OP\"] = \"LESS_THAN_OR_EQUAL_OP\";\r\n    AstNodeType[\"PLUS_OP\"] = \"PLUS_OP\";\r\n    AstNodeType[\"MINUS_OP\"] = \"MINUS_OP\";\r\n    AstNodeType[\"TIMES_OP\"] = \"TIMES_OP\";\r\n    AstNodeType[\"DIV_OP\"] = \"DIV_OP\";\r\n    AstNodeType[\"POWER_OP\"] = \"POWER_OP\";\r\n    AstNodeType[\"FUNCTION_CALL\"] = \"FUNCTION_CALL\";\r\n    AstNodeType[\"NAMED_EXPRESSION\"] = \"NAMED_EXPRESSION\";\r\n    AstNodeType[\"PARENTHESIS\"] = \"PARENTHESES\";\r\n    AstNodeType[\"CELL_REFERENCE\"] = \"CELL_REFERENCE\";\r\n    AstNodeType[\"CELL_RANGE\"] = \"CELL_RANGE\";\r\n    AstNodeType[\"COLUMN_RANGE\"] = \"COLUMN_RANGE\";\r\n    AstNodeType[\"ROW_RANGE\"] = \"ROW_RANGE\";\r\n    AstNodeType[\"ERROR\"] = \"ERROR\";\r\n    AstNodeType[\"ERROR_WITH_RAW_INPUT\"] = \"ERROR_WITH_RAW_INPUT\";\r\n    AstNodeType[\"ARRAY\"] = \"ARRAY\";\r\n})(AstNodeType || (AstNodeType = {}));\r\nexport var RangeSheetReferenceType;\r\n(function (RangeSheetReferenceType) {\r\n    RangeSheetReferenceType[RangeSheetReferenceType[\"RELATIVE\"] = 0] = \"RELATIVE\";\r\n    RangeSheetReferenceType[RangeSheetReferenceType[\"START_ABSOLUTE\"] = 1] = \"START_ABSOLUTE\";\r\n    RangeSheetReferenceType[RangeSheetReferenceType[\"BOTH_ABSOLUTE\"] = 2] = \"BOTH_ABSOLUTE\";\r\n})(RangeSheetReferenceType || (RangeSheetReferenceType = {}));\r\nexport const buildEmptyArgAst = (leadingWhitespace) => ({\r\n    type: AstNodeType.EMPTY,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildNumberAst = (value, leadingWhitespace) => ({\r\n    type: AstNodeType.NUMBER,\r\n    value: value,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildStringAst = (token) => {\r\n    var _a;\r\n    return ({\r\n        type: AstNodeType.STRING,\r\n        value: token.image.slice(1, -1),\r\n        leadingWhitespace: (_a = token.leadingWhitespace) === null || _a === void 0 ? void 0 : _a.image,\r\n    });\r\n};\r\nexport const buildCellReferenceAst = (reference, leadingWhitespace) => ({\r\n    type: AstNodeType.CELL_REFERENCE,\r\n    reference,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildCellRangeAst = (start, end, sheetReferenceType, leadingWhitespace) => {\r\n    assertRangeConsistency(start, end, sheetReferenceType);\r\n    return {\r\n        type: AstNodeType.CELL_RANGE,\r\n        start,\r\n        end,\r\n        sheetReferenceType,\r\n        leadingWhitespace\r\n    };\r\n};\r\nexport const buildColumnRangeAst = (start, end, sheetReferenceType, leadingWhitespace) => {\r\n    assertRangeConsistency(start, end, sheetReferenceType);\r\n    return {\r\n        type: AstNodeType.COLUMN_RANGE,\r\n        start,\r\n        end,\r\n        sheetReferenceType,\r\n        leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n    };\r\n};\r\nexport const buildRowRangeAst = (start, end, sheetReferenceType, leadingWhitespace) => {\r\n    assertRangeConsistency(start, end, sheetReferenceType);\r\n    return {\r\n        type: AstNodeType.ROW_RANGE,\r\n        start,\r\n        end,\r\n        sheetReferenceType,\r\n        leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n    };\r\n};\r\nexport const buildConcatenateOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.CONCATENATE_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildEqualsOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.EQUALS_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildNotEqualOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.NOT_EQUAL_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildGreaterThanOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.GREATER_THAN_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildLessThanOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.LESS_THAN_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildGreaterThanOrEqualOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.GREATER_THAN_OR_EQUAL_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildLessThanOrEqualOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.LESS_THAN_OR_EQUAL_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildPlusOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.PLUS_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildMinusOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.MINUS_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildTimesOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.TIMES_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildDivOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.DIV_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildPowerOpAst = (left, right, leadingWhitespace) => ({\r\n    type: AstNodeType.POWER_OP,\r\n    left,\r\n    right,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildMinusUnaryOpAst = (value, leadingWhitespace) => ({\r\n    type: AstNodeType.MINUS_UNARY_OP,\r\n    value,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildPlusUnaryOpAst = (value, leadingWhitespace) => ({\r\n    type: AstNodeType.PLUS_UNARY_OP,\r\n    value,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildPercentOpAst = (value, leadingWhitespace) => ({\r\n    type: AstNodeType.PERCENT_OP,\r\n    value,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildProcedureAst = (procedureName, args, leadingWhitespace, internalWhitespace) => ({\r\n    type: AstNodeType.FUNCTION_CALL,\r\n    procedureName,\r\n    args,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n    internalWhitespace: internalWhitespace === null || internalWhitespace === void 0 ? void 0 : internalWhitespace.image,\r\n});\r\nexport const buildArrayAst = (args, leadingWhitespace, internalWhitespace) => ({\r\n    type: AstNodeType.ARRAY,\r\n    args,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n    internalWhitespace: internalWhitespace === null || internalWhitespace === void 0 ? void 0 : internalWhitespace.image,\r\n});\r\nexport const buildNamedExpressionAst = (expressionName, leadingWhitespace) => ({\r\n    type: AstNodeType.NAMED_EXPRESSION,\r\n    expressionName,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildParenthesisAst = (expression, leadingWhitespace, internalWhitespace) => ({\r\n    type: AstNodeType.PARENTHESIS,\r\n    expression,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n    internalWhitespace: internalWhitespace === null || internalWhitespace === void 0 ? void 0 : internalWhitespace.image,\r\n});\r\nexport const buildCellErrorAst = (error, leadingWhitespace) => ({\r\n    type: AstNodeType.ERROR,\r\n    error,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildErrorWithRawInputAst = (rawInput, error, leadingWhitespace) => ({\r\n    type: AstNodeType.ERROR_WITH_RAW_INPUT,\r\n    error,\r\n    rawInput,\r\n    leadingWhitespace: leadingWhitespace === null || leadingWhitespace === void 0 ? void 0 : leadingWhitespace.image,\r\n});\r\nexport const buildParsingErrorAst = () => ({\r\n    type: AstNodeType.ERROR,\r\n    error: CellError.parsingError()\r\n});\r\nfunction assertRangeConsistency(start, end, sheetReferenceType) {\r\n    if ((start.sheet !== undefined && end.sheet === undefined) || (start.sheet === undefined && end.sheet !== undefined)) {\r\n        throw new Error('Start address inconsistent with end address');\r\n    }\r\n    if ((start.sheet === undefined && sheetReferenceType !== RangeSheetReferenceType.RELATIVE)\r\n        || (start.sheet !== undefined && sheetReferenceType === RangeSheetReferenceType.RELATIVE)) {\r\n        throw new Error('Sheet address inconsistent with sheet reference type');\r\n    }\r\n}\r\nexport function imageWithWhitespace(image, leadingWhitespace) {\r\n    return (leadingWhitespace !== null && leadingWhitespace !== void 0 ? leadingWhitespace : '') + image;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AstNodeType } from './Ast';\r\nexport const binaryOpTokenMap = {\r\n    [AstNodeType.PLUS_OP]: '+',\r\n    [AstNodeType.MINUS_OP]: '-',\r\n    [AstNodeType.TIMES_OP]: '*',\r\n    [AstNodeType.DIV_OP]: '/',\r\n    [AstNodeType.CONCATENATE_OP]: '&',\r\n    [AstNodeType.POWER_OP]: '^',\r\n    [AstNodeType.EQUALS_OP]: '=',\r\n    [AstNodeType.NOT_EQUAL_OP]: '<>',\r\n    [AstNodeType.GREATER_THAN_OP]: '>',\r\n    [AstNodeType.GREATER_THAN_OR_EQUAL_OP]: '>=',\r\n    [AstNodeType.LESS_THAN_OP]: '<',\r\n    [AstNodeType.LESS_THAN_OR_EQUAL_OP]: '<=',\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AstNodeType, collectDependencies } from './';\r\nconst buildCacheEntry = (ast, relativeDependencies, hasVolatileFunction, hasStructuralChangeFunction) => ({\r\n    ast,\r\n    relativeDependencies,\r\n    hasVolatileFunction,\r\n    hasStructuralChangeFunction\r\n});\r\nexport class Cache {\r\n    constructor(functionRegistry) {\r\n        this.functionRegistry = functionRegistry;\r\n        this.cache = new Map();\r\n    }\r\n    set(hash, ast) {\r\n        const astRelativeDependencies = collectDependencies(ast, this.functionRegistry);\r\n        const cacheEntry = buildCacheEntry(ast, astRelativeDependencies, doesContainFunctions(ast, this.functionRegistry.isFunctionVolatile), doesContainFunctions(ast, this.functionRegistry.isFunctionDependentOnSheetStructureChange));\r\n        this.cache.set(hash, cacheEntry);\r\n        return cacheEntry;\r\n    }\r\n    get(hash) {\r\n        return this.cache.get(hash);\r\n    }\r\n    maybeSetAndThenGet(hash, ast) {\r\n        const entryFromCache = this.cache.get(hash);\r\n        if (entryFromCache !== undefined) {\r\n            return entryFromCache.ast;\r\n        }\r\n        else {\r\n            this.set(hash, ast);\r\n            return ast;\r\n        }\r\n    }\r\n}\r\nexport const doesContainFunctions = (ast, functionCriterion) => {\r\n    switch (ast.type) {\r\n        case AstNodeType.EMPTY:\r\n        case AstNodeType.NUMBER:\r\n        case AstNodeType.STRING:\r\n        case AstNodeType.ERROR:\r\n        case AstNodeType.ERROR_WITH_RAW_INPUT:\r\n        case AstNodeType.CELL_REFERENCE:\r\n        case AstNodeType.CELL_RANGE:\r\n        case AstNodeType.COLUMN_RANGE:\r\n        case AstNodeType.ROW_RANGE:\r\n        case AstNodeType.NAMED_EXPRESSION:\r\n            return false;\r\n        case AstNodeType.PERCENT_OP:\r\n        case AstNodeType.PLUS_UNARY_OP:\r\n        case AstNodeType.MINUS_UNARY_OP: {\r\n            return doesContainFunctions(ast.value, functionCriterion);\r\n        }\r\n        case AstNodeType.CONCATENATE_OP:\r\n        case AstNodeType.EQUALS_OP:\r\n        case AstNodeType.NOT_EQUAL_OP:\r\n        case AstNodeType.LESS_THAN_OP:\r\n        case AstNodeType.GREATER_THAN_OP:\r\n        case AstNodeType.LESS_THAN_OR_EQUAL_OP:\r\n        case AstNodeType.GREATER_THAN_OR_EQUAL_OP:\r\n        case AstNodeType.MINUS_OP:\r\n        case AstNodeType.PLUS_OP:\r\n        case AstNodeType.TIMES_OP:\r\n        case AstNodeType.DIV_OP:\r\n        case AstNodeType.POWER_OP:\r\n            return doesContainFunctions(ast.left, functionCriterion) || doesContainFunctions(ast.right, functionCriterion);\r\n        case AstNodeType.PARENTHESIS:\r\n            return doesContainFunctions(ast.expression, functionCriterion);\r\n        case AstNodeType.FUNCTION_CALL: {\r\n            if (functionCriterion(ast.procedureName)) {\r\n                return true;\r\n            }\r\n            return ast.args.some((arg) => doesContainFunctions(arg, functionCriterion));\r\n        }\r\n        case AstNodeType.ARRAY: {\r\n            return ast.args.some(row => row.some(arg => doesContainFunctions(arg, functionCriterion)));\r\n        }\r\n    }\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { EmbeddedActionsParser, EMPTY_ALT, Lexer, tokenMatcher } from 'chevrotain';\r\nimport { CellError, ErrorType, simpleCellAddress } from '../Cell';\r\nimport { ErrorMessage } from '../error-message';\r\nimport { cellAddressFromString, columnAddressFromString, rowAddressFromString, } from './addressRepresentationConverters';\r\nimport { AstNodeType, buildArrayAst, buildCellErrorAst, buildCellRangeAst, buildCellReferenceAst, buildColumnRangeAst, buildConcatenateOpAst, buildDivOpAst, buildEmptyArgAst, buildEqualsOpAst, buildErrorWithRawInputAst, buildGreaterThanOpAst, buildGreaterThanOrEqualOpAst, buildLessThanOpAst, buildLessThanOrEqualOpAst, buildMinusOpAst, buildMinusUnaryOpAst, buildNamedExpressionAst, buildNotEqualOpAst, buildNumberAst, buildParenthesisAst, buildParsingErrorAst, buildPercentOpAst, buildPlusOpAst, buildPlusUnaryOpAst, buildPowerOpAst, buildProcedureAst, buildRowRangeAst, buildStringAst, buildTimesOpAst, parsingError, ParsingErrorType, RangeSheetReferenceType, } from './Ast';\r\nimport { CellAddress, CellReferenceType } from './CellAddress';\r\nimport { AdditionOp, ArrayLParen, ArrayRParen, BooleanOp, CellReference, ColumnRange, ConcatenateOp, DivOp, EqualsOp, ErrorLiteral, GreaterThanOp, GreaterThanOrEqualOp, LessThanOp, LessThanOrEqualOp, LParen, MinusOp, MultiplicationOp, NamedExpression, NotEqualOp, PercentOp, PlusOp, PowerOp, ProcedureName, RangeSeparator, RowRange, RParen, StringLiteral, TimesOp, } from './LexerConfig';\r\n/**\r\n * LL(k) formula parser described using Chevrotain DSL\r\n *\r\n * It is equivalent to the grammar below:\r\n *\r\n * F -> '=' E <br/>\r\n * B -> K < B | K >= B ... | K <br/>\r\n * K -> E & K | E <br/>\r\n * E -> M + E | M - E | M <br/>\r\n * M -> W * M | W / M | W <br/>\r\n * W -> C * W | C <br/>\r\n * C -> N | R | O | A | P | num <br/>\r\n * N -> '(' E ')' <br/>\r\n * R -> A:OFFSET(..) | A:A <br/>\r\n * O -> OFFSET(..) | OFFSET(..):A | OFFSET(..):OFFSET(..) <br/>\r\n * A -> A1 | $A1 | A$1 | $A$1 <br/>\r\n * P -> SUM(..) <br/>\r\n */\r\nexport class FormulaParser extends EmbeddedActionsParser {\r\n    constructor(lexerConfig, sheetMapping) {\r\n        super(lexerConfig.allTokens, { outputCst: false, maxLookahead: 7 });\r\n        this.booleanExpressionOrEmpty = this.RULE('booleanExpressionOrEmpty', () => {\r\n            return this.OR([\r\n                { ALT: () => this.SUBRULE(this.booleanExpression) },\r\n                { ALT: EMPTY_ALT(buildEmptyArgAst()) }\r\n            ]);\r\n        });\r\n        /**\r\n         * Rule for procedure expressions: SUM(1,A1)\r\n         */\r\n        this.procedureExpression = this.RULE('procedureExpression', () => {\r\n            var _a;\r\n            const procedureNameToken = this.CONSUME(ProcedureName);\r\n            const procedureName = procedureNameToken.image.toUpperCase().slice(0, -1);\r\n            const canonicalProcedureName = (_a = this.lexerConfig.functionMapping[procedureName]) !== null && _a !== void 0 ? _a : procedureName;\r\n            const args = [];\r\n            let argument = this.SUBRULE(this.booleanExpressionOrEmpty);\r\n            this.MANY(() => {\r\n                var _a;\r\n                const separator = this.CONSUME(this.lexerConfig.ArgSeparator);\r\n                if (argument.type === AstNodeType.EMPTY) {\r\n                    argument.leadingWhitespace = (_a = separator.leadingWhitespace) === null || _a === void 0 ? void 0 : _a.image;\r\n                }\r\n                args.push(argument);\r\n                argument = this.SUBRULE2(this.booleanExpressionOrEmpty);\r\n            });\r\n            args.push(argument);\r\n            if (args.length === 1 && args[0].type === AstNodeType.EMPTY) {\r\n                args.length = 0;\r\n            }\r\n            const rParenToken = this.CONSUME(RParen);\r\n            return buildProcedureAst(canonicalProcedureName, args, procedureNameToken.leadingWhitespace, rParenToken.leadingWhitespace);\r\n        });\r\n        this.namedExpressionExpression = this.RULE('namedExpressionExpression', () => {\r\n            const name = this.CONSUME(NamedExpression);\r\n            return buildNamedExpressionAst(name.image, name.leadingWhitespace);\r\n        });\r\n        /**\r\n         * Rule for OFFSET() function expression\r\n         */\r\n        this.offsetProcedureExpression = this.RULE('offsetProcedureExpression', () => {\r\n            const args = [];\r\n            this.CONSUME(this.lexerConfig.OffsetProcedureName);\r\n            this.CONSUME(LParen);\r\n            this.MANY_SEP({\r\n                SEP: this.lexerConfig.ArgSeparator,\r\n                DEF: () => {\r\n                    args.push(this.SUBRULE(this.booleanExpression));\r\n                },\r\n            });\r\n            this.CONSUME(RParen);\r\n            return this.handleOffsetHeuristic(args);\r\n        });\r\n        /**\r\n         * Rule for column range, e.g. A:B, Sheet1!A:B, Sheet1!A:Sheet1!B\r\n         */\r\n        this.columnRangeExpression = this.RULE('columnRangeExpression', () => {\r\n            const range = this.CONSUME(ColumnRange);\r\n            const [startImage, endImage] = range.image.split(':');\r\n            const firstAddress = this.ACTION(() => columnAddressFromString(this.sheetMapping, startImage, this.formulaAddress));\r\n            const secondAddress = this.ACTION(() => columnAddressFromString(this.sheetMapping, endImage, this.formulaAddress));\r\n            if (firstAddress === undefined || secondAddress === undefined) {\r\n                return buildCellErrorAst(new CellError(ErrorType.REF));\r\n            }\r\n            if (firstAddress.exceedsSheetSizeLimits(this.lexerConfig.maxColumns) || secondAddress.exceedsSheetSizeLimits(this.lexerConfig.maxColumns)) {\r\n                return buildErrorWithRawInputAst(range.image, new CellError(ErrorType.NAME), range.leadingWhitespace);\r\n            }\r\n            if (firstAddress.sheet === undefined && secondAddress.sheet !== undefined) {\r\n                return this.parsingError(ParsingErrorType.ParserError, 'Malformed range expression');\r\n            }\r\n            const { firstEnd, secondEnd, sheetRefType } = FormulaParser.fixSheetIdsForRangeEnds(firstAddress, secondAddress);\r\n            return buildColumnRangeAst(firstEnd, secondEnd, sheetRefType, range.leadingWhitespace);\r\n        });\r\n        /**\r\n         * Rule for row range, e.g. 1:2, Sheet1!1:2, Sheet1!1:Sheet1!2\r\n         */\r\n        this.rowRangeExpression = this.RULE('rowRangeExpression', () => {\r\n            const range = this.CONSUME(RowRange);\r\n            const [startImage, endImage] = range.image.split(':');\r\n            const firstAddress = this.ACTION(() => rowAddressFromString(this.sheetMapping, startImage, this.formulaAddress));\r\n            const secondAddress = this.ACTION(() => rowAddressFromString(this.sheetMapping, endImage, this.formulaAddress));\r\n            if (firstAddress === undefined || secondAddress === undefined) {\r\n                return buildCellErrorAst(new CellError(ErrorType.REF));\r\n            }\r\n            if (firstAddress.exceedsSheetSizeLimits(this.lexerConfig.maxRows) || secondAddress.exceedsSheetSizeLimits(this.lexerConfig.maxRows)) {\r\n                return buildErrorWithRawInputAst(range.image, new CellError(ErrorType.NAME), range.leadingWhitespace);\r\n            }\r\n            if (firstAddress.sheet === undefined && secondAddress.sheet !== undefined) {\r\n                return this.parsingError(ParsingErrorType.ParserError, 'Malformed range expression');\r\n            }\r\n            const { firstEnd, secondEnd, sheetRefType } = FormulaParser.fixSheetIdsForRangeEnds(firstAddress, secondAddress);\r\n            return buildRowRangeAst(firstEnd, secondEnd, sheetRefType, range.leadingWhitespace);\r\n        });\r\n        /**\r\n         * Rule for cell reference expression (e.g. A1, $A1, A$1, $A$1, $Sheet42!A$17)\r\n         */\r\n        this.cellReference = this.RULE('cellReference', () => {\r\n            const cell = this.CONSUME(CellReference);\r\n            const address = this.ACTION(() => {\r\n                return cellAddressFromString(this.sheetMapping, cell.image, this.formulaAddress);\r\n            });\r\n            if (address === undefined) {\r\n                return buildErrorWithRawInputAst(cell.image, new CellError(ErrorType.REF), cell.leadingWhitespace);\r\n            }\r\n            else if (address.exceedsSheetSizeLimits(this.lexerConfig.maxColumns, this.lexerConfig.maxRows)) {\r\n                return buildErrorWithRawInputAst(cell.image, new CellError(ErrorType.NAME), cell.leadingWhitespace);\r\n            }\r\n            else {\r\n                return buildCellReferenceAst(address, cell.leadingWhitespace);\r\n            }\r\n        });\r\n        /**\r\n         * Rule for end range reference expression with additional checks considering range start\r\n         */\r\n        this.endRangeReference = this.RULE('endRangeReference', (start) => {\r\n            var _a;\r\n            const end = this.CONSUME(CellReference);\r\n            const startAddress = this.ACTION(() => {\r\n                return cellAddressFromString(this.sheetMapping, start.image, this.formulaAddress);\r\n            });\r\n            const endAddress = this.ACTION(() => {\r\n                return cellAddressFromString(this.sheetMapping, end.image, this.formulaAddress);\r\n            });\r\n            if (startAddress === undefined || endAddress === undefined) {\r\n                return this.ACTION(() => {\r\n                    return buildErrorWithRawInputAst(`${start.image}:${end.image}`, new CellError(ErrorType.REF), start.leadingWhitespace);\r\n                });\r\n            }\r\n            else if (startAddress.exceedsSheetSizeLimits(this.lexerConfig.maxColumns, this.lexerConfig.maxRows)\r\n                || endAddress.exceedsSheetSizeLimits(this.lexerConfig.maxColumns, this.lexerConfig.maxRows)) {\r\n                return this.ACTION(() => {\r\n                    return buildErrorWithRawInputAst(`${start.image}:${end.image}`, new CellError(ErrorType.NAME), start.leadingWhitespace);\r\n                });\r\n            }\r\n            return this.buildCellRange(startAddress, endAddress, (_a = start.leadingWhitespace) === null || _a === void 0 ? void 0 : _a.image);\r\n        });\r\n        /**\r\n         * Rule for end of range expression\r\n         *\r\n         * End of range may be a cell reference or OFFSET() function call\r\n         */\r\n        this.endOfRangeExpression = this.RULE('endOfRangeExpression', (start) => {\r\n            return this.OR([\r\n                {\r\n                    ALT: () => {\r\n                        return this.SUBRULE(this.endRangeReference, { ARGS: [start] });\r\n                    },\r\n                },\r\n                {\r\n                    ALT: () => {\r\n                        var _a;\r\n                        const offsetProcedure = this.SUBRULE(this.offsetProcedureExpression);\r\n                        const startAddress = this.ACTION(() => {\r\n                            return cellAddressFromString(this.sheetMapping, start.image, this.formulaAddress);\r\n                        });\r\n                        if (startAddress === undefined) {\r\n                            return buildCellErrorAst(new CellError(ErrorType.REF));\r\n                        }\r\n                        if (offsetProcedure.type === AstNodeType.CELL_REFERENCE) {\r\n                            return this.buildCellRange(startAddress, offsetProcedure.reference, (_a = start.leadingWhitespace) === null || _a === void 0 ? void 0 : _a.image);\r\n                        }\r\n                        else {\r\n                            return this.parsingError(ParsingErrorType.RangeOffsetNotAllowed, 'Range offset not allowed here');\r\n                        }\r\n                    },\r\n                },\r\n            ]);\r\n        });\r\n        /**\r\n         * Rule for cell ranges (e.g. A1:B$3, A1:OFFSET())\r\n         */\r\n        this.cellRangeExpression = this.RULE('cellRangeExpression', () => {\r\n            const start = this.CONSUME(CellReference);\r\n            this.CONSUME2(RangeSeparator);\r\n            return this.SUBRULE(this.endOfRangeExpression, { ARGS: [start] });\r\n        });\r\n        /**\r\n         * Rule for end range reference expression starting with offset procedure with additional checks considering range start\r\n         */\r\n        this.endRangeWithOffsetStartReference = this.RULE('endRangeWithOffsetStartReference', (start) => {\r\n            const end = this.CONSUME(CellReference);\r\n            const endAddress = this.ACTION(() => {\r\n                return cellAddressFromString(this.sheetMapping, end.image, this.formulaAddress);\r\n            });\r\n            if (endAddress === undefined) {\r\n                return this.ACTION(() => {\r\n                    return buildCellErrorAst(new CellError(ErrorType.REF));\r\n                });\r\n            }\r\n            return this.buildCellRange(start.reference, endAddress, start.leadingWhitespace);\r\n        });\r\n        /**\r\n         * Rule for end of range expression\r\n         *\r\n         * End of range may be a cell reference or OFFSET() function call\r\n         */\r\n        this.endOfRangeWithOffsetStartExpression = this.RULE('endOfRangeWithOffsetStartExpression', (start) => {\r\n            return this.OR([\r\n                {\r\n                    ALT: () => {\r\n                        return this.SUBRULE(this.endRangeWithOffsetStartReference, { ARGS: [start] });\r\n                    },\r\n                },\r\n                {\r\n                    ALT: () => {\r\n                        const offsetProcedure = this.SUBRULE(this.offsetProcedureExpression);\r\n                        if (offsetProcedure.type === AstNodeType.CELL_REFERENCE) {\r\n                            return this.buildCellRange(start.reference, offsetProcedure.reference, start.leadingWhitespace);\r\n                        }\r\n                        else {\r\n                            return this.parsingError(ParsingErrorType.RangeOffsetNotAllowed, 'Range offset not allowed here');\r\n                        }\r\n                    },\r\n                },\r\n            ]);\r\n        });\r\n        /**\r\n         * Rule for expressions that start with the OFFSET function.\r\n         *\r\n         * The OFFSET function can occur as a cell reference, or as a part of a cell range.\r\n         * To preserve LL(k) properties, expressions that start with the OFFSET function need a separate rule.\r\n         *\r\n         * Depending on the presence of the {@link RangeSeparator}, a proper {@link Ast} node type is built.\r\n         */\r\n        this.offsetExpression = this.RULE('offsetExpression', () => {\r\n            const offsetProcedure = this.SUBRULE(this.offsetProcedureExpression);\r\n            let end;\r\n            this.OPTION(() => {\r\n                this.CONSUME(RangeSeparator);\r\n                if (offsetProcedure.type === AstNodeType.CELL_RANGE) {\r\n                    end = this.parsingError(ParsingErrorType.RangeOffsetNotAllowed, 'Range offset not allowed here');\r\n                }\r\n                else {\r\n                    end = this.SUBRULE(this.endOfRangeWithOffsetStartExpression, { ARGS: [offsetProcedure] });\r\n                }\r\n            });\r\n            if (end !== undefined) {\r\n                return end;\r\n            }\r\n            return offsetProcedure;\r\n        });\r\n        this.insideArrayExpression = this.RULE('insideArrayExpression', () => {\r\n            const ret = [[]];\r\n            ret[ret.length - 1].push(this.SUBRULE(this.booleanExpression));\r\n            this.MANY(() => {\r\n                this.OR([\r\n                    {\r\n                        ALT: () => {\r\n                            this.CONSUME(this.lexerConfig.ArrayColSeparator);\r\n                            ret[ret.length - 1].push(this.SUBRULE2(this.booleanExpression));\r\n                        }\r\n                    },\r\n                    {\r\n                        ALT: () => {\r\n                            this.CONSUME(this.lexerConfig.ArrayRowSeparator);\r\n                            ret.push([]);\r\n                            ret[ret.length - 1].push(this.SUBRULE3(this.booleanExpression));\r\n                        }\r\n                    }\r\n                ]);\r\n            });\r\n            return buildArrayAst(ret);\r\n        });\r\n        /**\r\n         * Rule for parenthesis expression\r\n         */\r\n        this.parenthesisExpression = this.RULE('parenthesisExpression', () => {\r\n            const lParenToken = this.CONSUME(LParen);\r\n            const expression = this.SUBRULE(this.booleanExpression);\r\n            const rParenToken = this.CONSUME(RParen);\r\n            return buildParenthesisAst(expression, lParenToken.leadingWhitespace, rParenToken.leadingWhitespace);\r\n        });\r\n        this.arrayExpression = this.RULE('arrayExpression', () => {\r\n            return this.OR([\r\n                {\r\n                    ALT: () => {\r\n                        const ltoken = this.CONSUME(ArrayLParen);\r\n                        const ret = this.SUBRULE(this.insideArrayExpression);\r\n                        const rtoken = this.CONSUME(ArrayRParen);\r\n                        return buildArrayAst(ret.args, ltoken.leadingWhitespace, rtoken.leadingWhitespace);\r\n                    }\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.parenthesisExpression)\r\n                }\r\n            ]);\r\n        });\r\n        this.numericStringToNumber = (input) => {\r\n            const normalized = input.replace(this.lexerConfig.decimalSeparator, '.');\r\n            return Number(normalized);\r\n        };\r\n        /**\r\n         * Rule for positive atomic expressions\r\n         */\r\n        this.positiveAtomicExpression = this.RULE('positiveAtomicExpression', () => {\r\n            var _a;\r\n            return this.OR((_a = this.atomicExpCache) !== null && _a !== void 0 ? _a : (this.atomicExpCache = [\r\n                {\r\n                    ALT: () => this.SUBRULE(this.arrayExpression),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.cellRangeExpression),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.columnRangeExpression),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.rowRangeExpression),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.offsetExpression),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.cellReference),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.procedureExpression),\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE(this.namedExpressionExpression),\r\n                },\r\n                {\r\n                    ALT: () => {\r\n                        const number = this.CONSUME(this.lexerConfig.NumberLiteral);\r\n                        return buildNumberAst(this.numericStringToNumber(number.image), number.leadingWhitespace);\r\n                    },\r\n                },\r\n                {\r\n                    ALT: () => {\r\n                        const str = this.CONSUME(StringLiteral);\r\n                        return buildStringAst(str);\r\n                    },\r\n                },\r\n                {\r\n                    ALT: () => {\r\n                        const token = this.CONSUME(ErrorLiteral);\r\n                        const errString = token.image.toUpperCase();\r\n                        const errorType = this.lexerConfig.errorMapping[errString];\r\n                        if (errorType) {\r\n                            return buildCellErrorAst(new CellError(errorType), token.leadingWhitespace);\r\n                        }\r\n                        else {\r\n                            return this.parsingError(ParsingErrorType.ParserError, 'Unknown error literal');\r\n                        }\r\n                    },\r\n                },\r\n            ]));\r\n        });\r\n        this.rightUnaryOpAtomicExpression = this.RULE('rightUnaryOpAtomicExpression', () => {\r\n            const positiveAtomicExpression = this.SUBRULE(this.positiveAtomicExpression);\r\n            const percentage = this.OPTION(() => {\r\n                return this.CONSUME(PercentOp);\r\n            });\r\n            if (percentage) {\r\n                return buildPercentOpAst(positiveAtomicExpression, percentage.leadingWhitespace);\r\n            }\r\n            return positiveAtomicExpression;\r\n        });\r\n        /**\r\n         * Rule for atomic expressions, which is positive atomic expression or negation of it\r\n         */\r\n        this.atomicExpression = this.RULE('atomicExpression', () => {\r\n            return this.OR([\r\n                {\r\n                    ALT: () => {\r\n                        const op = this.CONSUME(AdditionOp);\r\n                        const value = this.SUBRULE(this.atomicExpression);\r\n                        if (tokenMatcher(op, PlusOp)) {\r\n                            return buildPlusUnaryOpAst(value, op.leadingWhitespace);\r\n                        }\r\n                        else if (tokenMatcher(op, MinusOp)) {\r\n                            return buildMinusUnaryOpAst(value, op.leadingWhitespace);\r\n                        }\r\n                        else {\r\n                            this.customParsingError = parsingError(ParsingErrorType.ParserError, 'Mismatched token type');\r\n                            return this.customParsingError;\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    ALT: () => this.SUBRULE2(this.rightUnaryOpAtomicExpression),\r\n                },\r\n            ]);\r\n        });\r\n        /**\r\n         * Rule for power expression\r\n         */\r\n        this.powerExpression = this.RULE('powerExpression', () => {\r\n            let lhs = this.SUBRULE(this.atomicExpression);\r\n            this.MANY(() => {\r\n                const op = this.CONSUME(PowerOp);\r\n                const rhs = this.SUBRULE2(this.atomicExpression);\r\n                if (tokenMatcher(op, PowerOp)) {\r\n                    lhs = buildPowerOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else {\r\n                    this.ACTION(() => {\r\n                        throw Error('Operator not supported');\r\n                    });\r\n                }\r\n            });\r\n            return lhs;\r\n        });\r\n        /**\r\n         * Rule for multiplication category operators (e.g. 1 * A1, 1 / A1)\r\n         */\r\n        this.multiplicationExpression = this.RULE('multiplicationExpression', () => {\r\n            let lhs = this.SUBRULE(this.powerExpression);\r\n            this.MANY(() => {\r\n                const op = this.CONSUME(MultiplicationOp);\r\n                const rhs = this.SUBRULE2(this.powerExpression);\r\n                if (tokenMatcher(op, TimesOp)) {\r\n                    lhs = buildTimesOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, DivOp)) {\r\n                    lhs = buildDivOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else {\r\n                    this.ACTION(() => {\r\n                        throw Error('Operator not supported');\r\n                    });\r\n                }\r\n            });\r\n            return lhs;\r\n        });\r\n        /**\r\n         * Rule for addition category operators (e.g. 1 + A1, 1 - A1)\r\n         */\r\n        this.additionExpression = this.RULE('additionExpression', () => {\r\n            let lhs = this.SUBRULE(this.multiplicationExpression);\r\n            this.MANY(() => {\r\n                const op = this.CONSUME(AdditionOp);\r\n                const rhs = this.SUBRULE2(this.multiplicationExpression);\r\n                if (tokenMatcher(op, PlusOp)) {\r\n                    lhs = buildPlusOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, MinusOp)) {\r\n                    lhs = buildMinusOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else {\r\n                    this.ACTION(() => {\r\n                        throw Error('Operator not supported');\r\n                    });\r\n                }\r\n            });\r\n            return lhs;\r\n        });\r\n        /**\r\n         * Rule for concatenation operator expression (e.g. \"=\" & A1)\r\n         */\r\n        this.concatenateExpression = this.RULE('concatenateExpression', () => {\r\n            let lhs = this.SUBRULE(this.additionExpression);\r\n            this.MANY(() => {\r\n                const op = this.CONSUME(ConcatenateOp);\r\n                const rhs = this.SUBRULE2(this.additionExpression);\r\n                lhs = buildConcatenateOpAst(lhs, rhs, op.leadingWhitespace);\r\n            });\r\n            return lhs;\r\n        });\r\n        /**\r\n         * Rule for boolean expression (e.g. 1 <= A1)\r\n         */\r\n        this.booleanExpression = this.RULE('booleanExpression', () => {\r\n            let lhs = this.SUBRULE(this.concatenateExpression);\r\n            this.MANY(() => {\r\n                const op = this.CONSUME(BooleanOp);\r\n                const rhs = this.SUBRULE2(this.concatenateExpression);\r\n                if (tokenMatcher(op, EqualsOp)) {\r\n                    lhs = buildEqualsOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, NotEqualOp)) {\r\n                    lhs = buildNotEqualOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, GreaterThanOp)) {\r\n                    lhs = buildGreaterThanOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, LessThanOp)) {\r\n                    lhs = buildLessThanOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, GreaterThanOrEqualOp)) {\r\n                    lhs = buildGreaterThanOrEqualOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else if (tokenMatcher(op, LessThanOrEqualOp)) {\r\n                    lhs = buildLessThanOrEqualOpAst(lhs, rhs, op.leadingWhitespace);\r\n                }\r\n                else {\r\n                    this.ACTION(() => {\r\n                        throw Error('Operator not supported');\r\n                    });\r\n                }\r\n            });\r\n            return lhs;\r\n        });\r\n        /**\r\n         * Entry rule\r\n         */\r\n        this.formula = this.RULE('formula', () => {\r\n            this.CONSUME(EqualsOp);\r\n            return this.SUBRULE(this.booleanExpression);\r\n        });\r\n        this.lexerConfig = lexerConfig;\r\n        this.sheetMapping = sheetMapping;\r\n        this.formulaAddress = simpleCellAddress(0, 0, 0);\r\n        this.performSelfAnalysis();\r\n    }\r\n    /**\r\n     * Parses tokenized formula and builds abstract syntax tree\r\n     *\r\n     * @param {ExtendedToken[]} tokens - tokenized formula\r\n     * @param {SimpleCellAddress} formulaAddress - address of the cell in which formula is located\r\n     */\r\n    parseFromTokens(tokens, formulaAddress) {\r\n        this.input = tokens;\r\n        let ast = this.formulaWithContext(formulaAddress);\r\n        let errors = [];\r\n        if (this.customParsingError) {\r\n            errors.push(this.customParsingError);\r\n        }\r\n        errors = errors.concat(this.errors.map((e) => ({\r\n            type: ParsingErrorType.ParserError,\r\n            message: e.message,\r\n        })));\r\n        if (errors.length > 0) {\r\n            ast = buildParsingErrorAst();\r\n        }\r\n        return {\r\n            ast,\r\n            errors\r\n        };\r\n    }\r\n    reset() {\r\n        super.reset();\r\n        this.customParsingError = undefined;\r\n    }\r\n    /**\r\n     * Entry rule wrapper that sets formula address\r\n     *\r\n     * @param {SimpleCellAddress} address - address of the cell in which formula is located\r\n     */\r\n    formulaWithContext(address) {\r\n        this.formulaAddress = address;\r\n        return this.formula();\r\n    }\r\n    buildCellRange(firstAddress, secondAddress, leadingWhitespace) {\r\n        if (firstAddress.sheet === undefined && secondAddress.sheet !== undefined) {\r\n            return this.parsingError(ParsingErrorType.ParserError, 'Malformed range expression');\r\n        }\r\n        const { firstEnd, secondEnd, sheetRefType } = FormulaParser.fixSheetIdsForRangeEnds(firstAddress, secondAddress);\r\n        return buildCellRangeAst(firstEnd, secondEnd, sheetRefType, leadingWhitespace);\r\n    }\r\n    static fixSheetIdsForRangeEnds(firstEnd, secondEnd) {\r\n        const sheetRefType = FormulaParser.rangeSheetReferenceType(firstEnd.sheet, secondEnd.sheet);\r\n        const secondEndFixed = (firstEnd.sheet !== undefined && secondEnd.sheet === undefined)\r\n            ? secondEnd.withSheet(firstEnd.sheet)\r\n            : secondEnd;\r\n        return { firstEnd, secondEnd: secondEndFixed, sheetRefType };\r\n    }\r\n    /**\r\n     * Returns {@link CellReferenceAst} or {@link CellRangeAst} based on OFFSET function arguments\r\n     *\r\n     * @param {Ast[]} args - OFFSET function arguments\r\n     */\r\n    handleOffsetHeuristic(args) {\r\n        const cellArg = args[0];\r\n        if (cellArg.type !== AstNodeType.CELL_REFERENCE) {\r\n            return this.parsingError(ParsingErrorType.StaticOffsetError, 'First argument to OFFSET is not a reference');\r\n        }\r\n        const rowsArg = args[1];\r\n        let rowShift;\r\n        if (rowsArg.type === AstNodeType.NUMBER && Number.isInteger(rowsArg.value)) {\r\n            rowShift = rowsArg.value;\r\n        }\r\n        else if (rowsArg.type === AstNodeType.PLUS_UNARY_OP && rowsArg.value.type === AstNodeType.NUMBER && Number.isInteger(rowsArg.value.value)) {\r\n            rowShift = rowsArg.value.value;\r\n        }\r\n        else if (rowsArg.type === AstNodeType.MINUS_UNARY_OP && rowsArg.value.type === AstNodeType.NUMBER && Number.isInteger(rowsArg.value.value)) {\r\n            rowShift = -rowsArg.value.value;\r\n        }\r\n        else {\r\n            return this.parsingError(ParsingErrorType.StaticOffsetError, 'Second argument to OFFSET is not a static number');\r\n        }\r\n        const columnsArg = args[2];\r\n        let colShift;\r\n        if (columnsArg.type === AstNodeType.NUMBER && Number.isInteger(columnsArg.value)) {\r\n            colShift = columnsArg.value;\r\n        }\r\n        else if (columnsArg.type === AstNodeType.PLUS_UNARY_OP && columnsArg.value.type === AstNodeType.NUMBER && Number.isInteger(columnsArg.value.value)) {\r\n            colShift = columnsArg.value.value;\r\n        }\r\n        else if (columnsArg.type === AstNodeType.MINUS_UNARY_OP && columnsArg.value.type === AstNodeType.NUMBER && Number.isInteger(columnsArg.value.value)) {\r\n            colShift = -columnsArg.value.value;\r\n        }\r\n        else {\r\n            return this.parsingError(ParsingErrorType.StaticOffsetError, 'Third argument to OFFSET is not a static number');\r\n        }\r\n        const heightArg = args[3];\r\n        let height;\r\n        if (heightArg === undefined) {\r\n            height = 1;\r\n        }\r\n        else if (heightArg.type === AstNodeType.NUMBER) {\r\n            height = heightArg.value;\r\n            if (height < 1) {\r\n                return this.parsingError(ParsingErrorType.StaticOffsetError, 'Fourth argument to OFFSET is too small number');\r\n            }\r\n            else if (!Number.isInteger(height)) {\r\n                return this.parsingError(ParsingErrorType.StaticOffsetError, 'Fourth argument to OFFSET is not integer');\r\n            }\r\n        }\r\n        else {\r\n            return this.parsingError(ParsingErrorType.StaticOffsetError, 'Fourth argument to OFFSET is not a static number');\r\n        }\r\n        const widthArg = args[4];\r\n        let width;\r\n        if (widthArg === undefined) {\r\n            width = 1;\r\n        }\r\n        else if (widthArg.type === AstNodeType.NUMBER) {\r\n            width = widthArg.value;\r\n            if (width < 1) {\r\n                return this.parsingError(ParsingErrorType.StaticOffsetError, 'Fifth argument to OFFSET is too small number');\r\n            }\r\n            else if (!Number.isInteger(width)) {\r\n                return this.parsingError(ParsingErrorType.StaticOffsetError, 'Fifth argument to OFFSET is not integer');\r\n            }\r\n        }\r\n        else {\r\n            return this.parsingError(ParsingErrorType.StaticOffsetError, 'Fifth argument to OFFSET is not a static number');\r\n        }\r\n        const topLeftCorner = new CellAddress(cellArg.reference.col + colShift, cellArg.reference.row + rowShift, cellArg.reference.type);\r\n        let absoluteCol = topLeftCorner.col;\r\n        let absoluteRow = topLeftCorner.row;\r\n        if (cellArg.reference.type === CellReferenceType.CELL_REFERENCE_RELATIVE\r\n            || cellArg.reference.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_COL) {\r\n            absoluteRow = absoluteRow + this.formulaAddress.row;\r\n        }\r\n        if (cellArg.reference.type === CellReferenceType.CELL_REFERENCE_RELATIVE\r\n            || cellArg.reference.type === CellReferenceType.CELL_REFERENCE_ABSOLUTE_ROW) {\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            absoluteCol = absoluteCol + this.formulaAddress.col;\r\n        }\r\n        if (absoluteCol < 0 || absoluteRow < 0) {\r\n            return buildCellErrorAst(new CellError(ErrorType.REF, ErrorMessage.OutOfSheet));\r\n        }\r\n        if (width === 1 && height === 1) {\r\n            return buildCellReferenceAst(topLeftCorner);\r\n        }\r\n        else {\r\n            const bottomRightCorner = new CellAddress(topLeftCorner.col + width - 1, topLeftCorner.row + height - 1, topLeftCorner.type);\r\n            return buildCellRangeAst(topLeftCorner, bottomRightCorner, RangeSheetReferenceType.RELATIVE);\r\n        }\r\n    }\r\n    parsingError(type, message) {\r\n        this.customParsingError = parsingError(type, message);\r\n        return buildParsingErrorAst();\r\n    }\r\n    static rangeSheetReferenceType(start, end) {\r\n        if (start === undefined) {\r\n            return RangeSheetReferenceType.RELATIVE;\r\n        }\r\n        else if (end === undefined) {\r\n            return RangeSheetReferenceType.START_ABSOLUTE;\r\n        }\r\n        else {\r\n            return RangeSheetReferenceType.BOTH_ABSOLUTE;\r\n        }\r\n    }\r\n}\r\nexport class FormulaLexer {\r\n    constructor(lexerConfig) {\r\n        this.lexerConfig = lexerConfig;\r\n        this.lexer = new Lexer(lexerConfig.allTokens, { ensureOptimizations: true });\r\n    }\r\n    /**\r\n     * Returns Lexer tokens from formula string\r\n     *\r\n     * @param {string} text - string representation of a formula\r\n     */\r\n    tokenizeFormula(text) {\r\n        const lexingResult = this.lexer.tokenize(text);\r\n        let tokens = lexingResult.tokens;\r\n        tokens = this.trimTrailingWhitespaces(tokens);\r\n        tokens = this.skipWhitespacesInsideRanges(tokens);\r\n        tokens = this.skipWhitespacesBeforeArgSeparators(tokens);\r\n        lexingResult.tokens = tokens;\r\n        return lexingResult;\r\n    }\r\n    skipWhitespacesInsideRanges(tokens) {\r\n        return FormulaLexer.filterTokensByNeighbors(tokens, (previous, current, next) => {\r\n            return (tokenMatcher(previous, CellReference) || tokenMatcher(previous, RangeSeparator))\r\n                && tokenMatcher(current, this.lexerConfig.WhiteSpace)\r\n                && (tokenMatcher(next, CellReference) || tokenMatcher(next, RangeSeparator));\r\n        });\r\n    }\r\n    skipWhitespacesBeforeArgSeparators(tokens) {\r\n        return FormulaLexer.filterTokensByNeighbors(tokens, (previous, current, next) => {\r\n            return !tokenMatcher(previous, this.lexerConfig.ArgSeparator)\r\n                && tokenMatcher(current, this.lexerConfig.WhiteSpace)\r\n                && tokenMatcher(next, this.lexerConfig.ArgSeparator);\r\n        });\r\n    }\r\n    static filterTokensByNeighbors(tokens, shouldBeSkipped) {\r\n        if (tokens.length < 3) {\r\n            return tokens;\r\n        }\r\n        let i = 0;\r\n        const filteredTokens = [tokens[i++]];\r\n        while (i < tokens.length - 1) {\r\n            if (!shouldBeSkipped(tokens[i - 1], tokens[i], tokens[i + 1])) {\r\n                filteredTokens.push(tokens[i]);\r\n            }\r\n            ++i;\r\n        }\r\n        filteredTokens.push(tokens[i]);\r\n        return filteredTokens;\r\n    }\r\n    trimTrailingWhitespaces(tokens) {\r\n        if (tokens.length > 0 && tokenMatcher(tokens[tokens.length - 1], this.lexerConfig.WhiteSpace)) {\r\n            tokens.pop();\r\n        }\r\n        return tokens;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\n/**\r\n * This is a class for detailed error messages across HyperFormula.\r\n */\r\nexport class ErrorMessage {\r\n}\r\nErrorMessage.DistinctSigns = 'Distinct signs.';\r\nErrorMessage.WrongArgNumber = 'Wrong number of arguments.';\r\nErrorMessage.EmptyArg = 'Empty function argument.';\r\nErrorMessage.EmptyArray = 'Empty array not allowed.';\r\nErrorMessage.ArrayDimensions = 'Array dimensions are not compatible.';\r\nErrorMessage.NoSpaceForArrayResult = 'No space for array result.';\r\nErrorMessage.ValueSmall = 'Value too small.';\r\nErrorMessage.ValueLarge = 'Value too large.';\r\nErrorMessage.BadCriterion = 'Incorrect criterion.';\r\nErrorMessage.RangeManySheets = 'Range spans more than one sheet.';\r\nErrorMessage.CellRangeExpected = 'Cell range expected.';\r\nErrorMessage.WrongDimension = 'Wrong range dimension.';\r\nErrorMessage.ScalarExpected = 'Cell range not allowed.';\r\nErrorMessage.NumberCoercion = 'Value cannot be coerced to number.';\r\nErrorMessage.NumberExpected = 'Number argument expected.';\r\nErrorMessage.IntegerExpected = 'Value needs to be an integer.';\r\nErrorMessage.BadMode = 'Mode not recognized.';\r\nErrorMessage.DateBounds = 'Date outside of bounds.';\r\nErrorMessage.OutOfSheet = 'Resulting reference is out of the sheet.';\r\nErrorMessage.WrongType = 'Wrong type of argument.';\r\nErrorMessage.NaN = 'NaN or infinite value encountered.';\r\nErrorMessage.EqualLength = 'Ranges need to be of equal length.';\r\nErrorMessage.Negative = 'Value cannot be negative.';\r\nErrorMessage.NotBinary = 'String does not represent a binary number.';\r\nErrorMessage.NotOctal = 'String does not represent an octal number.';\r\nErrorMessage.NotHex = 'String does not represent a hexadecimal number.';\r\nErrorMessage.EndStartPeriod = 'End period needs to be at least start period.';\r\nErrorMessage.CellRefExpected = 'Cell reference expected.';\r\nErrorMessage.EmptyRange = 'Empty range not allowed.';\r\nErrorMessage.BadRef = 'Address is not correct.';\r\nErrorMessage.NumberRange = 'Number-only range expected.';\r\nErrorMessage.ValueNotFound = 'Value not found.';\r\nErrorMessage.ValueBaseLarge = 'Value in base too large.';\r\nErrorMessage.ValueBaseSmall = 'Value in base too small.';\r\nErrorMessage.ValueBaseLong = 'Value in base too long.';\r\nErrorMessage.NegativeLength = 'Length cannot be negative.';\r\nErrorMessage.PatternNotFound = 'Pattern not found.';\r\nErrorMessage.OneValue = 'Needs at least one value.';\r\nErrorMessage.TwoValues = 'Range needs to contain at least two elements.';\r\nErrorMessage.ThreeValues = 'Range needs to contain at least three elements.';\r\nErrorMessage.IndexBounds = 'Index out of bounds.';\r\nErrorMessage.IndexLarge = 'Index too large.';\r\nErrorMessage.Formula = 'Expected formula.';\r\nErrorMessage.NegativeCount = 'Count cannot be negative.';\r\nErrorMessage.ParseError = 'Parsing error.';\r\nErrorMessage.SheetRef = 'Sheet does not exist.';\r\nErrorMessage.PeriodLong = 'Period number cannot exceed life length.';\r\nErrorMessage.InvalidDate = 'Invalid date.';\r\nErrorMessage.BitshiftLong = 'Result of bitshift is too long.';\r\nErrorMessage.EmptyString = 'Empty-string argument not allowed.';\r\nErrorMessage.LengthBounds = 'Length out of bounds.';\r\nErrorMessage.NegativeTime = 'Time cannot be negative.';\r\nErrorMessage.NoDefault = 'No default option.';\r\nErrorMessage.Selector = 'Selector cannot exceed the number of arguments.';\r\nErrorMessage.StartEndDate = 'Start date needs to be earlier than end date.';\r\nErrorMessage.IncorrectDateTime = 'String does not represent correct DateTime.';\r\nErrorMessage.CharacterCodeBounds = 'Character code out of bounds.';\r\nErrorMessage.NonZero = 'Argument cannot be 0.';\r\nErrorMessage.LessThanOne = 'Argument cannot be less than 1.';\r\nErrorMessage.WeekendString = 'Incorrect weekend bitmask string.';\r\nErrorMessage.InvalidRoman = 'Invalid roman numeral.';\r\nErrorMessage.WrongOrder = 'Wrong order of values.';\r\nErrorMessage.ComplexNumberExpected = 'Complex number expected.';\r\nErrorMessage.ShouldBeIorJ = 'Should be \\'i\\' or \\'j\\'.';\r\nErrorMessage.SizeMismatch = 'Array dimensions mismatched.';\r\nErrorMessage.FunctionName = (arg) => `Function name ${arg} not recognized.`;\r\nErrorMessage.NamedExpressionName = (arg) => `Named expression ${arg} not recognized.`;\r\nErrorMessage.LicenseKey = (arg) => `License key is ${arg}.`;\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { createToken, Lexer } from 'chevrotain';\r\nimport { ALL_WHITESPACE_PATTERN, COLUMN_REFERENCE_PATTERN, NON_RESERVED_CHARACTER_PATTERN, ODFF_WHITESPACE_PATTERN, RANGE_OPERATOR, ROW_REFERENCE_PATTERN, UNICODE_LETTER_PATTERN, } from './parser-consts';\r\nimport { CellReferenceMatcher } from './CellReferenceMatcher';\r\nimport { NamedExpressionMatcher } from './NamedExpressionMatcher';\r\nexport const AdditionOp = createToken({ name: 'AdditionOp', pattern: Lexer.NA });\r\nexport const PlusOp = createToken({ name: 'PlusOp', pattern: /\\+/, categories: AdditionOp });\r\nexport const MinusOp = createToken({ name: 'MinusOp', pattern: /-/, categories: AdditionOp });\r\nexport const MultiplicationOp = createToken({ name: 'MultiplicationOp', pattern: Lexer.NA });\r\nexport const TimesOp = createToken({ name: 'TimesOp', pattern: /\\*/, categories: MultiplicationOp });\r\nexport const DivOp = createToken({ name: 'DivOp', pattern: /\\//, categories: MultiplicationOp });\r\nexport const PowerOp = createToken({ name: 'PowerOp', pattern: /\\^/ });\r\nexport const PercentOp = createToken({ name: 'PercentOp', pattern: /%/ });\r\nexport const BooleanOp = createToken({ name: 'BooleanOp', pattern: Lexer.NA });\r\nexport const EqualsOp = createToken({ name: 'EqualsOp', pattern: /=/, categories: BooleanOp });\r\nexport const NotEqualOp = createToken({ name: 'NotEqualOp', pattern: /<>/, categories: BooleanOp });\r\nexport const GreaterThanOp = createToken({ name: 'GreaterThanOp', pattern: />/, categories: BooleanOp });\r\nexport const LessThanOp = createToken({ name: 'LessThanOp', pattern: /</, categories: BooleanOp });\r\nexport const GreaterThanOrEqualOp = createToken({ name: 'GreaterThanOrEqualOp', pattern: />=/, categories: BooleanOp });\r\nexport const LessThanOrEqualOp = createToken({ name: 'LessThanOrEqualOp', pattern: /<=/, categories: BooleanOp });\r\nexport const ConcatenateOp = createToken({ name: 'ConcatenateOp', pattern: /&/ });\r\nexport const LParen = createToken({ name: 'LParen', pattern: /\\(/ });\r\nexport const RParen = createToken({ name: 'RParen', pattern: /\\)/ });\r\nexport const ArrayLParen = createToken({ name: 'ArrayLParen', pattern: /{/ });\r\nexport const ArrayRParen = createToken({ name: 'ArrayRParen', pattern: /}/ });\r\nexport const StringLiteral = createToken({ name: 'StringLiteral', pattern: /\"([^\"\\\\]*(\\\\.[^\"\\\\]*)*)\"/ });\r\nexport const ErrorLiteral = createToken({ name: 'ErrorLiteral', pattern: /#[A-Za-z0-9\\/]+[?!]?/ });\r\nexport const RangeSeparator = createToken({ name: 'RangeSeparator', pattern: new RegExp(RANGE_OPERATOR) });\r\nexport const ColumnRange = createToken({ name: 'ColumnRange', pattern: new RegExp(`${COLUMN_REFERENCE_PATTERN}${RANGE_OPERATOR}${COLUMN_REFERENCE_PATTERN}`) });\r\nexport const RowRange = createToken({ name: 'RowRange', pattern: new RegExp(`${ROW_REFERENCE_PATTERN}${RANGE_OPERATOR}${ROW_REFERENCE_PATTERN}`) });\r\nexport const ProcedureName = createToken({ name: 'ProcedureName', pattern: new RegExp(`([${UNICODE_LETTER_PATTERN}][${NON_RESERVED_CHARACTER_PATTERN}]*)\\\\(`) });\r\nconst cellReferenceMatcher = new CellReferenceMatcher();\r\nexport const CellReference = createToken({\r\n    name: 'CellReference',\r\n    pattern: cellReferenceMatcher.match.bind(cellReferenceMatcher),\r\n    // eslint-disable-next-line @typescript-eslint/camelcase\r\n    start_chars_hint: cellReferenceMatcher.POSSIBLE_START_CHARACTERS,\r\n    // eslint-disable-next-line @typescript-eslint/camelcase\r\n    line_breaks: false,\r\n});\r\nconst namedExpressionMatcher = new NamedExpressionMatcher();\r\nexport const NamedExpression = createToken({\r\n    name: 'NamedExpression',\r\n    pattern: namedExpressionMatcher.match.bind(namedExpressionMatcher),\r\n    // eslint-disable-next-line @typescript-eslint/camelcase\r\n    start_chars_hint: namedExpressionMatcher.POSSIBLE_START_CHARACTERS,\r\n    // eslint-disable-next-line @typescript-eslint/camelcase\r\n    line_breaks: false,\r\n});\r\n/**\r\n * Builds the configuration object for the lexer\r\n */\r\nexport const buildLexerConfig = (config) => {\r\n    const offsetProcedureNameLiteral = config.translationPackage.getFunctionTranslation('OFFSET');\r\n    const errorMapping = config.errorMapping;\r\n    const functionMapping = config.translationPackage.buildFunctionMapping();\r\n    const whitespaceTokenRegexp = new RegExp(config.ignoreWhiteSpace === 'standard' ? ODFF_WHITESPACE_PATTERN : ALL_WHITESPACE_PATTERN);\r\n    const WhiteSpace = createToken({ name: 'WhiteSpace', pattern: whitespaceTokenRegexp });\r\n    const ArrayRowSeparator = createToken({ name: 'ArrayRowSep', pattern: config.arrayRowSeparator });\r\n    const ArrayColSeparator = createToken({ name: 'ArrayColSep', pattern: config.arrayColumnSeparator });\r\n    const NumberLiteral = createToken({ name: 'NumberLiteral', pattern: new RegExp(`(([${config.decimalSeparator}]\\\\d+)|(\\\\d+([${config.decimalSeparator}]\\\\d*)?))(e[+-]?\\\\d+)?`) });\r\n    const OffsetProcedureName = createToken({ name: 'OffsetProcedureName', pattern: new RegExp(offsetProcedureNameLiteral, 'i') });\r\n    let ArgSeparator;\r\n    let inject;\r\n    if (config.functionArgSeparator === config.arrayColumnSeparator) {\r\n        ArgSeparator = ArrayColSeparator;\r\n        inject = [];\r\n    }\r\n    else if (config.functionArgSeparator === config.arrayRowSeparator) {\r\n        ArgSeparator = ArrayRowSeparator;\r\n        inject = [];\r\n    }\r\n    else {\r\n        ArgSeparator = createToken({ name: 'ArgSeparator', pattern: config.functionArgSeparator });\r\n        inject = [ArgSeparator];\r\n    }\r\n    /* order is important, first pattern is used */\r\n    const allTokens = [\r\n        WhiteSpace,\r\n        PlusOp,\r\n        MinusOp,\r\n        TimesOp,\r\n        DivOp,\r\n        PowerOp,\r\n        EqualsOp,\r\n        NotEqualOp,\r\n        PercentOp,\r\n        GreaterThanOrEqualOp,\r\n        LessThanOrEqualOp,\r\n        GreaterThanOp,\r\n        LessThanOp,\r\n        LParen,\r\n        RParen,\r\n        ArrayLParen,\r\n        ArrayRParen,\r\n        OffsetProcedureName,\r\n        ProcedureName,\r\n        RangeSeparator,\r\n        ...inject,\r\n        ColumnRange,\r\n        RowRange,\r\n        NumberLiteral,\r\n        StringLiteral,\r\n        ErrorLiteral,\r\n        ConcatenateOp,\r\n        BooleanOp,\r\n        AdditionOp,\r\n        MultiplicationOp,\r\n        CellReference,\r\n        NamedExpression,\r\n        ArrayRowSeparator,\r\n        ArrayColSeparator,\r\n    ];\r\n    return {\r\n        ArgSeparator,\r\n        NumberLiteral,\r\n        OffsetProcedureName,\r\n        ArrayRowSeparator,\r\n        ArrayColSeparator,\r\n        WhiteSpace,\r\n        allTokens,\r\n        errorMapping,\r\n        functionMapping,\r\n        decimalSeparator: config.decimalSeparator,\r\n        maxColumns: config.maxColumns,\r\n        maxRows: config.maxRows\r\n    };\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ABSOLUTE_OPERATOR, ALL_DIGITS_ARRAY, ALL_UNICODE_LETTERS_ARRAY, CELL_REFERENCE_WITH_NEXT_CHARACTER_PATTERN } from './parser-consts';\r\n/**\r\n * Helper class for recognizing CellReference token in text\r\n */\r\nexport class CellReferenceMatcher {\r\n    constructor() {\r\n        this.POSSIBLE_START_CHARACTERS = [\r\n            ...ALL_UNICODE_LETTERS_ARRAY,\r\n            ...ALL_DIGITS_ARRAY,\r\n            ABSOLUTE_OPERATOR,\r\n            \"'\",\r\n            '_',\r\n        ];\r\n        this.cellReferenceRegexp = new RegExp(CELL_REFERENCE_WITH_NEXT_CHARACTER_PATTERN, 'y');\r\n    }\r\n    /**\r\n     * Method used by the lexer to recognize CellReference token in text\r\n     *\r\n     * Note: using 'y' sticky flag for a named expression which is not supported on IE11...\r\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\r\n     */\r\n    match(text, startOffset) {\r\n        this.cellReferenceRegexp.lastIndex = startOffset;\r\n        const execResult = this.cellReferenceRegexp.exec(text + '@');\r\n        if (execResult == null || execResult[1] == null) {\r\n            return null;\r\n        }\r\n        execResult[0] = execResult[1];\r\n        return execResult;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ALL_UNICODE_LETTERS_ARRAY, NAMED_EXPRESSION_PATTERN, R1C1_CELL_REFERENCE_PATTERN } from './parser-consts';\r\n/**\r\n * Helper class for recognizing NamedExpression token in text\r\n */\r\nexport class NamedExpressionMatcher {\r\n    constructor() {\r\n        this.POSSIBLE_START_CHARACTERS = [...ALL_UNICODE_LETTERS_ARRAY, '_'];\r\n        this.namedExpressionRegexp = new RegExp(NAMED_EXPRESSION_PATTERN, 'y');\r\n        this.r1c1CellRefRegexp = new RegExp(`^${R1C1_CELL_REFERENCE_PATTERN}$`);\r\n    }\r\n    /**\r\n     * Method used by the lexer to recognize NamedExpression token in text\r\n     *\r\n     * Note: using 'y' sticky flag for a named expression which is not supported on IE11...\r\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky\r\n     */\r\n    match(text, startOffset) {\r\n        this.namedExpressionRegexp.lastIndex = startOffset;\r\n        const execResult = this.namedExpressionRegexp.exec(text);\r\n        if (execResult == null || execResult[0] == null) {\r\n            return null;\r\n        }\r\n        if (this.r1c1CellRefRegexp.test(execResult[0])) {\r\n            return null;\r\n        }\r\n        return execResult;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ErrorType } from '../Cell';\r\nimport { NoSheetWithIdError } from '../index';\r\nimport { sheetIndexToString } from './addressRepresentationConverters';\r\nimport { AstNodeType, imageWithWhitespace, RangeSheetReferenceType, } from './Ast';\r\nimport { binaryOpTokenMap } from './binaryOpTokenMap';\r\nexport class Unparser {\r\n    constructor(config, lexerConfig, sheetMappingFn, namedExpressions) {\r\n        this.config = config;\r\n        this.lexerConfig = lexerConfig;\r\n        this.sheetMappingFn = sheetMappingFn;\r\n        this.namedExpressions = namedExpressions;\r\n    }\r\n    unparse(ast, address) {\r\n        return '=' + this.unparseAst(ast, address);\r\n    }\r\n    unparseAst(ast, address) {\r\n        var _a, _b;\r\n        switch (ast.type) {\r\n            case AstNodeType.EMPTY: {\r\n                return imageWithWhitespace('', ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.NUMBER: {\r\n                return imageWithWhitespace(formatNumber(ast.value, this.config.decimalSeparator), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.STRING: {\r\n                return imageWithWhitespace('\"' + ast.value + '\"', ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.FUNCTION_CALL: {\r\n                const args = ast.args.map((arg) => arg !== undefined ? this.unparseAst(arg, address) : '').join(this.config.functionArgSeparator);\r\n                const procedureName = this.config.translationPackage.isFunctionTranslated(ast.procedureName) ?\r\n                    this.config.translationPackage.getFunctionTranslation(ast.procedureName) :\r\n                    ast.procedureName;\r\n                const rightPart = procedureName + '(' + args + imageWithWhitespace(')', ast.internalWhitespace);\r\n                return imageWithWhitespace(rightPart, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.NAMED_EXPRESSION: {\r\n                const originalNamedExpressionName = (_a = this.namedExpressions.nearestNamedExpression(ast.expressionName, address.sheet)) === null || _a === void 0 ? void 0 : _a.displayName;\r\n                return imageWithWhitespace(originalNamedExpressionName || ast.expressionName, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.CELL_REFERENCE: {\r\n                let image;\r\n                if (ast.reference.sheet !== undefined) {\r\n                    image = this.unparseSheetName(ast.reference.sheet) + '!';\r\n                }\r\n                else {\r\n                    image = '';\r\n                }\r\n                image += (_b = ast.reference.unparse(address)) !== null && _b !== void 0 ? _b : this.config.translationPackage.getErrorTranslation(ErrorType.REF);\r\n                return imageWithWhitespace(image, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.COLUMN_RANGE:\r\n            case AstNodeType.ROW_RANGE:\r\n            case AstNodeType.CELL_RANGE: {\r\n                return imageWithWhitespace(this.formatRange(ast, address), ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.PLUS_UNARY_OP: {\r\n                const unparsedExpr = this.unparseAst(ast.value, address);\r\n                return imageWithWhitespace('+', ast.leadingWhitespace) + unparsedExpr;\r\n            }\r\n            case AstNodeType.MINUS_UNARY_OP: {\r\n                const unparsedExpr = this.unparseAst(ast.value, address);\r\n                return imageWithWhitespace('-', ast.leadingWhitespace) + unparsedExpr;\r\n            }\r\n            case AstNodeType.PERCENT_OP: {\r\n                return this.unparseAst(ast.value, address) + imageWithWhitespace('%', ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.ERROR: {\r\n                const image = this.config.translationPackage.getErrorTranslation(ast.error ? ast.error.type : ErrorType.ERROR);\r\n                return imageWithWhitespace(image, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.ERROR_WITH_RAW_INPUT: {\r\n                return imageWithWhitespace(ast.rawInput, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.PARENTHESIS: {\r\n                const expression = this.unparseAst(ast.expression, address);\r\n                const rightPart = '(' + expression + imageWithWhitespace(')', ast.internalWhitespace);\r\n                return imageWithWhitespace(rightPart, ast.leadingWhitespace);\r\n            }\r\n            case AstNodeType.ARRAY: {\r\n                const ret = '{' + ast.args.map(row => row.map(val => this.unparseAst(val, address)).join(this.config.arrayColumnSeparator)).join(this.config.arrayRowSeparator) + imageWithWhitespace('}', ast.internalWhitespace);\r\n                return imageWithWhitespace(ret, ast.leadingWhitespace);\r\n            }\r\n            default: {\r\n                const left = this.unparseAst(ast.left, address);\r\n                const right = this.unparseAst(ast.right, address);\r\n                return left + imageWithWhitespace(binaryOpTokenMap[ast.type], ast.leadingWhitespace) + right;\r\n            }\r\n        }\r\n    }\r\n    unparseSheetName(sheetId) {\r\n        const sheetName = sheetIndexToString(sheetId, this.sheetMappingFn);\r\n        if (sheetName === undefined) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        return sheetName;\r\n    }\r\n    formatRange(ast, baseAddress) {\r\n        let startSheeet = '';\r\n        let endSheet = '';\r\n        if (ast.start.sheet !== undefined && (ast.sheetReferenceType !== RangeSheetReferenceType.RELATIVE)) {\r\n            startSheeet = this.unparseSheetName(ast.start.sheet) + '!';\r\n        }\r\n        if (ast.end.sheet !== undefined && ast.sheetReferenceType === RangeSheetReferenceType.BOTH_ABSOLUTE) {\r\n            endSheet = this.unparseSheetName(ast.end.sheet) + '!';\r\n        }\r\n        const unparsedStart = ast.start.unparse(baseAddress);\r\n        const unparsedEnd = ast.end.unparse(baseAddress);\r\n        if (unparsedStart === undefined || unparsedEnd === undefined) {\r\n            return this.config.translationPackage.getErrorTranslation(ErrorType.REF);\r\n        }\r\n        return `${startSheeet}${unparsedStart}:${endSheet}${unparsedEnd}`;\r\n    }\r\n}\r\nexport function formatNumber(number, decimalSeparator) {\r\n    const numericString = number.toString();\r\n    return numericString.replace('.', decimalSeparator);\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AddressDependency, AstNodeType, CellRangeDependency, ColumnRangeDependency, NamedExpressionDependency, RowRangeDependency } from './';\r\nconst collectDependenciesFn = (ast, functionRegistry, dependenciesSet, needArgument) => {\r\n    switch (ast.type) {\r\n        case AstNodeType.EMPTY:\r\n        case AstNodeType.NUMBER:\r\n        case AstNodeType.STRING:\r\n        case AstNodeType.ERROR:\r\n            return;\r\n        case AstNodeType.NAMED_EXPRESSION: {\r\n            if (needArgument) {\r\n                dependenciesSet.push(new NamedExpressionDependency(ast.expressionName));\r\n            }\r\n            return;\r\n        }\r\n        case AstNodeType.CELL_REFERENCE: {\r\n            if (needArgument) {\r\n                dependenciesSet.push(new AddressDependency(ast.reference));\r\n            }\r\n            return;\r\n        }\r\n        case AstNodeType.CELL_RANGE: {\r\n            if (needArgument && ast.start.sheet === ast.end.sheet) {\r\n                dependenciesSet.push(new CellRangeDependency(ast.start, ast.end));\r\n            }\r\n            return;\r\n        }\r\n        case AstNodeType.COLUMN_RANGE: {\r\n            if (needArgument && ast.start.sheet === ast.end.sheet) {\r\n                dependenciesSet.push(new ColumnRangeDependency(ast.start, ast.end));\r\n            }\r\n            return;\r\n        }\r\n        case AstNodeType.ROW_RANGE: {\r\n            if (needArgument && ast.start.sheet === ast.end.sheet) {\r\n                dependenciesSet.push(new RowRangeDependency(ast.start, ast.end));\r\n            }\r\n            return;\r\n        }\r\n        case AstNodeType.PERCENT_OP:\r\n        case AstNodeType.PLUS_UNARY_OP:\r\n        case AstNodeType.MINUS_UNARY_OP: {\r\n            collectDependenciesFn(ast.value, functionRegistry, dependenciesSet, true);\r\n            return;\r\n        }\r\n        case AstNodeType.CONCATENATE_OP:\r\n        case AstNodeType.EQUALS_OP:\r\n        case AstNodeType.NOT_EQUAL_OP:\r\n        case AstNodeType.LESS_THAN_OP:\r\n        case AstNodeType.GREATER_THAN_OP:\r\n        case AstNodeType.LESS_THAN_OR_EQUAL_OP:\r\n        case AstNodeType.GREATER_THAN_OR_EQUAL_OP:\r\n        case AstNodeType.MINUS_OP:\r\n        case AstNodeType.PLUS_OP:\r\n        case AstNodeType.TIMES_OP:\r\n        case AstNodeType.DIV_OP:\r\n        case AstNodeType.POWER_OP:\r\n            collectDependenciesFn(ast.left, functionRegistry, dependenciesSet, true);\r\n            collectDependenciesFn(ast.right, functionRegistry, dependenciesSet, true);\r\n            return;\r\n        case AstNodeType.PARENTHESIS:\r\n            collectDependenciesFn(ast.expression, functionRegistry, dependenciesSet, needArgument);\r\n            return;\r\n        case AstNodeType.FUNCTION_CALL: {\r\n            const functionNeedArgument = !functionRegistry.doesFunctionNeedArgumentToBeComputed(ast.procedureName);\r\n            ast.args.forEach((argAst) => collectDependenciesFn(argAst, functionRegistry, dependenciesSet, functionNeedArgument));\r\n            return;\r\n        }\r\n    }\r\n};\r\nexport const collectDependencies = (ast, functionRegistry) => {\r\n    const result = new Array();\r\n    collectDependenciesFn(ast, functionRegistry, result, true);\r\n    return result;\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange, AbsoluteColumnRange, AbsoluteRowRange } from '../AbsoluteCellRange';\r\nexport class AddressDependency {\r\n    constructor(dependency) {\r\n        this.dependency = dependency;\r\n    }\r\n    absolutize(baseAddress) {\r\n        return this.dependency.toSimpleCellAddress(baseAddress);\r\n    }\r\n}\r\nexport class CellRangeDependency {\r\n    constructor(start, end) {\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n    absolutize(baseAddress) {\r\n        return new AbsoluteCellRange(this.start.toSimpleCellAddress(baseAddress), this.end.toSimpleCellAddress(baseAddress));\r\n    }\r\n}\r\nexport class ColumnRangeDependency {\r\n    constructor(start, end) {\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n    absolutize(baseAddress) {\r\n        const start = this.start.toSimpleColumnAddress(baseAddress);\r\n        const end = this.end.toSimpleColumnAddress(baseAddress);\r\n        return new AbsoluteColumnRange(start.sheet, start.col, end.col);\r\n    }\r\n}\r\nexport class RowRangeDependency {\r\n    constructor(start, end) {\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n    absolutize(baseAddress) {\r\n        const start = this.start.toSimpleRowAddress(baseAddress);\r\n        const end = this.end.toSimpleRowAddress(baseAddress);\r\n        return new AbsoluteRowRange(start.sheet, start.row, end.row);\r\n    }\r\n}\r\nexport class NamedExpressionDependency {\r\n    constructor(name) {\r\n        this.name = name;\r\n    }\r\n    absolutize(_baseAddress) {\r\n        return this;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { addressKey } from './Cell';\r\nimport { SimpleRangeValue } from './SimpleRangeValue';\r\nexport class ContentChanges {\r\n    constructor() {\r\n        this.changes = new Map();\r\n    }\r\n    static empty() {\r\n        return new ContentChanges();\r\n    }\r\n    addAll(other) {\r\n        for (const change of other.changes.values()) {\r\n            this.add(change.address, change);\r\n        }\r\n        return this;\r\n    }\r\n    addChange(newValue, address, oldValue) {\r\n        this.addInterpreterValue(newValue, address, oldValue);\r\n    }\r\n    exportChanges(exporter) {\r\n        let ret = [];\r\n        this.changes.forEach((e) => {\r\n            const change = exporter.exportChange(e);\r\n            if (Array.isArray(change)) {\r\n                ret = ret.concat(change);\r\n            }\r\n            else {\r\n                ret.push(change);\r\n            }\r\n        });\r\n        return ret;\r\n    }\r\n    getChanges() {\r\n        return Array.from(this.changes.values());\r\n    }\r\n    isEmpty() {\r\n        return this.changes.size === 0;\r\n    }\r\n    add(address, change) {\r\n        const value = change.value;\r\n        if (value instanceof SimpleRangeValue) {\r\n            for (const cellAddress of value.effectiveAddressesFromData(address)) {\r\n                this.changes.delete(`${cellAddress.sheet},${cellAddress.col},${cellAddress.row}`);\r\n            }\r\n        }\r\n        this.changes.set(addressKey((address)), change);\r\n    }\r\n    addInterpreterValue(value, address, oldValue) {\r\n        this.add(address, {\r\n            address,\r\n            value,\r\n            oldValue\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArraySize } from './ArraySize';\r\nimport { CellError, ErrorType, simpleCellAddress } from './Cell';\r\nimport { ErrorMessage } from './error-message';\r\nimport { isExtendedNumber } from './interpreter/InterpreterValue';\r\n/**\r\n * A class that represents a range of data.\r\n */\r\nexport class SimpleRangeValue {\r\n    /**\r\n     * In most cases, it's more convenient to create a `SimpleRangeValue` object\r\n     * by calling one of the [static factory methods](#fromrange).\r\n     */\r\n    constructor(_data, \r\n    /**\r\n     * A property that represents the address of the range.\r\n     */\r\n    range, dependencyGraph, _hasOnlyNumbers) {\r\n        this._data = _data;\r\n        this.range = range;\r\n        this.dependencyGraph = dependencyGraph;\r\n        this._hasOnlyNumbers = _hasOnlyNumbers;\r\n        this.size = _data === undefined\r\n            ? new ArraySize(range.effectiveWidth(dependencyGraph), range.effectiveHeight(dependencyGraph))\r\n            : new ArraySize(_data[0].length, _data.length);\r\n    }\r\n    /**\r\n     * Returns the range data as a 2D array.\r\n     */\r\n    get data() {\r\n        this.ensureThatComputed();\r\n        return this._data;\r\n    }\r\n    /**\r\n     * A factory method. Returns a `SimpleRangeValue` object with the provided range address and the provided data.\r\n     */\r\n    static fromRange(data, range, dependencyGraph) {\r\n        return new SimpleRangeValue(data, range, dependencyGraph, true);\r\n    }\r\n    /**\r\n     * A factory method. Returns a `SimpleRangeValue` object with the provided numeric data.\r\n     */\r\n    static onlyNumbers(data) {\r\n        return new SimpleRangeValue(data, undefined, undefined, true);\r\n    }\r\n    /**\r\n     * A factory method. Returns a `SimpleRangeValue` object with the provided data.\r\n     */\r\n    static onlyValues(data) {\r\n        return new SimpleRangeValue(data, undefined, undefined, undefined);\r\n    }\r\n    /**\r\n     * A factory method. Returns a `SimpleRangeValue` object with the provided range address.\r\n     */\r\n    static onlyRange(range, dependencyGraph) {\r\n        return new SimpleRangeValue(undefined, range, dependencyGraph, undefined);\r\n    }\r\n    /**\r\n     * A factory method. Returns a `SimpleRangeValue` object that contains a single value.\r\n     */\r\n    static fromScalar(scalar) {\r\n        return new SimpleRangeValue([[scalar]], undefined, undefined, undefined);\r\n    }\r\n    /**\r\n     * Returns `true` if and only if the `SimpleRangeValue` has no address set.\r\n     */\r\n    isAdHoc() {\r\n        return this.range === undefined;\r\n    }\r\n    /**\r\n     * Returns the number of columns contained in the range.\r\n     */\r\n    width() {\r\n        return this.size.width;\r\n    }\r\n    /**\r\n     * Returns the number of rows contained in the range.\r\n     */\r\n    height() {\r\n        return this.size.height;\r\n    }\r\n    /**\r\n     * Returns the range data as a 1D array.\r\n     */\r\n    valuesFromTopLeftCorner() {\r\n        this.ensureThatComputed();\r\n        const ret = [];\r\n        for (let i = 0; i < this._data.length; i++) {\r\n            for (let j = 0; j < this._data[0].length; j++) {\r\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                ret.push(this._data[i][j]);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    /**\r\n     * Generates the addresses of the cells contained in the range assuming the provided address is the left corner of the range.\r\n     */\r\n    *effectiveAddressesFromData(leftCorner) {\r\n        for (let row = 0; row < this.data.length; ++row) {\r\n            const rowData = this.data[row];\r\n            for (let col = 0; col < rowData.length; ++col) {\r\n                yield simpleCellAddress(leftCorner.sheet, leftCorner.col + col, leftCorner.row + row);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Generates values and addresses of the cells contained in the range assuming the provided address is the left corner of the range.\r\n     *\r\n     * This method combines the functionalities of [`iterateValuesFromTopLeftCorner()`](#iteratevaluesfromtopleftcorner) and [`effectiveAddressesFromData()`](#effectiveaddressesfromdata).\r\n     */\r\n    *entriesFromTopLeftCorner(leftCorner) {\r\n        this.ensureThatComputed();\r\n        for (let row = 0; row < this.size.height; ++row) {\r\n            for (let col = 0; col < this.size.width; ++col) {\r\n                yield [this._data[row][col], simpleCellAddress(leftCorner.sheet, leftCorner.col + col, leftCorner.row + row)];\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Generates the values of the cells contained in the range assuming the provided address is the left corner of the range.\r\n     */\r\n    *iterateValuesFromTopLeftCorner() {\r\n        yield* this.valuesFromTopLeftCorner();\r\n    }\r\n    /**\r\n     * Returns the number of cells contained in the range.\r\n     */\r\n    numberOfElements() {\r\n        return this.size.width * this.size.height;\r\n    }\r\n    /**\r\n     * Returns `true` if and only if the range contains only numeric values.\r\n     */\r\n    hasOnlyNumbers() {\r\n        if (this._hasOnlyNumbers === undefined) {\r\n            this._hasOnlyNumbers = true;\r\n            for (const row of this.data) {\r\n                for (const v of row) {\r\n                    if (typeof v !== 'number') {\r\n                        this._hasOnlyNumbers = false;\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this._hasOnlyNumbers;\r\n    }\r\n    /**\r\n     * Returns the range data as a 2D array of numbers.\r\n     *\r\n     * Internal use only.\r\n     */\r\n    rawNumbers() {\r\n        return this._data;\r\n    }\r\n    /**\r\n     * Returns the range data as a 2D array.\r\n     *\r\n     * Internal use only.\r\n     */\r\n    rawData() {\r\n        var _a;\r\n        this.ensureThatComputed();\r\n        return (_a = this._data) !== null && _a !== void 0 ? _a : [];\r\n    }\r\n    /**\r\n     * Returns `true` if and only if the range has the same width and height as the `other` range object.\r\n     */\r\n    sameDimensionsAs(other) {\r\n        return this.width() === other.width() && this.height() === other.height();\r\n    }\r\n    /**\r\n     * Computes the range data if it is not computed yet.\r\n     */\r\n    ensureThatComputed() {\r\n        if (this._data !== undefined) {\r\n            return;\r\n        }\r\n        this._hasOnlyNumbers = true;\r\n        this._data = this.range.addressesArrayMap(this.dependencyGraph, cellFromRange => {\r\n            const value = this.dependencyGraph.getCellValue(cellFromRange);\r\n            if (value instanceof SimpleRangeValue) {\r\n                this._hasOnlyNumbers = false;\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.ScalarExpected);\r\n            }\r\n            else if (isExtendedNumber(value)) {\r\n                return value;\r\n            }\r\n            else {\r\n                this._hasOnlyNumbers = false;\r\n                return value;\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport const EmptyValue = Symbol('Empty value');\r\nexport function getRawValue(num) {\r\n    if (num instanceof RichNumber) {\r\n        return num.val;\r\n    }\r\n    else {\r\n        return num;\r\n    }\r\n}\r\nexport class RichNumber {\r\n    constructor(val, format) {\r\n        this.val = val;\r\n        this.format = format;\r\n    }\r\n    fromNumber(val) {\r\n        return new this.constructor(val);\r\n    }\r\n}\r\nexport function cloneNumber(val, newVal) {\r\n    if (typeof val === 'number') {\r\n        return newVal;\r\n    }\r\n    else {\r\n        const ret = val.fromNumber(newVal);\r\n        ret.format = val.format;\r\n        return ret;\r\n    }\r\n}\r\nexport class DateNumber extends RichNumber {\r\n    getDetailedType() {\r\n        return NumberType.NUMBER_DATE;\r\n    }\r\n}\r\nexport class CurrencyNumber extends RichNumber {\r\n    getDetailedType() {\r\n        return NumberType.NUMBER_CURRENCY;\r\n    }\r\n}\r\nexport class TimeNumber extends RichNumber {\r\n    getDetailedType() {\r\n        return NumberType.NUMBER_TIME;\r\n    }\r\n}\r\nexport class DateTimeNumber extends RichNumber {\r\n    getDetailedType() {\r\n        return NumberType.NUMBER_DATETIME;\r\n    }\r\n}\r\nexport class PercentNumber extends RichNumber {\r\n    getDetailedType() {\r\n        return NumberType.NUMBER_PERCENT;\r\n    }\r\n}\r\nexport function isExtendedNumber(val) {\r\n    return (typeof val === 'number') || (val instanceof RichNumber);\r\n}\r\nexport var NumberType;\r\n(function (NumberType) {\r\n    NumberType[\"NUMBER_RAW\"] = \"NUMBER_RAW\";\r\n    NumberType[\"NUMBER_DATE\"] = \"NUMBER_DATE\";\r\n    NumberType[\"NUMBER_TIME\"] = \"NUMBER_TIME\";\r\n    NumberType[\"NUMBER_DATETIME\"] = \"NUMBER_DATETIME\";\r\n    NumberType[\"NUMBER_CURRENCY\"] = \"NUMBER_CURRENCY\";\r\n    NumberType[\"NUMBER_PERCENT\"] = \"NUMBER_PERCENT\";\r\n})(NumberType || (NumberType = {}));\r\nexport function getTypeOfExtendedNumber(num) {\r\n    if (num instanceof RichNumber) {\r\n        return num.getDetailedType();\r\n    }\r\n    else {\r\n        return NumberType.NUMBER_RAW;\r\n    }\r\n}\r\nexport function getFormatOfExtendedNumber(num) {\r\n    if (num instanceof RichNumber) {\r\n        return num.format;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexport function getTypeFormatOfExtendedNumber(num) {\r\n    if (num instanceof RichNumber) {\r\n        return { type: num.getDetailedType(), format: num.format };\r\n    }\r\n    else {\r\n        return { type: NumberType.NUMBER_RAW };\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\n/*\r\n * A class representing a set of rows in specific sheet\r\n */\r\nexport class RowsSpan {\r\n    constructor(sheet, rowStart, rowEnd) {\r\n        this.sheet = sheet;\r\n        this.rowStart = rowStart;\r\n        this.rowEnd = rowEnd;\r\n        if (rowStart < 0) {\r\n            throw Error('Starting row cant be less than 0');\r\n        }\r\n        if (rowEnd < rowStart) {\r\n            throw Error('Row span cant end before start');\r\n        }\r\n    }\r\n    get numberOfRows() {\r\n        return this.rowEnd - this.rowStart + 1;\r\n    }\r\n    get start() {\r\n        return this.rowStart;\r\n    }\r\n    get end() {\r\n        return this.rowEnd;\r\n    }\r\n    static fromNumberOfRows(sheet, rowStart, numberOfRows) {\r\n        return new RowsSpan(sheet, rowStart, rowStart + numberOfRows - 1);\r\n    }\r\n    static fromRowStartAndEnd(sheet, rowStart, rowEnd) {\r\n        return new RowsSpan(sheet, rowStart, rowEnd);\r\n    }\r\n    *rows() {\r\n        for (let col = this.rowStart; col <= this.rowEnd; ++col) {\r\n            yield col;\r\n        }\r\n    }\r\n    intersect(otherSpan) {\r\n        if (this.sheet !== otherSpan.sheet) {\r\n            throw Error('Can\\'t intersect spans from different sheets');\r\n        }\r\n        const start = Math.max(this.rowStart, otherSpan.rowStart);\r\n        const end = Math.min(this.rowEnd, otherSpan.rowEnd);\r\n        if (start > end) {\r\n            return null;\r\n        }\r\n        return new RowsSpan(this.sheet, start, end);\r\n    }\r\n    firstRow() {\r\n        return new RowsSpan(this.sheet, this.rowStart, this.rowStart);\r\n    }\r\n}\r\n/*\r\n * A class representing a set of columns in specific sheet\r\n */\r\nexport class ColumnsSpan {\r\n    constructor(sheet, columnStart, columnEnd) {\r\n        this.sheet = sheet;\r\n        this.columnStart = columnStart;\r\n        this.columnEnd = columnEnd;\r\n        if (columnStart < 0) {\r\n            throw Error('Starting column cant be less than 0');\r\n        }\r\n        if (columnEnd < columnStart) {\r\n            throw Error('Column span cant end before start');\r\n        }\r\n    }\r\n    get numberOfColumns() {\r\n        return this.columnEnd - this.columnStart + 1;\r\n    }\r\n    get start() {\r\n        return this.columnStart;\r\n    }\r\n    get end() {\r\n        return this.columnEnd;\r\n    }\r\n    static fromNumberOfColumns(sheet, columnStart, numberOfColumns) {\r\n        return new ColumnsSpan(sheet, columnStart, columnStart + numberOfColumns - 1);\r\n    }\r\n    static fromColumnStartAndEnd(sheet, columnStart, columnEnd) {\r\n        return new ColumnsSpan(sheet, columnStart, columnEnd);\r\n    }\r\n    *columns() {\r\n        for (let col = this.columnStart; col <= this.columnEnd; ++col) {\r\n            yield col;\r\n        }\r\n    }\r\n    intersect(otherSpan) {\r\n        if (this.sheet !== otherSpan.sheet) {\r\n            throw Error('Can\\'t intersect spans from different sheets');\r\n        }\r\n        const start = Math.max(this.columnStart, otherSpan.columnStart);\r\n        const end = Math.min(this.columnEnd, otherSpan.columnEnd);\r\n        if (start > end) {\r\n            return null;\r\n        }\r\n        return new ColumnsSpan(this.sheet, start, end);\r\n    }\r\n    firstColumn() {\r\n        return new ColumnsSpan(this.sheet, this.columnStart, this.columnStart);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport { EmptyStatistics } from './EmptyStatistics';\r\nexport { Statistics } from './Statistics';\r\nexport { StatType } from './StatType';\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { Statistics } from './Statistics';\r\n/** Do not store stats in the memory. Stats are not needed on daily basis */\r\nexport class EmptyStatistics extends Statistics {\r\n    /** @inheritDoc */\r\n    incrementCriterionFunctionFullCacheUsed() {\r\n        // do nothing\r\n    }\r\n    /** @inheritDoc */\r\n    incrementCriterionFunctionPartialCacheUsed() {\r\n        // do nothing\r\n    }\r\n    /** @inheritDoc */\r\n    start(_name) {\r\n        // do nothing\r\n    }\r\n    /** @inheritDoc */\r\n    end(_name) {\r\n        // do nothing\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { StatType } from './StatType';\r\n/**\r\n * Provides tracking performance statistics to the engine\r\n */\r\nexport class Statistics {\r\n    constructor() {\r\n        this.stats = new Map([\r\n            [StatType.CRITERION_FUNCTION_FULL_CACHE_USED, 0],\r\n            [StatType.CRITERION_FUNCTION_PARTIAL_CACHE_USED, 0],\r\n        ]);\r\n        this.startTimes = new Map();\r\n    }\r\n    incrementCriterionFunctionFullCacheUsed() {\r\n        var _a;\r\n        const newValue = ((_a = this.stats.get(StatType.CRITERION_FUNCTION_FULL_CACHE_USED)) !== null && _a !== void 0 ? _a : 0) + 1;\r\n        this.stats.set(StatType.CRITERION_FUNCTION_FULL_CACHE_USED, newValue);\r\n    }\r\n    incrementCriterionFunctionPartialCacheUsed() {\r\n        var _a;\r\n        const newValue = ((_a = this.stats.get(StatType.CRITERION_FUNCTION_PARTIAL_CACHE_USED)) !== null && _a !== void 0 ? _a : 0) + 1;\r\n        this.stats.set(StatType.CRITERION_FUNCTION_PARTIAL_CACHE_USED, newValue);\r\n    }\r\n    /**\r\n     * Resets statistics\r\n     */\r\n    reset() {\r\n        this.stats.clear();\r\n        this.startTimes.clear();\r\n        this.stats.set(StatType.CRITERION_FUNCTION_FULL_CACHE_USED, 0);\r\n        this.stats.set(StatType.CRITERION_FUNCTION_PARTIAL_CACHE_USED, 0);\r\n    }\r\n    /**\r\n     * Starts tracking particular statistic.\r\n     *\r\n     * @param name - statistic to start tracking\r\n     */\r\n    start(name) {\r\n        if (this.startTimes.get(name)) {\r\n            throw Error(`Statistics ${name} already started`);\r\n        }\r\n        else {\r\n            this.startTimes.set(name, Date.now());\r\n        }\r\n    }\r\n    /**\r\n     * Stops tracking particular statistic.\r\n     * Raise error if tracking statistic wasn't started.\r\n     *\r\n     * @param name - statistic to stop tracking\r\n     */\r\n    end(name) {\r\n        var _a;\r\n        const now = Date.now();\r\n        const startTime = this.startTimes.get(name);\r\n        if (startTime) {\r\n            let values = (_a = this.stats.get(name)) !== null && _a !== void 0 ? _a : 0;\r\n            values += (now - startTime);\r\n            this.stats.set(name, values);\r\n            this.startTimes.delete(name);\r\n        }\r\n        else {\r\n            throw Error(`Statistics ${name} not started`);\r\n        }\r\n    }\r\n    /**\r\n     * Measure given statistic as execution of given function.\r\n     *\r\n     * @param name - statistic to track\r\n     * @param func - function to call\r\n     * @returns result of the function call\r\n     */\r\n    measure(name, func) {\r\n        this.start(name);\r\n        const result = func();\r\n        this.end(name);\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns the snapshot of current results\r\n     */\r\n    snapshot() {\r\n        return new Map(this.stats);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport var StatType;\r\n(function (StatType) {\r\n    /* build engine */\r\n    StatType[\"BUILD_ENGINE_TOTAL\"] = \"BUILD_ENGINE_TOTAL\";\r\n    StatType[\"PARSER\"] = \"PARSER\";\r\n    StatType[\"GRAPH_BUILD\"] = \"GRAPH_BUILD\";\r\n    StatType[\"COLLECT_DEPENDENCIES\"] = \"COLLECT_DEPENDENCIES\";\r\n    StatType[\"PROCESS_DEPENDENCIES\"] = \"PROCESS_DEPENDENCIES\";\r\n    StatType[\"TOP_SORT\"] = \"TOP_SORT\";\r\n    StatType[\"BUILD_COLUMN_INDEX\"] = \"BUILD_COLUMN_INDEX\";\r\n    StatType[\"EVALUATION\"] = \"EVALUATION\";\r\n    StatType[\"VLOOKUP\"] = \"VLOOKUP\";\r\n    /* crud adjustments */\r\n    StatType[\"TRANSFORM_ASTS\"] = \"TRANSFORM_ASTS\";\r\n    StatType[\"TRANSFORM_ASTS_POSTPONED\"] = \"TRANSFORM_ASTS_POSTPONED\";\r\n    StatType[\"ADJUSTING_ADDRESS_MAPPING\"] = \"ADJUSTING_ADDRESS_MAPPING\";\r\n    StatType[\"ADJUSTING_ARRAY_MAPPING\"] = \"ADJUSTING_ARRAY_MAPPING\";\r\n    StatType[\"ADJUSTING_RANGES\"] = \"ADJUSTING_RANGES\";\r\n    StatType[\"ADJUSTING_GRAPH\"] = \"ADJUSTING_GRAPH\";\r\n    /* criterion cache */\r\n    StatType[\"CRITERION_FUNCTION_FULL_CACHE_USED\"] = \"CRITERION_FUNCTION_FULL_CACHE_USED\";\r\n    StatType[\"CRITERION_FUNCTION_PARTIAL_CACHE_USED\"] = \"CRITERION_FUNCTION_PARTIAL_CACHE_USED\";\r\n})(StatType || (StatType = {}));\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { NoSheetWithIdError } from '../../errors';\r\nimport { EmptyValue } from '../../interpreter/InterpreterValue';\r\nimport { ArrayVertex, ValueCellVertex } from '../index';\r\nexport class AddressMapping {\r\n    constructor(policy) {\r\n        this.policy = policy;\r\n        this.mapping = new Map();\r\n    }\r\n    /** @inheritDoc */\r\n    getCell(address) {\r\n        const sheetMapping = this.mapping.get(address.sheet);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(address.sheet);\r\n        }\r\n        return sheetMapping.getCell(address);\r\n    }\r\n    fetchCell(address) {\r\n        const sheetMapping = this.mapping.get(address.sheet);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(address.sheet);\r\n        }\r\n        const vertex = sheetMapping.getCell(address);\r\n        if (!vertex) {\r\n            throw Error('Vertex for address missing in AddressMapping');\r\n        }\r\n        return vertex;\r\n    }\r\n    strategyFor(sheetId) {\r\n        const strategy = this.mapping.get(sheetId);\r\n        if (strategy === undefined) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        return strategy;\r\n    }\r\n    addSheet(sheetId, strategy) {\r\n        if (this.mapping.has(sheetId)) {\r\n            throw Error('Sheet already added');\r\n        }\r\n        this.mapping.set(sheetId, strategy);\r\n    }\r\n    autoAddSheet(sheetId, sheet, sheetBoundaries) {\r\n        const { height, width, fill } = sheetBoundaries;\r\n        const strategyConstructor = this.policy.call(fill);\r\n        this.addSheet(sheetId, new strategyConstructor(width, height));\r\n    }\r\n    getCellValue(address) {\r\n        const vertex = this.getCell(address);\r\n        if (vertex === undefined) {\r\n            return EmptyValue;\r\n        }\r\n        else if (vertex instanceof ArrayVertex) {\r\n            return vertex.getArrayCellValue(address);\r\n        }\r\n        else {\r\n            return vertex.getCellValue();\r\n        }\r\n    }\r\n    getRawValue(address) {\r\n        const vertex = this.getCell(address);\r\n        if (vertex instanceof ValueCellVertex) {\r\n            return vertex.getValues().rawValue;\r\n        }\r\n        else if (vertex instanceof ArrayVertex) {\r\n            return vertex.getArrayCellRawValue(address);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    setCell(address, newVertex) {\r\n        const sheetMapping = this.mapping.get(address.sheet);\r\n        if (!sheetMapping) {\r\n            throw Error('Sheet not initialized');\r\n        }\r\n        sheetMapping.setCell(address, newVertex);\r\n    }\r\n    moveCell(source, destination) {\r\n        const sheetMapping = this.mapping.get(source.sheet);\r\n        if (!sheetMapping) {\r\n            throw Error('Sheet not initialized.');\r\n        }\r\n        if (source.sheet !== destination.sheet) {\r\n            throw Error('Cannot move cells between sheets.');\r\n        }\r\n        if (sheetMapping.has(destination)) {\r\n            throw new Error('Cannot move cell. Destination already occupied.');\r\n        }\r\n        const vertex = sheetMapping.getCell(source);\r\n        if (vertex === undefined) {\r\n            throw new Error('Cannot move cell. No cell with such address.');\r\n        }\r\n        this.setCell(destination, vertex);\r\n        this.removeCell(source);\r\n    }\r\n    removeCell(address) {\r\n        const sheetMapping = this.mapping.get(address.sheet);\r\n        if (!sheetMapping) {\r\n            throw Error('Sheet not initialized');\r\n        }\r\n        sheetMapping.removeCell(address);\r\n    }\r\n    /** @inheritDoc */\r\n    has(address) {\r\n        const sheetMapping = this.mapping.get(address.sheet);\r\n        if (sheetMapping === undefined) {\r\n            return false;\r\n        }\r\n        return sheetMapping.has(address);\r\n    }\r\n    /** @inheritDoc */\r\n    getHeight(sheetId) {\r\n        const sheetMapping = this.mapping.get(sheetId);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        return sheetMapping.getHeight();\r\n    }\r\n    /** @inheritDoc */\r\n    getWidth(sheetId) {\r\n        const sheetMapping = this.mapping.get(sheetId);\r\n        if (!sheetMapping) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        return sheetMapping.getWidth();\r\n    }\r\n    addRows(sheet, row, numberOfRows) {\r\n        const sheetMapping = this.mapping.get(sheet);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(sheet);\r\n        }\r\n        sheetMapping.addRows(row, numberOfRows);\r\n    }\r\n    removeRows(removedRows) {\r\n        const sheetMapping = this.mapping.get(removedRows.sheet);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(removedRows.sheet);\r\n        }\r\n        sheetMapping.removeRows(removedRows);\r\n    }\r\n    removeSheet(sheetId) {\r\n        this.mapping.delete(sheetId);\r\n    }\r\n    addColumns(sheet, column, numberOfColumns) {\r\n        const sheetMapping = this.mapping.get(sheet);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(sheet);\r\n        }\r\n        sheetMapping.addColumns(column, numberOfColumns);\r\n    }\r\n    removeColumns(removedColumns) {\r\n        const sheetMapping = this.mapping.get(removedColumns.sheet);\r\n        if (sheetMapping === undefined) {\r\n            throw new NoSheetWithIdError(removedColumns.sheet);\r\n        }\r\n        sheetMapping.removeColumns(removedColumns);\r\n    }\r\n    *verticesFromRowsSpan(rowsSpan) {\r\n        yield* this.mapping.get(rowsSpan.sheet).verticesFromRowsSpan(rowsSpan); // eslint-disable-line @typescript-eslint/no-non-null-assertion\r\n    }\r\n    *verticesFromColumnsSpan(columnsSpan) {\r\n        yield* this.mapping.get(columnsSpan.sheet).verticesFromColumnsSpan(columnsSpan); // eslint-disable-line @typescript-eslint/no-non-null-assertion\r\n    }\r\n    *entriesFromRowsSpan(rowsSpan) {\r\n        yield* this.mapping.get(rowsSpan.sheet).entriesFromRowsSpan(rowsSpan);\r\n    }\r\n    *entriesFromColumnsSpan(columnsSpan) {\r\n        yield* this.mapping.get(columnsSpan.sheet).entriesFromColumnsSpan(columnsSpan);\r\n    }\r\n    *entries() {\r\n        for (const [sheet, mapping] of this.mapping.entries()) {\r\n            yield* mapping.getEntries(sheet);\r\n        }\r\n    }\r\n    *sheetEntries(sheet) {\r\n        const sheetMapping = this.mapping.get(sheet);\r\n        if (sheetMapping !== undefined) {\r\n            yield* sheetMapping.getEntries(sheet);\r\n        }\r\n        else {\r\n            throw new NoSheetWithIdError(sheet);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\n/**\r\n * Error thrown when the sheet of a given ID does not exist.\r\n */\r\nexport class NoSheetWithIdError extends Error {\r\n    constructor(sheetId) {\r\n        super(`There's no sheet with id = ${sheetId}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the sheet of a given name does not exist.\r\n */\r\nexport class NoSheetWithNameError extends Error {\r\n    constructor(sheetName) {\r\n        super(`There's no sheet with name '${sheetName}'`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the sheet of a given name already exists.\r\n */\r\nexport class SheetNameAlreadyTakenError extends Error {\r\n    constructor(sheetName) {\r\n        super(`Sheet with name ${sheetName} already exists`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when loaded sheet size exceeds configured limits.\r\n */\r\nexport class SheetSizeLimitExceededError extends Error {\r\n    constructor() {\r\n        super('Sheet size limit exceeded');\r\n    }\r\n}\r\n/**\r\n * Error thrown when the the provided string is not a valid formula, i.e does not start with \"=\"\r\n */\r\nexport class NotAFormulaError extends Error {\r\n    constructor() {\r\n        super('This is not a formula');\r\n    }\r\n}\r\n/**\r\n * Error thrown when the given address is invalid.\r\n */\r\nexport class InvalidAddressError extends Error {\r\n    constructor(address) {\r\n        super(`Address (row = ${address.row}, col = ${address.col}) is invalid`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the given arguments are invalid\r\n */\r\nexport class InvalidArgumentsError extends Error {\r\n    constructor(expectedArguments) {\r\n        super(`Invalid arguments, expected ${expectedArguments}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the given sheets are not equal.\r\n */\r\nexport class SheetsNotEqual extends Error {\r\n    constructor(sheet1, sheet2) {\r\n        super(`Sheets ${sheet1} and ${sheet2} are not equal.`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the given named expression already exists in the workbook and therefore it cannot be added.\r\n */\r\nexport class NamedExpressionNameIsAlreadyTakenError extends Error {\r\n    constructor(expressionName) {\r\n        super(`Name of Named Expression '${expressionName}' is already present`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the name given for the named expression is invalid.\r\n */\r\nexport class NamedExpressionNameIsInvalidError extends Error {\r\n    constructor(expressionName) {\r\n        super(`Name of Named Expression '${expressionName}' is invalid`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the given named expression does not exist.\r\n */\r\nexport class NamedExpressionDoesNotExistError extends Error {\r\n    constructor(expressionName) {\r\n        super(`Named Expression '${expressionName}' does not exist`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when there are no operations to be undone by the [[undo]] method.\r\n */\r\nexport class NoOperationToUndoError extends Error {\r\n    constructor() {\r\n        super('There is no operation to undo');\r\n    }\r\n}\r\n/**\r\n * Error thrown when there are no operations to redo by the [[redo]] method.\r\n */\r\nexport class NoOperationToRedoError extends Error {\r\n    constructor() {\r\n        super('There is no operation to redo');\r\n    }\r\n}\r\n/**\r\n * Error thrown when there is nothing to paste by the [[paste]] method.\r\n */\r\nexport class NothingToPasteError extends Error {\r\n    constructor() {\r\n        super('There is nothing to paste');\r\n    }\r\n}\r\nfunction replacer(key, val) {\r\n    switch (typeof val) {\r\n        case 'function':\r\n        case 'symbol':\r\n            return val.toString();\r\n        case 'bigint':\r\n            return 'BigInt(' + val.toString() + ')';\r\n        default: {\r\n            if (val instanceof RegExp) {\r\n                return 'RegExp(' + val.toString() + ')';\r\n            }\r\n            else {\r\n                return val;\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Error thrown when the given value cannot be parsed.\r\n *\r\n * Checks against the validity in:\r\n *\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n * @see [[setCellsContents]]\r\n */\r\nexport class UnableToParseError extends Error {\r\n    constructor(value) {\r\n        super(`Unable to parse value: ${JSON.stringify(value, replacer, 4)}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the expected value type differs from the given value type.\r\n * It also displays the expected type.\r\n * This error might be thrown while setting or updating the [[ConfigParams]].\r\n * The following methods accept [[ConfigParams]] as a parameter:\r\n *\r\n * @see [[buildEmpty]]\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n * @see [[updateConfig]]\r\n */\r\nexport class ExpectedValueOfTypeError extends Error {\r\n    constructor(expectedType, paramName) {\r\n        super(`Expected value of type: ${expectedType} for config parameter: ${paramName}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when supplied config parameter value is an empty string.\r\n * This error might be thrown while setting or updating the [[ConfigParams]].\r\n * The following methods accept [[ConfigParams]] as a parameter:\r\n *\r\n * @see [[buildEmpty]]\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n * @see [[updateConfig]]\r\n */\r\nexport class ConfigValueEmpty extends Error {\r\n    constructor(paramName) {\r\n        super(`Config parameter ${paramName} cannot be empty.`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when supplied config parameter value is too small.\r\n * This error might be thrown while setting or updating the [[ConfigParams]].\r\n * The following methods accept [[ConfigParams]] as a parameter:\r\n *\r\n * @see [[buildEmpty]]\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n * @see [[updateConfig]]\r\n */\r\nexport class ConfigValueTooSmallError extends Error {\r\n    constructor(paramName, minimum) {\r\n        super(`Config parameter ${paramName} should be at least ${minimum}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when supplied config parameter value is too big.\r\n * This error might be thrown while setting or updating the [[ConfigParams]].\r\n * The following methods accept [[ConfigParams]] as a parameter:\r\n *\r\n * @see [[buildEmpty]]\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n * @see [[updateConfig]]\r\n */\r\nexport class ConfigValueTooBigError extends Error {\r\n    constructor(paramName, maximum) {\r\n        super(`Config parameter ${paramName} should be at most ${maximum}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when the value was expected to be set for a config parameter.\r\n * It also displays the expected value.\r\n * This error might be thrown while setting or updating the [[ConfigParams]].\r\n * The following methods accept [[ConfigParams]] as a parameter:\r\n *\r\n * @see [[buildEmpty]]\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n * @see [[updateConfig]]\r\n */\r\nexport class ExpectedOneOfValuesError extends Error {\r\n    constructor(values, paramName) {\r\n        super(`Expected one of ${values} for config parameter: ${paramName}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when computations become suspended.\r\n * To perform any other action wait for the batch to complete or resume the evaluation.\r\n * Relates to:\r\n *\r\n * @see [[batch]]\r\n * @see [[suspendEvaluation]]\r\n * @see [[resumeEvaluation]]\r\n */\r\nexport class EvaluationSuspendedError extends Error {\r\n    constructor() {\r\n        super('Computations are suspended');\r\n    }\r\n}\r\n/**\r\n * Error thrown when translation is missing in translation package.\r\n *\r\n * TODO\r\n */\r\nexport class MissingTranslationError extends Error {\r\n    constructor(key) {\r\n        super(`Translation for ${key} is missing in the translation package you're using.`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when trying to override protected translation.\r\n *\r\n * @see [[registerLanguage]]\r\n * @see [[registerFunction]]\r\n * @see [[registerFunctionPlugin]]\r\n */\r\nexport class ProtectedFunctionTranslationError extends Error {\r\n    constructor(key) {\r\n        super(`Cannot register translation for function with id: ${key}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when trying to retrieve not registered language\r\n *\r\n * @see [[getLanguage]]\r\n * @see [[unregisterLanguage]]\r\n */\r\nexport class LanguageNotRegisteredError extends Error {\r\n    constructor() {\r\n        super('Language not registered.');\r\n    }\r\n}\r\n/**\r\n * Error thrown when trying to register already registered language\r\n *\r\n * @see [[registerLanguage]]\r\n */\r\nexport class LanguageAlreadyRegisteredError extends Error {\r\n    constructor() {\r\n        super('Language already registered.');\r\n    }\r\n}\r\n/**\r\n * Error thrown when function plugin is invalid.\r\n *\r\n * @see [[registerFunction]]\r\n * @see [[registerFunctionPlugin]]\r\n * @see [[buildFromArray]]\r\n * @see [[buildFromSheets]]\r\n */\r\nexport class FunctionPluginValidationError extends Error {\r\n    static functionNotDeclaredInPlugin(functionId, pluginName) {\r\n        return new FunctionPluginValidationError(`Function with id ${functionId} not declared in plugin ${pluginName}`);\r\n    }\r\n    static functionMethodNotFound(functionName, pluginName) {\r\n        return new FunctionPluginValidationError(`Function method ${functionName} not found in plugin ${pluginName}`);\r\n    }\r\n}\r\n/**\r\n * Error thrown when trying to register, override or remove function with reserved id.\r\n *\r\n * @see [[registerFunctionPlugin]]\r\n * @see [[registerFunction]]\r\n * @see [[unregisterFunction]]\r\n */\r\nexport class ProtectedFunctionError extends Error {\r\n    static cannotRegisterFunctionWithId(functionId) {\r\n        return new ProtectedFunctionError(`Cannot register function with id ${functionId}`);\r\n    }\r\n    static cannotUnregisterFunctionWithId(functionId) {\r\n        return new ProtectedFunctionError(`Cannot unregister function with id ${functionId}`);\r\n    }\r\n    static cannotUnregisterProtectedPlugin() {\r\n        return new ProtectedFunctionError('Cannot unregister protected plugin');\r\n    }\r\n}\r\n/**\r\n * Error thrown when selected source location has an array.\r\n */\r\nexport class SourceLocationHasArrayError extends Error {\r\n    constructor() {\r\n        super('Cannot perform this operation, source location has an array inside.');\r\n    }\r\n}\r\n/**\r\n * Error thrown when selected target location has an array.\r\n *\r\n * @see [[addRows]]\r\n * @see [[addColumns]]\r\n * @see [[moveCells]]\r\n * @see [[moveRows]]\r\n * @see [[moveColumns]]\r\n * @see [[paste]]\r\n */\r\nexport class TargetLocationHasArrayError extends Error {\r\n    constructor() {\r\n        super('Cannot perform this operation, target location has an array inside.');\r\n    }\r\n}\r\n/**\r\n * Error thrown when named expression contains relative addresses.\r\n *\r\n * @see [[addNamedExpression]]\r\n * @see [[changeNamedExpression]]\r\n */\r\nexport class NoRelativeAddressesAllowedError extends Error {\r\n    constructor() {\r\n        super('Relative addresses not allowed in named expressions.');\r\n    }\r\n}\r\n/**\r\n * Error thrown when alias to a function is already defined.\r\n *\r\n * @see [[registerFunctionPlugin]]\r\n * @see [[registerFunction]]\r\n */\r\nexport class AliasAlreadyExisting extends Error {\r\n    constructor(name, pluginName) {\r\n        super(`Alias id ${name} in plugin ${pluginName} already defined as a function or alias.`);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { addressKey } from '../Cell';\r\nexport class ArrayMapping {\r\n    constructor() {\r\n        this.arrayMapping = new Map();\r\n    }\r\n    getArray(range) {\r\n        const array = this.getArrayByCorner(range.start);\r\n        if (array === null || array === void 0 ? void 0 : array.getRange().sameAs(range)) {\r\n            return array;\r\n        }\r\n        return;\r\n    }\r\n    getArrayByCorner(address) {\r\n        return this.arrayMapping.get(addressKey(address));\r\n    }\r\n    setArray(range, vertex) {\r\n        this.arrayMapping.set(addressKey(range.start), vertex);\r\n    }\r\n    removeArray(range) {\r\n        if (typeof range === 'string') {\r\n            this.arrayMapping.delete(range);\r\n        }\r\n        else {\r\n            this.arrayMapping.delete(addressKey(range.start));\r\n        }\r\n    }\r\n    count() {\r\n        return this.arrayMapping.size;\r\n    }\r\n    *arraysInRows(rowsSpan) {\r\n        for (const [mtxKey, mtx] of this.arrayMapping.entries()) {\r\n            if (mtx.spansThroughSheetRows(rowsSpan.sheet, rowsSpan.rowStart, rowsSpan.rowEnd)) {\r\n                yield [mtxKey, mtx];\r\n            }\r\n        }\r\n    }\r\n    *arraysInCols(col) {\r\n        for (const [mtxKey, mtx] of this.arrayMapping.entries()) {\r\n            if (mtx.spansThroughSheetColumn(col.sheet, col.columnStart, col.columnEnd)) {\r\n                yield [mtxKey, mtx];\r\n            }\r\n        }\r\n    }\r\n    isFormulaArrayInRow(sheet, row) {\r\n        for (const mtx of this.arrayMapping.values()) {\r\n            if (mtx.spansThroughSheetRows(sheet, row)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    isFormulaArrayInAllRows(span) {\r\n        let result = true;\r\n        for (const row of span.rows()) {\r\n            if (!this.isFormulaArrayInRow(span.sheet, row)) {\r\n                result = false;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    isFormulaArrayInColumn(sheet, column) {\r\n        for (const mtx of this.arrayMapping.values()) {\r\n            if (mtx.spansThroughSheetColumn(sheet, column)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    isFormulaArrayInAllColumns(span) {\r\n        let result = true;\r\n        for (const col of span.columns()) {\r\n            if (!this.isFormulaArrayInColumn(span.sheet, col)) {\r\n                result = false;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    isFormulaArrayInRange(range) {\r\n        for (const mtx of this.arrayMapping.values()) {\r\n            if (mtx.getRange().doesOverlap(range)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    isFormulaArrayAtAddress(address) {\r\n        for (const mtx of this.arrayMapping.values()) {\r\n            if (mtx.getRange().addressInRange(address)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    moveArrayVerticesAfterRowByRows(sheet, row, numberOfRows) {\r\n        this.updateArrayVerticesInSheet(sheet, (key, vertex) => {\r\n            const range = vertex.getRange();\r\n            return row <= range.start.row ? [range.shifted(0, numberOfRows), vertex] : undefined;\r\n        });\r\n    }\r\n    moveArrayVerticesAfterColumnByColumns(sheet, column, numberOfColumns) {\r\n        this.updateArrayVerticesInSheet(sheet, (key, vertex) => {\r\n            const range = vertex.getRange();\r\n            return column <= range.start.col ? [range.shifted(numberOfColumns, 0), vertex] : undefined;\r\n        });\r\n    }\r\n    updateArrayVerticesInSheet(sheet, fn) {\r\n        const updated = Array();\r\n        for (const [key, vertex] of this.arrayMapping.entries()) {\r\n            if (vertex.sheet !== sheet) {\r\n                continue;\r\n            }\r\n            const result = fn(key, vertex);\r\n            if (result !== undefined) {\r\n                this.removeArray(key);\r\n                updated.push(result);\r\n            }\r\n        }\r\n        updated.forEach(([range, array]) => {\r\n            this.setArray(range, array);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AddressDependency, collectDependencies } from '../parser';\r\nimport { FormulaVertex } from './FormulaCellVertex';\r\nimport { RangeVertex } from './RangeVertex';\r\nexport const collectAddressesDependentToRange = (functionRegistry, vertex, range, lazilyTransformingAstService, dependencyGraph) => {\r\n    if (vertex instanceof RangeVertex) {\r\n        const intersection = vertex.range.intersectionWith(range);\r\n        if (intersection !== undefined) {\r\n            return Array.from(intersection.addresses(dependencyGraph));\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n    let formula;\r\n    let address;\r\n    if (vertex instanceof FormulaVertex) {\r\n        formula = vertex.getFormula(lazilyTransformingAstService);\r\n        address = vertex.getAddress(lazilyTransformingAstService);\r\n    }\r\n    else {\r\n        return [];\r\n    }\r\n    return collectDependencies(formula, functionRegistry)\r\n        .filter((d) => d instanceof AddressDependency)\r\n        .map((d) => d.dependency.toSimpleCellAddress(address))\r\n        .filter((d) => range.addressInRange(d));\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from '../AbsoluteCellRange';\r\nimport { ArraySize } from '../ArraySize';\r\nimport { ArrayValue, ErroredArray, NotComputedArray } from '../ArrayValue';\r\nimport { CellError, equalSimpleCellAddress, ErrorType } from '../Cell';\r\nimport { ErrorMessage } from '../error-message';\r\nimport { EmptyValue, getRawValue } from '../interpreter/InterpreterValue';\r\nimport { ColumnsSpan, RowsSpan } from '../Span';\r\nexport class FormulaVertex {\r\n    constructor(formula, cellAddress, version) {\r\n        this.formula = formula;\r\n        this.cellAddress = cellAddress;\r\n        this.version = version;\r\n    }\r\n    get width() {\r\n        return 1;\r\n    }\r\n    get height() {\r\n        return 1;\r\n    }\r\n    static fromAst(formula, address, size, version) {\r\n        if (size.isScalar()) {\r\n            return new FormulaCellVertex(formula, address, version);\r\n        }\r\n        else {\r\n            return new ArrayVertex(formula, address, size, version);\r\n        }\r\n    }\r\n    /**\r\n     * Returns formula stored in this vertex\r\n     */\r\n    getFormula(updatingService) {\r\n        this.ensureRecentData(updatingService);\r\n        return this.formula;\r\n    }\r\n    ensureRecentData(updatingService) {\r\n        if (this.version != updatingService.version()) {\r\n            const [newAst, newAddress, newVersion] = updatingService.applyTransformations(this.formula, this.cellAddress, this.version);\r\n            this.formula = newAst;\r\n            this.cellAddress = newAddress;\r\n            this.version = newVersion;\r\n        }\r\n    }\r\n    /**\r\n     * Returns address of the cell associated with vertex\r\n     */\r\n    getAddress(updatingService) {\r\n        this.ensureRecentData(updatingService);\r\n        return this.cellAddress;\r\n    }\r\n}\r\nexport class ArrayVertex extends FormulaVertex {\r\n    constructor(formula, cellAddress, size, version = 0) {\r\n        super(formula, cellAddress, version);\r\n        if (size.isRef) {\r\n            this.array = new ErroredArray(new CellError(ErrorType.REF, ErrorMessage.NoSpaceForArrayResult), ArraySize.error());\r\n        }\r\n        else {\r\n            this.array = new NotComputedArray(size);\r\n        }\r\n    }\r\n    get width() {\r\n        return this.array.width();\r\n    }\r\n    get height() {\r\n        return this.array.height();\r\n    }\r\n    get sheet() {\r\n        return this.cellAddress.sheet;\r\n    }\r\n    get leftCorner() {\r\n        return this.cellAddress;\r\n    }\r\n    setCellValue(value) {\r\n        if (value instanceof CellError) {\r\n            this.setErrorValue(value);\r\n            return value;\r\n        }\r\n        const array = ArrayValue.fromInterpreterValue(value);\r\n        array.resize(this.array.size);\r\n        this.array = array;\r\n        return value;\r\n    }\r\n    getCellValue() {\r\n        if (this.array instanceof NotComputedArray) {\r\n            throw Error('Array not computed yet.');\r\n        }\r\n        return this.array.simpleRangeValue();\r\n    }\r\n    valueOrUndef() {\r\n        if (this.array instanceof NotComputedArray) {\r\n            return undefined;\r\n        }\r\n        return this.array.simpleRangeValue();\r\n    }\r\n    getArrayCellValue(address) {\r\n        const col = address.col - this.cellAddress.col;\r\n        const row = address.row - this.cellAddress.row;\r\n        try {\r\n            return this.array.get(col, row);\r\n        }\r\n        catch (e) {\r\n            return new CellError(ErrorType.REF);\r\n        }\r\n    }\r\n    getArrayCellRawValue(address) {\r\n        const val = this.getArrayCellValue(address);\r\n        if (val instanceof CellError || val === EmptyValue) {\r\n            return undefined;\r\n        }\r\n        else {\r\n            return getRawValue(val);\r\n        }\r\n    }\r\n    setArrayCellValue(address, value) {\r\n        const col = address.col - this.cellAddress.col;\r\n        const row = address.row - this.cellAddress.row;\r\n        if (this.array instanceof ArrayValue) {\r\n            this.array.set(col, row, value);\r\n        }\r\n    }\r\n    setNoSpace() {\r\n        this.array = new ErroredArray(new CellError(ErrorType.SPILL, ErrorMessage.NoSpaceForArrayResult), ArraySize.error());\r\n        return this.getCellValue();\r\n    }\r\n    getRange() {\r\n        return AbsoluteCellRange.spanFrom(this.cellAddress, this.width, this.height);\r\n    }\r\n    getRangeOrUndef() {\r\n        return AbsoluteCellRange.spanFromOrUndef(this.cellAddress, this.width, this.height);\r\n    }\r\n    setAddress(address) {\r\n        this.cellAddress = address;\r\n    }\r\n    setFormula(newFormula) {\r\n        this.formula = newFormula;\r\n    }\r\n    spansThroughSheetRows(sheet, startRow, endRow = startRow) {\r\n        return (this.cellAddress.sheet === sheet) &&\r\n            (this.cellAddress.row <= endRow) &&\r\n            (startRow < this.cellAddress.row + this.height);\r\n    }\r\n    spansThroughSheetColumn(sheet, col, columnEnd = col) {\r\n        return (this.cellAddress.sheet === sheet) &&\r\n            (this.cellAddress.col <= columnEnd) &&\r\n            (col < this.cellAddress.col + this.width);\r\n    }\r\n    isComputed() {\r\n        return (!(this.array instanceof NotComputedArray));\r\n    }\r\n    columnsFromArray() {\r\n        return ColumnsSpan.fromNumberOfColumns(this.cellAddress.sheet, this.cellAddress.col, this.width);\r\n    }\r\n    rowsFromArray() {\r\n        return RowsSpan.fromNumberOfRows(this.cellAddress.sheet, this.cellAddress.row, this.height);\r\n    }\r\n    /**\r\n     * No-op as array vertices are transformed eagerly.\r\n     */\r\n    ensureRecentData(_updatingService) {\r\n    }\r\n    isLeftCorner(address) {\r\n        return equalSimpleCellAddress(this.cellAddress, address);\r\n    }\r\n    setErrorValue(error) {\r\n        this.array = new ErroredArray(error, this.array.size);\r\n    }\r\n}\r\n/**\r\n * Represents vertex which keeps formula\r\n */\r\nexport class FormulaCellVertex extends FormulaVertex {\r\n    constructor(\r\n    /** Formula in AST format */\r\n    formula, \r\n    /** Address which this vertex represents */\r\n    address, version) {\r\n        super(formula, address, version);\r\n    }\r\n    valueOrUndef() {\r\n        return this.cachedCellValue;\r\n    }\r\n    /**\r\n     * Sets computed cell value stored in this vertex\r\n     */\r\n    setCellValue(cellValue) {\r\n        this.cachedCellValue = cellValue;\r\n        return this.cachedCellValue;\r\n    }\r\n    /**\r\n     * Returns cell value stored in vertex\r\n     */\r\n    getCellValue() {\r\n        if (this.cachedCellValue !== undefined) {\r\n            return this.cachedCellValue;\r\n        }\r\n        else {\r\n            throw Error('Value of the formula cell is not computed.');\r\n        }\r\n    }\r\n    isComputed() {\r\n        return (this.cachedCellValue !== undefined);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArraySize } from './ArraySize';\r\nimport { EmptyValue } from './interpreter/InterpreterValue';\r\nimport { SimpleRangeValue } from './SimpleRangeValue';\r\nexport class NotComputedArray {\r\n    constructor(size) {\r\n        this.size = size;\r\n    }\r\n    width() {\r\n        return this.size.width;\r\n    }\r\n    height() {\r\n        return this.size.height;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    get(col, row) {\r\n        throw Error('Array not computed yet.');\r\n    }\r\n    simpleRangeValue() {\r\n        throw Error('Array not computed yet.');\r\n    }\r\n}\r\nexport class ArrayValue {\r\n    constructor(array) {\r\n        this.size = new ArraySize(array.length > 0 ? array[0].length : 0, array.length);\r\n        this.array = array;\r\n    }\r\n    static fromInterpreterValue(value) {\r\n        if (value instanceof SimpleRangeValue) {\r\n            return new ArrayValue(value.data);\r\n        }\r\n        else {\r\n            return new ArrayValue([[value]]);\r\n        }\r\n    }\r\n    simpleRangeValue() {\r\n        return SimpleRangeValue.onlyValues(this.array);\r\n    }\r\n    addRows(aboveRow, numberOfRows) {\r\n        this.array.splice(aboveRow, 0, ...this.nullArrays(numberOfRows, this.width()));\r\n        this.size.height += numberOfRows;\r\n    }\r\n    addColumns(aboveColumn, numberOfColumns) {\r\n        for (let i = 0; i < this.height(); i++) {\r\n            this.array[i].splice(aboveColumn, 0, ...new Array(numberOfColumns).fill(EmptyValue));\r\n        }\r\n        this.size.width += numberOfColumns;\r\n    }\r\n    removeRows(startRow, endRow) {\r\n        if (this.outOfBound(0, startRow) || this.outOfBound(0, endRow)) {\r\n            throw Error('Array index out of bound');\r\n        }\r\n        const numberOfRows = endRow - startRow + 1;\r\n        this.array.splice(startRow, numberOfRows);\r\n        this.size.height -= numberOfRows;\r\n    }\r\n    removeColumns(leftmostColumn, rightmostColumn) {\r\n        if (this.outOfBound(leftmostColumn, 0) || this.outOfBound(rightmostColumn, 0)) {\r\n            throw Error('Array index out of bound');\r\n        }\r\n        const numberOfColumns = rightmostColumn - leftmostColumn + 1;\r\n        for (const row of this.array) {\r\n            row.splice(leftmostColumn, numberOfColumns);\r\n        }\r\n        this.size.width -= numberOfColumns;\r\n    }\r\n    nullArrays(count, size) {\r\n        const result = [];\r\n        for (let i = 0; i < count; ++i) {\r\n            result.push(new Array(size).fill(EmptyValue));\r\n        }\r\n        return result;\r\n    }\r\n    get(col, row) {\r\n        if (this.outOfBound(col, row)) {\r\n            throw Error('Array index out of bound');\r\n        }\r\n        return this.array[row][col];\r\n    }\r\n    set(col, row, value) {\r\n        if (this.outOfBound(col, row)) {\r\n            throw Error('Array index out of bound');\r\n        }\r\n        this.array[row][col] = value;\r\n    }\r\n    width() {\r\n        return this.size.width;\r\n    }\r\n    height() {\r\n        return this.size.height;\r\n    }\r\n    raw() {\r\n        return this.array;\r\n    }\r\n    resize(newSize) {\r\n        if (this.height() < newSize.height && isFinite(newSize.height)) {\r\n            this.addRows(this.height(), newSize.height - this.height());\r\n        }\r\n        if (this.height() > newSize.height) {\r\n            throw Error('Resizing to smaller array');\r\n        }\r\n        if (this.width() < newSize.width && isFinite(newSize.width)) {\r\n            this.addColumns(this.width(), newSize.width - this.width());\r\n        }\r\n        if (this.width() > newSize.width) {\r\n            throw Error('Resizing to smaller array');\r\n        }\r\n    }\r\n    outOfBound(col, row) {\r\n        return col < 0 || row < 0 || row > this.size.height - 1 || col > this.size.width - 1;\r\n    }\r\n}\r\nexport class ErroredArray {\r\n    constructor(error, size) {\r\n        this.error = error;\r\n        this.size = size;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    get(col, row) {\r\n        return this.error;\r\n    }\r\n    width() {\r\n        return this.size.width;\r\n    }\r\n    height() {\r\n        return this.size.height;\r\n    }\r\n    simpleRangeValue() {\r\n        return this.error;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\n/**\r\n * Represents vertex bound to range\r\n */\r\nexport class RangeVertex {\r\n    constructor(range) {\r\n        this.range = range;\r\n        this.functionCache = new Map();\r\n        this.criterionFunctionCache = new Map();\r\n        this.dependentCacheRanges = new Set();\r\n        this.bruteForce = false;\r\n    }\r\n    get start() {\r\n        return this.range.start;\r\n    }\r\n    get end() {\r\n        return this.range.end;\r\n    }\r\n    get sheet() {\r\n        return this.range.start.sheet;\r\n    }\r\n    /**\r\n     * Returns cached value stored for given function\r\n     *\r\n     * @param functionName - name of the function\r\n     */\r\n    getFunctionValue(functionName) {\r\n        return this.functionCache.get(functionName);\r\n    }\r\n    /**\r\n     * Stores cached value for given function\r\n     *\r\n     * @param functionName - name of the function\r\n     * @param value - cached value\r\n     */\r\n    setFunctionValue(functionName, value) {\r\n        this.functionCache.set(functionName, value);\r\n    }\r\n    /**\r\n     * Returns cached value for given cache key and criterion text representation\r\n     *\r\n     * @param cacheKey - key to retrieve from the cache\r\n     * @param criterionString - criterion text (ex. '<=5')\r\n     */\r\n    getCriterionFunctionValue(cacheKey, criterionString) {\r\n        var _a;\r\n        return (_a = this.getCriterionFunctionValues(cacheKey).get(criterionString)) === null || _a === void 0 ? void 0 : _a[0];\r\n    }\r\n    /**\r\n     * Returns all cached values stored for given criterion function\r\n     *\r\n     * @param cacheKey - key to retrieve from the cache\r\n     */\r\n    getCriterionFunctionValues(cacheKey) {\r\n        var _a;\r\n        return (_a = this.criterionFunctionCache.get(cacheKey)) !== null && _a !== void 0 ? _a : new Map();\r\n    }\r\n    /**\r\n     * Stores all values for given criterion function\r\n     *\r\n     * @param cacheKey - key to store in the cache\r\n     * @param values - map with values\r\n     */\r\n    setCriterionFunctionValues(cacheKey, values) {\r\n        this.criterionFunctionCache.set(cacheKey, values);\r\n    }\r\n    addDependentCacheRange(dependentRange) {\r\n        if (dependentRange !== this) {\r\n            this.dependentCacheRanges.add(dependentRange);\r\n        }\r\n    }\r\n    /**\r\n     * Clears function cache\r\n     */\r\n    clearCache() {\r\n        this.functionCache.clear();\r\n        this.criterionFunctionCache.clear();\r\n        this.dependentCacheRanges.forEach(range => range.criterionFunctionCache.clear());\r\n        this.dependentCacheRanges.clear();\r\n    }\r\n    /**\r\n     * Returns start of the range (it's top-left corner)\r\n     */\r\n    getStart() {\r\n        return this.start;\r\n    }\r\n    /**\r\n     * Returns end of the range (it's bottom-right corner)\r\n     */\r\n    getEnd() {\r\n        return this.end;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nvar NodeVisitStatus;\r\n(function (NodeVisitStatus) {\r\n    NodeVisitStatus[NodeVisitStatus[\"ON_STACK\"] = 0] = \"ON_STACK\";\r\n    NodeVisitStatus[NodeVisitStatus[\"PROCESSED\"] = 1] = \"PROCESSED\";\r\n    NodeVisitStatus[NodeVisitStatus[\"POPPED\"] = 2] = \"POPPED\";\r\n})(NodeVisitStatus || (NodeVisitStatus = {}));\r\n/**\r\n * Provides graph directed structure\r\n *\r\n * Invariants:\r\n * - this.edges(node) exists if and only if node is in the graph\r\n * - this.specialNodes* are always subset of this.nodes\r\n * - this.edges(node) is subset of this.nodes (i.e. it does not contain nodes not present in graph) -- this invariant DOES NOT HOLD right now\r\n */\r\nexport class Graph {\r\n    constructor(dependencyQuery) {\r\n        this.dependencyQuery = dependencyQuery;\r\n        /** Set with nodes in graph. */\r\n        this.nodes = new Set();\r\n        this.specialNodes = new Set();\r\n        this.specialNodesStructuralChanges = new Set();\r\n        this.specialNodesRecentlyChanged = new Set();\r\n        this.infiniteRanges = new Set();\r\n        /** Nodes adjacency mapping. */\r\n        this.edges = new Map();\r\n    }\r\n    /**\r\n     * Adds node to a graph\r\n     *\r\n     * @param node - a node to be added\r\n     */\r\n    addNode(node) {\r\n        this.nodes.add(node);\r\n        if (!this.edges.has(node)) {\r\n            this.edges.set(node, new Set());\r\n        }\r\n    }\r\n    /**\r\n     * Adds edge between nodes.\r\n     *\r\n     * The nodes had to be added to the graph before, or the error will be raised\r\n     *\r\n     * @param fromNode - node from which edge is outcoming\r\n     * @param toNode - node to which edge is incoming\r\n     */\r\n    addEdge(fromNode, toNode) {\r\n        if (!this.nodes.has(fromNode)) {\r\n            throw new Error(`Unknown node ${fromNode}`);\r\n        }\r\n        if (!this.nodes.has(toNode)) {\r\n            throw new Error(`Unknown node ${toNode}`);\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        this.edges.get(fromNode).add(toNode);\r\n    }\r\n    removeEdge(fromNode, toNode) {\r\n        if (this.existsEdge(fromNode, toNode)) {\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            this.edges.get(fromNode).delete(toNode);\r\n        }\r\n        else {\r\n            throw new Error('Edge does not exist');\r\n        }\r\n    }\r\n    softRemoveEdge(fromNode, toNode) {\r\n        var _a;\r\n        (_a = this.edges.get(fromNode)) === null || _a === void 0 ? void 0 : _a.delete(toNode);\r\n    }\r\n    removeIncomingEdges(toNode) {\r\n        this.edges.forEach((nodeEdges) => {\r\n            nodeEdges.delete(toNode);\r\n        });\r\n    }\r\n    /**\r\n     * Returns nodes adjacent to given node\r\n     *\r\n     * @param node - node to which adjacent nodes we want to retrieve\r\n     */\r\n    adjacentNodes(node) {\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        return this.edges.get(node);\r\n    }\r\n    adjacentNodesCount(node) {\r\n        return this.adjacentNodes(node).size;\r\n    }\r\n    /**\r\n     * Checks whether a node is present in graph\r\n     *\r\n     * @param node - node to check\r\n     */\r\n    hasNode(node) {\r\n        return this.nodes.has(node);\r\n    }\r\n    /**\r\n     * Returns number of nodes in graph\r\n     */\r\n    nodesCount() {\r\n        return this.nodes.size;\r\n    }\r\n    /**\r\n     * Returns number of edges in graph\r\n     */\r\n    edgesCount() {\r\n        let result = 0;\r\n        this.edges.forEach((edgesForNode) => (result += edgesForNode.size));\r\n        return result;\r\n    }\r\n    removeNode(node) {\r\n        for (const adjacentNode of this.adjacentNodes(node).values()) {\r\n            this.markNodeAsSpecialRecentlyChanged(adjacentNode);\r\n        }\r\n        this.edges.delete(node);\r\n        this.nodes.delete(node);\r\n        this.specialNodes.delete(node);\r\n        this.specialNodesRecentlyChanged.delete(node);\r\n        this.specialNodesStructuralChanges.delete(node);\r\n        this.infiniteRanges.delete(node);\r\n        return this.removeDependencies(node);\r\n    }\r\n    markNodeAsSpecial(node) {\r\n        this.specialNodes.add(node);\r\n    }\r\n    markNodeAsSpecialRecentlyChanged(node) {\r\n        if (this.nodes.has(node)) {\r\n            this.specialNodesRecentlyChanged.add(node);\r\n        }\r\n    }\r\n    markNodeAsChangingWithStructure(node) {\r\n        this.specialNodesStructuralChanges.add(node);\r\n    }\r\n    clearSpecialNodesRecentlyChanged() {\r\n        this.specialNodesRecentlyChanged.clear();\r\n    }\r\n    markNodeAsInfiniteRange(node) {\r\n        this.infiniteRanges.add(node);\r\n    }\r\n    /**\r\n     * Checks whether exists edge between nodes\r\n     *\r\n     * @param fromNode - node from which edge is outcoming\r\n     * @param toNode - node to which edge is incoming\r\n     */\r\n    existsEdge(fromNode, toNode) {\r\n        var _a, _b;\r\n        return (_b = (_a = this.edges.get(fromNode)) === null || _a === void 0 ? void 0 : _a.has(toNode)) !== null && _b !== void 0 ? _b : false;\r\n    }\r\n    /*\r\n     * return a topological sort order, but separates vertices that exist in some cycle\r\n     */\r\n    topSortWithScc() {\r\n        return this.getTopSortedWithSccSubgraphFrom(Array.from(this.nodes), () => true, () => {\r\n        });\r\n    }\r\n    /**\r\n     *\r\n     * an iterative implementation of Tarjan's algorithm for finding strongly connected compontents\r\n     * returns vertices in order of topological sort, but vertices that are on cycles are kept separate\r\n     *\r\n     * @param modifiedNodes - seed for computation. During engine init run, all of the vertices of grap. In recomputation run, changed vertices.\r\n     * @param operatingFunction - recomputes value of a node, and returns whether a change occured\r\n     * @param onCycle - action to be performed when node is on cycle\r\n     */\r\n    getTopSortedWithSccSubgraphFrom(modifiedNodes, operatingFunction, onCycle) {\r\n        const entranceTime = new Map();\r\n        const low = new Map();\r\n        const parent = new Map();\r\n        const inSCC = new Set();\r\n        // node status life cycle:\r\n        // undefined -> ON_STACK -> PROCESSED -> POPPED\r\n        const nodeStatus = new Map();\r\n        const order = [];\r\n        let time = 0;\r\n        const sccNonSingletons = new Set();\r\n        modifiedNodes.reverse();\r\n        modifiedNodes.forEach((v) => {\r\n            if (nodeStatus.get(v) !== undefined) {\r\n                return;\r\n            }\r\n            const DFSstack = [v];\r\n            const SCCstack = [];\r\n            nodeStatus.set(v, NodeVisitStatus.ON_STACK);\r\n            while (DFSstack.length > 0) {\r\n                const u = DFSstack[DFSstack.length - 1];\r\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                switch (nodeStatus.get(u)) {\r\n                    case NodeVisitStatus.ON_STACK: {\r\n                        entranceTime.set(u, time);\r\n                        low.set(u, time);\r\n                        SCCstack.push(u);\r\n                        time++;\r\n                        this.adjacentNodes(u).forEach((t) => {\r\n                            if (entranceTime.get(t) === undefined) {\r\n                                DFSstack.push(t);\r\n                                parent.set(t, u);\r\n                                nodeStatus.set(t, NodeVisitStatus.ON_STACK);\r\n                            }\r\n                        });\r\n                        nodeStatus.set(u, NodeVisitStatus.PROCESSED);\r\n                        break;\r\n                    }\r\n                    case NodeVisitStatus.PROCESSED: { // leaving this DFS subtree\r\n                        let uLow;\r\n                        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                        uLow = entranceTime.get(u);\r\n                        this.adjacentNodes(u).forEach((t) => {\r\n                            if (!inSCC.has(t)) {\r\n                                if (parent.get(t) === u) {\r\n                                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                                    uLow = Math.min(uLow, low.get(t));\r\n                                }\r\n                                else {\r\n                                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n                                    uLow = Math.min(uLow, entranceTime.get(t));\r\n                                }\r\n                            }\r\n                        });\r\n                        low.set(u, uLow);\r\n                        if (uLow === entranceTime.get(u)) {\r\n                            const currentSCC = [];\r\n                            do {\r\n                                currentSCC.push(SCCstack[SCCstack.length - 1]);\r\n                                SCCstack.pop();\r\n                            } while (currentSCC[currentSCC.length - 1] !== u);\r\n                            currentSCC.forEach((t) => {\r\n                                inSCC.add(t);\r\n                            });\r\n                            order.push(...currentSCC);\r\n                            if (currentSCC.length > 1) {\r\n                                currentSCC.forEach((t) => {\r\n                                    sccNonSingletons.add(t);\r\n                                });\r\n                            }\r\n                        }\r\n                        DFSstack.pop();\r\n                        nodeStatus.set(u, NodeVisitStatus.POPPED);\r\n                        break;\r\n                    }\r\n                    case NodeVisitStatus.POPPED: { // it's a 'shadow' copy, we already processed this vertex and can ignore it\r\n                        DFSstack.pop();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        const shouldBeUpdatedMapping = new Set(modifiedNodes);\r\n        const sorted = [];\r\n        const cycled = [];\r\n        order.reverse();\r\n        order.forEach((t) => {\r\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n            if (sccNonSingletons.has(t) || this.adjacentNodes(t).has(t)) {\r\n                cycled.push(t);\r\n                onCycle(t);\r\n                this.adjacentNodes(t).forEach((s) => shouldBeUpdatedMapping.add(s));\r\n            }\r\n            else {\r\n                sorted.push(t);\r\n                if (shouldBeUpdatedMapping.has(t) && operatingFunction(t)) {\r\n                    this.adjacentNodes(t).forEach((s) => shouldBeUpdatedMapping.add(s));\r\n                }\r\n            }\r\n        });\r\n        return { sorted, cycled };\r\n    }\r\n    getDependencies(vertex) {\r\n        const result = [];\r\n        this.edges.forEach((adjacentNodes, sourceNode) => {\r\n            if (adjacentNodes.has(vertex)) {\r\n                result.push(sourceNode);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    removeDependencies(node) {\r\n        const dependencies = this.dependencyQuery(node);\r\n        for (const [_, dependency] of dependencies) {\r\n            this.softRemoveEdge(dependency, node);\r\n        }\r\n        return dependencies;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from '../AbsoluteCellRange';\r\nimport { simpleCellAddress } from '../Cell';\r\n/**\r\n * Mapping from address ranges to range vertices\r\n */\r\nexport class RangeMapping {\r\n    constructor() {\r\n        /** Map in which actual data is stored. */\r\n        this.rangeMapping = new Map();\r\n    }\r\n    getMappingSize(sheet) {\r\n        var _a, _b;\r\n        return (_b = (_a = this.rangeMapping.get(sheet)) === null || _a === void 0 ? void 0 : _a.size) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n    /**\r\n     * Saves range vertex\r\n     *\r\n     * @param vertex - vertex to save\r\n     */\r\n    setRange(vertex) {\r\n        let sheetMap = this.rangeMapping.get(vertex.getStart().sheet);\r\n        if (sheetMap === undefined) {\r\n            sheetMap = new Map();\r\n            this.rangeMapping.set(vertex.getStart().sheet, sheetMap);\r\n        }\r\n        const key = keyFromAddresses(vertex.getStart(), vertex.getEnd());\r\n        sheetMap.set(key, vertex);\r\n    }\r\n    removeRange(vertex) {\r\n        const sheet = vertex.getStart().sheet;\r\n        const sheetMap = this.rangeMapping.get(sheet);\r\n        if (sheetMap === undefined) {\r\n            return;\r\n        }\r\n        const key = keyFromAddresses(vertex.getStart(), vertex.getEnd());\r\n        sheetMap.delete(key);\r\n        if (sheetMap.size === 0) {\r\n            this.rangeMapping.delete(sheet);\r\n        }\r\n    }\r\n    /**\r\n     * Returns associated vertex for given range\r\n     *\r\n     * @param start - top-left corner of the range\r\n     * @param end - bottom-right corner of the range\r\n     */\r\n    getRange(start, end) {\r\n        const sheetMap = this.rangeMapping.get(start.sheet);\r\n        const key = keyFromAddresses(start, end);\r\n        return sheetMap === null || sheetMap === void 0 ? void 0 : sheetMap.get(key);\r\n    }\r\n    fetchRange(start, end) {\r\n        const maybeRange = this.getRange(start, end);\r\n        if (!maybeRange) {\r\n            throw Error('Range does not exist');\r\n        }\r\n        return maybeRange;\r\n    }\r\n    truncateRanges(span, coordinate) {\r\n        const verticesToRemove = Array();\r\n        const updated = Array();\r\n        const verticesWithChangedSize = Array();\r\n        const sheet = span.sheet;\r\n        for (const [key, vertex] of this.entriesFromSheet(span.sheet)) {\r\n            const range = vertex.range;\r\n            if (span.start <= coordinate(vertex.range.end)) {\r\n                range.removeSpan(span);\r\n                if (range.shouldBeRemoved()) {\r\n                    this.removeByKey(sheet, key);\r\n                    verticesToRemove.push(vertex);\r\n                }\r\n                else {\r\n                    updated.push([key, vertex]);\r\n                }\r\n                verticesWithChangedSize.push(vertex);\r\n            }\r\n        }\r\n        const verticesToMerge = [];\r\n        updated.sort((left, right) => compareBy(left[1], right[1], coordinate));\r\n        for (const [oldKey, vertex] of updated) {\r\n            const newKey = keyFromRange(vertex.range);\r\n            if (newKey === oldKey) {\r\n                continue;\r\n            }\r\n            const existingVertex = this.getByKey(sheet, newKey);\r\n            this.removeByKey(sheet, oldKey);\r\n            if (existingVertex !== undefined && vertex != existingVertex) {\r\n                verticesToMerge.push([existingVertex, vertex]);\r\n            }\r\n            else {\r\n                this.setRange(vertex);\r\n            }\r\n        }\r\n        return {\r\n            verticesToRemove,\r\n            verticesToMerge,\r\n            verticesWithChangedSize\r\n        };\r\n    }\r\n    moveAllRangesInSheetAfterRowByRows(sheet, row, numberOfRows) {\r\n        return this.updateVerticesFromSheet(sheet, (key, vertex) => {\r\n            if (row <= vertex.start.row) {\r\n                vertex.range.shiftByRows(numberOfRows);\r\n                return {\r\n                    changedSize: false,\r\n                    vertex: vertex\r\n                };\r\n            }\r\n            else if (row > vertex.start.row && row <= vertex.end.row) {\r\n                vertex.range.expandByRows(numberOfRows);\r\n                return {\r\n                    changedSize: true,\r\n                    vertex: vertex\r\n                };\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        });\r\n    }\r\n    moveAllRangesInSheetAfterColumnByColumns(sheet, column, numberOfColumns) {\r\n        return this.updateVerticesFromSheet(sheet, (key, vertex) => {\r\n            if (column <= vertex.start.col) {\r\n                vertex.range.shiftByColumns(numberOfColumns);\r\n                return {\r\n                    changedSize: false,\r\n                    vertex: vertex\r\n                };\r\n            }\r\n            else if (column > vertex.start.col && column <= vertex.end.col) {\r\n                vertex.range.expandByColumns(numberOfColumns);\r\n                return {\r\n                    changedSize: true,\r\n                    vertex: vertex\r\n                };\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        });\r\n    }\r\n    moveRangesInsideSourceRange(sourceRange, toRight, toBottom, toSheet) {\r\n        this.updateVerticesFromSheet(sourceRange.sheet, (key, vertex) => {\r\n            if (sourceRange.containsRange(vertex.range)) {\r\n                vertex.range.shiftByColumns(toRight);\r\n                vertex.range.shiftByRows(toBottom);\r\n                vertex.range.moveToSheet(toSheet);\r\n                return {\r\n                    changedSize: false,\r\n                    vertex: vertex\r\n                };\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        });\r\n    }\r\n    removeRangesInSheet(sheet) {\r\n        if (this.rangeMapping.has(sheet)) {\r\n            const ranges = this.rangeMapping.get(sheet).values();\r\n            this.rangeMapping.delete(sheet);\r\n            return ranges;\r\n        }\r\n        return [][Symbol.iterator]();\r\n    }\r\n    *rangesInSheet(sheet) {\r\n        const sheetMap = this.rangeMapping.get(sheet);\r\n        if (!sheetMap) {\r\n            return;\r\n        }\r\n        yield* sheetMap.values();\r\n    }\r\n    *rangeVerticesContainedInRange(sourceRange) {\r\n        for (const rangeVertex of this.rangesInSheet(sourceRange.sheet)) {\r\n            if (sourceRange.containsRange(rangeVertex.range)) {\r\n                yield rangeVertex;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Finds smaller range does have own vertex.\r\n     *\r\n     * @param range\r\n     */\r\n    findSmallerRange(range) {\r\n        if (range.height() > 1 && Number.isFinite(range.height())) {\r\n            const valuesRangeEndRowLess = simpleCellAddress(range.end.sheet, range.end.col, range.end.row - 1);\r\n            const rowLessVertex = this.getRange(range.start, valuesRangeEndRowLess);\r\n            if (rowLessVertex !== undefined) {\r\n                const restRange = AbsoluteCellRange.fromSimpleCellAddresses(simpleCellAddress(range.start.sheet, range.start.col, range.end.row), range.end);\r\n                return {\r\n                    smallerRangeVertex: rowLessVertex,\r\n                    restRange,\r\n                };\r\n            }\r\n        }\r\n        return {\r\n            restRange: range,\r\n        };\r\n    }\r\n    *entriesFromSheet(sheet) {\r\n        const sheetMap = this.rangeMapping.get(sheet);\r\n        if (!sheetMap) {\r\n            return;\r\n        }\r\n        yield* sheetMap.entries();\r\n    }\r\n    removeByKey(sheet, key) {\r\n        this.rangeMapping.get(sheet).delete(key);\r\n    }\r\n    getByKey(sheet, key) {\r\n        var _a;\r\n        return (_a = this.rangeMapping.get(sheet)) === null || _a === void 0 ? void 0 : _a.get(key);\r\n    }\r\n    updateVerticesFromSheet(sheet, fn) {\r\n        const updated = Array();\r\n        for (const [key, vertex] of this.entriesFromSheet(sheet)) {\r\n            const result = fn(key, vertex);\r\n            if (result !== undefined) {\r\n                this.removeByKey(sheet, key);\r\n                updated.push(result);\r\n            }\r\n        }\r\n        updated.forEach(entry => {\r\n            this.setRange(entry.vertex);\r\n        });\r\n        return {\r\n            verticesWithChangedSize: updated\r\n                .filter(entry => entry.changedSize)\r\n                .map(entry => entry.vertex)\r\n        };\r\n    }\r\n}\r\nfunction keyFromAddresses(start, end) {\r\n    return `${start.col},${start.row},${end.col},${end.row}`;\r\n}\r\nfunction keyFromRange(range) {\r\n    return keyFromAddresses(range.start, range.end);\r\n}\r\nconst compareBy = (left, right, coordinate) => {\r\n    const leftStart = coordinate(left.range.start);\r\n    const rightStart = coordinate(left.range.start);\r\n    if (leftStart === rightStart) {\r\n        const leftEnd = coordinate(left.range.end);\r\n        const rightEnd = coordinate(right.range.end);\r\n        return leftEnd - rightEnd;\r\n    }\r\n    else {\r\n        return leftStart - rightStart;\r\n    }\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { NoSheetWithIdError, NoSheetWithNameError, SheetNameAlreadyTakenError } from '../errors';\r\nimport { UIElement } from '../i18n';\r\nfunction canonicalize(sheetDisplayName) {\r\n    return sheetDisplayName.toLowerCase();\r\n}\r\nclass Sheet {\r\n    constructor(id, displayName) {\r\n        this.id = id;\r\n        this.displayName = displayName;\r\n    }\r\n    get canonicalName() {\r\n        return canonicalize(this.displayName);\r\n    }\r\n}\r\nexport class SheetMapping {\r\n    constructor(languages) {\r\n        this.languages = languages;\r\n        this.mappingFromCanonicalName = new Map();\r\n        this.mappingFromId = new Map();\r\n        this.lastSheetId = -1;\r\n        this.fetch = (sheetName) => {\r\n            const sheet = this.mappingFromCanonicalName.get(canonicalize(sheetName));\r\n            if (sheet === undefined) {\r\n                throw new NoSheetWithNameError(sheetName);\r\n            }\r\n            return sheet.id;\r\n        };\r\n        this.get = (sheetName) => {\r\n            var _a;\r\n            return (_a = this.mappingFromCanonicalName.get(canonicalize(sheetName))) === null || _a === void 0 ? void 0 : _a.id;\r\n        };\r\n        this.fetchDisplayName = (sheetId) => {\r\n            return this.fetchSheetById(sheetId).displayName;\r\n        };\r\n        this.sheetNamePrefix = languages.getUITranslation(UIElement.NEW_SHEET_PREFIX);\r\n    }\r\n    addSheet(newSheetDisplayName = `${this.sheetNamePrefix}${this.lastSheetId + 2}`) {\r\n        const newSheetCanonicalName = canonicalize(newSheetDisplayName);\r\n        if (this.mappingFromCanonicalName.has(newSheetCanonicalName)) {\r\n            throw new SheetNameAlreadyTakenError(newSheetDisplayName);\r\n        }\r\n        this.lastSheetId++;\r\n        const sheet = new Sheet(this.lastSheetId, newSheetDisplayName);\r\n        this.store(sheet);\r\n        return sheet.id;\r\n    }\r\n    removeSheet(sheetId) {\r\n        const sheet = this.fetchSheetById(sheetId);\r\n        if (sheetId == this.lastSheetId) {\r\n            --this.lastSheetId;\r\n        }\r\n        this.mappingFromCanonicalName.delete(sheet.canonicalName);\r\n        this.mappingFromId.delete(sheet.id);\r\n    }\r\n    getDisplayName(sheetId) {\r\n        var _a;\r\n        return (_a = this.mappingFromId.get(sheetId)) === null || _a === void 0 ? void 0 : _a.displayName;\r\n    }\r\n    *displayNames() {\r\n        for (const sheet of this.mappingFromCanonicalName.values()) {\r\n            yield sheet.displayName;\r\n        }\r\n    }\r\n    numberOfSheets() {\r\n        return this.mappingFromCanonicalName.size;\r\n    }\r\n    hasSheetWithId(sheetId) {\r\n        return this.mappingFromId.has(sheetId);\r\n    }\r\n    hasSheetWithName(sheetName) {\r\n        return this.mappingFromCanonicalName.has(canonicalize(sheetName));\r\n    }\r\n    renameSheet(sheetId, newDisplayName) {\r\n        const sheet = this.fetchSheetById(sheetId);\r\n        const currentDisplayName = sheet.displayName;\r\n        if (currentDisplayName === newDisplayName) {\r\n            return undefined;\r\n        }\r\n        const sheetWithThisCanonicalName = this.mappingFromCanonicalName.get(canonicalize(newDisplayName));\r\n        if (sheetWithThisCanonicalName !== undefined && sheetWithThisCanonicalName.id !== sheet.id) {\r\n            throw new SheetNameAlreadyTakenError(newDisplayName);\r\n        }\r\n        const currentCanonicalName = sheet.canonicalName;\r\n        this.mappingFromCanonicalName.delete(currentCanonicalName);\r\n        sheet.displayName = newDisplayName;\r\n        this.store(sheet);\r\n        return currentDisplayName;\r\n    }\r\n    sheetNames() {\r\n        return Array.from(this.mappingFromId.values()).map((s) => s.displayName);\r\n    }\r\n    store(sheet) {\r\n        this.mappingFromId.set(sheet.id, sheet);\r\n        this.mappingFromCanonicalName.set(sheet.canonicalName, sheet);\r\n    }\r\n    fetchSheetById(sheetId) {\r\n        const sheet = this.mappingFromId.get(sheetId);\r\n        if (sheet === undefined) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        return sheet;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { buildTranslationPackage, TranslationPackage } from './TranslationPackage';\r\nexport { TranslationPackage, buildTranslationPackage };\r\nexport var UIElement;\r\n(function (UIElement) {\r\n    UIElement[\"NEW_SHEET_PREFIX\"] = \"NEW_SHEET_PREFIX\";\r\n})(UIElement || (UIElement = {}));\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ErrorType } from '../Cell';\r\nimport { MissingTranslationError, ProtectedFunctionTranslationError } from '../errors';\r\nimport { UIElement } from './index';\r\nexport class TranslationPackage {\r\n    constructor(functions, errors, ui) {\r\n        this.functions = functions;\r\n        this.errors = errors;\r\n        this.ui = ui;\r\n        this._protectedTranslations = {\r\n            'VERSION': 'VERSION'\r\n        };\r\n        this.checkUI();\r\n        this.checkErrors();\r\n        this.checkFunctionTranslations(this.functions);\r\n        Object.assign(this.functions, this._protectedTranslations);\r\n    }\r\n    extendFunctions(additionalFunctionTranslations) {\r\n        this.checkFunctionTranslations(additionalFunctionTranslations);\r\n        Object.assign(this.functions, additionalFunctionTranslations);\r\n    }\r\n    buildFunctionMapping() {\r\n        return Object.keys(this.functions).reduce((ret, key) => {\r\n            ret[this.functions[key]] = key;\r\n            return ret;\r\n        }, {});\r\n    }\r\n    buildErrorMapping() {\r\n        return Object.keys(this.errors).reduce((ret, key) => {\r\n            ret[this.errors[key]] = key;\r\n            return ret;\r\n        }, {});\r\n    }\r\n    isFunctionTranslated(key) {\r\n        return this.functions[key] !== undefined;\r\n    }\r\n    getFunctionTranslations(functionIds) {\r\n        const translations = [];\r\n        for (const functionId of functionIds) {\r\n            if (this.isFunctionTranslated(functionId)) {\r\n                translations.push(this.functions[functionId]);\r\n            }\r\n        }\r\n        return translations;\r\n    }\r\n    getFunctionTranslation(key) {\r\n        const val = this.functions[key];\r\n        if (val === undefined) {\r\n            throw new MissingTranslationError(`functions.${key}`);\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    }\r\n    getMaybeFunctionTranslation(key) {\r\n        return this.functions[key];\r\n    }\r\n    getErrorTranslation(key) {\r\n        if (key === ErrorType.LIC) {\r\n            return `#${ErrorType.LIC}!`;\r\n        }\r\n        const val = this.errors[key];\r\n        if (val === undefined) {\r\n            throw new MissingTranslationError(`errors.${key}`);\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    }\r\n    getUITranslation(key) {\r\n        const val = this.ui[key];\r\n        if (val === undefined) {\r\n            throw new MissingTranslationError(`ui.${key}`);\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    }\r\n    checkUI() {\r\n        for (const key of Object.values(UIElement)) {\r\n            if (!(key in this.ui)) {\r\n                throw new MissingTranslationError(`ui.${key}`);\r\n            }\r\n        }\r\n    }\r\n    checkErrors() {\r\n        for (const key of Object.values(ErrorType)) {\r\n            if (!(key in this.errors) && (key !== ErrorType.LIC)) {\r\n                throw new MissingTranslationError(`errors.${key}`);\r\n            }\r\n        }\r\n    }\r\n    checkFunctionTranslations(functions) {\r\n        const functionNames = new Set(Object.getOwnPropertyNames(functions));\r\n        for (const protectedTranslation of Object.getOwnPropertyNames(this._protectedTranslations)) {\r\n            if (functionNames.has(protectedTranslation)) {\r\n                throw new ProtectedFunctionTranslationError(protectedTranslation);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function buildTranslationPackage(rawTranslationPackage) {\r\n    return new TranslationPackage(Object.assign({}, rawTranslationPackage.functions), Object.assign({}, rawTranslationPackage.errors), Object.assign({}, rawTranslationPackage.ui));\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { EmptyValue } from '../interpreter/InterpreterValue';\r\n/**\r\n * Represents singleton vertex bound to all empty cells\r\n */\r\nexport class EmptyCellVertex {\r\n    constructor() { }\r\n    /**\r\n     * Retrieves cell value bound to that singleton\r\n     */\r\n    getCellValue() {\r\n        return EmptyValue;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\n/**\r\n * Represents vertex which keeps static cell value\r\n */\r\nexport class ValueCellVertex {\r\n    /** Static cell value. */\r\n    constructor(parsedValue, rawValue) {\r\n        this.parsedValue = parsedValue;\r\n        this.rawValue = rawValue;\r\n    }\r\n    getValues() {\r\n        return { parsedValue: this.parsedValue, rawValue: this.rawValue };\r\n    }\r\n    setValues(values) {\r\n        this.parsedValue = values.parsedValue;\r\n        this.rawValue = values.rawValue;\r\n    }\r\n    /**\r\n     * Returns cell value stored in vertex\r\n     */\r\n    getCellValue() {\r\n        return this.parsedValue;\r\n    }\r\n    setCellValue(_cellValue) {\r\n        throw Error('SetCellValue is deprecated for ValueCellVertex');\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError } from '../Cell';\r\nexport class ParsingErrorVertex {\r\n    constructor(errors, rawInput) {\r\n        this.errors = errors;\r\n        this.rawInput = rawInput;\r\n    }\r\n    getCellValue() {\r\n        return CellError.parsingError();\r\n    }\r\n    getFormula() {\r\n        return this.rawInput;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { simpleCellAddress } from '../../Cell';\r\n/**\r\n * Mapping from cell addresses to vertices\r\n *\r\n * Uses Map to store addresses, having minimal memory usage for sparse sheets but not necessarily constant set/lookup.\r\n */\r\nexport class SparseStrategy {\r\n    constructor(width, height) {\r\n        this.width = width;\r\n        this.height = height;\r\n        /**\r\n         * Map of Maps in which actual data is stored.\r\n         *\r\n         * Key of map in first level is column number.\r\n         * Key of map in second level is row number.\r\n         */\r\n        this.mapping = new Map();\r\n    }\r\n    /** @inheritDoc */\r\n    getCell(address) {\r\n        var _a;\r\n        return (_a = this.mapping.get(address.col)) === null || _a === void 0 ? void 0 : _a.get(address.row);\r\n    }\r\n    /** @inheritDoc */\r\n    setCell(address, newVertex) {\r\n        this.width = Math.max(this.width, address.col + 1);\r\n        this.height = Math.max(this.height, address.row + 1);\r\n        let colMapping = this.mapping.get(address.col);\r\n        if (!colMapping) {\r\n            colMapping = new Map();\r\n            this.mapping.set(address.col, colMapping);\r\n        }\r\n        colMapping.set(address.row, newVertex);\r\n    }\r\n    /** @inheritDoc */\r\n    has(address) {\r\n        var _a;\r\n        return !!((_a = this.mapping.get(address.col)) === null || _a === void 0 ? void 0 : _a.get(address.row));\r\n    }\r\n    /** @inheritDoc */\r\n    getHeight() {\r\n        return this.height;\r\n    }\r\n    /** @inheritDoc */\r\n    getWidth() {\r\n        return this.width;\r\n    }\r\n    removeCell(address) {\r\n        var _a;\r\n        (_a = this.mapping.get(address.col)) === null || _a === void 0 ? void 0 : _a.delete(address.row);\r\n    }\r\n    addRows(row, numberOfRows) {\r\n        this.mapping.forEach((rowMapping) => {\r\n            const tmpMapping = new Map();\r\n            rowMapping.forEach((vertex, rowNumber) => {\r\n                if (rowNumber >= row) {\r\n                    tmpMapping.set(rowNumber + numberOfRows, vertex);\r\n                    rowMapping.delete(rowNumber);\r\n                }\r\n            });\r\n            tmpMapping.forEach((vertex, rowNumber) => {\r\n                rowMapping.set(rowNumber, vertex);\r\n            });\r\n        });\r\n        this.height += numberOfRows;\r\n    }\r\n    addColumns(column, numberOfColumns) {\r\n        const tmpMapping = new Map();\r\n        this.mapping.forEach((rowMapping, colNumber) => {\r\n            if (colNumber >= column) {\r\n                tmpMapping.set(colNumber + numberOfColumns, rowMapping);\r\n                this.mapping.delete(colNumber);\r\n            }\r\n        });\r\n        tmpMapping.forEach((rowMapping, colNumber) => {\r\n            this.mapping.set(colNumber, rowMapping);\r\n        });\r\n        this.width += numberOfColumns;\r\n    }\r\n    removeRows(removedRows) {\r\n        this.mapping.forEach((rowMapping) => {\r\n            const tmpMapping = new Map();\r\n            rowMapping.forEach((vertex, rowNumber) => {\r\n                if (rowNumber >= removedRows.rowStart) {\r\n                    rowMapping.delete(rowNumber);\r\n                    if (rowNumber > removedRows.rowEnd) {\r\n                        tmpMapping.set(rowNumber - removedRows.numberOfRows, vertex);\r\n                    }\r\n                }\r\n            });\r\n            tmpMapping.forEach((vertex, rowNumber) => {\r\n                rowMapping.set(rowNumber, vertex);\r\n            });\r\n        });\r\n        const rightmostRowRemoved = Math.min(this.height - 1, removedRows.rowEnd);\r\n        const numberOfRowsRemoved = Math.max(0, rightmostRowRemoved - removedRows.rowStart + 1);\r\n        this.height = Math.max(0, this.height - numberOfRowsRemoved);\r\n    }\r\n    removeColumns(removedColumns) {\r\n        const tmpMapping = new Map();\r\n        this.mapping.forEach((rowMapping, colNumber) => {\r\n            if (colNumber >= removedColumns.columnStart) {\r\n                this.mapping.delete(colNumber);\r\n                if (colNumber > removedColumns.columnEnd) {\r\n                    tmpMapping.set(colNumber - removedColumns.numberOfColumns, rowMapping);\r\n                }\r\n            }\r\n        });\r\n        tmpMapping.forEach((rowMapping, colNumber) => {\r\n            this.mapping.set(colNumber, rowMapping);\r\n        });\r\n        const rightmostColumnRemoved = Math.min(this.width - 1, removedColumns.columnEnd);\r\n        const numberOfColumnsRemoved = Math.max(0, rightmostColumnRemoved - removedColumns.columnStart + 1);\r\n        this.width = Math.max(0, this.width - numberOfColumnsRemoved);\r\n    }\r\n    *getEntries(sheet) {\r\n        for (const [colNumber, col] of this.mapping) {\r\n            for (const [rowNumber, value] of col) {\r\n                yield [simpleCellAddress(sheet, colNumber, rowNumber), value];\r\n            }\r\n        }\r\n    }\r\n    *verticesFromColumn(column) {\r\n        const colMapping = this.mapping.get(column);\r\n        if (colMapping === undefined) {\r\n            return;\r\n        }\r\n        for (const [_, vertex] of colMapping) {\r\n            yield vertex;\r\n        }\r\n    }\r\n    *verticesFromRow(row) {\r\n        for (const colMapping of this.mapping.values()) {\r\n            const rowVertex = colMapping.get(row);\r\n            if (rowVertex !== undefined) {\r\n                yield rowVertex;\r\n            }\r\n        }\r\n    }\r\n    *verticesFromColumnsSpan(columnsSpan) {\r\n        for (const column of columnsSpan.columns()) {\r\n            const colMapping = this.mapping.get(column);\r\n            if (colMapping === undefined) {\r\n                continue;\r\n            }\r\n            for (const [_, vertex] of colMapping) {\r\n                yield vertex;\r\n            }\r\n        }\r\n    }\r\n    *verticesFromRowsSpan(rowsSpan) {\r\n        for (const colMapping of this.mapping.values()) {\r\n            for (const row of rowsSpan.rows()) {\r\n                const rowVertex = colMapping.get(row);\r\n                if (rowVertex !== undefined) {\r\n                    yield rowVertex;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *entriesFromRowsSpan(rowsSpan) {\r\n        for (const [col, colMapping] of this.mapping.entries()) {\r\n            for (const row of rowsSpan.rows()) {\r\n                const rowVertex = colMapping.get(row);\r\n                if (rowVertex !== undefined) {\r\n                    yield [simpleCellAddress(rowsSpan.sheet, col, row), rowVertex];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *entriesFromColumnsSpan(columnsSpan) {\r\n        for (const col of columnsSpan.columns()) {\r\n            const colMapping = this.mapping.get(col);\r\n            if (colMapping !== undefined) {\r\n                for (const [row, vertex] of colMapping.entries()) {\r\n                    yield [simpleCellAddress(columnsSpan.sheet, col, row), vertex];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *vertices() {\r\n        for (const [_, col] of this.mapping) {\r\n            for (const [_, value] of col) {\r\n                if (value !== undefined) {\r\n                    yield value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { simpleCellAddress } from '../../Cell';\r\n/**\r\n * Mapping from cell addresses to vertices\r\n *\r\n * Uses Array to store addresses, having minimal memory usage for dense sheets and constant set/lookup.\r\n */\r\nexport class DenseStrategy {\r\n    /**\r\n     * @param width - width of the stored sheet\r\n     * @param height - height of the stored sheet\r\n     */\r\n    constructor(width, height) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.mapping = new Array(height);\r\n        for (let i = 0; i < height; i++) {\r\n            this.mapping[i] = new Array(width);\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    getCell(address) {\r\n        return this.getCellVertex(address.col, address.row);\r\n    }\r\n    /** @inheritDoc */\r\n    setCell(address, newVertex) {\r\n        this.width = Math.max(this.width, address.col + 1);\r\n        this.height = Math.max(this.height, address.row + 1);\r\n        const rowMapping = this.mapping[address.row];\r\n        if (!rowMapping) {\r\n            this.mapping[address.row] = new Array(this.width);\r\n        }\r\n        this.mapping[address.row][address.col] = newVertex;\r\n    }\r\n    /** @inheritDoc */\r\n    has(address) {\r\n        const row = this.mapping[address.row];\r\n        if (!row) {\r\n            return false;\r\n        }\r\n        return !!row[address.col];\r\n    }\r\n    /** @inheritDoc */\r\n    getHeight() {\r\n        return this.height;\r\n    }\r\n    /** @inheritDoc */\r\n    getWidth() {\r\n        return this.width;\r\n    }\r\n    removeCell(address) {\r\n        if (this.mapping[address.row] !== undefined) {\r\n            delete this.mapping[address.row][address.col];\r\n        }\r\n    }\r\n    addRows(row, numberOfRows) {\r\n        const newRows = [];\r\n        for (let i = 0; i < numberOfRows; i++) {\r\n            newRows.push(new Array(this.width));\r\n        }\r\n        this.mapping.splice(row, 0, ...newRows);\r\n        this.height += numberOfRows;\r\n    }\r\n    addColumns(column, numberOfColumns) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            this.mapping[i].splice(column, 0, ...new Array(numberOfColumns));\r\n        }\r\n        this.width += numberOfColumns;\r\n    }\r\n    removeRows(removedRows) {\r\n        this.mapping.splice(removedRows.rowStart, removedRows.numberOfRows);\r\n        const rightmostRowRemoved = Math.min(this.height - 1, removedRows.rowEnd);\r\n        const numberOfRowsRemoved = Math.max(0, rightmostRowRemoved - removedRows.rowStart + 1);\r\n        this.height = Math.max(0, this.height - numberOfRowsRemoved);\r\n    }\r\n    removeColumns(removedColumns) {\r\n        for (let i = 0; i < this.height; i++) {\r\n            this.mapping[i].splice(removedColumns.columnStart, removedColumns.numberOfColumns);\r\n        }\r\n        const rightmostColumnRemoved = Math.min(this.width - 1, removedColumns.columnEnd);\r\n        const numberOfColumnsRemoved = Math.max(0, rightmostColumnRemoved - removedColumns.columnStart + 1);\r\n        this.width = Math.max(0, this.width - numberOfColumnsRemoved);\r\n    }\r\n    *getEntries(sheet) {\r\n        for (let y = 0; y < this.height; ++y) {\r\n            for (let x = 0; x < this.width; ++x) {\r\n                const vertex = this.getCellVertex(x, y);\r\n                if (vertex) {\r\n                    yield [simpleCellAddress(sheet, x, y), vertex];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *verticesFromColumn(column) {\r\n        for (let y = 0; y < this.height; ++y) {\r\n            const vertex = this.getCellVertex(column, y);\r\n            if (vertex) {\r\n                yield vertex;\r\n            }\r\n        }\r\n    }\r\n    *verticesFromRow(row) {\r\n        for (let x = 0; x < this.width; ++x) {\r\n            const vertex = this.getCellVertex(x, row);\r\n            if (vertex) {\r\n                yield vertex;\r\n            }\r\n        }\r\n    }\r\n    *verticesFromColumnsSpan(columnsSpan) {\r\n        for (let x = columnsSpan.columnStart; x <= columnsSpan.columnEnd; ++x) {\r\n            for (let y = 0; y < this.height; ++y) {\r\n                const vertex = this.getCellVertex(x, y);\r\n                if (vertex) {\r\n                    yield vertex;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *verticesFromRowsSpan(rowsSpan) {\r\n        for (let x = 0; x < this.width; ++x) {\r\n            for (let y = rowsSpan.rowStart; y <= rowsSpan.rowEnd; ++y) {\r\n                const vertex = this.getCellVertex(x, y);\r\n                if (vertex) {\r\n                    yield vertex;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *entriesFromRowsSpan(rowsSpan) {\r\n        for (let x = 0; x < this.width; ++x) {\r\n            for (let y = rowsSpan.rowStart; y <= rowsSpan.rowEnd; ++y) {\r\n                const vertex = this.getCellVertex(x, y);\r\n                if (vertex) {\r\n                    yield [simpleCellAddress(rowsSpan.sheet, x, y), vertex];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *entriesFromColumnsSpan(columnsSpan) {\r\n        for (let x = columnsSpan.columnStart; x <= columnsSpan.columnEnd; ++x) {\r\n            for (let y = 0; y < this.height; ++y) {\r\n                const vertex = this.getCellVertex(x, y);\r\n                if (vertex) {\r\n                    yield [simpleCellAddress(columnsSpan.sheet, x, y), vertex];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    *vertices() {\r\n        for (let y = 0; y < this.height; ++y) {\r\n            for (let x = 0; x < this.width; ++x) {\r\n                const vertex = this.getCellVertex(x, y);\r\n                if (vertex) {\r\n                    yield vertex;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getCellVertex(x, y) {\r\n        var _a;\r\n        return (_a = this.mapping[y]) === null || _a === void 0 ? void 0 : _a[x];\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport class InterpreterState {\r\n    constructor(formulaAddress, arraysFlag, formulaVertex) {\r\n        this.formulaAddress = formulaAddress;\r\n        this.arraysFlag = arraysFlag;\r\n        this.formulaVertex = formulaVertex;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from '../../AbsoluteCellRange';\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { AstNodeType } from '../../parser';\r\nimport { coerceRangeToScalar, coerceScalarToBoolean, coerceScalarToString, coerceToRange } from '../ArithmeticHelper';\r\nimport { getRawValue, isExtendedNumber } from '../InterpreterValue';\r\nimport { SimpleRangeValue } from '../../SimpleRangeValue';\r\nexport var FunctionArgumentType;\r\n(function (FunctionArgumentType) {\r\n    /**\r\n     * String type.\r\n     */\r\n    FunctionArgumentType[\"STRING\"] = \"STRING\";\r\n    /**\r\n     * Floating point type.\r\n     */\r\n    FunctionArgumentType[\"NUMBER\"] = \"NUMBER\";\r\n    /**\r\n     * Boolean type.\r\n     */\r\n    FunctionArgumentType[\"BOOLEAN\"] = \"BOOLEAN\";\r\n    /**\r\n     * Any non-range value.\r\n     */\r\n    FunctionArgumentType[\"SCALAR\"] = \"SCALAR\";\r\n    /**\r\n     * Any non-range, no-error type.\r\n     */\r\n    FunctionArgumentType[\"NOERROR\"] = \"NOERROR\";\r\n    /**\r\n     * Range type.\r\n     */\r\n    FunctionArgumentType[\"RANGE\"] = \"RANGE\";\r\n    /**\r\n     * Integer type.\r\n     */\r\n    FunctionArgumentType[\"INTEGER\"] = \"INTEGER\";\r\n    /**\r\n     * String representing complex number.\r\n     */\r\n    FunctionArgumentType[\"COMPLEX\"] = \"COMPLEX\";\r\n    /**\r\n     * Range or scalar.\r\n     */\r\n    FunctionArgumentType[\"ANY\"] = \"ANY\";\r\n})(FunctionArgumentType || (FunctionArgumentType = {}));\r\n/**\r\n * Abstract class representing interpreter function plugin.\r\n * Plugin may contain multiple functions. Each function should be of type {@link PluginFunctionType} and needs to be\r\n * included in {@link implementedFunctions}\r\n */\r\nexport class FunctionPlugin {\r\n    constructor(interpreter) {\r\n        this.coerceScalarToNumberOrError = (arg) => this.arithmeticHelper.coerceScalarToNumberOrError(arg);\r\n        /**\r\n         * A method that should wrap the logic of every built-in function and custom function. It:\r\n         * - Evaluates the function's arguments.\r\n         * - Validates the number of arguments against the [`parameters` array](#function-options).\r\n         * - Coerces the argument values to types set in the [`parameters` array](#argument-validation-options).\r\n         * - Handles optional arguments and default values according to options set in the [`parameters` array](#argument-validation-options).\r\n         * - Validates the function's arguments against the [argument validation options](#argument-validation-options).\r\n         * - Duplicates the arguments according to the [`repeatLastArgs` option](#function-options).\r\n         * - Handles the [array arithmetic mode](arrays.md#array-arithmetic-mode).\r\n         * - Performs [function vectorization](arrays.md#passing-arrays-to-scalar-functions-vectorization).\r\n         * - Performs [argument broadcasting](arrays.md#broadcasting).\r\n         */\r\n        this.runFunction = (args, state, metadata, functionImplementation) => {\r\n            const evaluatedArguments = this.evaluateArguments(args, state, metadata);\r\n            const argumentValues = evaluatedArguments.map(([value, _]) => value);\r\n            const argumentIgnorableFlags = evaluatedArguments.map(([_, ignorable]) => ignorable);\r\n            const argumentMetadata = this.buildMetadataForEachArgumentValue(argumentValues.length, metadata);\r\n            const isVectorizationOn = state.arraysFlag && !metadata.vectorizationForbidden;\r\n            if (!this.isNumberOfArgumentValuesValid(argumentMetadata, argumentValues.length)) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber);\r\n            }\r\n            const [resultArrayHeight, resultArrayWidth] = isVectorizationOn ? this.calculateSizeOfVectorizedResultArray(argumentValues, argumentMetadata) : [1, 1];\r\n            if (resultArrayHeight === 1 && resultArrayWidth === 1) {\r\n                const vectorizedArguments = this.vectorizeAndBroadcastArgumentsIfNecessary(isVectorizationOn, argumentValues, argumentMetadata, 0, 0);\r\n                return this.calculateSingleCellOfResultArray(state, vectorizedArguments, argumentMetadata, argumentIgnorableFlags, functionImplementation, metadata.returnNumberType);\r\n            }\r\n            const resultArray = [...Array(resultArrayHeight).keys()].map(row => [...Array(resultArrayWidth).keys()].map(col => {\r\n                const vectorizedArguments = this.vectorizeAndBroadcastArgumentsIfNecessary(isVectorizationOn, argumentValues, argumentMetadata, row, col);\r\n                const result = this.calculateSingleCellOfResultArray(state, vectorizedArguments, argumentMetadata, argumentIgnorableFlags, functionImplementation, metadata.returnNumberType);\r\n                if (result instanceof SimpleRangeValue) {\r\n                    throw new Error('Function returning array cannot be vectorized.');\r\n                }\r\n                return result;\r\n            }));\r\n            return SimpleRangeValue.onlyValues(resultArray);\r\n        };\r\n        this.runFunctionWithReferenceArgument = (args, state, metadata, noArgCallback, referenceCallback, nonReferenceCallback = () => new CellError(ErrorType.NA, ErrorMessage.CellRefExpected)) => {\r\n            if (args.length === 0) {\r\n                return this.returnNumberWrapper(noArgCallback(), metadata.returnNumberType);\r\n            }\r\n            else if (args.length > 1) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber);\r\n            }\r\n            let arg = args[0];\r\n            while (arg.type === AstNodeType.PARENTHESIS) {\r\n                arg = arg.expression;\r\n            }\r\n            let cellReference;\r\n            if (arg.type === AstNodeType.CELL_REFERENCE) {\r\n                cellReference = arg.reference.toSimpleCellAddress(state.formulaAddress);\r\n            }\r\n            else if (arg.type === AstNodeType.CELL_RANGE || arg.type === AstNodeType.COLUMN_RANGE || arg.type === AstNodeType.ROW_RANGE) {\r\n                try {\r\n                    cellReference = AbsoluteCellRange.fromAst(arg, state.formulaAddress).start;\r\n                }\r\n                catch (e) {\r\n                    return new CellError(ErrorType.REF, ErrorMessage.CellRefExpected);\r\n                }\r\n            }\r\n            if (cellReference !== undefined) {\r\n                return this.returnNumberWrapper(referenceCallback(cellReference), metadata.returnNumberType);\r\n            }\r\n            return this.runFunction(args, state, metadata, nonReferenceCallback);\r\n        };\r\n        this.interpreter = interpreter;\r\n        this.dependencyGraph = interpreter.dependencyGraph;\r\n        this.columnSearch = interpreter.columnSearch;\r\n        this.config = interpreter.config;\r\n        this.serialization = interpreter.serialization;\r\n        this.arraySizePredictor = interpreter.arraySizePredictor;\r\n        this.dateTimeHelper = interpreter.dateTimeHelper;\r\n        this.arithmeticHelper = interpreter.arithmeticHelper;\r\n    }\r\n    evaluateAst(ast, state) {\r\n        return this.interpreter.evaluateAst(ast, state);\r\n    }\r\n    arraySizeForAst(ast, state) {\r\n        return this.arraySizePredictor.checkArraySizeForAst(ast, state);\r\n    }\r\n    listOfScalarValues(asts, state) {\r\n        const ret = [];\r\n        for (const argAst of asts) {\r\n            const value = this.evaluateAst(argAst, state);\r\n            if (value instanceof SimpleRangeValue) {\r\n                for (const scalarValue of value.valuesFromTopLeftCorner()) {\r\n                    ret.push([scalarValue, true]);\r\n                }\r\n            }\r\n            else {\r\n                ret.push([value, false]);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    coerceToType(arg, coercedType, state) {\r\n        let ret;\r\n        if (arg instanceof SimpleRangeValue) {\r\n            switch (coercedType.argumentType) {\r\n                case FunctionArgumentType.RANGE:\r\n                case FunctionArgumentType.ANY:\r\n                    ret = arg;\r\n                    break;\r\n                default: {\r\n                    const coerce = coerceRangeToScalar(arg, state);\r\n                    if (coerce === undefined) {\r\n                        return undefined;\r\n                    }\r\n                    arg = coerce;\r\n                }\r\n            }\r\n        }\r\n        if (!(arg instanceof SimpleRangeValue)) {\r\n            switch (coercedType.argumentType) {\r\n                case FunctionArgumentType.INTEGER:\r\n                case FunctionArgumentType.NUMBER:\r\n                    // eslint-disable-next-line no-case-declarations\r\n                    const coerced = this.coerceScalarToNumberOrError(arg);\r\n                    if (!isExtendedNumber(coerced)) {\r\n                        ret = coerced;\r\n                        break;\r\n                    }\r\n                    // eslint-disable-next-line no-case-declarations\r\n                    const value = getRawValue(coerced);\r\n                    if (coercedType.maxValue !== undefined && value > coercedType.maxValue) {\r\n                        return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n                    }\r\n                    if (coercedType.minValue !== undefined && value < coercedType.minValue) {\r\n                        return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                    }\r\n                    if (coercedType.lessThan !== undefined && value >= coercedType.lessThan) {\r\n                        return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n                    }\r\n                    if (coercedType.greaterThan !== undefined && value <= coercedType.greaterThan) {\r\n                        return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                    }\r\n                    if (coercedType.argumentType === FunctionArgumentType.INTEGER && !Number.isInteger(value)) {\r\n                        return new CellError(ErrorType.NUM, ErrorMessage.IntegerExpected);\r\n                    }\r\n                    ret = coerced;\r\n                    break;\r\n                case FunctionArgumentType.STRING:\r\n                    ret = coerceScalarToString(arg);\r\n                    break;\r\n                case FunctionArgumentType.BOOLEAN:\r\n                    ret = coerceScalarToBoolean(arg);\r\n                    break;\r\n                case FunctionArgumentType.SCALAR:\r\n                case FunctionArgumentType.NOERROR:\r\n                case FunctionArgumentType.ANY:\r\n                    ret = arg;\r\n                    break;\r\n                case FunctionArgumentType.RANGE:\r\n                    if (arg instanceof CellError) {\r\n                        return arg;\r\n                    }\r\n                    ret = coerceToRange(arg);\r\n                    break;\r\n                case FunctionArgumentType.COMPLEX:\r\n                    return this.arithmeticHelper.coerceScalarToComplex(getRawValue(arg));\r\n            }\r\n        }\r\n        if (coercedType.passSubtype || ret === undefined) {\r\n            return ret;\r\n        }\r\n        else {\r\n            return getRawValue(ret);\r\n        }\r\n    }\r\n    calculateSingleCellOfResultArray(state, vectorizedArguments, argumentsMetadata, argumentIgnorableFlags, functionImplementation, returnNumberType) {\r\n        const coercedArguments = this.coerceArgumentsToRequiredTypes(state, vectorizedArguments, argumentsMetadata, argumentIgnorableFlags);\r\n        if (coercedArguments instanceof CellError) {\r\n            return coercedArguments;\r\n        }\r\n        const functionCalculationResult = functionImplementation(...coercedArguments);\r\n        return this.returnNumberWrapper(functionCalculationResult, returnNumberType);\r\n    }\r\n    coerceArgumentsToRequiredTypes(state, vectorizedArguments, argumentsMetadata, argumentIgnorableFlags) {\r\n        const coercedArguments = [];\r\n        for (let i = 0; i < argumentsMetadata.length; i++) {\r\n            const argumentMetadata = argumentsMetadata[i];\r\n            const argumentValue = vectorizedArguments[i] !== undefined ? vectorizedArguments[i] : argumentMetadata === null || argumentMetadata === void 0 ? void 0 : argumentMetadata.defaultValue;\r\n            if (argumentValue === undefined) {\r\n                coercedArguments.push(undefined);\r\n                continue;\r\n            }\r\n            const coercedValue = this.coerceToType(argumentValue, argumentMetadata, state);\r\n            if (coercedValue === undefined && !argumentIgnorableFlags[i]) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n            }\r\n            if (coercedValue instanceof CellError && argumentMetadata.argumentType !== FunctionArgumentType.SCALAR) {\r\n                return coercedValue;\r\n            }\r\n            coercedArguments.push(coercedValue);\r\n        }\r\n        return coercedArguments;\r\n    }\r\n    vectorizeAndBroadcastArgumentsIfNecessary(isVectorizationOn, argumentValues, argumentMetadata, row, col) {\r\n        return argumentValues.map((value, i) => isVectorizationOn && this.isRangePassedAsAScalarArgument(value, argumentMetadata[i])\r\n            ? this.vectorizeAndBroadcastRangeArgument(value, row, col)\r\n            : value);\r\n    }\r\n    vectorizeAndBroadcastRangeArgument(argumentValue, rowNum, colNum) {\r\n        var _a;\r\n        const targetRowNum = argumentValue.height() === 1 ? 0 : rowNum;\r\n        const targetColNum = argumentValue.width() === 1 ? 0 : colNum;\r\n        return (_a = argumentValue.data[targetRowNum]) === null || _a === void 0 ? void 0 : _a[targetColNum];\r\n    }\r\n    evaluateArguments(args, state, metadata) {\r\n        return metadata.expandRanges ? this.listOfScalarValues(args, state) : args.map((ast) => [this.evaluateAst(ast, state), false]);\r\n    }\r\n    buildMetadataForEachArgumentValue(numberOfArgumentValuesPassed, metadata) {\r\n        const argumentsMetadata = metadata.parameters ? [...metadata.parameters] : [];\r\n        const isRepeatLastArgsValid = metadata.repeatLastArgs !== undefined && Number.isInteger(metadata.repeatLastArgs) && metadata.repeatLastArgs > 0;\r\n        if (isRepeatLastArgsValid) {\r\n            while (numberOfArgumentValuesPassed > argumentsMetadata.length) {\r\n                argumentsMetadata.push(...argumentsMetadata.slice(argumentsMetadata.length - metadata.repeatLastArgs));\r\n            }\r\n        }\r\n        return argumentsMetadata;\r\n    }\r\n    isNumberOfArgumentValuesValid(argumentsMetadata, numberOfArgumentValuesPassed) {\r\n        if (numberOfArgumentValuesPassed > argumentsMetadata.length) {\r\n            return false;\r\n        }\r\n        if (numberOfArgumentValuesPassed < argumentsMetadata.length) {\r\n            const metadataForMissingArguments = argumentsMetadata.slice(numberOfArgumentValuesPassed);\r\n            const areMissingArgumentsOptional = metadataForMissingArguments.every(argMetadata => (argMetadata === null || argMetadata === void 0 ? void 0 : argMetadata.optionalArg) || (argMetadata === null || argMetadata === void 0 ? void 0 : argMetadata.defaultValue) !== undefined);\r\n            return areMissingArgumentsOptional;\r\n        }\r\n        return true;\r\n    }\r\n    calculateSizeOfVectorizedResultArray(argumentValues, argumentMetadata) {\r\n        const argumentsThatRequireVectorization = argumentValues\r\n            .filter((value, i) => this.isRangePassedAsAScalarArgument(value, argumentMetadata[i]));\r\n        const height = Math.max(1, ...argumentsThatRequireVectorization.map(val => val.height()));\r\n        const width = Math.max(1, ...argumentsThatRequireVectorization.map(val => val.width()));\r\n        return [height, width];\r\n    }\r\n    isRangePassedAsAScalarArgument(argumentValue, argumentMetadata) {\r\n        if (argumentValue == null || argumentMetadata == null) {\r\n            return false;\r\n        }\r\n        return argumentValue instanceof SimpleRangeValue\r\n            && ![FunctionArgumentType.RANGE, FunctionArgumentType.ANY].includes(argumentMetadata.argumentType);\r\n    }\r\n    metadata(name) {\r\n        const params = this.constructor.implementedFunctions[name];\r\n        if (params !== undefined) {\r\n            return params;\r\n        }\r\n        throw new Error(`No metadata for function ${name}.`);\r\n    }\r\n    returnNumberWrapper(val, type, format) {\r\n        if (type !== undefined && isExtendedNumber(val)) {\r\n            return this.arithmeticHelper.ExtendedNumberFactory(getRawValue(val), { type, format });\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport unorm from 'unorm';\r\nimport { CellError, CellValueTypeOrd, ErrorType, getCellValueType } from '../Cell';\r\nimport { ErrorMessage } from '../error-message';\r\nimport { collatorFromConfig } from '../StringHelper';\r\nimport { cloneNumber, CurrencyNumber, DateNumber, DateTimeNumber, EmptyValue, getRawValue, getTypeFormatOfExtendedNumber, isExtendedNumber, NumberType, PercentNumber, TimeNumber } from './InterpreterValue';\r\nimport { SimpleRangeValue } from '../SimpleRangeValue';\r\nconst COMPLEX_NUMBER_SYMBOL = 'i';\r\nconst complexParsingRegexp = /^\\s*([+-]?)\\s*(([\\d\\.,]+(e[+-]?\\d+)?)\\s*([ij]?)|([ij]))\\s*(([+-])\\s*([+-]?)\\s*(([\\d\\.,]+(e[+-]?\\d+)?)\\s*([ij]?)|([ij])))?$/;\r\nexport class ArithmeticHelper {\r\n    constructor(config, dateTimeHelper, numberLiteralsHelper) {\r\n        this.config = config;\r\n        this.dateTimeHelper = dateTimeHelper;\r\n        this.numberLiteralsHelper = numberLiteralsHelper;\r\n        this.lt = (left, right) => {\r\n            return this.compare(left, right) < 0;\r\n        };\r\n        this.leq = (left, right) => {\r\n            return this.compare(left, right) <= 0;\r\n        };\r\n        this.gt = (left, right) => {\r\n            return this.compare(left, right) > 0;\r\n        };\r\n        this.geq = (left, right) => {\r\n            return this.compare(left, right) >= 0;\r\n        };\r\n        this.eq = (left, right) => {\r\n            return this.compare(left, right) === 0;\r\n        };\r\n        this.neq = (left, right) => {\r\n            return this.compare(left, right) !== 0;\r\n        };\r\n        this.pow = (left, right) => {\r\n            return Math.pow(getRawValue(left), getRawValue(right));\r\n        };\r\n        this.addWithEpsilonRaw = (left, right) => {\r\n            const ret = left + right;\r\n            if (Math.abs(ret) < this.actualEps * Math.abs(left)) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return ret;\r\n            }\r\n        };\r\n        this.addWithEpsilon = (left, right) => {\r\n            const typeOfResult = inferExtendedNumberTypeAdditive(left, right);\r\n            return this.ExtendedNumberFactory(this.addWithEpsilonRaw(getRawValue(left), getRawValue(right)), typeOfResult);\r\n        };\r\n        this.unaryMinus = (arg) => {\r\n            return cloneNumber(arg, -getRawValue(arg));\r\n        };\r\n        this.unaryPlus = (arg) => arg;\r\n        this.unaryPercent = (arg) => {\r\n            return new PercentNumber(getRawValue(arg) / 100);\r\n        };\r\n        this.concat = (left, right) => {\r\n            return left.concat(right);\r\n        };\r\n        this.nonstrictadd = (left, right) => {\r\n            if (left instanceof CellError) {\r\n                return left;\r\n            }\r\n            else if (right instanceof CellError) {\r\n                return right;\r\n            }\r\n            else if (typeof left === 'number') {\r\n                if (typeof right === 'number') {\r\n                    return this.addWithEpsilonRaw(left, right);\r\n                }\r\n                else {\r\n                    return left;\r\n                }\r\n            }\r\n            else if (typeof right === 'number') {\r\n                return right;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        };\r\n        /**\r\n         * Subtracts two numbers\r\n         *\r\n         * Implementation of subtracting which is used in interpreter.\r\n         *\r\n         * @param left - left operand of subtraction\r\n         * @param right - right operand of subtraction\r\n         * @param eps - precision of comparison\r\n         */\r\n        this.subtract = (leftArg, rightArg) => {\r\n            const typeOfResult = inferExtendedNumberTypeAdditive(leftArg, rightArg);\r\n            const left = getRawValue(leftArg);\r\n            const right = getRawValue(rightArg);\r\n            let ret = left - right;\r\n            if (Math.abs(ret) < this.actualEps * Math.abs(left)) {\r\n                ret = 0;\r\n            }\r\n            return this.ExtendedNumberFactory(ret, typeOfResult);\r\n        };\r\n        this.divide = (leftArg, rightArg) => {\r\n            const left = getRawValue(leftArg);\r\n            const right = getRawValue(rightArg);\r\n            if (right === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            else {\r\n                const typeOfResult = inferExtendedNumberTypeMultiplicative(leftArg, rightArg);\r\n                return this.ExtendedNumberFactory(left / right, typeOfResult);\r\n            }\r\n        };\r\n        this.multiply = (left, right) => {\r\n            const typeOfResult = inferExtendedNumberTypeMultiplicative(left, right);\r\n            return this.ExtendedNumberFactory(getRawValue(left) * getRawValue(right), typeOfResult);\r\n        };\r\n        this.manyToExactComplex = (args) => {\r\n            const ret = [];\r\n            for (const arg of args) {\r\n                if (arg instanceof CellError) {\r\n                    return arg;\r\n                }\r\n                else if (isExtendedNumber(arg) || typeof arg === 'string') {\r\n                    const coerced = this.coerceScalarToComplex(arg);\r\n                    if (!(coerced instanceof CellError)) {\r\n                        ret.push(coerced);\r\n                    }\r\n                }\r\n            }\r\n            return ret;\r\n        };\r\n        this.coerceNumbersExactRanges = (args) => this.manyToNumbers(args, this.manyToExactNumbers);\r\n        this.coerceNumbersCoerceRangesDropNulls = (args) => this.manyToNumbers(args, this.manyToCoercedNumbersDropNulls);\r\n        this.manyToExactNumbers = (args) => {\r\n            const ret = [];\r\n            for (const arg of args) {\r\n                if (arg instanceof CellError) {\r\n                    return arg;\r\n                }\r\n                else if (isExtendedNumber(arg)) {\r\n                    ret.push(getRawValue(arg));\r\n                }\r\n            }\r\n            return ret;\r\n        };\r\n        this.manyToOnlyNumbersDropNulls = (args) => {\r\n            const ret = [];\r\n            for (const arg of args) {\r\n                if (arg instanceof CellError) {\r\n                    return arg;\r\n                }\r\n                else if (isExtendedNumber(arg)) {\r\n                    ret.push(getRawValue(arg));\r\n                }\r\n                else if (arg !== EmptyValue) {\r\n                    return new CellError(ErrorType.VALUE, ErrorMessage.NumberExpected);\r\n                }\r\n            }\r\n            return ret;\r\n        };\r\n        this.manyToCoercedNumbersDropNulls = (args) => {\r\n            const ret = [];\r\n            for (const arg of args) {\r\n                if (arg instanceof CellError) {\r\n                    return arg;\r\n                }\r\n                if (arg === EmptyValue) {\r\n                    continue;\r\n                }\r\n                const coerced = this.coerceScalarToNumberOrError(arg);\r\n                if (isExtendedNumber(coerced)) {\r\n                    ret.push(getRawValue(coerced));\r\n                }\r\n            }\r\n            return ret;\r\n        };\r\n        this.collator = collatorFromConfig(config);\r\n        this.actualEps = config.smartRounding ? config.precisionEpsilon : 0;\r\n    }\r\n    eqMatcherFunction(pattern) {\r\n        const regexp = this.buildRegex(pattern);\r\n        return (cellValue) => (typeof cellValue === 'string' && regexp.test(this.normalizeString(cellValue)));\r\n    }\r\n    neqMatcherFunction(pattern) {\r\n        const regexp = this.buildRegex(pattern);\r\n        return (cellValue) => {\r\n            return (!(typeof cellValue === 'string') || !regexp.test(this.normalizeString(cellValue)));\r\n        };\r\n    }\r\n    searchString(pattern, text) {\r\n        var _a;\r\n        const regexp = this.buildRegex(pattern, false);\r\n        const result = regexp.exec(text);\r\n        return (_a = result === null || result === void 0 ? void 0 : result.index) !== null && _a !== void 0 ? _a : -1;\r\n    }\r\n    requiresRegex(pattern) {\r\n        if (!this.config.useRegularExpressions && !this.config.useWildcards) {\r\n            return !this.config.matchWholeCell;\r\n        }\r\n        for (let i = 0; i < pattern.length; i++) {\r\n            const c = pattern.charAt(i);\r\n            if (isWildcard(c) || (this.config.useRegularExpressions && needsEscape(c))) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    floatCmp(leftArg, rightArg) {\r\n        const left = getRawValue(leftArg);\r\n        const right = getRawValue(rightArg);\r\n        const mod = (1 + this.actualEps);\r\n        if ((right >= 0) && (left * mod >= right) && (left <= right * mod)) {\r\n            return 0;\r\n        }\r\n        else if ((right <= 0) && (left * mod <= right) && (left >= right * mod)) {\r\n            return 0;\r\n        }\r\n        else if (left > right) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return -1;\r\n        }\r\n    }\r\n    coerceScalarToNumberOrError(arg) {\r\n        var _a;\r\n        if (arg instanceof CellError) {\r\n            return arg;\r\n        }\r\n        return (_a = this.coerceToMaybeNumber(arg)) !== null && _a !== void 0 ? _a : new CellError(ErrorType.VALUE, ErrorMessage.NumberCoercion);\r\n    }\r\n    coerceToMaybeNumber(arg) {\r\n        var _a;\r\n        return (_a = this.coerceNonDateScalarToMaybeNumber(arg)) !== null && _a !== void 0 ? _a : (typeof arg === 'string' ? this.dateTimeHelper.dateStringToDateNumber(arg) : undefined);\r\n    }\r\n    coerceNonDateScalarToMaybeNumber(arg) {\r\n        if (arg === EmptyValue) {\r\n            return 0;\r\n        }\r\n        else if (typeof arg === 'string') {\r\n            if (arg === '') {\r\n                return 0;\r\n            }\r\n            const maybePercentNumber = this.coerceStringToMaybePercentNumber(arg);\r\n            if (maybePercentNumber !== undefined) {\r\n                return maybePercentNumber;\r\n            }\r\n            const maybeCurrencyNumber = this.coerceStringToMaybeCurrencyNumber(arg);\r\n            if (maybeCurrencyNumber !== undefined) {\r\n                return maybeCurrencyNumber;\r\n            }\r\n            return this.numberLiteralsHelper.numericStringToMaybeNumber(arg.trim());\r\n        }\r\n        else if (isExtendedNumber(arg)) {\r\n            return arg;\r\n        }\r\n        else if (typeof arg === 'boolean') {\r\n            return Number(arg);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    coerceStringToMaybePercentNumber(input) {\r\n        const trimmedInput = input.trim();\r\n        if (trimmedInput.endsWith('%')) {\r\n            const numOfPercents = trimmedInput.slice(0, trimmedInput.length - 1).trim();\r\n            const parsedNumOfPercents = this.numberLiteralsHelper.numericStringToMaybeNumber(numOfPercents);\r\n            if (parsedNumOfPercents !== undefined) {\r\n                return new PercentNumber(parsedNumOfPercents / 100);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    coerceStringToMaybeCurrencyNumber(input) {\r\n        const matchedCurrency = this.currencyMatcher(input.trim());\r\n        if (matchedCurrency !== undefined) {\r\n            const [currencySymbol, currencyValue] = matchedCurrency;\r\n            const parsedCurrencyValue = this.numberLiteralsHelper.numericStringToMaybeNumber(currencyValue);\r\n            if (parsedCurrencyValue !== undefined) {\r\n                return new CurrencyNumber(parsedCurrencyValue, currencySymbol);\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    currencyMatcher(token) {\r\n        for (const currency of this.config.currencySymbol) {\r\n            if (token.startsWith(currency)) {\r\n                return [currency, token.slice(currency.length).trim()];\r\n            }\r\n            if (token.endsWith(currency)) {\r\n                return [currency, token.slice(0, token.length - currency.length).trim()];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    coerceComplexExactRanges(args) {\r\n        const vals = [];\r\n        for (const arg of args) {\r\n            if (arg instanceof SimpleRangeValue) {\r\n                vals.push(arg);\r\n            }\r\n            else if (arg !== EmptyValue) {\r\n                const coerced = this.coerceScalarToComplex(arg);\r\n                if (coerced instanceof CellError) {\r\n                    return coerced;\r\n                }\r\n                else {\r\n                    vals.push(coerced);\r\n                }\r\n            }\r\n        }\r\n        const expandedVals = [];\r\n        for (const val of vals) {\r\n            if (val instanceof SimpleRangeValue) {\r\n                const arr = this.manyToExactComplex(val.valuesFromTopLeftCorner());\r\n                if (arr instanceof CellError) {\r\n                    return arr;\r\n                }\r\n                else {\r\n                    expandedVals.push(...arr);\r\n                }\r\n            }\r\n            else {\r\n                expandedVals.push(val);\r\n            }\r\n        }\r\n        return expandedVals;\r\n    }\r\n    coerceScalarToComplex(arg) {\r\n        if (arg instanceof CellError) {\r\n            return arg;\r\n        }\r\n        else if (arg === EmptyValue) {\r\n            return [0, 0];\r\n        }\r\n        else if (isExtendedNumber(arg)) {\r\n            return [getRawValue(arg), 0];\r\n        }\r\n        else if (typeof arg === 'string') {\r\n            return this.coerceStringToComplex(arg);\r\n        }\r\n        else {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.ComplexNumberExpected);\r\n        }\r\n    }\r\n    ExtendedNumberFactory(value, typeFormat) {\r\n        const { type, format } = typeFormat;\r\n        switch (type) {\r\n            case NumberType.NUMBER_RAW:\r\n                return value;\r\n            case NumberType.NUMBER_CURRENCY: {\r\n                return new CurrencyNumber(value, format !== null && format !== void 0 ? format : this.config.currencySymbol[0]);\r\n            }\r\n            case NumberType.NUMBER_DATE:\r\n                return new DateNumber(value, format);\r\n            case NumberType.NUMBER_DATETIME:\r\n                return new DateTimeNumber(value, format);\r\n            case NumberType.NUMBER_TIME:\r\n                return new TimeNumber(value, format);\r\n            case NumberType.NUMBER_PERCENT:\r\n                return new PercentNumber(value, format);\r\n        }\r\n    }\r\n    buildRegex(pattern, matchWholeCell = true) {\r\n        pattern = this.normalizeString(pattern);\r\n        let regexpStr;\r\n        let useWildcards = this.config.useWildcards;\r\n        let useRegularExpressions = this.config.useRegularExpressions;\r\n        if (useRegularExpressions) {\r\n            try {\r\n                RegExp(pattern);\r\n            }\r\n            catch (e) {\r\n                useRegularExpressions = false;\r\n                useWildcards = false;\r\n            }\r\n        }\r\n        if (useRegularExpressions) {\r\n            regexpStr = escapeNoCharacters(pattern, this.config.caseSensitive);\r\n        }\r\n        else if (useWildcards) {\r\n            regexpStr = escapeNonWildcards(pattern, this.config.caseSensitive);\r\n        }\r\n        else {\r\n            regexpStr = escapeAllCharacters(pattern, this.config.caseSensitive);\r\n        }\r\n        if (this.config.matchWholeCell && matchWholeCell) {\r\n            return RegExp('^(' + regexpStr + ')$');\r\n        }\r\n        else {\r\n            return RegExp(regexpStr);\r\n        }\r\n    }\r\n    normalizeString(str) {\r\n        if (!this.config.caseSensitive) {\r\n            str = str.toLowerCase();\r\n        }\r\n        if (!this.config.accentSensitive) {\r\n            str = normalizeString(str, 'nfd').replace(/[\\u0300-\\u036f]/g, '');\r\n        }\r\n        return str;\r\n    }\r\n    compare(left, right) {\r\n        if (typeof left === 'string' || typeof right === 'string') {\r\n            const leftTmp = typeof left === 'string' ? this.dateTimeHelper.dateStringToDateNumber(left) : left;\r\n            const rightTmp = typeof right === 'string' ? this.dateTimeHelper.dateStringToDateNumber(right) : right;\r\n            if (isExtendedNumber(leftTmp) && isExtendedNumber(rightTmp)) {\r\n                return this.floatCmp(leftTmp, rightTmp);\r\n            }\r\n        }\r\n        if (left === EmptyValue) {\r\n            left = coerceEmptyToValue(right);\r\n        }\r\n        else if (right === EmptyValue) {\r\n            right = coerceEmptyToValue(left);\r\n        }\r\n        if (typeof left === 'string' && typeof right === 'string') {\r\n            return this.stringCmp(left, right);\r\n        }\r\n        else if (typeof left === 'boolean' && typeof right === 'boolean') {\r\n            return numberCmp(coerceBooleanToNumber(left), coerceBooleanToNumber(right));\r\n        }\r\n        else if (isExtendedNumber(left) && isExtendedNumber(right)) {\r\n            return this.floatCmp(left, right);\r\n        }\r\n        else if (left === EmptyValue && right === EmptyValue) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return numberCmp(CellValueTypeOrd(getCellValueType(left)), CellValueTypeOrd(getCellValueType(right)));\r\n        }\r\n    }\r\n    stringCmp(left, right) {\r\n        return this.collator.compare(left, right);\r\n    }\r\n    manyToNumbers(args, rangeFn) {\r\n        const vals = [];\r\n        for (const arg of args) {\r\n            if (arg instanceof SimpleRangeValue) {\r\n                vals.push(arg);\r\n            }\r\n            else {\r\n                const coerced = getRawValue(this.coerceScalarToNumberOrError(arg));\r\n                if (coerced instanceof CellError) {\r\n                    return coerced;\r\n                }\r\n                else {\r\n                    vals.push(coerced);\r\n                }\r\n            }\r\n        }\r\n        const expandedVals = [];\r\n        for (const val of vals) {\r\n            if (val instanceof SimpleRangeValue) {\r\n                const arr = rangeFn(val.valuesFromTopLeftCorner());\r\n                if (arr instanceof CellError) {\r\n                    return arr;\r\n                }\r\n                else {\r\n                    expandedVals.push(...arr);\r\n                }\r\n            }\r\n            else {\r\n                expandedVals.push(val);\r\n            }\r\n        }\r\n        return expandedVals;\r\n    }\r\n    coerceStringToComplex(arg) {\r\n        const match = complexParsingRegexp.exec(arg);\r\n        if (match === null) {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.ComplexNumberExpected);\r\n        }\r\n        let val1;\r\n        if (match[6] !== undefined) {\r\n            val1 = (match[1] === '-' ? [0, -1] : [0, 1]);\r\n        }\r\n        else {\r\n            val1 = this.parseComplexToken(match[1] + match[3], match[5]);\r\n        }\r\n        if (val1 instanceof CellError) {\r\n            return val1;\r\n        }\r\n        if (match[8] === undefined) {\r\n            return val1;\r\n        }\r\n        let val2;\r\n        if (match[14] !== undefined) {\r\n            val2 = (match[9] === '-' ? [0, -1] : [0, 1]);\r\n        }\r\n        else {\r\n            val2 = this.parseComplexToken(match[9] + match[11], match[13]);\r\n        }\r\n        if (val2 instanceof CellError) {\r\n            return val2;\r\n        }\r\n        if ((match[5] !== '') || (match[13] === '')) {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.ComplexNumberExpected);\r\n        }\r\n        if (match[8] === '+') {\r\n            return [val1[0] + val2[0], val1[1] + val2[1]];\r\n        }\r\n        else {\r\n            return [val1[0] - val2[0], val1[1] - val2[1]];\r\n        }\r\n    }\r\n    parseComplexToken(arg, mod) {\r\n        const val = getRawValue(this.coerceNonDateScalarToMaybeNumber(arg));\r\n        if (val === undefined) {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.ComplexNumberExpected);\r\n        }\r\n        if (mod === '') {\r\n            return [val, 0];\r\n        }\r\n        else {\r\n            return [0, val];\r\n        }\r\n    }\r\n}\r\nexport function coerceComplexToString([re, im], symb) {\r\n    if (!isFinite(re) || !isFinite(im)) {\r\n        return new CellError(ErrorType.NUM, ErrorMessage.NaN);\r\n    }\r\n    symb = symb !== null && symb !== void 0 ? symb : COMPLEX_NUMBER_SYMBOL;\r\n    if (im === 0) {\r\n        return `${re}`;\r\n    }\r\n    const imStr = `${im === -1 || im === 1 ? '' : Math.abs(im)}${symb}`;\r\n    if (re === 0) {\r\n        return `${im < 0 ? '-' : ''}${imStr}`;\r\n    }\r\n    return `${re}${im < 0 ? '-' : '+'}${imStr}`;\r\n}\r\nexport function coerceToRange(arg) {\r\n    if (arg instanceof SimpleRangeValue) {\r\n        return arg;\r\n    }\r\n    else {\r\n        return SimpleRangeValue.fromScalar(arg);\r\n    }\r\n}\r\nexport function coerceToRangeNumbersOrError(arg) {\r\n    if ((arg instanceof SimpleRangeValue && arg.hasOnlyNumbers()) || arg instanceof CellError) {\r\n        return arg;\r\n    }\r\n    else if (isExtendedNumber(arg)) {\r\n        return SimpleRangeValue.fromScalar(arg);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\nexport function coerceBooleanToNumber(arg) {\r\n    return Number(arg);\r\n}\r\nexport function coerceEmptyToValue(arg) {\r\n    if (typeof arg === 'string') {\r\n        return '';\r\n    }\r\n    else if (isExtendedNumber(arg)) {\r\n        return 0;\r\n    }\r\n    else if (typeof arg === 'boolean') {\r\n        return false;\r\n    }\r\n    else {\r\n        return EmptyValue;\r\n    }\r\n}\r\n/**\r\n * Coerce scalar value to boolean if possible, or error if value is an error\r\n *\r\n * @param arg\r\n */\r\nexport function coerceScalarToBoolean(arg) {\r\n    if (arg instanceof CellError || typeof arg === 'boolean') {\r\n        return arg;\r\n    }\r\n    else if (arg === EmptyValue) {\r\n        return false;\r\n    }\r\n    else if (isExtendedNumber(arg)) {\r\n        return getRawValue(arg) !== 0;\r\n    }\r\n    else {\r\n        const argUppered = arg.toUpperCase();\r\n        if (argUppered === 'TRUE') {\r\n            return true;\r\n        }\r\n        else if (argUppered === 'FALSE') {\r\n            return false;\r\n        }\r\n        else if (argUppered === '') {\r\n            return false;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nexport function coerceScalarToString(arg) {\r\n    if (arg instanceof CellError || typeof arg === 'string') {\r\n        return arg;\r\n    }\r\n    else if (arg === EmptyValue) {\r\n        return '';\r\n    }\r\n    else if (isExtendedNumber(arg)) {\r\n        return getRawValue(arg).toString();\r\n    }\r\n    else {\r\n        return arg ? 'TRUE' : 'FALSE';\r\n    }\r\n}\r\nexport function zeroIfEmpty(arg) {\r\n    return arg === EmptyValue ? 0 : arg;\r\n}\r\nexport function numberCmp(leftArg, rightArg) {\r\n    const left = getRawValue(leftArg);\r\n    const right = getRawValue(rightArg);\r\n    if (left > right) {\r\n        return 1;\r\n    }\r\n    else if (left < right) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\nexport function isNumberOverflow(arg) {\r\n    return (isNaN(arg) || arg === Infinity || arg === -Infinity);\r\n}\r\nexport function fixNegativeZero(arg) {\r\n    if (arg === 0) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return arg;\r\n    }\r\n}\r\nfunction isWildcard(c) {\r\n    return ['*', '?'].includes(c);\r\n}\r\nconst escapedCharacters = ['{', '}', '[', ']', '(', ')', '<', '>', '=', '.', '+', '-', ',', '\\\\', '$', '^', '!'];\r\nfunction needsEscape(c) {\r\n    return escapedCharacters.includes(c);\r\n}\r\nfunction escapeNonWildcards(pattern, caseSensitive) {\r\n    let str = '';\r\n    for (let i = 0; i < pattern.length; i++) {\r\n        const c = pattern.charAt(i);\r\n        if (c === '~') {\r\n            if (i == pattern.length - 1) {\r\n                str += '~';\r\n                continue;\r\n            }\r\n            const d = pattern.charAt(i + 1);\r\n            if (isWildcard(d) || needsEscape(d)) {\r\n                str += '\\\\' + d;\r\n                i++;\r\n            }\r\n            else {\r\n                str += d;\r\n                i++;\r\n            }\r\n        }\r\n        else if (isWildcard(c)) {\r\n            str += '.' + c;\r\n        }\r\n        else if (needsEscape(c)) {\r\n            str += '\\\\' + c;\r\n        }\r\n        else if (caseSensitive) {\r\n            str += c;\r\n        }\r\n        else {\r\n            str += c.toLowerCase();\r\n        }\r\n    }\r\n    return str;\r\n}\r\nfunction escapeAllCharacters(pattern, caseSensitive) {\r\n    let str = '';\r\n    for (let i = 0; i < pattern.length; i++) {\r\n        const c = pattern.charAt(i);\r\n        if (isWildcard(c) || needsEscape(c)) {\r\n            str += '\\\\' + c;\r\n        }\r\n        else if (caseSensitive) {\r\n            str += c;\r\n        }\r\n        else {\r\n            str += c.toLowerCase();\r\n        }\r\n    }\r\n    return str;\r\n}\r\nfunction escapeNoCharacters(pattern, caseSensitive) {\r\n    let str = '';\r\n    for (let i = 0; i < pattern.length; i++) {\r\n        const c = pattern.charAt(i);\r\n        if (isWildcard(c) || needsEscape(c)) {\r\n            str += c;\r\n        }\r\n        else if (caseSensitive) {\r\n            str += c;\r\n        }\r\n        else {\r\n            str += c.toLowerCase();\r\n        }\r\n    }\r\n    return str;\r\n}\r\nfunction inferExtendedNumberTypeAdditive(leftArg, rightArg) {\r\n    const { type: leftType, format: leftFormat } = getTypeFormatOfExtendedNumber(leftArg);\r\n    const { type: rightType, format: rightFormat } = getTypeFormatOfExtendedNumber(rightArg);\r\n    if (leftType === NumberType.NUMBER_RAW) {\r\n        return { type: rightType, format: rightFormat };\r\n    }\r\n    if (rightType === NumberType.NUMBER_RAW) {\r\n        return { type: leftType, format: leftFormat };\r\n    }\r\n    if ((leftType === NumberType.NUMBER_DATETIME || leftType === NumberType.NUMBER_DATE)\r\n        && (rightType === NumberType.NUMBER_DATETIME || rightType === NumberType.NUMBER_DATE)) {\r\n        return { type: NumberType.NUMBER_RAW };\r\n    }\r\n    if (leftType === NumberType.NUMBER_TIME) {\r\n        if (rightType === NumberType.NUMBER_DATE) {\r\n            return { type: NumberType.NUMBER_DATETIME, format: rightFormat + ' ' + leftFormat };\r\n        }\r\n        if (rightType === NumberType.NUMBER_DATETIME) {\r\n            return { type: NumberType.NUMBER_DATETIME, format: rightFormat };\r\n        }\r\n    }\r\n    if (rightType === NumberType.NUMBER_TIME) {\r\n        if (leftType === NumberType.NUMBER_DATE) {\r\n            return { type: NumberType.NUMBER_DATETIME, format: leftFormat + ' ' + rightFormat };\r\n        }\r\n        if (leftType === NumberType.NUMBER_DATETIME) {\r\n            return { type: NumberType.NUMBER_DATETIME, format: leftFormat };\r\n        }\r\n    }\r\n    return { type: leftType, format: leftFormat };\r\n}\r\nfunction inferExtendedNumberTypeMultiplicative(leftArg, rightArg) {\r\n    let { type: leftType, format: leftFormat } = getTypeFormatOfExtendedNumber(leftArg);\r\n    let { type: rightType, format: rightFormat } = getTypeFormatOfExtendedNumber(rightArg);\r\n    if (leftType === NumberType.NUMBER_PERCENT) {\r\n        leftType = NumberType.NUMBER_RAW;\r\n        leftFormat = undefined;\r\n    }\r\n    if (rightType === NumberType.NUMBER_PERCENT) {\r\n        rightType = NumberType.NUMBER_RAW;\r\n        rightFormat = undefined;\r\n    }\r\n    if (leftType === NumberType.NUMBER_RAW) {\r\n        return { type: rightType, format: rightFormat };\r\n    }\r\n    if (rightType === NumberType.NUMBER_RAW) {\r\n        return { type: leftType, format: leftFormat };\r\n    }\r\n    return { type: NumberType.NUMBER_RAW };\r\n}\r\nexport function forceNormalizeString(str) {\r\n    return normalizeString(str.toLowerCase(), 'nfd').replace(/[\\u0300-\\u036f]/g, '');\r\n}\r\nexport function coerceRangeToScalar(arg, state) {\r\n    var _a;\r\n    if (arg.isAdHoc()) {\r\n        return (_a = arg.data[0]) === null || _a === void 0 ? void 0 : _a[0];\r\n    }\r\n    const range = arg.range;\r\n    if (state.formulaAddress.sheet === range.sheet) {\r\n        if (range.width() === 1) {\r\n            const offset = state.formulaAddress.row - range.start.row;\r\n            if (offset >= 0 && offset < range.height()) {\r\n                return arg.data[offset][0];\r\n            }\r\n        }\r\n        else if (range.height() === 1) {\r\n            const offset = state.formulaAddress.col - range.start.col;\r\n            if (offset >= 0 && offset < range.width()) {\r\n                return arg.data[0][offset];\r\n            }\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexport function normalizeString(str, form) {\r\n    return typeof str.normalize === 'function'\r\n        ? str.normalize(form.toUpperCase()) : unorm[form](str);\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__125__;","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport function collatorFromConfig(config) {\r\n    const sensitivity = config.caseSensitive ? (config.accentSensitive ? 'variant' : 'case') : (config.accentSensitive ? 'accent' : 'base');\r\n    const caseFirst = config.caseFirst;\r\n    const ignorePunctuation = config.ignorePunctuation;\r\n    return new Intl.Collator(config.localeLang, { sensitivity, caseFirst, ignorePunctuation });\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport class DetailedCellError {\r\n    constructor(error, value, address) {\r\n        var _a;\r\n        this.value = value;\r\n        this.address = address;\r\n        this.type = error.type;\r\n        this.message = (_a = error.message) !== null && _a !== void 0 ? _a : '';\r\n    }\r\n    toString() {\r\n        return this.value;\r\n    }\r\n    valueOf() {\r\n        return this.value;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { configCheckIfParametersNotInConflict, configValueFromParam, configValueFromParamCheck, validateNumberToBeAtLeast, validateNumberToBeAtMost } from './ArgumentSanitization';\r\nimport { defaultParseToDateTime } from './DateTimeDefault';\r\nimport { instanceOfSimpleDate } from './DateTimeHelper';\r\nimport { AlwaysDense } from './DependencyGraph/AddressMapping/ChooseAddressMappingPolicy';\r\nimport { ConfigValueEmpty, ExpectedValueOfTypeError } from './errors';\r\nimport { defaultStringifyDateTime, defaultStringifyDuration } from './format/format';\r\nimport { checkLicenseKeyValidity } from './helpers/licenseKeyValidator';\r\nimport { HyperFormula } from './HyperFormula';\r\nconst privatePool = new WeakMap();\r\nexport class Config {\r\n    constructor(options = {}, showDeprecatedWarns = true) {\r\n        const { accentSensitive, binarySearchThreshold, caseSensitive, caseFirst, chooseAddressMappingPolicy, currencySymbol, dateFormats, decimalSeparator, evaluateNullToZero, functionArgSeparator, functionPlugins, ignorePunctuation, leapYear1900, localeLang, language, ignoreWhiteSpace, licenseKey, matchWholeCell, arrayColumnSeparator, arrayRowSeparator, maxRows, maxColumns, nullYear, nullDate, parseDateTime, precisionEpsilon, precisionRounding, stringifyDateTime, stringifyDuration, smartRounding, timeFormats, thousandSeparator, useArrayArithmetic, useStats, undoLimit, useColumnIndex, useRegularExpressions, useWildcards, } = options;\r\n        if (showDeprecatedWarns) {\r\n            Config.warnDeprecatedOptions(options);\r\n        }\r\n        this.useArrayArithmetic = configValueFromParam(useArrayArithmetic, 'boolean', 'useArrayArithmetic');\r\n        this.accentSensitive = configValueFromParam(accentSensitive, 'boolean', 'accentSensitive');\r\n        this.caseSensitive = configValueFromParam(caseSensitive, 'boolean', 'caseSensitive');\r\n        this.caseFirst = configValueFromParam(caseFirst, ['upper', 'lower', 'false'], 'caseFirst');\r\n        this.ignorePunctuation = configValueFromParam(ignorePunctuation, 'boolean', 'ignorePunctuation');\r\n        this.chooseAddressMappingPolicy = chooseAddressMappingPolicy !== null && chooseAddressMappingPolicy !== void 0 ? chooseAddressMappingPolicy : Config.defaultConfig.chooseAddressMappingPolicy;\r\n        this.dateFormats = [...configValueFromParamCheck(dateFormats, Array.isArray, 'array', 'dateFormats')];\r\n        this.timeFormats = [...configValueFromParamCheck(timeFormats, Array.isArray, 'array', 'timeFormats')];\r\n        this.functionArgSeparator = configValueFromParam(functionArgSeparator, 'string', 'functionArgSeparator');\r\n        this.decimalSeparator = configValueFromParam(decimalSeparator, ['.', ','], 'decimalSeparator');\r\n        this.language = configValueFromParam(language, 'string', 'language');\r\n        this.ignoreWhiteSpace = configValueFromParam(ignoreWhiteSpace, ['standard', 'any'], 'ignoreWhiteSpace');\r\n        this.licenseKey = configValueFromParam(licenseKey, 'string', 'licenseKey');\r\n        this.thousandSeparator = configValueFromParam(thousandSeparator, ['', ',', ' ', '.'], 'thousandSeparator');\r\n        this.arrayColumnSeparator = configValueFromParam(arrayColumnSeparator, [',', ';'], 'arrayColumnSeparator');\r\n        this.arrayRowSeparator = configValueFromParam(arrayRowSeparator, [';', '|'], 'arrayRowSeparator');\r\n        this.localeLang = configValueFromParam(localeLang, 'string', 'localeLang');\r\n        this.functionPlugins = [...(functionPlugins !== null && functionPlugins !== void 0 ? functionPlugins : Config.defaultConfig.functionPlugins)];\r\n        this.smartRounding = configValueFromParam(smartRounding, 'boolean', 'smartRounding');\r\n        this.evaluateNullToZero = configValueFromParam(evaluateNullToZero, 'boolean', 'evaluateNullToZero');\r\n        this.nullYear = configValueFromParam(nullYear, 'number', 'nullYear');\r\n        validateNumberToBeAtLeast(this.nullYear, 'nullYear', 0);\r\n        validateNumberToBeAtMost(this.nullYear, 'nullYear', 100);\r\n        this.precisionRounding = configValueFromParam(precisionRounding, 'number', 'precisionRounding');\r\n        validateNumberToBeAtLeast(this.precisionRounding, 'precisionRounding', 0);\r\n        this.precisionEpsilon = configValueFromParam(precisionEpsilon, 'number', 'precisionEpsilon');\r\n        validateNumberToBeAtLeast(this.precisionEpsilon, 'precisionEpsilon', 0);\r\n        this.useColumnIndex = configValueFromParam(useColumnIndex, 'boolean', 'useColumnIndex');\r\n        this.useStats = configValueFromParam(useStats, 'boolean', 'useStats');\r\n        this.binarySearchThreshold = binarySearchThreshold !== null && binarySearchThreshold !== void 0 ? binarySearchThreshold : Config.defaultConfig.binarySearchThreshold;\r\n        this.parseDateTime = configValueFromParam(parseDateTime, 'function', 'parseDateTime');\r\n        this.stringifyDateTime = configValueFromParam(stringifyDateTime, 'function', 'stringifyDateTime');\r\n        this.stringifyDuration = configValueFromParam(stringifyDuration, 'function', 'stringifyDuration');\r\n        this.translationPackage = HyperFormula.getLanguage(this.language);\r\n        this.errorMapping = this.translationPackage.buildErrorMapping();\r\n        this.nullDate = configValueFromParamCheck(nullDate, instanceOfSimpleDate, 'IDate', 'nullDate');\r\n        this.leapYear1900 = configValueFromParam(leapYear1900, 'boolean', 'leapYear1900');\r\n        this.undoLimit = configValueFromParam(undoLimit, 'number', 'undoLimit');\r\n        this.useRegularExpressions = configValueFromParam(useRegularExpressions, 'boolean', 'useRegularExpressions');\r\n        this.useWildcards = configValueFromParam(useWildcards, 'boolean', 'useWildcards');\r\n        this.matchWholeCell = configValueFromParam(matchWholeCell, 'boolean', 'matchWholeCell');\r\n        validateNumberToBeAtLeast(this.undoLimit, 'undoLimit', 0);\r\n        this.maxRows = configValueFromParam(maxRows, 'number', 'maxRows');\r\n        validateNumberToBeAtLeast(this.maxRows, 'maxRows', 1);\r\n        this.maxColumns = configValueFromParam(maxColumns, 'number', 'maxColumns');\r\n        this.currencySymbol = this.setupCurrencySymbol(currencySymbol);\r\n        validateNumberToBeAtLeast(this.maxColumns, 'maxColumns', 1);\r\n        privatePool.set(this, {\r\n            licenseKeyValidityState: checkLicenseKeyValidity(this.licenseKey)\r\n        });\r\n        configCheckIfParametersNotInConflict({ value: this.decimalSeparator, name: 'decimalSeparator' }, { value: this.functionArgSeparator, name: 'functionArgSeparator' }, { value: this.thousandSeparator, name: 'thousandSeparator' });\r\n        configCheckIfParametersNotInConflict({ value: this.arrayRowSeparator, name: 'arrayRowSeparator' }, { value: this.arrayColumnSeparator, name: 'arrayColumnSeparator' });\r\n    }\r\n    setupCurrencySymbol(currencySymbol) {\r\n        const valueAfterCheck = [...configValueFromParamCheck(currencySymbol, Array.isArray, 'array', 'currencySymbol')];\r\n        valueAfterCheck.forEach((val) => {\r\n            if (typeof val !== 'string') {\r\n                throw new ExpectedValueOfTypeError('string[]', 'currencySymbol');\r\n            }\r\n            if (val === '') {\r\n                throw new ConfigValueEmpty('currencySymbol');\r\n            }\r\n        });\r\n        return valueAfterCheck;\r\n    }\r\n    /**\r\n     * Proxied property to its private counterpart. This makes the property\r\n     * as accessible as the other Config options but without ability to change the value.\r\n     *\r\n     * @internal\r\n     */\r\n    get licenseKeyValidityState() {\r\n        return privatePool.get(this).licenseKeyValidityState;\r\n    }\r\n    getConfig() {\r\n        return getFullConfigFromPartial(this);\r\n    }\r\n    mergeConfig(init) {\r\n        const mergedConfig = Object.assign({}, this.getConfig(), init);\r\n        Config.warnDeprecatedOptions(init);\r\n        return new Config(mergedConfig, false);\r\n    }\r\n    static warnDeprecatedOptions(options) {\r\n        Config.warnDeprecatedIfUsed(options.binarySearchThreshold, 'binarySearchThreshold', '1.1');\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    static warnDeprecatedIfUsed(inputValue, paramName, fromVersion, replacementName) {\r\n        if (inputValue !== undefined) {\r\n            if (replacementName === undefined) {\r\n                console.warn(`${paramName} option is deprecated since ${fromVersion}`);\r\n            }\r\n            else {\r\n                console.warn(`${paramName} option is deprecated since ${fromVersion}, please use ${replacementName}`);\r\n            }\r\n        }\r\n    }\r\n}\r\nConfig.defaultConfig = {\r\n    accentSensitive: false,\r\n    binarySearchThreshold: 20,\r\n    currencySymbol: ['$'],\r\n    caseSensitive: false,\r\n    caseFirst: 'lower',\r\n    chooseAddressMappingPolicy: new AlwaysDense(),\r\n    dateFormats: ['DD/MM/YYYY', 'DD/MM/YY'],\r\n    decimalSeparator: '.',\r\n    evaluateNullToZero: false,\r\n    functionArgSeparator: ',',\r\n    functionPlugins: [],\r\n    ignorePunctuation: false,\r\n    language: 'enGB',\r\n    ignoreWhiteSpace: 'standard',\r\n    licenseKey: '',\r\n    leapYear1900: false,\r\n    localeLang: 'en',\r\n    matchWholeCell: true,\r\n    arrayColumnSeparator: ',',\r\n    arrayRowSeparator: ';',\r\n    maxRows: 40000,\r\n    maxColumns: 18278,\r\n    nullYear: 30,\r\n    nullDate: { year: 1899, month: 12, day: 30 },\r\n    parseDateTime: defaultParseToDateTime,\r\n    precisionEpsilon: 1e-13,\r\n    precisionRounding: 14,\r\n    smartRounding: true,\r\n    stringifyDateTime: defaultStringifyDateTime,\r\n    stringifyDuration: defaultStringifyDuration,\r\n    timeFormats: ['hh:mm', 'hh:mm:ss.sss'],\r\n    thousandSeparator: '',\r\n    undoLimit: 20,\r\n    useRegularExpressions: false,\r\n    useWildcards: true,\r\n    useColumnIndex: false,\r\n    useStats: false,\r\n    useArrayArithmetic: false,\r\n};\r\nfunction getFullConfigFromPartial(partialConfig) {\r\n    var _a;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const ret = {};\r\n    for (const key in Config.defaultConfig) {\r\n        const val = (_a = partialConfig[key]) !== null && _a !== void 0 ? _a : Config.defaultConfig[key];\r\n        if (Array.isArray(val)) {\r\n            ret[key] = [...val];\r\n        }\r\n        else {\r\n            ret[key] = val;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nexport function getDefaultConfig() {\r\n    return getFullConfigFromPartial({});\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { Config } from './Config';\r\nimport { ConfigValueTooBigError, ConfigValueTooSmallError, ExpectedOneOfValuesError, ExpectedValueOfTypeError } from './errors';\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function configValueFromParam(inputValue, expectedType, paramName) {\r\n    if (typeof inputValue === 'undefined') {\r\n        return Config.defaultConfig[paramName];\r\n    }\r\n    else if (typeof expectedType === 'string') {\r\n        if (typeof inputValue === expectedType) {\r\n            return inputValue;\r\n        }\r\n        else {\r\n            throw new ExpectedValueOfTypeError(expectedType, paramName);\r\n        }\r\n    }\r\n    else {\r\n        if (expectedType.includes(inputValue)) {\r\n            return inputValue;\r\n        }\r\n        else {\r\n            throw new ExpectedOneOfValuesError(expectedType.map((val) => `'${val}'`).join(' '), paramName);\r\n        }\r\n    }\r\n}\r\nexport function validateNumberToBeAtLeast(value, paramName, minimum) {\r\n    if (value < minimum) {\r\n        throw new ConfigValueTooSmallError(paramName, minimum);\r\n    }\r\n}\r\nexport function validateNumberToBeAtMost(value, paramName, maximum) {\r\n    if (value > maximum) {\r\n        throw new ConfigValueTooBigError(paramName, maximum);\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function configValueFromParamCheck(inputValue, typeCheck, expectedType, paramName) {\r\n    if (typeCheck(inputValue)) {\r\n        return inputValue;\r\n    }\r\n    else if (typeof inputValue === 'undefined') {\r\n        return Config.defaultConfig[paramName];\r\n    }\r\n    else {\r\n        throw new ExpectedValueOfTypeError(expectedType, paramName);\r\n    }\r\n}\r\nexport function configCheckIfParametersNotInConflict(...params) {\r\n    const valuesMap = new Map();\r\n    params.forEach((param) => {\r\n        const names = valuesMap.get(param.value) || [];\r\n        names.push(param.name);\r\n        valuesMap.set(param.value, names);\r\n    });\r\n    const duplicates = [];\r\n    for (const entry of valuesMap.values()) {\r\n        if (entry.length > 1) {\r\n            duplicates.push(entry);\r\n        }\r\n    }\r\n    if (duplicates.length > 0) {\r\n        duplicates.forEach(entry => entry.sort());\r\n        const paramNames = duplicates.map(entry => `[${entry}]`).join('; ');\r\n        throw new Error(`Config initialization failed. Parameters in conflict: ${paramNames}`);\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function validateArgToType(inputValue, expectedType, paramName) {\r\n    if (typeof inputValue !== expectedType) {\r\n        throw new ExpectedValueOfTypeError(expectedType, paramName);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport function defaultParseToDateTime(dateTimeString, dateFormat, timeFormat) {\r\n    dateTimeString = dateTimeString.replace(/\\s\\s+/g, ' ').trim().toLowerCase();\r\n    let ampmtoken = dateTimeString.substring(dateTimeString.length - 2);\r\n    if (ampmtoken === 'am' || ampmtoken === 'pm') {\r\n        dateTimeString = dateTimeString.substring(0, dateTimeString.length - 2).trim();\r\n    }\r\n    else {\r\n        ampmtoken = dateTimeString.substring(dateTimeString.length - 1);\r\n        if (ampmtoken === 'a' || ampmtoken === 'p') {\r\n            dateTimeString = dateTimeString.substring(0, dateTimeString.length - 1).trim();\r\n        }\r\n        else {\r\n            ampmtoken = undefined;\r\n        }\r\n    }\r\n    const dateItems = dateTimeString.split(/[ /.-]/g);\r\n    if (dateItems.length >= 2 && dateItems[dateItems.length - 2].includes(':')) {\r\n        dateItems[dateItems.length - 2] = dateItems[dateItems.length - 2] + '.' + dateItems[dateItems.length - 1];\r\n        dateItems.pop();\r\n    }\r\n    const timeItems = dateItems[dateItems.length - 1].split(':');\r\n    if (ampmtoken !== undefined) {\r\n        timeItems.push(ampmtoken);\r\n    }\r\n    if (dateItems.length === 1) {\r\n        return defaultParseToTime(timeItems, timeFormat);\r\n    }\r\n    if (timeItems.length === 1) {\r\n        return defaultParseToDate(dateItems, dateFormat);\r\n    }\r\n    const parsedDate = defaultParseToDate(dateItems.slice(0, dateItems.length - 1), dateFormat);\r\n    const parsedTime = defaultParseToTime(timeItems, timeFormat);\r\n    if (parsedDate === undefined) {\r\n        return undefined;\r\n    }\r\n    else if (parsedTime === undefined) {\r\n        return undefined;\r\n    }\r\n    else {\r\n        return Object.assign(Object.assign({}, parsedDate), parsedTime);\r\n    }\r\n}\r\nexport const secondsExtendedRegexp = /^ss(\\.(s+|0+))?$/;\r\nfunction defaultParseToTime(timeItems, timeFormat) {\r\n    const precision = 1000;\r\n    if (timeFormat === undefined) {\r\n        return undefined;\r\n    }\r\n    timeFormat = timeFormat.toLowerCase();\r\n    if (timeFormat.endsWith('am/pm')) {\r\n        timeFormat = timeFormat.substring(0, timeFormat.length - 5).trim();\r\n    }\r\n    else if (timeFormat.endsWith('a/p')) {\r\n        timeFormat = timeFormat.substring(0, timeFormat.length - 3).trim();\r\n    }\r\n    const formatItems = timeFormat.split(':');\r\n    let ampm = undefined;\r\n    if (timeItems[timeItems.length - 1] === 'am' || timeItems[timeItems.length - 1] === 'a') {\r\n        ampm = false;\r\n        timeItems.pop();\r\n    }\r\n    else if (timeItems[timeItems.length - 1] === 'pm' || timeItems[timeItems.length - 1] === 'p') {\r\n        ampm = true;\r\n        timeItems.pop();\r\n    }\r\n    if (timeItems.length !== formatItems.length) {\r\n        return undefined;\r\n    }\r\n    const hourIndex = formatItems.indexOf('hh');\r\n    const minuteIndex = formatItems.indexOf('mm');\r\n    const secondIndex = formatItems.findIndex(item => secondsExtendedRegexp.test(item));\r\n    const hourString = hourIndex !== -1 ? timeItems[hourIndex] : '0';\r\n    if (!/^\\d+$/.test(hourString)) {\r\n        return undefined;\r\n    }\r\n    let hours = Number(hourString);\r\n    if (ampm !== undefined) {\r\n        if (hours < 0 || hours > 12) {\r\n            return undefined;\r\n        }\r\n        hours = hours % 12;\r\n        if (ampm) {\r\n            hours = hours + 12;\r\n        }\r\n    }\r\n    const minuteString = minuteIndex !== -1 ? timeItems[minuteIndex] : '0';\r\n    if (!/^\\d+$/.test(minuteString)) {\r\n        return undefined;\r\n    }\r\n    const minutes = Number(minuteString);\r\n    const secondString = secondIndex !== -1 ? timeItems[secondIndex] : '0';\r\n    if (!/^\\d+(\\.\\d+)?$/.test(secondString)) {\r\n        return undefined;\r\n    }\r\n    const seconds = Math.round(Number(secondString) * precision) / precision;\r\n    return { hours, minutes, seconds };\r\n}\r\nfunction defaultParseToDate(dateItems, dateFormat) {\r\n    if (dateFormat === undefined) {\r\n        return undefined;\r\n    }\r\n    const formatItems = dateFormat.toLowerCase().split(/[ /.-]/g);\r\n    if (dateItems.length !== formatItems.length) {\r\n        return undefined;\r\n    }\r\n    const monthIndex = formatItems.indexOf('mm');\r\n    const dayIndex = formatItems.indexOf('dd');\r\n    const yearIndexLong = formatItems.indexOf('yyyy');\r\n    const yearIndexShort = formatItems.indexOf('yy');\r\n    if (!(monthIndex in dateItems) || !(dayIndex in dateItems) ||\r\n        (!(yearIndexLong in dateItems) && !(yearIndexShort in dateItems))) {\r\n        return undefined;\r\n    }\r\n    if (yearIndexLong in dateItems && yearIndexShort in dateItems) {\r\n        return undefined;\r\n    }\r\n    let year;\r\n    if (yearIndexLong in dateItems) {\r\n        const yearString = dateItems[yearIndexLong];\r\n        if (/^\\d+$/.test(yearString)) {\r\n            year = Number(yearString);\r\n            if (year < 1000 || year > 9999) {\r\n                return undefined;\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    else {\r\n        const yearString = dateItems[yearIndexShort];\r\n        if (/^\\d+$/.test(yearString)) {\r\n            year = Number(yearString);\r\n            if (year < 0 || year > 99) {\r\n                return undefined;\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    const monthString = dateItems[monthIndex];\r\n    if (!/^\\d+$/.test(monthString)) {\r\n        return undefined;\r\n    }\r\n    const month = Number(monthString);\r\n    const dayString = dateItems[dayIndex];\r\n    if (!/^\\d+$/.test(dayString)) {\r\n        return undefined;\r\n    }\r\n    const day = Number(dayString);\r\n    return { year, month, day };\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { DateNumber, DateTimeNumber, TimeNumber } from './interpreter/InterpreterValue';\r\nconst numDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\nconst prefSumDays = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\r\nconst SECONDS_PER_MINUTE = 60;\r\nconst MINUTES_PER_HOUR = 60;\r\nconst HOURS_PER_DAY = 24;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function instanceOfSimpleDate(obj) {\r\n    if (obj && (typeof obj === 'object' || typeof obj === 'function')) {\r\n        return 'year' in obj && typeof obj.year === 'number' && 'month' in obj && typeof obj.month === 'number' && 'day' in obj && typeof obj.day === 'number';\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function instanceOfSimpleTime(obj) {\r\n    if (obj && (typeof obj === 'object' || typeof obj === 'function')) {\r\n        return 'hours' in obj && typeof obj.hours === 'number' && 'minutes' in obj && typeof obj.minutes === 'number' && 'seconds' in obj && typeof obj.seconds === 'number';\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nexport const maxDate = { year: 9999, month: 12, day: 31 };\r\nexport class DateTimeHelper {\r\n    constructor(config) {\r\n        this.config = config;\r\n        this.minDateAbsoluteValue = this.dateToNumberFromZero(config.nullDate);\r\n        this.maxDateValue = this.dateToNumber(maxDate);\r\n        this.leapYear1900 = config.leapYear1900;\r\n        // code below fixes epochYearStart while being leapYear1900 sensitive\r\n        // if nullDate is earlier than fateful 28 Feb 1900 and 1900 is not supposed to be leap year, then we should\r\n        // add two days (this is the config default)\r\n        // otherwise only one day\r\n        if (!this.leapYear1900 && 0 <= this.dateToNumber({ year: 1900, month: 2, day: 28 })) {\r\n            this.epochYearZero = this.numberToSimpleDate(2).year;\r\n        }\r\n        else {\r\n            this.epochYearZero = this.numberToSimpleDate(1).year;\r\n        }\r\n        this.parseDateTime = config.parseDateTime;\r\n    }\r\n    getWithinBounds(dayNumber) {\r\n        return (dayNumber <= this.maxDateValue) && (dayNumber >= 0) ? dayNumber : undefined;\r\n    }\r\n    dateStringToDateNumber(dateTimeString) {\r\n        const { dateTime, dateFormat = '', timeFormat = '' } = this.parseDateTimeFromConfigFormats(dateTimeString);\r\n        if (dateTime === undefined) {\r\n            return undefined;\r\n        }\r\n        if (instanceOfSimpleTime(dateTime)) {\r\n            if (instanceOfSimpleDate(dateTime)) {\r\n                return new DateTimeNumber(timeToNumber(dateTime) + this.dateToNumber(dateTime), dateFormat + ' ' + timeFormat);\r\n            }\r\n            else {\r\n                return new TimeNumber(timeToNumber(dateTime), timeFormat);\r\n            }\r\n        }\r\n        else {\r\n            if (instanceOfSimpleDate(dateTime)) {\r\n                return new DateNumber(this.dateToNumber(dateTime), dateFormat);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n    }\r\n    parseDateTimeFromConfigFormats(dateTimeString) {\r\n        return this.parseDateTimeFromFormats(dateTimeString, this.config.dateFormats, this.config.timeFormats);\r\n    }\r\n    getNullYear() {\r\n        return this.config.nullYear;\r\n    }\r\n    getEpochYearZero() {\r\n        return this.epochYearZero;\r\n    }\r\n    isValidDate(date) {\r\n        if (isNaN(date.year) || isNaN(date.month) || isNaN(date.day)) {\r\n            return false;\r\n        }\r\n        else if (date.day !== Math.round(date.day) || date.month !== Math.round(date.month) || date.year !== Math.round(date.year)) {\r\n            return false;\r\n        }\r\n        else if (date.year < 1582) { // Gregorian calendar start\r\n            return false;\r\n        }\r\n        else if (date.month < 1 || date.month > 12) {\r\n            return false;\r\n        }\r\n        else if (date.day < 1) {\r\n            return false;\r\n        }\r\n        else if (this.isLeapYear(date.year) && date.month === 2) {\r\n            return date.day <= 29;\r\n        }\r\n        else {\r\n            return date.day <= numDays[date.month - 1];\r\n        }\r\n    }\r\n    dateToNumber(date) {\r\n        return this.dateToNumberFromZero(date) - this.minDateAbsoluteValue;\r\n    }\r\n    relativeNumberToAbsoluteNumber(arg) {\r\n        return arg + this.minDateAbsoluteValue - (this.leapYear1900 ? 1 : 0);\r\n    }\r\n    numberToSimpleDate(arg) {\r\n        const dateNumber = Math.floor(arg) + this.minDateAbsoluteValue;\r\n        let year = Math.floor(dateNumber / 365.2425);\r\n        if (this.dateToNumberFromZero({ year: year + 1, month: 1, day: 1 }) <= dateNumber) {\r\n            year++;\r\n        }\r\n        else if (this.dateToNumberFromZero({ year: year - 1, month: 1, day: 1 }) > dateNumber) {\r\n            year--;\r\n        }\r\n        const dayOfYear = dateNumber - this.dateToNumberFromZero({ year, month: 1, day: 1 });\r\n        const month = dayToMonth(dayOfYear - (this.isLeapYear(year) && dayOfYear >= 59 ? 1 : 0));\r\n        const day = dayOfYear - prefSumDays[month] - (this.isLeapYear(year) && month > 1 ? 1 : 0);\r\n        return { year, month: month + 1, day: day + 1 };\r\n    }\r\n    numberToSimpleDateTime(arg) {\r\n        const time = numberToSimpleTime(arg % 1);\r\n        const carryDays = Math.floor(time.hours / HOURS_PER_DAY);\r\n        time.hours = time.hours % HOURS_PER_DAY;\r\n        const date = this.numberToSimpleDate(Math.floor(arg) + carryDays);\r\n        return Object.assign(Object.assign({}, date), time);\r\n    }\r\n    leapYearsCount(year) {\r\n        return Math.floor(year / 4) - Math.floor(year / 100) + Math.floor(year / 400) + (this.config.leapYear1900 && year >= 1900 ? 1 : 0);\r\n    }\r\n    daysInMonth(year, month) {\r\n        if (this.isLeapYear(year) && month === 2) {\r\n            return 29;\r\n        }\r\n        else {\r\n            return numDays[month - 1];\r\n        }\r\n    }\r\n    endOfMonth(date) {\r\n        return { year: date.year, month: date.month, day: this.daysInMonth(date.year, date.month) };\r\n    }\r\n    toBasisUS(start, end) {\r\n        if (start.day === 31) {\r\n            start.day = 30;\r\n        }\r\n        if (start.day === 30 && end.day === 31) {\r\n            end.day = 30;\r\n        }\r\n        if (start.month === 2 && start.day === this.daysInMonth(start.year, start.month)) {\r\n            start.day = 30;\r\n            if (end.month === 2 && end.day === this.daysInMonth(end.year, end.month)) {\r\n                end.day = 30;\r\n            }\r\n        }\r\n        return [start, end];\r\n    }\r\n    yearLengthForBasis(start, end) {\r\n        if (start.year !== end.year) {\r\n            if ((start.year + 1 !== end.year) || (start.month < end.month) || (start.month === end.month && start.day < end.day)) {\r\n                // this is true IFF at least one year of gap between dates\r\n                return (this.leapYearsCount(end.year) - this.leapYearsCount(start.year - 1)) / (end.year - start.year + 1) + 365;\r\n            }\r\n            if (this.countLeapDays(end) !== this.countLeapDays({ year: start.year, month: start.month, day: start.day - 1 })) {\r\n                return 366;\r\n            }\r\n            else {\r\n                return 365;\r\n            }\r\n        }\r\n        if (this.isLeapYear(start.year)) {\r\n            return 366;\r\n        }\r\n        else {\r\n            return 365;\r\n        }\r\n    }\r\n    parseSingleFormat(dateString, dateFormat, timeFormat) {\r\n        const dateTime = this.parseDateTime(dateString, dateFormat, timeFormat);\r\n        if (instanceOfSimpleDate(dateTime)) {\r\n            if (dateTime.year >= 0 && dateTime.year < 100) {\r\n                if (dateTime.year < this.getNullYear()) {\r\n                    dateTime.year += 2000;\r\n                }\r\n                else {\r\n                    dateTime.year += 1900;\r\n                }\r\n            }\r\n            if (!this.isValidDate(dateTime)) {\r\n                return undefined;\r\n            }\r\n        }\r\n        return dateTime;\r\n    }\r\n    parseDateTimeFromFormats(dateTimeString, dateFormats, timeFormats) {\r\n        const dateFormatsIterate = dateFormats.length === 0 ? [undefined] : dateFormats;\r\n        const timeFormatsIterate = timeFormats.length === 0 ? [undefined] : timeFormats;\r\n        for (const dateFormat of dateFormatsIterate) {\r\n            for (const timeFormat of timeFormatsIterate) {\r\n                const dateTime = this.parseSingleFormat(dateTimeString, dateFormat, timeFormat);\r\n                if (dateTime !== undefined) {\r\n                    return { dateTime, timeFormat, dateFormat };\r\n                }\r\n            }\r\n        }\r\n        return {};\r\n    }\r\n    countLeapDays(date) {\r\n        if (date.month > 2 || (date.month === 2 && date.day >= 29)) {\r\n            return this.leapYearsCount(date.year);\r\n        }\r\n        else {\r\n            return this.leapYearsCount(date.year - 1);\r\n        }\r\n    }\r\n    dateToNumberFromZero(date) {\r\n        return 365 * date.year + prefSumDays[date.month - 1] + date.day - 1 + (date.month <= 2 ? this.leapYearsCount(date.year - 1) : this.leapYearsCount(date.year));\r\n    }\r\n    isLeapYear(year) {\r\n        if (year % 4) {\r\n            return false;\r\n        }\r\n        else if (year % 100) {\r\n            return true;\r\n        }\r\n        else if (year % 400) {\r\n            return year === 1900 && this.config.leapYear1900;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n}\r\nfunction dayToMonth(dayOfYear) {\r\n    let month = 0;\r\n    if (prefSumDays[month + 6] <= dayOfYear) {\r\n        month += 6;\r\n    }\r\n    if (prefSumDays[month + 3] <= dayOfYear) {\r\n        month += 3;\r\n    }\r\n    if (prefSumDays[month + 2] <= dayOfYear) {\r\n        month += 2;\r\n    }\r\n    else if (prefSumDays[month + 1] <= dayOfYear) {\r\n        month += 1;\r\n    }\r\n    return month;\r\n}\r\nexport function offsetMonth(date, offset) {\r\n    const totalM = 12 * date.year + date.month - 1 + offset;\r\n    return { year: Math.floor(totalM / 12), month: totalM % 12 + 1, day: date.day };\r\n}\r\nexport function truncateDayInMonth(date) {\r\n    return { year: date.year, month: date.month, day: Math.min(date.day, numDays[date.month - 1]) };\r\n}\r\nexport function roundToNearestSecond(arg) {\r\n    return Math.round(arg * 3600 * 24) / (3600 * 24);\r\n}\r\nfunction roundToEpsilon(arg, epsilon = 1) {\r\n    return Math.round(arg * epsilon) / epsilon;\r\n}\r\n// Note: The result of this function might be { hours = 24, minutes = 0, seconds = 0 } if arg < 1 but arg ≈ 1\r\nexport function numberToSimpleTime(arg) {\r\n    const argAsSeconds = arg * HOURS_PER_DAY * MINUTES_PER_HOUR * SECONDS_PER_MINUTE;\r\n    const seconds = roundToEpsilon(argAsSeconds % SECONDS_PER_MINUTE, 100000) % SECONDS_PER_MINUTE;\r\n    const argAsMinutes = (argAsSeconds - seconds) / SECONDS_PER_MINUTE;\r\n    const minutes = Math.round(argAsMinutes % MINUTES_PER_HOUR) % MINUTES_PER_HOUR;\r\n    const argAsHours = (argAsMinutes - minutes) / MINUTES_PER_HOUR;\r\n    const hours = Math.round(argAsHours);\r\n    return { hours, minutes, seconds };\r\n}\r\nexport function timeToNumber(time) {\r\n    return ((time.seconds / 60 + time.minutes) / 60 + time.hours) / 24;\r\n}\r\nexport function toBasisEU(date) {\r\n    return { year: date.year, month: date.month, day: Math.min(30, date.day) };\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { DenseStrategy } from './DenseStrategy';\r\nimport { SparseStrategy } from './SparseStrategy';\r\nexport class DenseSparseChooseBasedOnThreshold {\r\n    constructor(threshold) {\r\n        this.threshold = threshold;\r\n    }\r\n    call(fill) {\r\n        if (fill > this.threshold) {\r\n            return DenseStrategy;\r\n        }\r\n        else {\r\n            return SparseStrategy;\r\n        }\r\n    }\r\n}\r\nexport class AlwaysSparse {\r\n    call() {\r\n        return SparseStrategy;\r\n    }\r\n}\r\nexport class AlwaysDense {\r\n    call() {\r\n        return DenseStrategy;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { secondsExtendedRegexp } from '../DateTimeDefault';\r\nimport { numberToSimpleTime } from '../DateTimeHelper';\r\nimport { parseForDateTimeFormat, parseForNumberFormat, TokenType } from './parser';\r\nexport function format(value, formatArg, config, dateHelper) {\r\n    const tryDateTime = config.stringifyDateTime(dateHelper.numberToSimpleDateTime(value), formatArg); // default points to defaultStringifyDateTime()\r\n    if (tryDateTime !== undefined) {\r\n        return tryDateTime;\r\n    }\r\n    const tryDuration = config.stringifyDuration(numberToSimpleTime(value), formatArg);\r\n    if (tryDuration !== undefined) {\r\n        return tryDuration;\r\n    }\r\n    const expression = parseForNumberFormat(formatArg);\r\n    if (expression !== undefined) {\r\n        return numberFormat(expression.tokens, value);\r\n    }\r\n    return formatArg;\r\n}\r\nexport function padLeft(number, size) {\r\n    let result = number + '';\r\n    while (result.length < size) {\r\n        result = '0' + result;\r\n    }\r\n    return result;\r\n}\r\nexport function padRight(number, size) {\r\n    let result = number + '';\r\n    while (result.length < size) {\r\n        result = result + '0';\r\n    }\r\n    return result;\r\n}\r\nfunction countChars(text, char) {\r\n    return text.split(char).length - 1;\r\n}\r\nfunction numberFormat(tokens, value) {\r\n    let result = '';\r\n    for (let i = 0; i < tokens.length; ++i) {\r\n        const token = tokens[i];\r\n        if (token.type === TokenType.FREE_TEXT) {\r\n            result += token.value;\r\n            continue;\r\n        }\r\n        const tokenParts = token.value.split('.');\r\n        const integerFormat = tokenParts[0];\r\n        const decimalFormat = tokenParts[1] || '';\r\n        const separator = tokenParts[1] ? '.' : '';\r\n        /* get fixed-point number without trailing zeros */\r\n        const valueParts = Number(value.toFixed(decimalFormat.length)).toString().split('.');\r\n        let integerPart = valueParts[0] || '';\r\n        let decimalPart = valueParts[1] || '';\r\n        if (integerFormat.length > integerPart.length) {\r\n            const padSizeInteger = countChars(integerFormat.substr(0, integerFormat.length - integerPart.length), '0');\r\n            integerPart = padLeft(integerPart, padSizeInteger + integerPart.length);\r\n        }\r\n        const padSizeDecimal = countChars(decimalFormat.substr(decimalPart.length, decimalFormat.length - decimalPart.length), '0');\r\n        decimalPart = padRight(decimalPart, padSizeDecimal + decimalPart.length);\r\n        result += integerPart + separator + decimalPart;\r\n    }\r\n    return result;\r\n}\r\nexport function defaultStringifyDuration(time, formatArg) {\r\n    const expression = parseForDateTimeFormat(formatArg);\r\n    if (expression === undefined) {\r\n        return undefined;\r\n    }\r\n    const tokens = expression.tokens;\r\n    let result = '';\r\n    for (const token of tokens) {\r\n        if (token.type === TokenType.FREE_TEXT) {\r\n            result += token.value;\r\n            continue;\r\n        }\r\n        switch (token.value.toLowerCase()) {\r\n            case 'h':\r\n            case 'hh': {\r\n                result += padLeft(time.hours, token.value.length);\r\n                time.hours = 0;\r\n                break;\r\n            }\r\n            case '[hh]': {\r\n                result += padLeft(time.hours, token.value.length - 2);\r\n                time.hours = 0;\r\n                break;\r\n            }\r\n            case 'm':\r\n            case 'mm': {\r\n                result += padLeft(time.minutes, token.value.length);\r\n                time.minutes = 0;\r\n                break;\r\n            }\r\n            case '[mm]': {\r\n                result += padLeft(time.minutes + 60 * time.hours, token.value.length - 2);\r\n                time.minutes = 0;\r\n                time.hours = 0;\r\n                break;\r\n            }\r\n            /* seconds */\r\n            case 's':\r\n            case 'ss': {\r\n                result += padLeft(Math.floor(time.seconds), token.value.length);\r\n                break;\r\n            }\r\n            default: {\r\n                if (secondsExtendedRegexp.test(token.value)) {\r\n                    const fractionOfSecondPrecision = Math.max(token.value.length - 3, 0);\r\n                    result += (time.seconds < 10 ? '0' : '') + Math.floor(time.seconds * Math.pow(10, fractionOfSecondPrecision)) / Math.pow(10, fractionOfSecondPrecision);\r\n                    continue;\r\n                }\r\n                return undefined;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function defaultStringifyDateTime(dateTime, formatArg) {\r\n    const expression = parseForDateTimeFormat(formatArg);\r\n    if (expression === undefined) {\r\n        return undefined;\r\n    }\r\n    const tokens = expression.tokens;\r\n    let result = '';\r\n    let minutes = false;\r\n    const ampm = tokens.some((token) => token.type === TokenType.FORMAT &&\r\n        (token.value === 'a/p' || token.value === 'A/P' || token.value === 'am/pm' || token.value === 'AM/PM'));\r\n    for (let i = 0; i < tokens.length; i++) {\r\n        const token = tokens[i];\r\n        if (token.type === TokenType.FREE_TEXT) {\r\n            result += token.value;\r\n            continue;\r\n        }\r\n        switch (token.value.toLowerCase()) {\r\n            /* hours*/\r\n            case 'h':\r\n            case 'hh': {\r\n                minutes = true;\r\n                result += padLeft(ampm ? (dateTime.hours + 11) % 12 + 1 : dateTime.hours, token.value.length);\r\n                break;\r\n            }\r\n            /* days */\r\n            case 'd':\r\n            case 'dd': {\r\n                result += padLeft(dateTime.day, token.value.length);\r\n                break;\r\n            }\r\n            /* seconds */\r\n            case 's':\r\n            case 'ss': {\r\n                result += padLeft(Math.floor(dateTime.seconds), token.value.length);\r\n                break;\r\n            }\r\n            /* minutes / months */\r\n            case 'm':\r\n            case 'mm': {\r\n                if (i + 1 < tokens.length && tokens[i + 1].value.startsWith(':')) {\r\n                    minutes = true;\r\n                }\r\n                if (minutes) {\r\n                    result += padLeft(dateTime.minutes, token.value.length);\r\n                }\r\n                else {\r\n                    result += padLeft(dateTime.month, token.value.length);\r\n                }\r\n                minutes = true;\r\n                break;\r\n            }\r\n            /* years */\r\n            case 'yy': {\r\n                result += padLeft(dateTime.year % 100, token.value.length);\r\n                break;\r\n            }\r\n            case 'yyyy': {\r\n                result += dateTime.year;\r\n                break;\r\n            }\r\n            /* AM / PM */\r\n            case 'am/pm':\r\n            case 'a/p': {\r\n                const [am, pm] = token.value.split('/');\r\n                result += dateTime.hours < 12 ? am : pm;\r\n                break;\r\n            }\r\n            default: {\r\n                if (secondsExtendedRegexp.test(token.value)) {\r\n                    const fractionOfSecondPrecision = token.value.length - 3;\r\n                    result += (dateTime.seconds < 10 ? '0' : '') + Math.floor(dateTime.seconds * Math.pow(10, fractionOfSecondPrecision)) / Math.pow(10, fractionOfSecondPrecision);\r\n                    continue;\r\n                }\r\n                return undefined;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nconst dateFormatRegex = /(\\\\.|dd|DD|d|D|mm|MM|m|M|YYYY|YY|yyyy|yy|HH|hh|H|h|ss(\\.(0+|s+))?|s|AM\\/PM|am\\/pm|A\\/P|a\\/p|\\[mm]|\\[MM]|\\[hh]|\\[HH])/g;\r\nconst numberFormatRegex = /(\\\\.|[#0]+(\\.[#0]*)?)/g;\r\nexport var TokenType;\r\n(function (TokenType) {\r\n    TokenType[\"FORMAT\"] = \"FORMAT\";\r\n    TokenType[\"FREE_TEXT\"] = \"FREE_TEXT\";\r\n})(TokenType || (TokenType = {}));\r\nexport function formatToken(type, value) {\r\n    return {\r\n        type,\r\n        value,\r\n    };\r\n}\r\nexport var FormatExpressionType;\r\n(function (FormatExpressionType) {\r\n    FormatExpressionType[\"DATE\"] = \"DATE\";\r\n    FormatExpressionType[\"NUMBER\"] = \"NUMBER\";\r\n    FormatExpressionType[\"STRING\"] = \"STRING\";\r\n})(FormatExpressionType || (FormatExpressionType = {}));\r\nfunction matchDateFormat(str) {\r\n    dateFormatRegex.lastIndex = 0;\r\n    const tokens = [];\r\n    let m;\r\n    do {\r\n        m = dateFormatRegex.exec(str);\r\n        if (m !== null) {\r\n            tokens.push(m);\r\n        }\r\n    } while (m);\r\n    return tokens;\r\n}\r\nfunction matchNumberFormat(str) {\r\n    numberFormatRegex.lastIndex = 0;\r\n    const numberFormatToken = numberFormatRegex.exec(str);\r\n    if (numberFormatToken !== null) {\r\n        return [numberFormatToken];\r\n    }\r\n    else {\r\n        return [];\r\n    }\r\n}\r\nfunction createTokens(regexTokens, str) {\r\n    const tokens = [];\r\n    let start = 0;\r\n    for (let i = 0; i < regexTokens.length; ++i) {\r\n        const token = regexTokens[i];\r\n        if (token.index !== start) {\r\n            const beforeToken = str.substr(start, token.index - start);\r\n            tokens.push(formatToken(TokenType.FREE_TEXT, beforeToken));\r\n        }\r\n        if (token[0].startsWith('\\\\')) {\r\n            tokens.push(formatToken(TokenType.FREE_TEXT, token[0]));\r\n        }\r\n        else {\r\n            tokens.push(formatToken(TokenType.FORMAT, token[0]));\r\n        }\r\n        start = token.index + token[0].length;\r\n    }\r\n    const lastToken = regexTokens[regexTokens.length - 1];\r\n    if (lastToken.index + lastToken[0].length < str.length) {\r\n        const afterLastToken = str.substr(lastToken.index + lastToken[0].length, str.length);\r\n        tokens.push(formatToken(TokenType.FREE_TEXT, afterLastToken));\r\n    }\r\n    return tokens;\r\n}\r\nexport function parseForDateTimeFormat(str) {\r\n    const dateFormatTokens = matchDateFormat(str);\r\n    if (dateFormatTokens.every((elem) => isEscapeToken(elem))) {\r\n        return undefined;\r\n    }\r\n    else {\r\n        return {\r\n            type: FormatExpressionType.DATE,\r\n            tokens: createTokens(dateFormatTokens, str),\r\n        };\r\n    }\r\n}\r\nexport function parseForNumberFormat(str) {\r\n    const numberFormatTokens = matchNumberFormat(str);\r\n    if (numberFormatTokens.every((elem) => isEscapeToken(elem))) {\r\n        return undefined;\r\n    }\r\n    else {\r\n        return {\r\n            type: FormatExpressionType.NUMBER,\r\n            tokens: createTokens(numberFormatTokens, str),\r\n        };\r\n    }\r\n}\r\nexport function parse(str) {\r\n    var _a, _b;\r\n    return (_b = (_a = parseForDateTimeFormat(str)) !== null && _a !== void 0 ? _a : parseForNumberFormat(str)) !== null && _b !== void 0 ? _b : {\r\n        type: FormatExpressionType.STRING,\r\n        tokens: [{\r\n                type: TokenType.FREE_TEXT,\r\n                value: str,\r\n            }],\r\n    };\r\n}\r\nexport function isEscapeToken(token) {\r\n    return token[0].startsWith('\\\\');\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { checkKeySchema, extractTime } from './licenseKeyHelper';\r\n/**\r\n * List of all not valid messages which may occur.\r\n */\r\nconst consoleMessages = {\r\n    invalid: () => 'The license key for HyperFormula is invalid.',\r\n    expired: ({ keyValidityDate }) => 'The license key for HyperFormula expired' +\r\n        ` on ${keyValidityDate}, and is not valid for the installed version.`,\r\n    missing: () => 'The license key for HyperFormula is missing.',\r\n};\r\nlet _notified = false;\r\n/**\r\n * Checks if the provided license key is grammatically valid or not expired.\r\n *\r\n * @param {string} licenseKey The license key to check.\r\n * @returns {LicenseKeyValidityState} Returns the checking state.\r\n */\r\nexport function checkLicenseKeyValidity(licenseKey) {\r\n    const messageDescriptor = {\r\n        template: \"missing\" /* MISSING */,\r\n        vars: {},\r\n    };\r\n    if (licenseKey === 'gpl-v3' || licenseKey === 'internal-use-in-handsontable') {\r\n        messageDescriptor.template = \"valid\" /* VALID */;\r\n    }\r\n    else if (typeof licenseKey === 'string' && checkKeySchema(licenseKey)) {\r\n        const [day, month, year] = (process.env.HT_RELEASE_DATE || '').split('/');\r\n        const releaseDays = Math.floor(new Date(`${month}/${day}/${year}`).getTime() / 8.64e7);\r\n        const keyValidityDays = extractTime(licenseKey);\r\n        messageDescriptor.vars.keyValidityDate = formatDate(new Date((keyValidityDays + 1) * 8.64e7));\r\n        if (releaseDays > keyValidityDays) {\r\n            messageDescriptor.template = \"expired\" /* EXPIRED */;\r\n        }\r\n        else {\r\n            messageDescriptor.template = \"valid\" /* VALID */;\r\n        }\r\n    }\r\n    else if (licenseKey !== '') {\r\n        messageDescriptor.template = \"invalid\" /* INVALID */;\r\n    }\r\n    if (!_notified && messageDescriptor.template !== \"valid\" /* VALID */) {\r\n        console.warn(consoleMessages[messageDescriptor.template](messageDescriptor.vars));\r\n        _notified = true;\r\n    }\r\n    return messageDescriptor.template;\r\n}\r\n/**\r\n * Formats a Date instance to hard-coded format MMMM DD, YYYY.\r\n *\r\n * @param {Date} date The date to format.\r\n * @returns {string}\r\n */\r\nfunction formatDate(date) {\r\n    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',\r\n        'July', 'August', 'September', 'October', 'November', 'December'\r\n    ];\r\n    const month = monthNames[date.getMonth()];\r\n    const day = date.getDate();\r\n    const year = date.getFullYear();\r\n    return `${month} ${day}, ${year}`;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\n// @ts-nocheck\r\n/* eslint-disable */\r\nconst _rl = '\\x6C\\x65\\x6E\\x67\\x74\\x68';\r\nconst _hd = (v) => parseInt(v, 16);\r\nconst _pi = (v) => parseInt(v, 10);\r\nconst _nm = (v) => (v + '').replace(/\\-/g, '');\r\nconst _ss = (v, s, l) => v['\\x73\\x75\\x62\\x73\\x74\\x72'](s, l);\r\nconst _cp = (v) => v['\\x63\\x6F\\x64\\x65\\x50\\x6F\\x69\\x6E\\x74\\x41\\x74'](0) - 65;\r\nexport function extractTime(v) {\r\n    return _nm(v)[_rl] === (50 >> 1) ? _hd(_ss(_nm(v), _hd('12'), _cp('\\x46'))) / (_hd(_ss(_nm(v), _cp('C'), _cp('\\x59') >> 4)) || ((~~![][_rl]) << 3) + 1) : 0;\r\n}\r\nexport function checkKeySchema(v) {\r\n    v = (v + '').replace(/\\-/g, '');\r\n    if (v[_rl] !== _cp('\\x5A')) {\r\n        return false;\r\n    }\r\n    let sp = 0;\r\n    return [[0, _cp('\\x47') + 1], [_cp('\\x48'), _cp('\\x48') - 1], [_cp('G') + _cp('H'), _cp('\\x47')]].reduce((e, [a, b], c) => {\r\n        e |= (_pi(`${_pi(_hd(_ss(v, ...[sp + a - (c === (3 >> 2) ? 0 : 2), b + (!c ? 0 : 2)])) + (_hd(_ss(v, ...[sp + a + b, 2])) + []).padStart(2, '0'))}`) % 97 || 2) >> 1;\r\n        sp += 2;\r\n        return e;\r\n    }, _cp('A')) === ([] + 1 >> 1);\r\n}\r\n/* eslint-enable */\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange, isSimpleCellRange } from './AbsoluteCellRange';\r\nimport { validateArgToType } from './ArgumentSanitization';\r\nimport { BuildEngineFactory } from './BuildEngineFactory';\r\nimport { CellType, getCellType, getCellValueDetailedType, getCellValueFormat, getCellValueType, isSimpleCellAddress } from './Cell';\r\nimport { CellContent } from './CellContentParser';\r\nimport { getDefaultConfig } from './Config';\r\nimport { numberToSimpleTime } from './DateTimeHelper';\r\nimport { objectDestroy } from './Destroy';\r\nimport { Emitter, Events } from './Emitter';\r\nimport { EvaluationSuspendedError, ExpectedValueOfTypeError, LanguageAlreadyRegisteredError, LanguageNotRegisteredError, NotAFormulaError, } from './errors';\r\nimport { buildTranslationPackage } from './i18n';\r\nimport { FunctionRegistry } from './interpreter/FunctionRegistry';\r\nimport { normalizeAddedIndexes, normalizeRemovedIndexes } from './Operations';\r\nimport { AstNodeType, simpleCellAddressFromString, simpleCellAddressToString, simpleCellRangeFromString, simpleCellRangeToString, } from './parser';\r\n/**\r\n * This is a class for creating HyperFormula instance, all the following public methods\r\n * ale related to this class.\r\n *\r\n * The instance can be created only by calling one of the static methods\r\n * `buildFromArray`, `buildFromSheets` or `buildEmpty` and should be disposed of with the\r\n * `destroy` method when it's no longer needed to free the resources.\r\n *\r\n * The instance can be seen as a workbook where worksheets can be created and\r\n * manipulated. They are organized within a widely known structure of columns and rows\r\n * which can be manipulated as well. The smallest possible data unit are the cells, which\r\n * may contain simple values or formulas to be calculated.\r\n *\r\n * All CRUD methods are called directly on HyperFormula instance and will trigger\r\n * corresponding lifecycle events. The events are marked accordingly, as well as thrown\r\n * errors, so they can be correctly handled.\r\n */\r\nexport class HyperFormula {\r\n    constructor(_config, _stats, _dependencyGraph, _columnSearch, _parser, _unparser, _cellContentParser, _evaluator, _lazilyTransformingAstService, _crudOperations, _exporter, _namedExpressions, _serialization, _functionRegistry) {\r\n        this._config = _config;\r\n        this._stats = _stats;\r\n        this._dependencyGraph = _dependencyGraph;\r\n        this._columnSearch = _columnSearch;\r\n        this._parser = _parser;\r\n        this._unparser = _unparser;\r\n        this._cellContentParser = _cellContentParser;\r\n        this._evaluator = _evaluator;\r\n        this._lazilyTransformingAstService = _lazilyTransformingAstService;\r\n        this._crudOperations = _crudOperations;\r\n        this._exporter = _exporter;\r\n        this._namedExpressions = _namedExpressions;\r\n        this._serialization = _serialization;\r\n        this._functionRegistry = _functionRegistry;\r\n        this._emitter = new Emitter();\r\n        this._evaluationSuspended = false;\r\n    }\r\n    /**\r\n     * Returns all of HyperFormula's default [configuration options](../../guide/configuration-options.md).\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // returns all default configuration options\r\n     * const defaultConfig = HyperFormula.defaultConfig;\r\n     * ```\r\n     *\r\n     * @category Static Accessors\r\n     */\r\n    static get defaultConfig() {\r\n        return getDefaultConfig();\r\n    }\r\n    /**\r\n     * Calls the `graph` method on the dependency graph.\r\n     * Allows for executing `graph` directly, without a need to refer to `dependencyGraph`.\r\n     *\r\n     * @internal\r\n     */\r\n    get graph() {\r\n        return this.dependencyGraph.graph;\r\n    }\r\n    /**\r\n     * Calls the `rangeMapping` method on the dependency graph.\r\n     * Allows for executing `rangeMapping` directly, without a need to refer to `dependencyGraph`.\r\n     *\r\n     * @internal\r\n     */\r\n    get rangeMapping() {\r\n        return this.dependencyGraph.rangeMapping;\r\n    }\r\n    /**\r\n     * Calls the `arrayMapping` method on the dependency graph.\r\n     * Allows for executing `arrayMapping` directly, without a need to refer to `dependencyGraph`.\r\n     *\r\n     * @internal\r\n     */\r\n    get arrayMapping() {\r\n        return this.dependencyGraph.arrayMapping;\r\n    }\r\n    /**\r\n     * Calls the `sheetMapping` method on the dependency graph.\r\n     * Allows for executing `sheetMapping` directly, without a need to refer to `dependencyGraph`.\r\n     *\r\n     * @internal\r\n     */\r\n    get sheetMapping() {\r\n        return this.dependencyGraph.sheetMapping;\r\n    }\r\n    /**\r\n     * Calls the `addressMapping` method on the dependency graph.\r\n     * Allows for executing `addressMapping` directly, without a need to refer to `dependencyGraph`.\r\n     *\r\n     * @internal\r\n     */\r\n    get addressMapping() {\r\n        return this.dependencyGraph.addressMapping;\r\n    }\r\n    /** @internal */\r\n    get dependencyGraph() {\r\n        return this._dependencyGraph;\r\n    }\r\n    /** @internal */\r\n    get evaluator() {\r\n        return this._evaluator;\r\n    }\r\n    /** @internal */\r\n    get columnSearch() {\r\n        return this._columnSearch;\r\n    }\r\n    /** @internal */\r\n    get lazilyTransformingAstService() {\r\n        return this._lazilyTransformingAstService;\r\n    }\r\n    /**\r\n     * Returns state of the validity of the license key.\r\n     *\r\n     * @internal\r\n     */\r\n    get licenseKeyValidityState() {\r\n        return this._config.licenseKeyValidityState;\r\n    }\r\n    /**\r\n     * Builds the engine for a sheet from a two-dimensional array representation.\r\n     * The engine is created with a single sheet.\r\n     * Can be configured with the optional second parameter that represents a [[ConfigParams]].\r\n     * If not specified, the engine will be built with the default configuration.\r\n     *\r\n     * @param {Sheet} sheet - two-dimensional array representation of sheet\r\n     * @param {Partial<ConfigParams>} configInput - engine configuration\r\n     * @param {SerializedNamedExpression[]} namedExpressions - starting named expressions\r\n     *\r\n     * @throws [[SheetSizeLimitExceededError]] when sheet size exceeds the limits\r\n     * @throws [[InvalidArgumentsError]] when sheet is not an array of arrays\r\n     * @throws [[FunctionPluginValidationError]] when plugin class definition is not consistent with metadata\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // data represented as an array\r\n     * const sheetData = [\r\n     *  ['0', '=SUM(1, 2, 3)', '52'],\r\n     *  ['=SUM(A1:C1)', '', '=A1'],\r\n     *  ['2', '=SUM(A1:C1)', '91'],\r\n     * ];\r\n     *\r\n     * // method with optional config parameter maxColumns\r\n     * const hfInstance = HyperFormula.buildFromArray(sheetData, { maxColumns: 1000 });\r\n     * ```\r\n     *\r\n     * @category Factories\r\n     */\r\n    static buildFromArray(sheet, configInput = {}, namedExpressions = []) {\r\n        return this.buildFromEngineState(BuildEngineFactory.buildFromSheet(sheet, configInput, namedExpressions));\r\n    }\r\n    /**\r\n     * Builds the engine from an object containing multiple sheets with names.\r\n     * The engine is created with one or more sheets.\r\n     * Can be configured with the optional second parameter that represents a [[ConfigParams]].\r\n     * If not specified the engine will be built with the default configuration.\r\n     *\r\n     * @param {Sheet} sheets - object with sheets definition\r\n     * @param {Partial<ConfigParams>} configInput - engine configuration\r\n     * @param {SerializedNamedExpression[]} namedExpressions - starting named expressions\r\n     *\r\n     * @throws [[SheetSizeLimitExceededError]] when sheet size exceeds the limits\r\n     * @throws [[InvalidArgumentsError]] when any sheet is not an array of arrays\r\n     * @throws [[FunctionPluginValidationError]] when plugin class definition is not consistent with metadata\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // data represented as an object with sheets: Sheet1 and Sheet2\r\n     * const sheetData = {\r\n     *  'Sheet1': [\r\n     *    ['1', '', '=Sheet2!$A1'],\r\n     *    ['', '2', '=SUM(1, 2, 3)'],\r\n     *    ['=Sheet2!$A2', '2', ''],\r\n     *   ],\r\n     *  'Sheet2': [\r\n     *    ['', '4', '=Sheet1!$B1'],\r\n     *    ['', '8', '=SUM(9, 3, 3)'],\r\n     *    ['=Sheet1!$B1', '2', ''],\r\n     *   ],\r\n     * };\r\n     *\r\n     * // method with optional config parameter useColumnIndex\r\n     * const hfInstance = HyperFormula.buildFromSheets(sheetData, { useColumnIndex: true });\r\n     * ```\r\n     *\r\n     * @category Factories\r\n     */\r\n    static buildFromSheets(sheets, configInput = {}, namedExpressions = []) {\r\n        return this.buildFromEngineState(BuildEngineFactory.buildFromSheets(sheets, configInput, namedExpressions));\r\n    }\r\n    /**\r\n     * Builds an empty engine instance.\r\n     * Can be configured with the optional parameter that represents a [[ConfigParams]].\r\n     * If not specified the engine will be built with the default configuration.\r\n     *\r\n     * @param {Partial<ConfigParams>} configInput - engine configuration\r\n     * @param {SerializedNamedExpression[]} namedExpressions - starting named expressions\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // build with no initial data and with optional config parameter maxColumns\r\n     * const hfInstance = HyperFormula.buildEmpty({ maxColumns: 1000 });\r\n     * ```\r\n     *\r\n     * @category Factories\r\n     */\r\n    static buildEmpty(configInput = {}, namedExpressions = []) {\r\n        return this.buildFromEngineState(BuildEngineFactory.buildEmpty(configInput, namedExpressions));\r\n    }\r\n    /**\r\n     * Returns registered language from its code string.\r\n     *\r\n     * @param {string} languageCode - code string of the translation package\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[LanguageNotRegisteredError]] when trying to retrieve not registered language\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // return registered language\r\n     * const language = HyperFormula.getLanguage('enGB');\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static getLanguage(languageCode) {\r\n        validateArgToType(languageCode, 'string', 'languageCode');\r\n        const val = this.registeredLanguages.get(languageCode);\r\n        if (val === undefined) {\r\n            throw new LanguageNotRegisteredError();\r\n        }\r\n        else {\r\n            return val;\r\n        }\r\n    }\r\n    /**\r\n     * Registers language under given code string.\r\n     *\r\n     * For more information, see the [Localizing functions guide](/guide/localizing-functions.md).\r\n     *\r\n     * @param {string} languageCode - code string of the translation package\r\n     * @param {RawTranslationPackage} languagePackage - translation package to be registered\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[ProtectedFunctionTranslationError]] when trying to register translation for protected function\r\n     * @throws [[LanguageAlreadyRegisteredError]] when given language is already registered\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // return registered language\r\n     * HyperFormula.registerLanguage('enUS', enUS);\r\n     * const engine = HyperFormula.buildEmpty({language: 'enUS'});\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static registerLanguage(languageCode, languagePackage) {\r\n        validateArgToType(languageCode, 'string', 'languageCode');\r\n        if (this.registeredLanguages.has(languageCode)) {\r\n            throw new LanguageAlreadyRegisteredError();\r\n        }\r\n        else {\r\n            this.registeredLanguages.set(languageCode, buildTranslationPackage(languagePackage));\r\n        }\r\n    }\r\n    /**\r\n     * Unregisters language that is registered under given code string.\r\n     *\r\n     * @param {string} languageCode - code string of the translation package\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[LanguageNotRegisteredError]] when given language is not registered\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // register the language for the instance\r\n     * HyperFormula.registerLanguage('plPL', plPL);\r\n     *\r\n     * // unregister plPL\r\n     * HyperFormula.unregisterLanguage('plPL');\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static unregisterLanguage(languageCode) {\r\n        validateArgToType(languageCode, 'string', 'languageCode');\r\n        if (this.registeredLanguages.has(languageCode)) {\r\n            this.registeredLanguages.delete(languageCode);\r\n        }\r\n        else {\r\n            throw new LanguageNotRegisteredError();\r\n        }\r\n    }\r\n    /**\r\n     * Returns all registered languages codes.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // should return all registered language codes: ['enGB', 'plPL']\r\n     * const registeredLanguages = HyperFormula.getRegisteredLanguagesCodes();\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static getRegisteredLanguagesCodes() {\r\n        return Array.from(this.registeredLanguages.keys());\r\n    }\r\n    /**\r\n     * Registers all functions in a given plugin with optional translations.\r\n     *\r\n     * Note: FunctionPlugins must be registered prior to the creation of HyperFormula instances in which they are used.\r\n     * HyperFormula instances created prior to the registration of a FunctionPlugin are unable to access the FunctionPlugin.\r\n     * Registering a FunctionPlugin with [[custom-functions]] requires the translations parameter.\r\n     *\r\n     * @param {FunctionPluginDefinition} plugin - plugin class\r\n     * @param {FunctionTranslationsPackage} translations - optional package of function names translations\r\n     *\r\n     * @throws [[FunctionPluginValidationError]] when plugin class definition is not consistent with metadata\r\n     * @throws [[ProtectedFunctionTranslationError]] when trying to register translation for protected function\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // import your own plugin\r\n     * import { MyExamplePlugin } from './file_with_your_plugin';\r\n     *\r\n     * // register the plugin\r\n     * HyperFormula.registerFunctionPlugin(MyExamplePlugin);\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static registerFunctionPlugin(plugin, translations) {\r\n        FunctionRegistry.registerFunctionPlugin(plugin, translations);\r\n    }\r\n    /**\r\n     * Unregisters all functions defined in given plugin.\r\n     *\r\n     * Note: This method does not affect the existing HyperFormula instances.\r\n     *\r\n     * @param {FunctionPluginDefinition} plugin - plugin class\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // get the class of a plugin\r\n     * const registeredPluginClass = HyperFormula.getFunctionPlugin('EXAMPLE');\r\n     *\r\n     * // unregister all functions defined in a plugin of ID 'EXAMPLE'\r\n     * HyperFormula.unregisterFunctionPlugin(registeredPluginClass);\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static unregisterFunctionPlugin(plugin) {\r\n        FunctionRegistry.unregisterFunctionPlugin(plugin);\r\n    }\r\n    /**\r\n     * Registers a function with a given id if such exists in a plugin.\r\n     *\r\n     * Note: This method does not affect the existing HyperFormula instances.\r\n     *\r\n     * @param {string} functionId - function id, e.g. 'SUMIF'\r\n     * @param {FunctionPluginDefinition} plugin - plugin class\r\n     * @param translations\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[FunctionPluginValidationError]] when function with a given id does not exist in plugin or plugin class definition is not consistent with metadata\r\n     * @throws [[ProtectedFunctionTranslationError]] when trying to register translation for protected function\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // import your own plugin\r\n     * import { MyExamplePlugin } from './file_with_your_plugin';\r\n     *\r\n     * // register a function\r\n     * HyperFormula.registerFunction('EXAMPLE', MyExamplePlugin);\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static registerFunction(functionId, plugin, translations) {\r\n        validateArgToType(functionId, 'string', 'functionId');\r\n        FunctionRegistry.registerFunction(functionId, plugin, translations);\r\n    }\r\n    /**\r\n     * Unregisters a function with a given id.\r\n     *\r\n     * Note: This method does not affect the existing HyperFormula instances.\r\n     *\r\n     * @param {string} functionId - function id, e.g. 'SUMIF'\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // import your own plugin\r\n     * import { MyExamplePlugin } from './file_with_your_plugin';\r\n     *\r\n     * // register a function\r\n     * HyperFormula.registerFunction('EXAMPLE', MyExamplePlugin);\r\n     *\r\n     * // unregister a function\r\n     * HyperFormula.unregisterFunction('EXAMPLE');\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static unregisterFunction(functionId) {\r\n        validateArgToType(functionId, 'string', 'functionId');\r\n        FunctionRegistry.unregisterFunction(functionId);\r\n    }\r\n    /**\r\n     * Clears function registry.\r\n     *\r\n     * Note: This method does not affect the existing HyperFormula instances.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * HyperFormula.unregisterAllFunctions();\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static unregisterAllFunctions() {\r\n        FunctionRegistry.unregisterAll();\r\n    }\r\n    /**\r\n     * Returns translated names of all registered functions for a given language\r\n     *\r\n     * @param {string} code - language code\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // return a list of function names registered for enGB\r\n     * const allNames = HyperFormula.getRegisteredFunctionNames('enGB');\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static getRegisteredFunctionNames(code) {\r\n        validateArgToType(code, 'string', 'code');\r\n        const functionIds = FunctionRegistry.getRegisteredFunctionIds();\r\n        const language = this.getLanguage(code);\r\n        return language.getFunctionTranslations(functionIds);\r\n    }\r\n    /**\r\n     * Returns class of a plugin used by function with given id\r\n     *\r\n     * @param {string} functionId - id of a function, e.g. 'SUMIF'\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // import your own plugin\r\n     * import { MyExamplePlugin } from './file_with_your_plugin';\r\n     *\r\n     * // register a plugin\r\n     * HyperFormula.registerFunctionPlugin(MyExamplePlugin);\r\n     *\r\n     * // return the class of a given plugin\r\n     * const myFunctionClass = HyperFormula.getFunctionPlugin('EXAMPLE');\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static getFunctionPlugin(functionId) {\r\n        validateArgToType(functionId, 'string', 'functionId');\r\n        return FunctionRegistry.getFunctionPlugin(functionId);\r\n    }\r\n    /**\r\n     * Returns classes of all plugins registered in HyperFormula.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // return classes of all plugins\r\n     * const allClasses = HyperFormula.getAllFunctionPlugins();\r\n     * ```\r\n     *\r\n     * @category Static Methods\r\n     */\r\n    static getAllFunctionPlugins() {\r\n        return FunctionRegistry.getPlugins();\r\n    }\r\n    static buildFromEngineState(engine) {\r\n        return new HyperFormula(engine.config, engine.stats, engine.dependencyGraph, engine.columnSearch, engine.parser, engine.unparser, engine.cellContentParser, engine.evaluator, engine.lazilyTransformingAstService, engine.crudOperations, engine.exporter, engine.namedExpressions, engine.serialization, engine.functionRegistry);\r\n    }\r\n    /**\r\n     * Returns the cell value of a given address.\r\n     * Applies rounding and post-processing.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] when cellAddress is of incorrect type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2, 3)', '2'],\r\n     * ]);\r\n     *\r\n     * // get value of A1 cell, should be '6'\r\n     * const A1Value = hfInstance.getCellValue({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // get value of B1 cell, should be '2'\r\n     * const B1Value = hfInstance.getCellValue({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellValue(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return this._serialization.getCellValue(cellAddress);\r\n    }\r\n    /**\r\n     * Returns a normalized formula string from the cell of a given address or `undefined` for an address that does not exist and empty values.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] when cellAddress is of incorrect type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2, 3)', '0'],\r\n     * ]);\r\n     *\r\n     * // should return a normalized A1 cell formula: '=SUM(1, 2, 3)'\r\n     * const A1Formula = hfInstance.getCellFormula({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return a normalized B1 cell formula: 'undefined'\r\n     * const B1Formula = hfInstance.getCellFormula({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellFormula(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        return this._serialization.getCellFormula(cellAddress);\r\n    }\r\n    /**\r\n     * Returns [[RawCellContent]] with a serialized content of the cell of a given address: either a cell formula, an explicit value, or an error.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[ExpectedValueOfTypeError]] when cellAddress is of incorrect type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2, 3)', '0'],\r\n     * ]);\r\n     *\r\n     * // should return serialized content of A1 cell: '=SUM(1, 2, 3)'\r\n     * const cellA1Serialized = hfInstance.getCellSerialized({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return serialized content of B1 cell: '0'\r\n     * const cellB1Serialized = hfInstance.getCellSerialized({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellSerialized(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return this._serialization.getCellSerialized(cellAddress);\r\n    }\r\n    /**\r\n     * Returns an array of arrays of [[CellValue]] with values of all cells from [[Sheet]].\r\n     * Applies rounding and post-processing.\r\n     *\r\n     * @param {number} sheetId - sheet ID number\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['0', '=SUM(1, 2, 3)', '=A1'],\r\n     *  ['1', '=TEXT(A2, \"0.0%\")', '=C1'],\r\n     *  ['2', '=SUM(A1:C1)', '=C1'],\r\n     * ]);\r\n     *\r\n     * // should return all values of a sheet: [[0, 6, 0], [1, '1.0%', 0], [2, 6, 0]]\r\n     * const sheetValues = hfInstance.getSheetValues(0);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetValues(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return this._serialization.getSheetValues(sheetId);\r\n    }\r\n    /**\r\n     * Returns an array with normalized formula strings from [[Sheet]] or `undefined` for a cells that have no value.\r\n     *\r\n     * @param {SimpleCellAddress} sheetId - sheet ID number\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['0', '=SUM(1, 2, 3)', '=A1'],\r\n     *  ['1', '=TEXT(A2, \"0.0%\")', '=C1'],\r\n     *  ['2', '=SUM(A1:C1)', '=C1'],\r\n     * ]);\r\n     *\r\n     * // should return all formulas of a sheet:\r\n     * // [\r\n     * //  [undefined, '=SUM(1, 2, 3)', '=A1'],\r\n     * //  [undefined, '=TEXT(A2, \"0.0%\")', '=C1'],\r\n     * //  [undefined, '=SUM(A1:C1)', '=C1'],\r\n     * // ];\r\n     * const sheetFormulas = hfInstance.getSheetFormulas(0);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetFormulas(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return this._serialization.getSheetFormulas(sheetId);\r\n    }\r\n    /**\r\n     * Returns an array of arrays of [[RawCellContent]] with serialized content of cells from [[Sheet]], either a cell formula or an explicit value.\r\n     *\r\n     * @param {SimpleCellAddress} sheetId - sheet ID number\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['0', '=SUM(1, 2, 3)', '=A1'],\r\n     *  ['1', '=TEXT(A2, \"0.0%\")', '=C1'],\r\n     *  ['2', '=SUM(A1:C1)', '=C1'],\r\n     * ]);\r\n     *\r\n     * // should return:\r\n     * // [\r\n     * //  ['0', '=SUM(1, 2, 3)', '=A1'],\r\n     * //  ['1', '=TEXT(A2, \"0.0%\")', '=C1'],\r\n     * //  ['2', '=SUM(A1:C1)', '=C1'],\r\n     * // ];\r\n     * const serializedContent = hfInstance.getSheetSerialized(0);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetSerialized(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return this._serialization.getSheetSerialized(sheetId);\r\n    }\r\n    /**\r\n     * Returns a map containing dimensions of all sheets for the engine instance represented as a key-value pairs where keys are sheet IDs and dimensions are returned as numbers, width and height respectively.\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *   Sheet1: [\r\n     *    ['1', '2', '=Sheet2!$A1'],\r\n     *   ],\r\n     *   Sheet2: [\r\n     *    ['3'],\r\n     *    ['4'],\r\n     *   ],\r\n     * });\r\n     *\r\n     * // should return the dimensions of all sheets:\r\n     * // { Sheet1: { width: 3, height: 1 }, Sheet2: { width: 1, height: 2 } }\r\n     * const allSheetsDimensions = hfInstance.getAllSheetsDimensions();\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getAllSheetsDimensions() {\r\n        return this._serialization.genericAllSheetsGetter((arg) => this.getSheetDimensions(arg));\r\n    }\r\n    /**\r\n     * Returns dimensions of a specified sheet.\r\n     * The sheet dimensions is represented with numbers: width and height.\r\n     *\r\n     * @param {number} sheetId - sheet ID number\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *    ['1', '2', '=Sheet2!$A1'],\r\n     * ]);\r\n     *\r\n     * // should return provided sheet's dimensions: { width: 3, height: 1 }\r\n     * const sheetDimensions = hfInstance.getSheetDimensions(0);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetDimensions(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return {\r\n            width: this.dependencyGraph.getSheetWidth(sheetId),\r\n            height: this.dependencyGraph.getSheetHeight(sheetId),\r\n        };\r\n    }\r\n    /**\r\n     * Returns values of all sheets in a form of an object which property keys are strings and values are 2D arrays of [[CellValue]].\r\n     *\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '=A1+10', '3'],\r\n     * ]);\r\n     *\r\n     * // should return all sheets values: { Sheet1: [ [ 1, 11, 3 ] ] }\r\n     * const allSheetsValues = hfInstance.getAllSheetsValues();\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getAllSheetsValues() {\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return this._serialization.getAllSheetsValues();\r\n    }\r\n    /**\r\n     * Returns formulas of all sheets in a form of an object which property keys are strings and values are 2D arrays of strings or possibly `undefined` when the call does not contain a formula.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2', '=A1+10'],\r\n     * ]);\r\n     *\r\n     * // should return only formulas: { Sheet1: [ [ undefined, undefined, '=A1+10' ] ] }\r\n     * const allSheetsFormulas = hfInstance.getAllSheetsFormulas();\r\n     * ```\r\n     * @category Sheets\r\n     */\r\n    getAllSheetsFormulas() {\r\n        return this._serialization.getAllSheetsFormulas();\r\n    }\r\n    /**\r\n     * Returns formulas or values of all sheets in a form of an object which property keys are strings and values are 2D arrays of [[RawCellContent]].\r\n     *\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2', '=A1+10'],\r\n     * ]);\r\n     *\r\n     * // should return all sheets serialized content: { Sheet1: [ [ 1, 2, '=A1+10' ] ] }\r\n     * const allSheetsSerialized = hfInstance.getAllSheetsSerialized();\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getAllSheetsSerialized() {\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return this._serialization.getAllSheetsSerialized();\r\n    }\r\n    /**\r\n     * Updates the config with given new metadata.\r\n     *\r\n     * @param {Partial<ConfigParams>} newParams configuration options to be updated or added\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] when some parameters of config are of wrong type (e.g. currencySymbol)\r\n     * @throws [[ConfigValueEmpty]] when some parameters of config are of invalid value (e.g. currencySymbol)\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // add a config param, for example maxColumns,\r\n     * // you can check the configuration with getConfig method\r\n     * hfInstance.updateConfig({ maxColumns: 1000 });\r\n     * ```\r\n     *\r\n     * @category Instance\r\n     */\r\n    updateConfig(newParams) {\r\n        const newConfig = this._config.mergeConfig(newParams);\r\n        const configNewLanguage = this._config.mergeConfig({ language: newParams.language });\r\n        const serializedSheets = this._serialization.withNewConfig(configNewLanguage, this._namedExpressions).getAllSheetsSerialized();\r\n        const serializedNamedExpressions = this._serialization.getAllNamedExpressionsSerialized();\r\n        const newEngine = BuildEngineFactory.rebuildWithConfig(newConfig, serializedSheets, serializedNamedExpressions, this._stats);\r\n        this._config = newEngine.config;\r\n        this._stats = newEngine.stats;\r\n        this._dependencyGraph = newEngine.dependencyGraph;\r\n        this._columnSearch = newEngine.columnSearch;\r\n        this._parser = newEngine.parser;\r\n        this._unparser = newEngine.unparser;\r\n        this._cellContentParser = newEngine.cellContentParser;\r\n        this._evaluator = newEngine.evaluator;\r\n        this._lazilyTransformingAstService = newEngine.lazilyTransformingAstService;\r\n        this._crudOperations = newEngine.crudOperations;\r\n        this._exporter = newEngine.exporter;\r\n        this._namedExpressions = newEngine.namedExpressions;\r\n        this._serialization = newEngine.serialization;\r\n        this._functionRegistry = newEngine.functionRegistry;\r\n    }\r\n    /**\r\n     * Returns current configuration of the engine instance.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // should return all config metadata including default and those which were added\r\n     * const hfConfig = hfInstance.getConfig();\r\n     * ```\r\n     *\r\n     * @category Instance\r\n     */\r\n    getConfig() {\r\n        return this._config.getConfig();\r\n    }\r\n    /**\r\n     * Rebuilds the HyperFormula instance preserving the current sheets data.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * hfInstance.rebuildAndRecalculate();\r\n     * ```\r\n     *\r\n     * @category Instance\r\n     */\r\n    rebuildAndRecalculate() {\r\n        this.updateConfig({});\r\n    }\r\n    /**\r\n     * Returns a snapshot of computation time statistics.\r\n     * It returns a map with key-value pairs where keys are enums for stat type and time (number).\r\n     *\r\n     * @internal\r\n     *\r\n     * @category Instance\r\n     */\r\n    getStats() {\r\n        return this._stats.snapshot();\r\n    }\r\n    /**\r\n     * Undo the previous operation.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoOperationToUndoError]] when there is no operation running that can be undone\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     *  ['3', ''],\r\n     * ]);\r\n     *\r\n     * // perform CRUD operation, for example remove the second row\r\n     * hfInstance.removeRows(0, [1, 1]);\r\n     *\r\n     * // undo the operation, it should return the changes\r\n     * const changes = hfInstance.undo();\r\n     * ```\r\n     *\r\n     * @category Undo and Redo\r\n     */\r\n    undo() {\r\n        this._crudOperations.undo();\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Re-do recently undone operation.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoOperationToRedoError]] when there is no operation running that can be re-done\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     *  ['3'],\r\n     * ]);\r\n     *\r\n     * // perform CRUD operation, for example remove the second row\r\n     * hfInstance.removeRows(0, [1, 1]);\r\n     *\r\n     * // undo the operation, it should return previous values: [['1'], ['2'], ['3']]\r\n     * hfInstance.undo();\r\n     *\r\n     * // do a redo, it should return the values after removing the second row: [['1'], ['3']]\r\n     * const changes = hfInstance.redo();\r\n     * ```\r\n     *\r\n     * @category Undo and Redo\r\n     */\r\n    redo() {\r\n        this._crudOperations.redo();\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Checks if there is at least one operation that can be undone.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     *  ['3'],\r\n     * ]);\r\n     *\r\n     * // perform CRUD operation, for example remove the second row\r\n     * hfInstance.removeRows(0, [1, 1]);\r\n     *\r\n     * // should return 'true', it is possible to undo last operation\r\n     * // which is removing rows in this example\r\n     * const isSomethingToUndo = hfInstance.isThereSomethingToUndo();\r\n     * ```\r\n     *\r\n     * @category Undo and Redo\r\n     */\r\n    isThereSomethingToUndo() {\r\n        return this._crudOperations.isThereSomethingToUndo();\r\n    }\r\n    /**\r\n     * Checks if there is at least one operation that can be re-done.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * hfInstance.undo();\r\n     *\r\n     * // when there is an action to redo, this returns 'true'\r\n     * const isSomethingToRedo = hfInstance.isThereSomethingToRedo();\r\n     * ```\r\n     *\r\n     * @category Undo and Redo\r\n     */\r\n    isThereSomethingToRedo() {\r\n        return this._crudOperations.isThereSomethingToRedo();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to change the content in a rectangular area bounded by the box.\r\n     * If returns `true`, doing [[setCellContents]] operation won't throw any errors.\r\n     * Returns `false` if the address is invalid or the sheet does not exist.\r\n     *\r\n     * @param {SimpleCellAddress | SimpleCellRange} address - single cell or block of cells to check\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // top left corner\r\n     * const address1 = { col: 0, row: 0, sheet: 0 };\r\n     * // bottom right corner\r\n     * const address2 = { col: 1, row: 0, sheet: 0 };\r\n     *\r\n     * // should return 'true' for this example, it is possible to set content of\r\n     * // width 2, height 1 in the first row and column of sheet 0\r\n     * const isSettable = hfInstance.isItPossibleToSetCellContents({ start: address1, end: address2 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    isItPossibleToSetCellContents(address) {\r\n        let range;\r\n        if (isSimpleCellAddress(address)) {\r\n            range = new AbsoluteCellRange(address, address);\r\n        }\r\n        else if (isSimpleCellRange(address)) {\r\n            range = new AbsoluteCellRange(address.start, address.end);\r\n        }\r\n        else {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress | SimpleCellRange', 'address');\r\n        }\r\n        try {\r\n            this._crudOperations.ensureRangeInSizeLimits(range);\r\n            for (const it of range.addresses(this._dependencyGraph)) {\r\n                this._crudOperations.ensureItIsPossibleToChangeContent(it);\r\n            }\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Sets the content for a block of cells of a given coordinates.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {SimpleCellAddress} topLeftCornerAddress - top left corner of block of cells\r\n     * @param {(RawCellContent[][]|RawCellContent)} cellContents - array with content\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when the value is not an array of arrays or a raw cell value\r\n     * @throws [[SheetSizeLimitExceededError]] when performing this operation would result in sheet size limits exceeding\r\n     * @throws [[ExpectedValueOfTypeError]] if topLeftCornerAddress argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2', '=A1'],\r\n     * ]);\r\n     *\r\n     * // should set the content, returns:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 3, row: 0 },\r\n     * //   newValue: 2,\r\n     * // }]\r\n     * const changes = hfInstance.setCellContents({ col: 3, row: 0, sheet: 0 }, [['=B1']]);\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    setCellContents(topLeftCornerAddress, cellContents) {\r\n        this._crudOperations.setCellContents(topLeftCornerAddress, cellContents);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Reorders rows of a sheet according to a source-target mapping.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {[number, number][]} rowMapping - array mapping original positions to final positions of rows\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when rowMapping does not define correct row permutation for some subset of rows of the given sheet\r\n     * @throws [[SourceLocationHasArrayError]] when the selected position has array inside\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  [1],\r\n     *  [2],\r\n     *  [4, 5],\r\n     * ]);\r\n     *\r\n     * // should set swap rows 0 and 2 in place, returns:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 0, row: 2 },\r\n     * //   newValue: 1,\r\n     * // },\r\n     * // {\r\n     * //   address: { sheet: 0, col: 1, row: 2 },\r\n     * //   newValue: null,\r\n     * // },\r\n     * // {\r\n     * //   address: { sheet: 0, col: 0, row: 0 },\r\n     * //   newValue: 4,\r\n     * // },\r\n     * // {\r\n     * //   address: { sheet: 0, col: 1, row: 0 },\r\n     * //   newValue: 5,\r\n     * // }]\r\n     * const changes = hfInstance.swapRowIndexes(0, [[0, 2], [2, 0]]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    swapRowIndexes(sheetId, rowMapping) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.setRowOrder(sheetId, rowMapping);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Checks if it is possible to reorder rows of a sheet according to a source-target mapping.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {[number, number][]} rowMapping - array mapping original positions to final positions of rows\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  [1],\r\n     *  [2],\r\n     *  [4, 5],\r\n     * ]);\r\n     *\r\n     * // returns true\r\n     * const isSwappable = hfInstance.isItPossibleToSwapRowIndexes(0, [[0, 2], [2, 0]]);\r\n     *\r\n     * // returns false\r\n     * const isSwappable = hfInstance.isItPossibleToSwapRowIndexes(0, [[0, 1]]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    isItPossibleToSwapRowIndexes(sheetId, rowMapping) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            this._crudOperations.validateSwapRowIndexes(sheetId, rowMapping);\r\n            this._crudOperations.testRowOrderForArrays(sheetId, rowMapping);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Reorders rows of a sheet according to a permutation of 0-based indexes.\r\n     * Parameter `newRowOrder` should have a form `[ newPositionForRow0, newPositionForRow1, newPositionForRow2, ... ]`.\r\n     * This method might be used to [sort the rows of a sheet](../../guide/sorting-data.md).\r\n     *\r\n     * Note: This method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {number[]} newRowOrder - permutation of rows\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when rowMapping does not define correct row permutation for some subset of rows of the given sheet\r\n     * @throws [[SourceLocationHasArrayError]] when the selected position has array inside\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['A'],\r\n     *  ['B'],\r\n     *  ['C'],\r\n     *  ['D']\r\n     * ]);\r\n     *\r\n     * const newRowOrder = [0, 3, 2, 1]; // [ newPosForA, newPosForB, newPosForC, newPosForD ]\r\n     *\r\n     * const changes = hfInstance.setRowOrder(0, newRowOrder);\r\n     *\r\n     * // Sheet after this operation: [['A'], ['D'], ['C'], ['B']]\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    setRowOrder(sheetId, newRowOrder) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const mapping = this._crudOperations.mappingFromOrder(sheetId, newRowOrder, 'row');\r\n        return this.swapRowIndexes(sheetId, mapping);\r\n    }\r\n    /**\r\n     * Checks if it is possible to reorder rows of a sheet according to a permutation.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {number[]} newRowOrder - permutation of rows\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  [1],\r\n     *  [2],\r\n     *  [4, 5],\r\n     * ]);\r\n     *\r\n     * // returns true\r\n     * hfInstance.isItPossibleToSetRowOrder(0, [2, 1, 0]);\r\n     *\r\n     * // returns false\r\n     * hfInstance.isItPossibleToSetRowOrder(0, [2]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    isItPossibleToSetRowOrder(sheetId, newRowOrder) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            const rowMapping = this._crudOperations.mappingFromOrder(sheetId, newRowOrder, 'row');\r\n            this._crudOperations.validateSwapRowIndexes(sheetId, rowMapping);\r\n            this._crudOperations.testRowOrderForArrays(sheetId, rowMapping);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Reorders columns of a sheet according to a source-target mapping.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {[number, number][]} columnMapping - array mapping original positions to final positions of columns\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when columnMapping does not define correct column permutation for some subset of columns of the given sheet\r\n     * @throws [[SourceLocationHasArrayError]] when the selected position has array inside\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  [1, 2, 4],\r\n     *  [5]\r\n     * ]);\r\n     *\r\n     * // should set swap columns 0 and 2 in place, returns:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 2, row: 0 },\r\n     * //   newValue: 1,\r\n     * // },\r\n     * // {\r\n     * //   address: { sheet: 0, col: 2, row: 1 },\r\n     * //   newValue: 5,\r\n     * // },\r\n     * // {\r\n     * //   address: { sheet: 0, col: 0, row: 0 },\r\n     * //   newValue: 4,\r\n     * // },\r\n     * // {\r\n     * //   address: { sheet: 0, col: 0, row: 1 },\r\n     * //   newValue: null,\r\n     * // }]\r\n     * const changes = hfInstance.swapColumnIndexes(0, [[0, 2], [2, 0]]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    swapColumnIndexes(sheetId, columnMapping) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.setColumnOrder(sheetId, columnMapping);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Checks if it is possible to reorder columns of a sheet according to a source-target mapping.\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  [1, 2, 4],\r\n     *  [5]\r\n     * ]);\r\n     *\r\n     * // returns true\r\n     * hfInstance.isItPossibleToSwapColumnIndexes(0, [[0, 2], [2, 0]]);\r\n     *\r\n     * // returns false\r\n     * hfInstance.isItPossibleToSwapColumnIndexes(0, [[0, 1]]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    isItPossibleToSwapColumnIndexes(sheetId, columnMapping) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            this._crudOperations.validateSwapColumnIndexes(sheetId, columnMapping);\r\n            this._crudOperations.testColumnOrderForArrays(sheetId, columnMapping);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Reorders columns of a sheet according to a permutation of 0-based indexes.\r\n     * Parameter `newColumnOrder` should have a form `[ newPositionForColumn0, newPositionForColumn1, newPositionForColumn2, ... ]`.\r\n     * This method might be used to [sort the columns of a sheet](../../guide/sorting-data.md).\r\n     *\r\n     * Note: This method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {number[]} newColumnOrder - permutation of columns\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when columnMapping does not define correct column permutation for some subset of columns of the given sheet\r\n     * @throws [[SourceLocationHasArrayError]] when the selected position has array inside\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   ['A', 'B', 'C', 'D']\r\n     * ]);\r\n     *\r\n     * const newColumnOrder = [0, 3, 2, 1]; // [ newPosForA, newPosForB, newPosForC, newPosForD ]\r\n     *\r\n     * const changes = hfInstance.setColumnOrder(0, newColumnOrder);\r\n     *\r\n     * // Sheet after this operation: [['A', 'D', 'C', 'B']]\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    setColumnOrder(sheetId, newColumnOrder) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const mapping = this._crudOperations.mappingFromOrder(sheetId, newColumnOrder, 'column');\r\n        return this.swapColumnIndexes(sheetId, mapping);\r\n    }\r\n    /**\r\n     * Checks if it is possible to reorder columns of a sheet according to a permutation.\r\n     *\r\n     * @param {number} sheetId - ID of a sheet to operate on\r\n     * @param {number[]} newColumnOrder - permutation of columns\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  [1, 2, 4],\r\n     *  [5]\r\n     * ]);\r\n     *\r\n     * // returns true\r\n     * hfInstance.isItPossibleToSetColumnOrder(0, [2, 1, 0]);\r\n     *\r\n     * // returns false\r\n     * hfInstance.isItPossibleToSetColumnOrder(0, [1]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    isItPossibleToSetColumnOrder(sheetId, newColumnOrder) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            const columnMapping = this._crudOperations.mappingFromOrder(sheetId, newColumnOrder, 'column');\r\n            this._crudOperations.validateSwapColumnIndexes(sheetId, columnMapping);\r\n            this._crudOperations.testColumnOrderForArrays(sheetId, columnMapping);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to add rows into a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that addRows can be called.\r\n     * If returns `true`, doing [[addRows]] operation won't throw any errors.\r\n     * Returns `false` if adding rows would exceed the sheet size limit or given arguments are invalid.\r\n     *\r\n     * @param {number} sheetId - sheet ID in which rows will be added\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format [row, amount], where row is a row number above which the rows will be added\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2', '3'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example,\r\n     * // it is possible to add one row in the second row of sheet 0\r\n     * const isAddable = hfInstance.isItPossibleToAddRows(0, [1, 1]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    isItPossibleToAddRows(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const normalizedIndexes = normalizeAddedIndexes(indexes);\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToAddRows(sheetId, ...normalizedIndexes);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Adds multiple rows into a specified position in a given sheet.\r\n     * Does nothing if rows are outside effective sheet size.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - sheet ID in which rows will be added\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format [row, amount], where row is a row number above which the rows will be added\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[SheetSizeLimitExceededError]] when performing this operation would result in sheet size limits exceeding\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     * ]);\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values\r\n     * const changes = hfInstance.addRows(0, [0, 1]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    addRows(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.addRows(sheetId, ...indexes);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to remove rows from a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that removeRows can be called.\r\n     * If returns `true`, doing [[removeRows]] operation won't throw any errors.\r\n     * Returns `false` if given arguments are invalid.\r\n     *\r\n     * @param {number} sheetId - sheet ID from which rows will be removed\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format: [row, amount]\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example\r\n     * // it is possible to remove one row from row 1 of sheet 0\r\n     * const isRemovable = hfInstance.isItPossibleToRemoveRows(0, [1, 1]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    isItPossibleToRemoveRows(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const normalizedIndexes = normalizeRemovedIndexes(indexes);\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToRemoveRows(sheetId, ...normalizedIndexes);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Removes multiple rows from a specified position in a given sheet.\r\n     * Does nothing if rows are outside the effective sheet size.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - sheet ID from which rows will be removed\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format: [row, amount]\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[InvalidArgumentsError]] when the given arguments are invalid\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     * ]);\r\n     *\r\n     * // should return: [{ sheet: 0, col: 1, row: 2, value: null }] for this example\r\n     * const changes = hfInstance.removeRows(0, [1, 1]);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    removeRows(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.removeRows(sheetId, ...indexes);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to add columns into a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that addColumns can be called.\r\n     * If returns `true`, doing [[addColumns]] operation won't throw any errors.\r\n     * Returns `false` if adding columns would exceed the sheet size limit or given arguments are invalid.\r\n     *\r\n     * @param {number} sheetId - sheet ID in which columns will be added\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format: [column, amount], where column is a column number from which new columns will be added\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example,\r\n     * // it is possible to add 1 column in sheet 0, at column 1\r\n     * const isAddable = hfInstance.isItPossibleToAddColumns(0, [1, 1]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    isItPossibleToAddColumns(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const normalizedIndexes = normalizeAddedIndexes(indexes);\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToAddColumns(sheetId, ...normalizedIndexes);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Adds multiple columns into a specified position in a given sheet.\r\n     * Does nothing if the columns are outside the effective sheet size.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - sheet ID in which columns will be added\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format: [column, amount], where column is a column number from which new columns will be added\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when the given arguments are invalid\r\n     * @throws [[SheetSizeLimitExceededError]] when performing this operation would result in sheet size limits exceeding\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=RAND()', '42'],\r\n     * ]);\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values, for this example:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 1, row: 0 },\r\n     * //   newValue: 0.92754862796338,\r\n     * // }]\r\n     * const changes = hfInstance.addColumns(0, [0, 1]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    addColumns(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.addColumns(sheetId, ...indexes);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to remove columns from a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that removeColumns can be called.\r\n     * If returns `true`, doing [[removeColumns]] operation won't throw any errors.\r\n     * Returns `false` if given arguments are invalid.\r\n     *\r\n     * @param {number} sheetId - sheet ID from which columns will be removed\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format [column, amount]\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example\r\n     * // it is possible to remove one column, in place of the second column of sheet 0\r\n     * const isRemovable = hfInstance.isItPossibleToRemoveColumns(0, [1, 1]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    isItPossibleToRemoveColumns(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const normalizedIndexes = normalizeRemovedIndexes(indexes);\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToRemoveColumns(sheetId, ...normalizedIndexes);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Removes multiple columns from a specified position in a given sheet.\r\n     * Does nothing if columns are outside the effective sheet size.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - sheet ID from which columns will be removed\r\n     * @param {ColumnRowIndex[]} indexes - non-contiguous indexes with format: [column, amount]\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when the given arguments are invalid\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['0', '=SUM(1, 2, 3)', '=A1'],\r\n     * ]);\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values, in this example it will return:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 1, row: 0 },\r\n     * //   newValue: { error: [CellError], value: '#REF!' },\r\n     * // }]\r\n     * const changes = hfInstance.removeColumns(0, [0, 1]);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    removeColumns(sheetId, ...indexes) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.removeColumns(sheetId, ...indexes);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to move cells to a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that moveCells can be called.\r\n     * If returns `true`, doing [[moveCells]] operation won't throw any errors.\r\n     * Returns `false` if the operation might be disrupted and causes side effects by the fact that there is an array inside the selected columns, the target location includes an array or the provided address is invalid.\r\n     *\r\n     * @param {SimpleCellRange} source - range for a moved block\r\n     * @param {SimpleCellAddress} destinationLeftCorner - upper left address of the target cell block\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if destinationLeftCorner, source, or any of basic type arguments are of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // choose the coordinates and assign them to variables\r\n     * const source = { sheet: 0, col: 1, row: 0 };\r\n     * const destination = { sheet: 0, col: 3, row: 0 };\r\n     *\r\n     * // should return 'true' for this example\r\n     * // it is possible to move a block of width 1 and height 1\r\n     * // from the corner: column 1 and row 0 of sheet 0\r\n     * // into destination corner: column 3, row 0 of sheet 0\r\n     * const isMovable = hfInstance.isItPossibleToMoveCells({ start: source, end: source }, destination);\r\n     * ```\r\n     * @category Cells\r\n     */\r\n    isItPossibleToMoveCells(source, destinationLeftCorner) {\r\n        if (!isSimpleCellAddress(destinationLeftCorner)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'destinationLeftCorner');\r\n        }\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        try {\r\n            const range = new AbsoluteCellRange(source.start, source.end);\r\n            this._crudOperations.operations.ensureItIsPossibleToMoveCells(range.start, range.width(), range.height(), destinationLeftCorner);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Moves the content of a cell block from source to the target location.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {SimpleCellRange} source - range for a moved block\r\n     * @param {SimpleCellAddress} destinationLeftCorner - upper left address of the target cell block\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if destinationLeftCorner or source are of wrong type\r\n     * @throws [[InvalidArgumentsError]] when the given arguments are invalid\r\n     * @throws [[SheetSizeLimitExceededError]] when performing this operation would result in sheet size limits exceeding\r\n     * @throws [[SourceLocationHasArrayError]] when the source location has array inside - array cannot be moved\r\n     * @throws [[TargetLocationHasArrayError]] when the target location has array inside - cells cannot be replaced by the array\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=RAND()', '42'],\r\n     * ]);\r\n     *\r\n     * // choose the coordinates and assign them to variables\r\n     * const source = { sheet: 0, col: 1, row: 0 };\r\n     * const destination = { sheet: 0, col: 3, row: 0 };\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values, for this example:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 0, row: 0 },\r\n     * //   newValue: 0.93524248002062,\r\n     * // }]\r\n     * const changes = hfInstance.moveCells({ start: source, end: source }, destination);\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    moveCells(source, destinationLeftCorner) {\r\n        if (!isSimpleCellAddress(destinationLeftCorner)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'destinationLeftCorner');\r\n        }\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        const range = new AbsoluteCellRange(source.start, source.end);\r\n        this._crudOperations.moveCells(range.start, range.width(), range.height(), destinationLeftCorner);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to move a particular number of rows to a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that moveRows can be called.\r\n     * If returns `true`, doing [[moveRows]] operation won't throw any errors.\r\n     * Returns `false` if the operation might be disrupted and causes side effects by the fact that there is an array inside the selected rows, the target location includes an array or the provided address is invalid.\r\n     *\r\n     * @param {number} sheetId - a sheet number in which the operation will be performed\r\n     * @param {number} startRow - number of the first row to move\r\n     * @param {number} numberOfRows - number of rows to move\r\n     * @param {number} targetRow - row number before which rows will be moved\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example\r\n     * // it is possible to move one row from row 0 into row 2\r\n     * const isMovable = hfInstance.isItPossibleToMoveRows(0, 0, 1, 2);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    isItPossibleToMoveRows(sheetId, startRow, numberOfRows, targetRow) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        validateArgToType(startRow, 'number', 'startRow');\r\n        validateArgToType(numberOfRows, 'number', 'numberOfRows');\r\n        validateArgToType(targetRow, 'number', 'targetRow');\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToMoveRows(sheetId, startRow, numberOfRows, targetRow);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Moves a particular number of rows to a specified position in a given sheet.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - a sheet number in which the operation will be performed\r\n     * @param {number} startRow - number of the first row to move\r\n     * @param {number} numberOfRows - number of rows to move\r\n     * @param {number} targetRow - row number before which rows will be moved\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[InvalidArgumentsError]] when the given arguments are invalid\r\n     * @throws [[SourceLocationHasArrayError]] when the source location has array inside - array cannot be moved\r\n     * @throws [[TargetLocationHasArrayError]] when the target location has array inside - cells cannot be replaced by the array\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1'],\r\n     *  ['2'],\r\n     * ]);\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values\r\n     * const changes = hfInstance.moveRows(0, 0, 1, 2);\r\n     * ```\r\n     *\r\n     * @category Rows\r\n     */\r\n    moveRows(sheetId, startRow, numberOfRows, targetRow) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        validateArgToType(startRow, 'number', 'startRow');\r\n        validateArgToType(numberOfRows, 'number', 'numberOfRows');\r\n        validateArgToType(targetRow, 'number', 'targetRow');\r\n        this._crudOperations.moveRows(sheetId, startRow, numberOfRows, targetRow);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to move a particular number of columns to a specified position in a given sheet.\r\n     * Checks against particular rules to ascertain that moveColumns can be called.\r\n     * If returns `true`, doing [[moveColumns]] operation won't throw any errors.\r\n     * Returns `false` if the operation might be disrupted and causes side effects by the fact that there is an array inside the selected columns, the target location includes an array or the provided address is invalid.\r\n     *\r\n     * @param {number} sheetId - a sheet number in which the operation will be performed\r\n     * @param {number} startColumn - number of the first column to move\r\n     * @param {number} numberOfColumns - number of columns to move\r\n     * @param {number} targetColumn - column number before which columns will be moved\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example\r\n     * // it is possible to move one column from column 1 into column 2 of sheet 0\r\n     * const isMovable = hfInstance.isItPossibleToMoveColumns(0, 1, 1, 2);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    isItPossibleToMoveColumns(sheetId, startColumn, numberOfColumns, targetColumn) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        validateArgToType(startColumn, 'number', 'startColumn');\r\n        validateArgToType(numberOfColumns, 'number', 'numberOfColumns');\r\n        validateArgToType(targetColumn, 'number', 'targetColumn');\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToMoveColumns(sheetId, startColumn, numberOfColumns, targetColumn);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Moves a particular number of columns to a specified position in a given sheet.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - a sheet number in which the operation will be performed\r\n     * @param {number} startColumn - number of the first column to move\r\n     * @param {number} numberOfColumns - number of columns to move\r\n     * @param {number} targetColumn - column number before which columns will be moved\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[InvalidArgumentsError]] when the given arguments are invalid\r\n     * @throws [[SourceLocationHasArrayError]] when the source location has array inside - array cannot be moved\r\n     * @throws [[TargetLocationHasArrayError]] when the target location has array inside - cells cannot be replaced by the array\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2', '3', '=RAND()', '=SUM(A1:C1)'],\r\n     * ]);\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values, for this example:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 1, row: 0 },\r\n     * //   newValue: 0.16210054671639,\r\n     * //  }, {\r\n     * //   address: { sheet: 0, col: 4, row: 0 },\r\n     * //   newValue: 6.16210054671639,\r\n     * // }]\r\n     * const changes = hfInstance.moveColumns(0, 1, 1, 2);\r\n     * ```\r\n     *\r\n     * @category Columns\r\n     */\r\n    moveColumns(sheetId, startColumn, numberOfColumns, targetColumn) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        validateArgToType(startColumn, 'number', 'startColumn');\r\n        validateArgToType(numberOfColumns, 'number', 'numberOfColumns');\r\n        validateArgToType(targetColumn, 'number', 'targetColumn');\r\n        this._crudOperations.moveColumns(sheetId, startColumn, numberOfColumns, targetColumn);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Stores a copy of the cell block in internal clipboard for the further paste.\r\n     * Returns the copied values for use in external clipboard.\r\n     *\r\n     * @param {SimpleCellRange} source - rectangle range to copy\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if source is of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // it copies [ [ 2 ] ]\r\n     * const clipboardContent = hfInstance.copy({\r\n     *   start: { sheet: 0, col: 1, row: 0 },\r\n     *   end: { sheet: 0, col: 1, row: 0 },\r\n     * });\r\n     * ```\r\n     *\r\n     * The usage of the internal clipboard is described thoroughly in the [Clipboard Operations guide](../../guide/clipboard-operations.md).\r\n     *\r\n     * @category Clipboard\r\n     */\r\n    copy(source) {\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        const range = new AbsoluteCellRange(source.start, source.end);\r\n        this._crudOperations.copy(range.start, range.width(), range.height());\r\n        return this.getRangeValues(source);\r\n    }\r\n    /**\r\n     * Stores information of the cell block in internal clipboard for further paste.\r\n     * Calling [[paste]] right after this method is equivalent to call [[moveCells]].\r\n     * Almost any CRUD operation called after this method will abort the cut operation.\r\n     * Returns the cut values for use in external clipboard.\r\n     *\r\n     * @param {SimpleCellRange} source - rectangle range to cut\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if source is of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // returns the values that were cut: [ [ 1 ] ]\r\n     * const clipboardContent = hfInstance.cut({\r\n     *   start: { sheet: 0, col: 0, row: 0 },\r\n     *   end: { sheet: 0, col: 0, row: 0 },\r\n     * });\r\n     * ```\r\n     *\r\n     * The usage of the internal clipboard is described thoroughly in the [Clipboard Operations guide](../../guide/clipboard-operations.md).\r\n     *\r\n     * @category Clipboard\r\n     */\r\n    cut(source) {\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        const range = new AbsoluteCellRange(source.start, source.end);\r\n        this._crudOperations.cut(range.start, range.width(), range.height());\r\n        return this.getRangeValues(source);\r\n    }\r\n    /**\r\n     * When called after [[copy]] it pastes copied values and formulas into a cell block.\r\n     * When called after [[cut]] it performs [[moveCells]] operation into the cell block.\r\n     * Does nothing if the clipboard is empty.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {SimpleCellAddress} targetLeftCorner - upper left address of the target cell block\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[SheetSizeLimitExceededError]] when performing this operation would result in sheet size limits exceeding\r\n     * @throws [[NothingToPasteError]] when clipboard is empty\r\n     * @throws [[TargetLocationHasArrayError]] when the selected target area has array inside\r\n     * @throws [[ExpectedValueOfTypeError]] if targetLeftCorner is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // [ [ 2 ] ] was copied\r\n     * const clipboardContent = hfInstance.copy({\r\n     *   start: { sheet: 0, col: 1, row: 0 },\r\n     *   end: { sheet: 0, col: 1, row: 0 },\r\n     * });\r\n     *\r\n     * // returns a list of modified cells: their absolute addresses and new values\r\n     * const changes = hfInstance.paste({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * The usage of the internal clipboard is described thoroughly in the [Clipboard Operations guide](../../guide/clipboard-operations.md).\r\n     *\r\n     * @category Clipboard\r\n     */\r\n    paste(targetLeftCorner) {\r\n        if (!isSimpleCellAddress(targetLeftCorner)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'targetLeftCorner');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        this._crudOperations.paste(targetLeftCorner);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether there is something in the clipboard.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // copy desired content\r\n     * const clipboardContent = hfInstance.copy({\r\n     *   start: { sheet: 0, col: 1, row: 0 },\r\n     *   end: { sheet: 0, col: 1, row: 0 },\r\n     * });\r\n     *\r\n     * // returns 'false', there is content in the clipboard\r\n     * const isClipboardEmpty = hfInstance.isClipboardEmpty();\r\n     * ```\r\n     *\r\n     * The usage of the internal clipboard is described thoroughly in the [Clipboard Operations guide](../../guide/clipboard-operations.md).\r\n     *\r\n     * @category Clipboard\r\n     */\r\n    isClipboardEmpty() {\r\n        return this._crudOperations.isClipboardEmpty();\r\n    }\r\n    /**\r\n     * Clears the clipboard content.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // clears the clipboard, isClipboardEmpty() should return true if called afterwards\r\n     * hfInstance.clearClipboard();\r\n     * ```\r\n     *\r\n     * The usage of the internal clipboard is described thoroughly in the [Clipboard Operations guide](../../guide/clipboard-operations.md).\r\n     *\r\n     * @category Clipboard\r\n     */\r\n    clearClipboard() {\r\n        this._crudOperations.clearClipboard();\r\n    }\r\n    /**\r\n     * Clears the redo stack in undoRedo history.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   ['1', '2', '3'],\r\n     * ]);\r\n     *\r\n     * // do an operation, for example remove columns\r\n     * hfInstance.removeColumns(0, [0, 1]);\r\n     *\r\n     * // undo the operation\r\n     * hfInstance.undo();\r\n     *\r\n     * // redo the operation\r\n     * hfInstance.redo();\r\n     *\r\n     * // clear the redo stack\r\n     * hfInstance.clearRedoStack();\r\n     * ```\r\n     *\r\n     * @category Undo and Redo\r\n     */\r\n    clearRedoStack() {\r\n        this._crudOperations.undoRedo.clearRedoStack();\r\n    }\r\n    /**\r\n     * Clears the undo stack in undoRedo history.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   ['1', '2', '3'],\r\n     * ]);\r\n     *\r\n     * // do an operation, for example remove columns\r\n     * hfInstance.removeColumns(0, [0, 1]);\r\n     *\r\n     * // undo the operation\r\n     * hfInstance.undo();\r\n     *\r\n     * // clear the undo stack\r\n     * hfInstance.clearUndoStack();\r\n     * ```\r\n     *\r\n     * @category Undo and Redo\r\n     */\r\n    clearUndoStack() {\r\n        this._crudOperations.undoRedo.clearUndoStack();\r\n    }\r\n    /**\r\n     * Returns the cell content of a given range in a [[CellValue]][][] format.\r\n     *\r\n     * @param {SimpleCellRange} source - rectangular range\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if source is of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2)', '2', '10'],\r\n     *  ['5', '6', '7'],\r\n     *  ['40', '30', '20'],\r\n     * ]);\r\n     *\r\n     *\r\n     * // returns calculated cells content: [ [ 3, 2 ], [ 5, 6 ] ]\r\n     * const rangeValues = hfInstance.getRangeValues({ start: { sheet: 0, col: 0, row: 0 }, end: { sheet: 0, col: 1, row: 1 } });\r\n     * ```\r\n     *\r\n     * @category Ranges\r\n     */\r\n    getRangeValues(source) {\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        const cellRange = new AbsoluteCellRange(source.start, source.end);\r\n        return cellRange.arrayOfAddressesInRange().map((subarray) => subarray.map((address) => this.getCellValue(address)));\r\n    }\r\n    /**\r\n     * Returns cell formulas in given range.\r\n     *\r\n     * @param {SimpleCellRange} source - rectangular range\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if source is of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2)', '2', '10'],\r\n     *  ['5', '6', '7'],\r\n     *  ['40', '30', '20'],\r\n     * ]);\r\n     *\r\n     * // returns cell formulas of a given range only:\r\n     * // [ [ '=SUM(1, 2)', undefined ], [ undefined, undefined ] ]\r\n     * const rangeFormulas = hfInstance.getRangeFormulas({ start: { sheet: 0, col: 0, row: 0 }, end: { sheet: 0, col: 1, row: 1 } });\r\n     * ```\r\n     *\r\n     * @category Ranges\r\n     */\r\n    getRangeFormulas(source) {\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        const cellRange = new AbsoluteCellRange(source.start, source.end);\r\n        return cellRange.arrayOfAddressesInRange().map((subarray) => subarray.map((address) => this.getCellFormula(address)));\r\n    }\r\n    /**\r\n     * Returns serialized cells in given range.\r\n     *\r\n     * @param {SimpleCellRange} source - rectangular range\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if source is of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2)', '2', '10'],\r\n     *  ['5', '6', '7'],\r\n     *  ['40', '30', '20'],\r\n     * ]);\r\n     *\r\n     * // should return serialized cell content for the given range:\r\n     * // [ [ '=SUM(1, 2)', 2 ], [ 5, 6 ] ]\r\n     * const rangeSerialized = hfInstance.getRangeSerialized({ start: { sheet: 0, col: 0, row: 0 }, end: { sheet: 0, col: 1, row: 1 } });\r\n     * ```\r\n     *\r\n     * @category Ranges\r\n     */\r\n    getRangeSerialized(source) {\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        const cellRange = new AbsoluteCellRange(source.start, source.end);\r\n        return cellRange.arrayOfAddressesInRange().map((subarray) => subarray.map((address) => this.getCellSerialized(address)));\r\n    }\r\n    /**\r\n     * Returns values to fill target range using source range, with properly extending the range using wrap-around heuristic.\r\n     *\r\n     * @param {SimpleCellRange} source of data\r\n     * @param {SimpleCellRange} target range where data is intended to be put\r\n     * @param {boolean} offsetsFromTarget if true, offsets are computed from target corner, otherwise from source corner\r\n     *\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[ExpectedValueOfTypeError]] if source or target are of wrong type\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([[1, '=A1'], ['=$A$1', '2']]);\r\n     *\r\n     * // should return [['2', '=$A$1', '2'], ['=A3', 1, '=C3'], ['2', '=$A$1', '2']]\r\n     * hfInstance.getFillRangeData( {start: {sheet: 0, row: 0, col: 0}, end: {sheet: 0, row: 1, col: 1}},\r\n     * {start: {sheet: 0, row: 1, col: 1}, end: {sheet: 0, row: 3, col: 3}});\r\n     * ```\r\n     *\r\n     * @category Ranges\r\n     */\r\n    getFillRangeData(source, target, offsetsFromTarget = false) {\r\n        if (!isSimpleCellRange(source)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'source');\r\n        }\r\n        if (!isSimpleCellRange(target)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'target');\r\n        }\r\n        const sourceRange = new AbsoluteCellRange(source.start, source.end);\r\n        const targetRange = new AbsoluteCellRange(target.start, target.end);\r\n        this.ensureEvaluationIsNotSuspended();\r\n        return targetRange.arrayOfAddressesInRange().map((subarray) => subarray.map((address) => {\r\n            const row = ((address.row - (offsetsFromTarget ? target : source).start.row) % sourceRange.height() + sourceRange.height()) % sourceRange.height() + source.start.row;\r\n            const col = ((address.col - (offsetsFromTarget ? target : source).start.col) % sourceRange.width() + sourceRange.width()) % sourceRange.width() + source.start.col;\r\n            return this._serialization.getCellSerialized({ row, col, sheet: sourceRange.sheet }, address);\r\n        }));\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to add a sheet to the engine.\r\n     * Checks against particular rules to ascertain that addSheet can be called.\r\n     * If returns `true`, doing [[addSheet]] operation won't throw any errors, and it is possible to add sheet with provided name.\r\n     * Returns `false` if the chosen name is already used.\r\n     *\r\n     * @param {string} sheetName - sheet name, case-insensitive\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *   MySheet1: [ ['1'] ],\r\n     *   MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'false' because 'MySheet2' already exists\r\n     * const isAddable = hfInstance.isItPossibleToAddSheet('MySheet2');\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    isItPossibleToAddSheet(sheetName) {\r\n        validateArgToType(sheetName, 'string', 'sheetName');\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToAddSheet(sheetName);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Adds a new sheet to the HyperFormula instance. Returns given or autogenerated name of a new sheet.\r\n     *\r\n     * @param {string} [sheetName] - if not specified, name is autogenerated\r\n     *\r\n     * @fires [[sheetAdded]] after the sheet was added\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[SheetNameAlreadyTakenError]] when sheet with a given name already exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'MySheet3'\r\n     * const nameProvided = hfInstance.addSheet('MySheet3');\r\n     *\r\n     * // should return autogenerated 'Sheet4'\r\n     * // because no name was provided and 3 other ones already exist\r\n     * const generatedName = hfInstance.addSheet();\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    addSheet(sheetName) {\r\n        if (sheetName !== undefined) {\r\n            validateArgToType(sheetName, 'string', 'sheetName');\r\n        }\r\n        const addedSheetName = this._crudOperations.addSheet(sheetName);\r\n        this._emitter.emit(Events.SheetAdded, addedSheetName);\r\n        return addedSheetName;\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to remove sheet for the engine.\r\n     * Returns `true` if the provided sheet exists, and therefore it can be removed, doing [[removeSheet]] operation won't throw any errors.\r\n     * Returns `false` otherwise\r\n     *\r\n     * @param {number} sheetId - sheet ID.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'true' because sheet with ID 1 exists and is removable\r\n     * const isRemovable = hfInstance.isItPossibleToRemoveSheet(1);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    isItPossibleToRemoveSheet(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            this._crudOperations.ensureScopeIdIsValid(sheetId);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Removes a sheet\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - sheet ID.\r\n     *\r\n     * @fires [[sheetRemoved]] after the sheet was removed\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['=SUM(MySheet2!A1:A2)'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values, in this example it will return:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 0, row: 0 },\r\n     * //   newValue: { error: [CellError], value: '#REF!' },\r\n     * // }]\r\n     * const changes = hfInstance.removeSheet(1);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    removeSheet(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        const displayName = this.sheetMapping.getDisplayName(sheetId);\r\n        this._crudOperations.removeSheet(sheetId);\r\n        const changes = this.recomputeIfDependencyGraphNeedsIt();\r\n        this._emitter.emit(Events.SheetRemoved, displayName, changes);\r\n        return changes;\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to clear a specified sheet.\r\n     * If returns `true`, doing [[clearSheet]] operation won't throw any errors, provided sheet exists and its content can be cleared.\r\n     * Returns `false` otherwise\r\n     *\r\n     * @param {number} sheetId - sheet ID.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'true' because 'MySheet2' exists and can be cleared\r\n     * const isClearable = hfInstance.isItPossibleToClearSheet(1);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    isItPossibleToClearSheet(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            this._crudOperations.ensureScopeIdIsValid(sheetId);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Clears the sheet content. Double-checks if the sheet exists.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {number} sheetId - sheet ID.\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['=SUM(MySheet2!A1:A2)'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values, in this example it will return:\r\n     * // [{\r\n     * //   address: { sheet: 0, col: 0, row: 0 },\r\n     * //   newValue: 0,\r\n     * // }]\r\n     * const changes = hfInstance.clearSheet(0);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    clearSheet(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.clearSheet(sheetId);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to replace the sheet content.\r\n     * If returns `true`, doing [[setSheetContent]] operation won't throw any errors, the provided sheet exists and then its content can be replaced.\r\n     * Returns `false` otherwise\r\n     *\r\n     * @param {number} sheetId - sheet ID.\r\n     * @param {RawCellContent[][]} values - array of new values\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'true' because sheet of ID 0 exists\r\n     * // and the provided content can be placed in this sheet\r\n     * const isReplaceable = hfInstance.isItPossibleToReplaceSheetContent(0, [['50'], ['60']]);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    isItPossibleToReplaceSheetContent(sheetId, values) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        try {\r\n            this._crudOperations.ensureScopeIdIsValid(sheetId);\r\n            this._crudOperations.ensureItIsPossibleToChangeSheetContents(sheetId, values);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Replaces the sheet content with new values.\r\n     *\r\n     * @param {number} sheetId - sheet ID.\r\n     * @param {RawCellContent[][]} values - array of new values\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[InvalidArgumentsError]] when values argument is not an array of arrays\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return a list of cells which values changed after the operation,\r\n     * // their absolute addresses and new values\r\n     * const changes = hfInstance.setSheetContent(0, [['50'], ['60']]);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    setSheetContent(sheetId, values) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.setSheetContent(sheetId, values);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Computes simple (absolute) address of a cell address based on its string representation.\r\n     * If sheet name is present in string representation but not present in the engine, returns `undefined`.\r\n     *\r\n     * @param {string} cellAddress - string representation of cell address in A1 notation\r\n     * @param {number} sheetId - context used in case of missing sheet in the first argument\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     * hfInstance.addSheet('Sheet0'); //sheetId = 0\r\n     *\r\n     * // returns { sheet: 0, col: 0, row: 0 }\r\n     * const simpleCellAddress = hfInstance.simpleCellAddressFromString('A1', 0);\r\n     *\r\n     * // returns { sheet: 0, col: 0, row: 5 }\r\n     * const simpleCellAddressTwo = hfInstance.simpleCellAddressFromString('Sheet1!A6');\r\n     *\r\n     * // returns { sheet: 0, col: 0, row: 5 }\r\n     * const simpleCellAddressTwo = hfInstance.simpleCellAddressFromString('Sheet1!$A$6');\r\n     *\r\n     * // returns 'undefined', as there's no 'Sheet 2' in the HyperFormula instance\r\n     * const simpleCellAddressTwo = hfInstance.simpleCellAddressFromString('Sheet2!A6');\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    simpleCellAddressFromString(cellAddress, sheetId) {\r\n        validateArgToType(cellAddress, 'string', 'cellAddress');\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return simpleCellAddressFromString(this.sheetMapping.get, cellAddress, sheetId);\r\n    }\r\n    /**\r\n     * Computes simple (absolute) address of a cell range based on its string representation.\r\n     * If sheet name is present in string representation but not present in the engine, returns `undefined`.\r\n     *\r\n     * @param {string} cellRange - string representation of cell range in A1 notation\r\n     * @param {number} sheetId - context used in case of missing sheet in the first argument\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     * hfInstance.addSheet('Sheet0'); //sheetId = 0\r\n     *\r\n     * // should return { start: { sheet: 0, col: 0, row: 0 }, end: { sheet: 0, col: 1, row: 0 } }\r\n     * const simpleCellAddress = hfInstance.simpleCellRangeFromString('A1:A2', 0);\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    simpleCellRangeFromString(cellRange, sheetId) {\r\n        validateArgToType(cellRange, 'string', 'cellRange');\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return simpleCellRangeFromString(this.sheetMapping.get, cellRange, sheetId);\r\n    }\r\n    /**\r\n     * Returns string representation of an absolute address in A1 notation or `undefined` if the sheet index is not present in the engine.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - object representation of an absolute address\r\n     * @param {number} sheetId - context used in case of missing sheet in the first argument\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if its arguments are of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     * hfInstance.addSheet('Sheet0'); //sheetId = 0\r\n     *\r\n     * // should return 'B2'\r\n     * const A1Notation = hfInstance.simpleCellAddressToString({ sheet: 0, col: 1, row: 1 }, 0);\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    simpleCellAddressToString(cellAddress, sheetId) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return simpleCellAddressToString(this.sheetMapping.fetchDisplayName, cellAddress, sheetId);\r\n    }\r\n    /**\r\n     * Returns string representation of an absolute range in A1 notation or `undefined` if the sheet index is not present in the engine.\r\n     *\r\n     * @param {SimpleCellRange} cellRange - object representation of an absolute range\r\n     * @param {number} sheetId - context used in case of missing sheet in the first argument\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if its arguments are of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     * hfInstance.addSheet('Sheet0'); //sheetId = 0\r\n     * hfInstance.addSheet('Sheet1'); //sheetId = 1\r\n     *\r\n     * // should return 'B2:C2'\r\n     * const A1Notation = hfInstance.simpleCellRangeToString({ start: { sheet: 0, col: 1, row: 1 }, end: { sheet: 0, col: 2, row: 1 } }, 0);\r\n     *\r\n     *  // should return 'Sheet1!B2:C2'\r\n     * const another = hfInstance.simpleCellRangeToString({ start: { sheet: 1, col: 1, row: 1 }, end: { sheet: 1, col: 2, row: 1 } }, 0);\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    simpleCellRangeToString(cellRange, sheetId) {\r\n        if (!isSimpleCellRange(cellRange)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellRange', 'cellRange');\r\n        }\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return simpleCellRangeToString(this.sheetMapping.fetchDisplayName, cellRange, sheetId);\r\n    }\r\n    /**\r\n     * Returns all the out-neighbors in the [dependency graph](../../guide/dependency-graph.md) for a given cell address or range. Including:\r\n     * - All cells with formulas that contain the given cell address or range\r\n     * - Some of the ranges that contain the given cell address or range\r\n     *\r\n     * The exact result depends on the optimizations applied by the HyperFormula to the dependency graph, some of which are described in the section [\"Optimizations for large ranges\"](../../guide/dependency-graph.md#optimizations-for-large-ranges).\r\n     *\r\n     * @param {SimpleCellAddress | SimpleCellRange} address - object representation of an absolute address or range of addresses\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if address is not [[SimpleCellAddress]] or [[SimpleCellRange]]\r\n     * @throws [[SheetsNotEqual]] if range provided has distinct sheet numbers for start and end\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray( [ ['1', '=A1', '=A1+B1'] ] );\r\n     *\r\n     * hfInstance.getCellDependents({ sheet: 0, col: 0, row: 0});\r\n     * // returns [{ sheet: 0, col: 1, row: 0}, { sheet: 0, col: 2, row: 0}]\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    getCellDependents(address) {\r\n        let vertex;\r\n        if (isSimpleCellAddress(address)) {\r\n            vertex = this._dependencyGraph.addressMapping.getCell(address);\r\n        }\r\n        else if (isSimpleCellRange(address)) {\r\n            vertex = this._dependencyGraph.rangeMapping.getRange(address.start, address.end);\r\n        }\r\n        else {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress | SimpleCellRange', address);\r\n        }\r\n        if (vertex === undefined) {\r\n            return [];\r\n        }\r\n        return this._dependencyGraph.getAdjacentNodesAddresses(vertex);\r\n    }\r\n    /**\r\n     * Returns all the in-neighbors in the [dependency graph](../../guide/dependency-graph.md) for a given cell address or range. In particular:\r\n     * - If the argument is a single cell, `getCellPrecedents()` returns all cells and ranges contained in that cell's formula.\r\n     * - If the argument is a range of cells, `getCellPrecedents()` returns some of the cell addresses and smaller ranges contained in that range (but not all of them). The exact result depends on the optimizations applied by the HyperFormula to the dependency graph, some of which are described in the section [\"Optimizations for large ranges\"](../../guide/dependency-graph.md#optimizations-for-large-ranges).\r\n     *\r\n     * @param {SimpleCellAddress | SimpleCellRange} address - object representation of an absolute address or range of addresses\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if address is of wrong type\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray( [ ['1', '=A1', '=A1+B1'] ] );\r\n     *\r\n     * hfInstance.getCellPrecedents({ sheet: 0, col: 2, row: 0});\r\n     * // returns [{ sheet: 0, col: 0, row: 0}, { sheet: 0, col: 1, row: 0}]\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    getCellPrecedents(address) {\r\n        let vertex;\r\n        if (isSimpleCellAddress(address)) {\r\n            vertex = this._dependencyGraph.addressMapping.getCell(address);\r\n        }\r\n        else if (isSimpleCellRange(address)) {\r\n            vertex = this._dependencyGraph.rangeMapping.getRange(address.start, address.end);\r\n        }\r\n        else {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress | SimpleCellRange', address);\r\n        }\r\n        if (vertex === undefined) {\r\n            return [];\r\n        }\r\n        return this._dependencyGraph.dependencyQueryAddresses(vertex);\r\n    }\r\n    /**\r\n     * Returns a unique sheet name assigned to the sheet of a given ID or `undefined` if the there is no sheet with a given ID.\r\n     *\r\n     * @param {number} sheetId - ID of the sheet, for which we want to retrieve name\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'MySheet2' as this sheet is the second one\r\n     * const sheetName = hfInstance.getSheetName(1);\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetName(sheetId) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        return this.sheetMapping.getDisplayName(sheetId);\r\n    }\r\n    /**\r\n     * List all sheet names.\r\n     * Returns an array of sheet names as strings.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return all sheets names: ['MySheet1', 'MySheet2']\r\n     * const sheetNames = hfInstance.getSheetNames();\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetNames() {\r\n        return this.sheetMapping.sheetNames();\r\n    }\r\n    /**\r\n     * Returns a unique sheet ID assigned to the sheet with a given name or `undefined` if the sheet does not exist.\r\n     *\r\n     * @param {string} sheetName - name of the sheet, for which we want to retrieve ID, case-insensitive.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *   MySheet1: [ ['1'] ],\r\n     *   MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return '0' because 'MySheet1' is of ID '0'\r\n     * const sheetID = hfInstance.getSheetId('MySheet1');\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    getSheetId(sheetName) {\r\n        validateArgToType(sheetName, 'string', 'sheetName');\r\n        return this.sheetMapping.get(sheetName);\r\n    }\r\n    /**\r\n     * Returns `true` whether sheet with a given name exists. The method accepts sheet name to be checked.\r\n     *\r\n     * @param {string} sheetName - name of the sheet, case-insensitive.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *   MySheet1: [ ['1'] ],\r\n     *   MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // should return 'true' since 'MySheet1' exists\r\n     * const sheetExist = hfInstance.doesSheetExist('MySheet1');\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    doesSheetExist(sheetName) {\r\n        validateArgToType(sheetName, 'string', 'sheetName');\r\n        return this.sheetMapping.hasSheetWithName(sheetName);\r\n    }\r\n    /**\r\n     * Returns the type of a cell at a given address.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(A2:A3)', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'FORMULA', the cell of given coordinates is of this type\r\n     * const cellA1Type = hfInstance.getCellType({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return 'VALUE', the cell of given coordinates is of this type\r\n     * const cellB1Type = hfInstance.getCellType({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellType(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        const vertex = this.dependencyGraph.getCell(cellAddress);\r\n        return getCellType(vertex, cellAddress);\r\n    }\r\n    /**\r\n     * Returns `true` if the specified cell contains a simple value.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(A2:A3)', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' since the selected cell contains a simple value\r\n     * const isA1Simple = hfInstance.doesCellHaveSimpleValue({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return 'false' since the selected cell does not contain a simple value\r\n     * const isB1Simple = hfInstance.doesCellHaveSimpleValue({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    doesCellHaveSimpleValue(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        return this.getCellType(cellAddress) === CellType.VALUE;\r\n    }\r\n    /**\r\n     * Returns `true` if the specified cell contains a formula.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(A2:A3)', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' since the A1 cell contains a formula\r\n     * const A1Formula = hfInstance.doesCellHaveFormula({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return 'false' since the B1 cell does not contain a formula\r\n     * const B1NoFormula = hfInstance.doesCellHaveFormula({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    doesCellHaveFormula(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        const cellType = this.getCellType(cellAddress);\r\n        return cellType === CellType.FORMULA || cellType === CellType.ARRAYFORMULA;\r\n    }\r\n    /**\r\n     * Returns`true` if the specified cell is empty.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *   [null, '1'],\r\n     * ]);\r\n     *\r\n     * // should return 'true', cell of provided coordinates is empty\r\n     * const isEmpty = hfInstance.isCellEmpty({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return 'false', cell of provided coordinates is not empty\r\n     * const isNotEmpty = hfInstance.isCellEmpty({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    isCellEmpty(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        return this.getCellType(cellAddress) === CellType.EMPTY;\r\n    }\r\n    /**\r\n     * Returns `true` if a given cell is a part of an array.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *    ['{=TRANSPOSE(B1:B1)}'],\r\n     * ]);\r\n     *\r\n     * // should return 'true', cell of provided coordinates is a part of an array\r\n     * const isPartOfArray = hfInstance.isCellPartOfArray({ sheet: 0, col: 0, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    isCellPartOfArray(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        const cellType = this.getCellType(cellAddress);\r\n        return cellType === CellType.ARRAY || cellType === CellType.ARRAYFORMULA;\r\n    }\r\n    /**\r\n     * Returns type of the cell value of a given address.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['=SUM(1, 2, 3)', '2'],\r\n     * ]);\r\n     *\r\n     * // should return 'NUMBER', cell value type of provided coordinates is a number\r\n     * const cellValue = hfInstance.getCellValueType({ sheet: 0, col: 1, row: 0 });\r\n     *\r\n     * // should return 'NUMBER', cell value type of provided coordinates is a number\r\n     * const cellValue = hfInstance.getCellValueType({ sheet: 0, col: 0, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellValueType(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        const value = this.dependencyGraph.getCellValue(cellAddress);\r\n        return getCellValueType(value);\r\n    }\r\n    /**\r\n     * Returns detailed type of the cell value of a given address.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1%', '1$'],\r\n     * ]);\r\n     *\r\n     * // should return 'NUMBER_PERCENT', cell value type of provided coordinates is a number with a format inference percent.\r\n     * const cellType = hfInstance.getCellValueDetailedType({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return 'NUMBER_CURRENCY', cell value type of provided coordinates is a number with a format inference currency.\r\n     * const cellType = hfInstance.getCellValueDetailedType({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellValueDetailedType(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        const value = this.dependencyGraph.getCellValue(cellAddress);\r\n        return getCellValueDetailedType(value);\r\n    }\r\n    /**\r\n     * Returns auxiliary format information of the cell value of a given address.\r\n     * The method accepts cell coordinates as object with column, row and sheet numbers.\r\n     *\r\n     * @param {SimpleCellAddress} cellAddress - cell coordinates\r\n     *\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[EvaluationSuspendedError]] when the evaluation is suspended\r\n     * @throws [[ExpectedValueOfTypeError]] if cellAddress is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1$', '1'],\r\n     * ]);\r\n     *\r\n     * // should return '$', cell value type of provided coordinates is a number with a format inference currency, parsed as using '$' as currency.\r\n     * const cellFormat = hfInstance.getCellValueFormat({ sheet: 0, col: 0, row: 0 });\r\n     *\r\n     * // should return undefined, cell value type of provided coordinates is a number with no format information.\r\n     * const cellFormat = hfInstance.getCellValueFormat({ sheet: 0, col: 1, row: 0 });\r\n     * ```\r\n     *\r\n     * @category Cells\r\n     */\r\n    getCellValueFormat(cellAddress) {\r\n        if (!isSimpleCellAddress(cellAddress)) {\r\n            throw new ExpectedValueOfTypeError('SimpleCellAddress', 'cellAddress');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        const value = this.dependencyGraph.getCellValue(cellAddress);\r\n        return getCellValueFormat(value);\r\n    }\r\n    /**\r\n     * Returns the number of existing sheets.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['1', '2'],\r\n     * ]);\r\n     *\r\n     * // should return the number of sheets which is '1'\r\n     * const sheetsCount = hfInstance.countSheets();\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    countSheets() {\r\n        return this.sheetMapping.numberOfSheets();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to rename sheet.\r\n     * Returns `true` if the sheet with provided id exists and new name is available\r\n     * Returns `false` if sheet cannot be renamed\r\n     *\r\n     * @param {number} sheetId - a sheet number\r\n     * @param {string} newName - a name of the sheet to be given\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *   MySheet1: [ ['1'] ],\r\n     *   MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // returns true\r\n     * hfInstance.isItPossibleToRenameSheet(0, 'MySheet0');\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    isItPossibleToRenameSheet(sheetId, newName) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        validateArgToType(newName, 'string', 'newName');\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToRenameSheet(sheetId, newName);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Renames a specified sheet.\r\n     *\r\n     * @param {number} sheetId - a sheet ID\r\n     * @param {string} newName - a name of the sheet to be given, if is the same as the old one the method does nothing\r\n     *\r\n     * @fires [[sheetRenamed]] after the sheet was renamed\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] when the given sheet ID does not exist\r\n     * @throws [[SheetNameAlreadyTakenError]] when the provided sheet name already exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *   MySheet1: [ ['1'] ],\r\n     *   MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // renames the sheet 'MySheet1'\r\n     * hfInstance.renameSheet(0, 'MySheet0');\r\n     * ```\r\n     *\r\n     * @category Sheets\r\n     */\r\n    renameSheet(sheetId, newName) {\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        validateArgToType(newName, 'string', 'newName');\r\n        const oldName = this._crudOperations.renameSheet(sheetId, newName);\r\n        if (oldName !== undefined) {\r\n            this._emitter.emit(Events.SheetRenamed, oldName, newName);\r\n        }\r\n    }\r\n    /**\r\n     * Runs multiple operations and recomputes formulas at the end.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {() => void} batchOperations\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     * @fires [[evaluationSuspended]] always\r\n     * @fires [[evaluationResumed]] after the recomputation of necessary values\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // multiple operations in a single callback will trigger evaluation only once\r\n     * // and only one set of changes is returned as a combined result of all\r\n     * // the operations that were triggered within the callback\r\n     * const changes = hfInstance.batch(() => {\r\n     *  hfInstance.setCellContents({ col: 3, row: 0, sheet: 0 }, [['=B1']]);\r\n     *  hfInstance.setCellContents({ col: 4, row: 0, sheet: 0 }, [['=A1']]);\r\n     * });\r\n     * ```\r\n     *\r\n     * @category Batch\r\n     */\r\n    batch(batchOperations) {\r\n        this.suspendEvaluation();\r\n        this._crudOperations.beginUndoRedoBatchMode();\r\n        try {\r\n            batchOperations();\r\n        }\r\n        catch (e) {\r\n            this._crudOperations.commitUndoRedoBatchMode();\r\n            this.resumeEvaluation();\r\n            throw (e);\r\n        }\r\n        this._crudOperations.commitUndoRedoBatchMode();\r\n        return this.resumeEvaluation();\r\n    }\r\n    /**\r\n     * Suspends the dependency graph recalculation.\r\n     * It allows optimizing the performance.\r\n     * With this method, multiple CRUD operations can be done without triggering recalculation after every operation.\r\n     * Suspending evaluation should result in an overall faster calculation compared to recalculating after each operation separately.\r\n     * To resume the evaluation use [[resumeEvaluation]].\r\n     *\r\n     * @fires [[evaluationSuspended]] always\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // similar to batch() but operations are not within a callback,\r\n     * // one method suspends the recalculation\r\n     * // the second will resume calculations and return the changes\r\n     *\r\n     * // suspend the evaluation with this method\r\n     * hfInstance.suspendEvaluation();\r\n     *\r\n     * // perform operations\r\n     * hfInstance.setCellContents({ col: 3, row: 0, sheet: 0 }, [['=B1']]);\r\n     * hfInstance.setSheetContent(1, [['50'], ['60']]);\r\n     *\r\n     * // use resumeEvaluation to resume\r\n     * const changes = hfInstance.resumeEvaluation();\r\n     * ```\r\n     *\r\n     * @category Batch\r\n     */\r\n    suspendEvaluation() {\r\n        this._evaluationSuspended = true;\r\n        this._emitter.emit(Events.EvaluationSuspended);\r\n    }\r\n    /**\r\n     * Resumes the dependency graph recalculation that was suspended with [[suspendEvaluation]].\r\n     * It also triggers the recalculation and returns changes that are a result of all batched operations.\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     * @fires [[evaluationResumed]] after the recomputation of necessary values\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  MySheet1: [ ['1'] ],\r\n     *  MySheet2: [ ['10'] ],\r\n     * });\r\n     *\r\n     * // similar to batch() but operations are not within a callback,\r\n     * // one method suspends the recalculation\r\n     * // the second will resume calculations and return the changes\r\n     *\r\n     * // first, suspend the evaluation\r\n     * hfInstance.suspendEvaluation();\r\n     *\r\n     * // perform operations\r\n     * hfInstance.setCellContents({ col: 3, row: 0, sheet: 0 }, [['=B1']]);\r\n     * hfInstance.setSheetContent(1, [['50'], ['60']]);\r\n     *\r\n     * // resume the evaluation\r\n     * const changes = hfInstance.resumeEvaluation();\r\n     * ```\r\n     *\r\n     * @category Batch\r\n     */\r\n    resumeEvaluation() {\r\n        this._evaluationSuspended = false;\r\n        const changes = this.recomputeIfDependencyGraphNeedsIt();\r\n        this._emitter.emit(Events.EvaluationResumed, changes);\r\n        return changes;\r\n    }\r\n    /**\r\n     * Checks if the dependency graph recalculation process is suspended or not.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // suspend the evaluation\r\n     * hfInstance.suspendEvaluation();\r\n     *\r\n     * // between suspendEvaluation() and resumeEvaluation()\r\n     * // or inside batch() callback it will return 'true', otherwise 'false'\r\n     * const isEvaluationSuspended = hfInstance.isEvaluationSuspended();\r\n     *\r\n     * const changes = hfInstance.resumeEvaluation();\r\n     * ```\r\n     *\r\n     * @category Batch\r\n     */\r\n    isEvaluationSuspended() {\r\n        return this._evaluationSuspended;\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to add named expression into a specific scope.\r\n     * Checks against particular rules to ascertain that addNamedExpression can be called.\r\n     * If returns `true`, doing [[addNamedExpression]] operation won't throw any errors.\r\n     * Returns `false` if the operation might be disrupted.\r\n     *\r\n     * @param {string} expressionName - a name of the expression to be added\r\n     * @param {RawCellContent} expression - the expression\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // should return 'true' for this example,\r\n     * // it is possible to add named expression to global scope\r\n     * const isAddable = hfInstance.isItPossibleToAddNamedExpression('prettyName', '=Sheet1!$A$1+100');\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    isItPossibleToAddNamedExpression(expressionName, expression, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToAddNamedExpression(expressionName, expression, scope);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Adds a specified named expression.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {string} expressionName - a name of the expression to be added\r\n     * @param {RawCellContent} expression - the expression\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     * @param {NamedExpressionOptions?} options - additional metadata related to named expression\r\n     *\r\n     * @fires [[namedExpressionAdded]] always, unless [[batch]] mode is used\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NamedExpressionNameIsAlreadyTakenError]] when the named-expression name is not available.\r\n     * @throws [[NamedExpressionNameIsInvalidError]] when the named-expression name is not valid\r\n     * @throws [[NoRelativeAddressesAllowedError]] when the named-expression formula contains relative references\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add own expression, scope limited to 'Sheet1' (sheetId=0), the method should return a list of cells which values\r\n     * // changed after the operation, their absolute addresses and new values\r\n     * // for this example:\r\n     * // [{\r\n     * //   name: 'prettyName',\r\n     * //   newValue: 142,\r\n     * // }]\r\n     * const changes = hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100', 0);\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    addNamedExpression(expressionName, expression, scope, options) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        this._crudOperations.addNamedExpression(expressionName, expression, scope, options);\r\n        const changes = this.recomputeIfDependencyGraphNeedsIt();\r\n        this._emitter.emit(Events.NamedExpressionAdded, expressionName, changes);\r\n        return changes;\r\n    }\r\n    /**\r\n     * Gets specified named expression value.\r\n     * Returns a [[CellValue]] or undefined if the given named expression does not exist.\r\n     *\r\n     * @param {string} expressionName - expression name, case-insensitive.\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression, only 'Sheet1' (sheetId=0) considered as it is the scope\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100', 'Sheet1');\r\n     *\r\n     * // returns the calculated value of a passed named expression, '142' for this example\r\n     * const myFormula = hfInstance.getNamedExpressionValue('prettyName', 'Sheet1');\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    getNamedExpressionValue(expressionName, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        this.ensureEvaluationIsNotSuspended();\r\n        this._crudOperations.ensureScopeIdIsValid(scope);\r\n        const namedExpression = this._namedExpressions.namedExpressionForScope(expressionName, scope);\r\n        if (namedExpression) {\r\n            return this._serialization.getCellValue(namedExpression.address);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    /**\r\n     * Returns a normalized formula string for given named expression, or `undefined` for a named expression that does not exist or does not hold a formula.\r\n     *\r\n     * @param {string} expressionName - expression name, case-insensitive.\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression in 'Sheet1' (sheetId=0)\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100', 0);\r\n     *\r\n     * // returns a normalized formula string corresponding to the passed name from 'Sheet1' (sheetId=0),\r\n     * // '=Sheet1!A1+100' for this example\r\n     * const myFormula = hfInstance.getNamedExpressionFormula('prettyName', 0);\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    getNamedExpressionFormula(expressionName, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        this._crudOperations.ensureScopeIdIsValid(scope);\r\n        const namedExpression = this._namedExpressions.namedExpressionForScope(expressionName, scope);\r\n        if (namedExpression === undefined) {\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this._serialization.getCellFormula(namedExpression.address);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a named expression, or `undefined` for a named expression that does not exist or does not hold a formula.\r\n     *\r\n     * @param {string} expressionName - expression name, case-insensitive.\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression in 'Sheet1' (sheetId=0)\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100', 0);\r\n     *\r\n     * // returns a named expression that corresponds to the passed name from 'Sheet1' (sheetId=0)\r\n     * // for this example, returns:\r\n     * // {name: 'prettyName', expression: '=Sheet1!$A$1+100', options: undefined, scope: 0}\r\n     * const myFormula = hfInstance.getNamedExpression('prettyName', 0);\r\n     *\r\n     * // for a named expression that doesn't exist, returns 'undefined':\r\n     * const myFormulaTwo = hfInstance.getNamedExpression('uglyName', 0);\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    getNamedExpression(expressionName, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        const namedExpression = this._namedExpressions.namedExpressionForScope(expressionName, scope);\r\n        if (namedExpression === undefined) {\r\n            return undefined;\r\n        }\r\n        const expression = this._serialization.getCellFormula(namedExpression.address);\r\n        return {\r\n            name: expressionName,\r\n            scope: scope,\r\n            expression: expression,\r\n            options: namedExpression.options\r\n        };\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to change named expression in a specific scope.\r\n     * Checks against particular rules to ascertain that changeNamedExpression can be called.\r\n     * If returns `true`, doing [[changeNamedExpression]] operation won't throw any errors.\r\n     * Returns `false` if the operation might be disrupted.\r\n     *\r\n     * @param {string} expressionName - an expression name, case-insensitive.\r\n     * @param {RawCellContent} newExpression - a new expression\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100');\r\n     *\r\n     * // should return 'true' for this example,\r\n     * // it is possible to change named expression\r\n     * const isAddable = hfInstance.isItPossibleToChangeNamedExpression('prettyName', '=Sheet1!$A$1+100');\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    isItPossibleToChangeNamedExpression(expressionName, newExpression, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        try {\r\n            this._crudOperations.ensureItIsPossibleToChangeNamedExpression(expressionName, newExpression, scope);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Changes a given named expression to a specified formula.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {string} expressionName - an expression name, case-insensitive.\r\n     * @param {RawCellContent} newExpression - a new expression\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     * @param {NamedExpressionOptions?} options - additional metadata related to named expression\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NamedExpressionDoesNotExistError]] when the given expression does not exist.\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     * @throws [[ArrayFormulasNotSupportedError]] when the named expression formula is an array formula\r\n     * @throws [[NoRelativeAddressesAllowedError]] when the named expression formula contains relative references\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression, scope limited to 'Sheet1' (sheetId=0)\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100', 0);\r\n     *\r\n     * // change the named expression\r\n     * const changes = hfInstance.changeNamedExpression('prettyName', '=Sheet1!$A$1+200');\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    changeNamedExpression(expressionName, newExpression, scope, options) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        this._crudOperations.changeNamedExpressionExpression(expressionName, scope, newExpression, options);\r\n        return this.recomputeIfDependencyGraphNeedsIt();\r\n    }\r\n    /**\r\n     * Returns information whether it is possible to remove named expression from a specific scope.\r\n     * Checks against particular rules to ascertain that removeNamedExpression can be called.\r\n     * If returns `true`, doing [[removeNamedExpression]] operation won't throw any errors.\r\n     * Returns `false` if the operation might be disrupted.\r\n     *\r\n     * @param {string} expressionName - an expression name, case-insensitive.\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100');\r\n     *\r\n     * // should return 'true' for this example,\r\n     * // it is possible to change named expression\r\n     * const isAddable = hfInstance.isItPossibleToRemoveNamedExpression('prettyName');\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    isItPossibleToRemoveNamedExpression(expressionName, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        try {\r\n            this._crudOperations.isItPossibleToRemoveNamedExpression(expressionName, scope);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Removes a named expression.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @param {string} expressionName - expression name, case-insensitive.\r\n     * @param {number?} scope - scope definition, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @fires [[namedExpressionRemoved]] after the expression was removed\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NamedExpressionDoesNotExistError]] when the given expression does not exist.\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     * ]);\r\n     *\r\n     * // add a named expression\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100', 0);\r\n     *\r\n     * // remove the named expression\r\n     * const changes = hfInstance.removeNamedExpression('prettyName', 0);\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    removeNamedExpression(expressionName, scope) {\r\n        validateArgToType(expressionName, 'string', 'expressionName');\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        const removedNamedExpression = this._crudOperations.removeNamedExpression(expressionName, scope);\r\n        if (removedNamedExpression) {\r\n            const changes = this.recomputeIfDependencyGraphNeedsIt();\r\n            this._emitter.emit(Events.NamedExpressionRemoved, removedNamedExpression.displayName, changes);\r\n            return changes;\r\n        }\r\n        else {\r\n            return []; // codecov note: this does not look possible - removeNamedExpression() will throw if the named expression cannot be found\r\n        }\r\n    }\r\n    /**\r\n     * Lists named expressions.\r\n     * - If scope parameter is provided, returns an array of expression names defined for this scope.\r\n     * - If scope parameter is undefined, returns an array of global expression names.\r\n     *\r\n     * @param {number?} scope - scope of the named expressions, `sheetId` for local scope or `undefined` for global scope\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NoSheetWithIdError]] if no sheet with given sheetId exists\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     *  ['50'],\r\n     *  ['60'],\r\n     * ]);\r\n     *\r\n     * // add two named expressions and one scoped\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100');\r\n     * hfInstance.addNamedExpression('anotherPrettyName', '=Sheet1!$A$2+100');\r\n     * hfInstance.addNamedExpression('alsoPrettyName', '=Sheet1!$A$3+100', 0);\r\n     *\r\n     * // list the expressions, should return: ['prettyName', 'anotherPrettyName'] for this example\r\n     * const listOfExpressions = hfInstance.listNamedExpressions();\r\n     *\r\n     *  // list the expressions, should return: ['alsoPrettyName'] for this example\r\n     * const listOfExpressions = hfInstance.listNamedExpressions(0);\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    listNamedExpressions(scope) {\r\n        if (scope !== undefined) {\r\n            validateArgToType(scope, 'number', 'scope');\r\n        }\r\n        this._crudOperations.ensureScopeIdIsValid(scope);\r\n        return this._namedExpressions.getAllNamedExpressionsNamesInScope(scope);\r\n    }\r\n    /**\r\n     * Returns all named expressions serialized.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     *  ['50'],\r\n     *  ['60'],\r\n     * ]);\r\n     *\r\n     * // add two named expressions and one scoped\r\n     * hfInstance.addNamedExpression('prettyName', '=Sheet1!$A$1+100');\r\n     * hfInstance.addNamedExpression('anotherPrettyName', '=Sheet1!$A$2+100');\r\n     * hfInstance.addNamedExpression('prettyName3', '=Sheet1!$A$3+100', 0);\r\n     *\r\n     * // get all expressions serialized\r\n     * // should return:\r\n     * // [\r\n     * // {name: 'prettyName', expression: '=Sheet1!$A$1+100', options: undefined, scope: undefined},\r\n     * // {name: 'anotherPrettyName', expression: '=Sheet1!$A$2+100', options: undefined, scope: undefined},\r\n     * // {name: 'alsoPrettyName', expression: '=Sheet1!$A$3+100', options: undefined, scope: 0}\r\n     * // ]\r\n     * const allExpressions = hfInstance.getAllNamedExpressionsSerialized();\r\n     * ```\r\n     *\r\n     * @category Named Expressions\r\n     */\r\n    getAllNamedExpressionsSerialized() {\r\n        return this._serialization.getAllNamedExpressionsSerialized();\r\n    }\r\n    /**\r\n     * Parses and then unparses a formula.\r\n     * Returns a normalized formula (e.g. restores the original capitalization of sheet names, function names, cell addresses, and named expressions).\r\n     *\r\n     * @param {string} formulaString - a formula in a proper format - it must start with \"=\"\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     * @throws [[NotAFormulaError]] when the provided string is not a valid formula, i.e. does not start with \"=\"\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromArray([\r\n     *  ['42'],\r\n     *  ['50'],\r\n     * ]);\r\n     *\r\n     * // returns '=Sheet1!$A$1+10'\r\n     * const normalizedFormula = hfInstance.normalizeFormula('=SHEET1!$A$1+10');\r\n     *\r\n     * // returns '=3*$A$1'\r\n     * const normalizedFormula = hfInstance.normalizeFormula('=3*$a$1');\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    normalizeFormula(formulaString) {\r\n        validateArgToType(formulaString, 'string', 'formulaString');\r\n        const { ast, address } = this.extractTemporaryFormula(formulaString);\r\n        if (ast === undefined) {\r\n            throw new NotAFormulaError();\r\n        }\r\n        return this._unparser.unparse(ast, address);\r\n    }\r\n    /**\r\n     * Calculates fire-and-forget formula, returns the calculated value.\r\n     *\r\n     * @param {string} formulaString - A formula in a proper format, starting with `=`.\r\n     * @param {number} sheetId - The ID of a sheet in context of which the formula gets evaluated.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type arguments is of wrong type.\r\n     * @throws [[NotAFormulaError]] when the provided string is not a valid formula (i.e. doesn't start with `=`).\r\n     * @throws [[NoSheetWithIdError]] when the provided `sheetID` doesn't exist.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildFromSheets({\r\n     *  Sheet1: [['58']],\r\n     *  Sheet2: [['1', '2', '3'], ['4', '5', '6']]\r\n     * });\r\n     *\r\n     * // returns the calculated formula's value\r\n     * // for this example, returns `68`\r\n     * const calculatedFormula = hfInstance.calculateFormula('=A1+10', 0);\r\n     *\r\n     * // for this example, returns [['11', '12', '13'], ['14', '15', '16']]\r\n     * const calculatedFormula = hfInstance.calculateFormula('=A1:B3+10', 1);\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    calculateFormula(formulaString, sheetId) {\r\n        validateArgToType(formulaString, 'string', 'formulaString');\r\n        validateArgToType(sheetId, 'number', 'sheetId');\r\n        this._crudOperations.ensureScopeIdIsValid(sheetId);\r\n        const { ast, address, dependencies } = this.extractTemporaryFormula(formulaString, sheetId);\r\n        if (ast === undefined) {\r\n            throw new NotAFormulaError();\r\n        }\r\n        const internalCellValue = this.evaluator.runAndForget(ast, address, dependencies);\r\n        return this._exporter.exportScalarOrRange(internalCellValue);\r\n    }\r\n    /**\r\n     * Validates the formula.\r\n     * If the provided string starts with \"=\" and is a parsable formula, the method returns `true`.\r\n     * The validation is purely grammatical: the method doesn't verify if the formula can be calculated or not.\r\n     *\r\n     * @param {string} formulaString -  a formula in a proper format - it must start with \"=\"\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // checks if the given string is a valid formula, should return 'true' for this example\r\n     * const isFormula = hfInstance.validateFormula('=SUM(1, 2)');\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    validateFormula(formulaString) {\r\n        validateArgToType(formulaString, 'string', 'formulaString');\r\n        const { ast } = this.extractTemporaryFormula(formulaString);\r\n        if (ast === undefined) {\r\n            return false;\r\n        }\r\n        if (ast.type === AstNodeType.ERROR && !ast.error) {\r\n            return false; // codecov note: could not identify a formulaString that would cause this condition\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Returns translated names of all functions registered in this instance of HyperFormula\r\n     * according to the language set in the configuration\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // return translated names of all functions, assign to a variable\r\n     * const allNames = hfInstance.getRegisteredFunctionNames();\r\n     * ```\r\n     *\r\n     * @category Custom Functions\r\n     */\r\n    getRegisteredFunctionNames() {\r\n        const language = HyperFormula.getLanguage(this._config.language);\r\n        return language.getFunctionTranslations(this._functionRegistry.getRegisteredFunctionIds());\r\n    }\r\n    /**\r\n     * Returns class of a plugin used by function with given id\r\n     *\r\n     * @param {string} functionId - id of a function, e.g. 'SUMIF'\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // import your own plugin\r\n     * import { MyExamplePlugin } from './file_with_your_plugin';\r\n     *\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // register a plugin\r\n     * HyperFormula.registerFunctionPlugin(MyExamplePlugin);\r\n     *\r\n     * // get the plugin\r\n     * const myPlugin = hfInstance.getFunctionPlugin('EXAMPLE');\r\n     * ```\r\n     *\r\n     * @category Custom Functions\r\n     */\r\n    getFunctionPlugin(functionId) {\r\n        validateArgToType(functionId, 'string', 'functionId');\r\n        return this._functionRegistry.getFunctionPlugin(functionId);\r\n    }\r\n    /**\r\n     * Returns classes of all plugins registered in this instance of HyperFormula\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // return classes of all plugins registered, assign to a variable\r\n     * const allNames = hfInstance.getAllFunctionPlugins();\r\n     * ```\r\n     *\r\n     * @category Custom Functions\r\n     */\r\n    getAllFunctionPlugins() {\r\n        return this._functionRegistry.getPlugins();\r\n    }\r\n    /**\r\n     * Interprets number as a date + time.\r\n     *\r\n     * @param {number} inputNumber - number of days since nullDate, should be non-negative, fractions are interpreted as hours/minutes/seconds.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // pass the number of days since nullDate\r\n     * // the method should return formatted date and time, for this example:\r\n     * // {year: 2020, month: 1, day: 15, hours: 2, minutes: 24, seconds: 0}\r\n     * const dateTimeFromNumber = hfInstance.numberToDateTime(43845.1);\r\n     *\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    numberToDateTime(inputNumber) {\r\n        validateArgToType(inputNumber, 'number', 'val');\r\n        return this._evaluator.interpreter.dateTimeHelper.numberToSimpleDateTime(inputNumber);\r\n    }\r\n    /**\r\n     * Interprets number as a date.\r\n     *\r\n     * @param {number} inputNumber - number of days since nullDate, should be non-negative, fractions are ignored.\r\n  \r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n  \r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // pass the number of days since nullDate\r\n     * // the method should return formatted date, for this example:\r\n     * // {year: 2020, month: 1, day: 15}\r\n     * const dateFromNumber = hfInstance.numberToDate(43845);\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    numberToDate(inputNumber) {\r\n        validateArgToType(inputNumber, 'number', 'val');\r\n        return this._evaluator.interpreter.dateTimeHelper.numberToSimpleDate(inputNumber);\r\n    }\r\n    /**\r\n     * Interprets number as a time (hours/minutes/seconds).\r\n     *\r\n     * @param {number} inputNumber - time in 24h units.\r\n     *\r\n     * @throws [[ExpectedValueOfTypeError]] if any of its basic type argument is of wrong type\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // pass a number to be interpreted as a time\r\n     * // should return {hours: 26, minutes: 24} for this example\r\n     * const timeFromNumber = hfInstance.numberToTime(1.1);\r\n     * ```\r\n     *\r\n     * @category Helpers\r\n     */\r\n    numberToTime(inputNumber) {\r\n        validateArgToType(inputNumber, 'number', 'val');\r\n        return numberToSimpleTime(inputNumber);\r\n    }\r\n    /**\r\n     * Subscribes to an event.\r\n     * For the list of all available events, see [[Listeners]].\r\n     *\r\n     * @param {Event} event the name of the event to subscribe to\r\n     * @param {Listener} listener to be called when event is emitted\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // subscribe to a 'sheetAdded', pass a simple handler\r\n     * hfInstance.on('sheetAdded', ( ) => { console.log('foo') });\r\n     *\r\n     * // add a sheet to trigger an event,\r\n     * // console should print 'foo' after each time sheet is added in this example\r\n     * hfInstance.addSheet('FooBar');\r\n     * ```\r\n     *\r\n     * @category Events\r\n     */\r\n    on(event, listener) {\r\n        this._emitter.on(event, listener);\r\n    }\r\n    /**\r\n     * Subscribes to an event once.\r\n     * For the list of all available events, see [[Listeners]].\r\n     *\r\n     * @param {Event} event the name of the event to subscribe to\r\n     * @param {Listener} listener to be called when event is emitted\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // subscribe to a 'sheetAdded', pass a simple handler\r\n     * hfInstance.once('sheetAdded', ( ) => { console.log('foo') });\r\n     *\r\n     * // call addSheet twice,\r\n     * // console should print 'foo' only once when the sheet is added in this example\r\n     * hfInstance.addSheet('FooBar');\r\n     * hfInstance.addSheet('FooBaz');\r\n     * ```\r\n     *\r\n     * @category Events\r\n     */\r\n    once(event, listener) {\r\n        this._emitter.once(event, listener);\r\n    }\r\n    /**\r\n     * Unsubscribes from an event or from all events.\r\n     * For the list of all available events, see [[Listeners]].\r\n     *\r\n     * @param {Event} event the name of the event to subscribe to\r\n     * @param {Listener} listener to be called when event is emitted\r\n     *\r\n     * @example\r\n     * ```js\r\n     * const hfInstance = HyperFormula.buildEmpty();\r\n     *\r\n     * // define a simple function to be called upon emitting an event\r\n     * const handler = ( ) => { console.log('baz') }\r\n     *\r\n     * // subscribe to a 'sheetAdded', pass the handler\r\n     * hfInstance.on('sheetAdded', handler);\r\n     *\r\n     * // add a sheet to trigger an event,\r\n     * // console should print 'baz' each time a sheet is added\r\n     * hfInstance.addSheet('FooBar');\r\n     *\r\n     * // unsubscribe from a 'sheetAdded'\r\n     * hfInstance.off('sheetAdded', handler);\r\n     *\r\n     * // add a sheet, the console should not print anything\r\n     * hfInstance.addSheet('FooBaz');\r\n     * ```\r\n     *\r\n     * @category Events\r\n     */\r\n    off(event, listener) {\r\n        this._emitter.off(event, listener);\r\n    }\r\n    /**\r\n     * Destroys instance of HyperFormula.\r\n     *\r\n     * @example\r\n     * ```js\r\n     * // destroys the instance\r\n     * hfInstance.destroy();\r\n     * ```\r\n     *\r\n     * @category Instance\r\n     */\r\n    destroy() {\r\n        objectDestroy(this);\r\n    }\r\n    ensureEvaluationIsNotSuspended() {\r\n        if (this._evaluationSuspended) {\r\n            throw new EvaluationSuspendedError();\r\n        }\r\n    }\r\n    extractTemporaryFormula(formulaString, sheetId = 1) {\r\n        const parsedCellContent = this._cellContentParser.parse(formulaString);\r\n        const address = { sheet: sheetId, col: 0, row: 0 };\r\n        if (!(parsedCellContent instanceof CellContent.Formula)) {\r\n            return { address, dependencies: [] };\r\n        }\r\n        const { ast, errors, dependencies } = this._parser.parse(parsedCellContent.formula, address);\r\n        if (errors.length > 0) {\r\n            return { address, dependencies: [] };\r\n        }\r\n        return { ast, address, dependencies };\r\n    }\r\n    /**\r\n     * Runs a recomputation starting from recently changed vertices.\r\n     *\r\n     * Note that this method may trigger dependency graph recalculation.\r\n     *\r\n     * @fires [[valuesUpdated]] if recalculation was triggered by this change\r\n     */\r\n    recomputeIfDependencyGraphNeedsIt() {\r\n        if (!this._evaluationSuspended) {\r\n            const changes = this._crudOperations.getAndClearContentChanges();\r\n            const verticesToRecomputeFrom = Array.from(this.dependencyGraph.verticesToRecompute());\r\n            this.dependencyGraph.clearRecentlyChangedVertices();\r\n            if (verticesToRecomputeFrom.length > 0) {\r\n                changes.addAll(this.evaluator.partialRun(verticesToRecomputeFrom));\r\n            }\r\n            const exportedChanges = changes.exportChanges(this._exporter);\r\n            if (!changes.isEmpty()) {\r\n                this._emitter.emit(Events.ValuesUpdated, exportedChanges);\r\n            }\r\n            return exportedChanges;\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n}\r\n/**\r\n * Version of the HyperFormula.\r\n *\r\n * @category Static Properties\r\n */\r\nHyperFormula.version = process.env.HT_VERSION;\r\n/**\r\n * Latest build date.\r\n *\r\n * @category Static Properties\r\n */\r\nHyperFormula.buildDate = process.env.HT_BUILD_DATE;\r\n/**\r\n * A release date.\r\n *\r\n * @category Static Properties\r\n */\r\nHyperFormula.releaseDate = process.env.HT_RELEASE_DATE;\r\n/**\r\n * Contains all available languages to use in registerLanguage.\r\n *\r\n * @category Static Properties\r\n */\r\nHyperFormula.languages = {};\r\nHyperFormula.registeredLanguages = new Map();\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArraySizePredictor } from './ArraySize';\r\nimport { CellContentParser } from './CellContentParser';\r\nimport { ClipboardOperations } from './ClipboardOperations';\r\nimport { Config } from './Config';\r\nimport { CrudOperations } from './CrudOperations';\r\nimport { DateTimeHelper } from './DateTimeHelper';\r\nimport { DependencyGraph } from './DependencyGraph';\r\nimport { SheetSizeLimitExceededError } from './errors';\r\nimport { Evaluator } from './Evaluator';\r\nimport { Exporter } from './Exporter';\r\nimport { GraphBuilder } from './GraphBuilder';\r\nimport { UIElement } from './i18n';\r\nimport { ArithmeticHelper } from './interpreter/ArithmeticHelper';\r\nimport { FunctionRegistry } from './interpreter/FunctionRegistry';\r\nimport { Interpreter } from './interpreter/Interpreter';\r\nimport { LazilyTransformingAstService } from './LazilyTransformingAstService';\r\nimport { buildColumnSearchStrategy } from './Lookup/SearchStrategy';\r\nimport { NamedExpressions } from './NamedExpressions';\r\nimport { NumberLiteralHelper } from './NumberLiteralHelper';\r\nimport { Operations } from './Operations';\r\nimport { buildLexerConfig, ParserWithCaching, Unparser } from './parser';\r\nimport { Serialization } from './Serialization';\r\nimport { findBoundaries, validateAsSheet } from './Sheet';\r\nimport { EmptyStatistics, Statistics, StatType } from './statistics';\r\nimport { UndoRedo } from './UndoRedo';\r\nexport class BuildEngineFactory {\r\n    static buildFromSheets(sheets, configInput = {}, namedExpressions = []) {\r\n        const config = new Config(configInput);\r\n        return this.buildEngine(config, sheets, namedExpressions);\r\n    }\r\n    static buildFromSheet(sheet, configInput = {}, namedExpressions = []) {\r\n        const config = new Config(configInput);\r\n        const newsheetprefix = config.translationPackage.getUITranslation(UIElement.NEW_SHEET_PREFIX) + '1';\r\n        return this.buildEngine(config, { [newsheetprefix]: sheet }, namedExpressions);\r\n    }\r\n    static buildEmpty(configInput = {}, namedExpressions = []) {\r\n        return this.buildEngine(new Config(configInput), {}, namedExpressions);\r\n    }\r\n    static rebuildWithConfig(config, sheets, namedExpressions, stats) {\r\n        return this.buildEngine(config, sheets, namedExpressions, stats);\r\n    }\r\n    static buildEngine(config, sheets = {}, inputNamedExpressions = [], stats = config.useStats ? new Statistics() : new EmptyStatistics()) {\r\n        stats.start(StatType.BUILD_ENGINE_TOTAL);\r\n        const namedExpressions = new NamedExpressions();\r\n        const functionRegistry = new FunctionRegistry(config);\r\n        const lazilyTransformingAstService = new LazilyTransformingAstService(stats);\r\n        const dependencyGraph = DependencyGraph.buildEmpty(lazilyTransformingAstService, config, functionRegistry, namedExpressions, stats);\r\n        const columnSearch = buildColumnSearchStrategy(dependencyGraph, config, stats);\r\n        const sheetMapping = dependencyGraph.sheetMapping;\r\n        const addressMapping = dependencyGraph.addressMapping;\r\n        for (const sheetName in sheets) {\r\n            if (Object.prototype.hasOwnProperty.call(sheets, sheetName)) {\r\n                const sheet = sheets[sheetName];\r\n                validateAsSheet(sheet);\r\n                const boundaries = findBoundaries(sheet);\r\n                if (boundaries.height > config.maxRows || boundaries.width > config.maxColumns) {\r\n                    throw new SheetSizeLimitExceededError();\r\n                }\r\n                const sheetId = sheetMapping.addSheet(sheetName);\r\n                addressMapping.autoAddSheet(sheetId, sheet, boundaries);\r\n            }\r\n        }\r\n        const parser = new ParserWithCaching(config, functionRegistry, sheetMapping.get);\r\n        lazilyTransformingAstService.parser = parser;\r\n        const unparser = new Unparser(config, buildLexerConfig(config), sheetMapping.fetchDisplayName, namedExpressions);\r\n        const dateTimeHelper = new DateTimeHelper(config);\r\n        const numberLiteralHelper = new NumberLiteralHelper(config);\r\n        const arithmeticHelper = new ArithmeticHelper(config, dateTimeHelper, numberLiteralHelper);\r\n        const cellContentParser = new CellContentParser(config, dateTimeHelper, numberLiteralHelper);\r\n        const arraySizePredictor = new ArraySizePredictor(config, functionRegistry);\r\n        const operations = new Operations(config, dependencyGraph, columnSearch, cellContentParser, parser, stats, lazilyTransformingAstService, namedExpressions, arraySizePredictor);\r\n        const undoRedo = new UndoRedo(config, operations);\r\n        lazilyTransformingAstService.undoRedo = undoRedo;\r\n        const clipboardOperations = new ClipboardOperations(config, dependencyGraph, operations);\r\n        const crudOperations = new CrudOperations(config, operations, undoRedo, clipboardOperations, dependencyGraph, columnSearch, parser, cellContentParser, lazilyTransformingAstService, namedExpressions);\r\n        inputNamedExpressions.forEach((entry) => {\r\n            crudOperations.ensureItIsPossibleToAddNamedExpression(entry.name, entry.expression, entry.scope);\r\n            crudOperations.operations.addNamedExpression(entry.name, entry.expression, entry.scope, entry.options);\r\n        });\r\n        const exporter = new Exporter(config, namedExpressions, sheetMapping.fetchDisplayName, lazilyTransformingAstService);\r\n        const serialization = new Serialization(dependencyGraph, unparser, exporter);\r\n        const interpreter = new Interpreter(config, dependencyGraph, columnSearch, stats, arithmeticHelper, functionRegistry, namedExpressions, serialization, arraySizePredictor, dateTimeHelper);\r\n        stats.measure(StatType.GRAPH_BUILD, () => {\r\n            const graphBuilder = new GraphBuilder(dependencyGraph, columnSearch, parser, cellContentParser, stats, arraySizePredictor);\r\n            graphBuilder.buildGraph(sheets, stats);\r\n        });\r\n        const evaluator = new Evaluator(config, stats, interpreter, lazilyTransformingAstService, dependencyGraph, columnSearch);\r\n        evaluator.run();\r\n        stats.end(StatType.BUILD_ENGINE_TOTAL);\r\n        return {\r\n            config,\r\n            stats,\r\n            dependencyGraph,\r\n            columnSearch,\r\n            parser,\r\n            unparser,\r\n            cellContentParser,\r\n            evaluator,\r\n            lazilyTransformingAstService,\r\n            crudOperations,\r\n            exporter,\r\n            namedExpressions,\r\n            serialization,\r\n            functionRegistry,\r\n        };\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from './Cell';\r\nimport { timeToNumber } from './DateTimeHelper';\r\nimport { ErrorMessage } from './error-message';\r\nimport { UnableToParseError } from './errors';\r\nimport { fixNegativeZero, isNumberOverflow } from './interpreter/ArithmeticHelper';\r\nimport { cloneNumber, CurrencyNumber, DateNumber, DateTimeNumber, getRawValue, PercentNumber, TimeNumber } from './interpreter/InterpreterValue';\r\nexport var CellContent;\r\n(function (CellContent) {\r\n    class Number {\r\n        constructor(value) {\r\n            this.value = value;\r\n            this.value = cloneNumber(this.value, fixNegativeZero(getRawValue(this.value)));\r\n        }\r\n    }\r\n    CellContent.Number = Number;\r\n    class String {\r\n        constructor(value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n    CellContent.String = String;\r\n    class Boolean {\r\n        constructor(value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n    CellContent.Boolean = Boolean;\r\n    class Empty {\r\n        static getSingletonInstance() {\r\n            if (!Empty.instance) {\r\n                Empty.instance = new Empty();\r\n            }\r\n            return Empty.instance;\r\n        }\r\n    }\r\n    CellContent.Empty = Empty;\r\n    class Formula {\r\n        constructor(formula) {\r\n            this.formula = formula;\r\n        }\r\n    }\r\n    CellContent.Formula = Formula;\r\n    class Error {\r\n        constructor(errorType, message) {\r\n            this.value = new CellError(errorType, message);\r\n        }\r\n    }\r\n    CellContent.Error = Error;\r\n})(CellContent || (CellContent = {}));\r\n/**\r\n * Checks whether string looks like formula or not.\r\n *\r\n * @param text - formula\r\n */\r\nexport function isFormula(text) {\r\n    return text.startsWith('=');\r\n}\r\nexport function isBoolean(text) {\r\n    const tl = text.toLowerCase();\r\n    return tl === 'true' || tl === 'false';\r\n}\r\nexport function isError(text, errorMapping) {\r\n    const upperCased = text.toUpperCase();\r\n    const errorRegex = /#[A-Za-z0-9\\/]+[?!]?/;\r\n    return errorRegex.test(upperCased) && Object.prototype.hasOwnProperty.call(errorMapping, upperCased);\r\n}\r\nexport class CellContentParser {\r\n    constructor(config, dateHelper, numberLiteralsHelper) {\r\n        this.config = config;\r\n        this.dateHelper = dateHelper;\r\n        this.numberLiteralsHelper = numberLiteralsHelper;\r\n    }\r\n    parse(content) {\r\n        if (content === undefined || content === null) {\r\n            return CellContent.Empty.getSingletonInstance();\r\n        }\r\n        else if (typeof content === 'number') {\r\n            if (isNumberOverflow(content)) {\r\n                return new CellContent.Error(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            else {\r\n                return new CellContent.Number(content);\r\n            }\r\n        }\r\n        else if (typeof content === 'boolean') {\r\n            return new CellContent.Boolean(content);\r\n        }\r\n        else if (content instanceof Date) {\r\n            const dateVal = this.dateHelper.dateToNumber({\r\n                day: content.getDate(),\r\n                month: content.getMonth() + 1,\r\n                year: content.getFullYear()\r\n            });\r\n            const timeVal = timeToNumber({\r\n                hours: content.getHours(),\r\n                minutes: content.getMinutes(),\r\n                seconds: content.getSeconds() + content.getMilliseconds() / 1000\r\n            });\r\n            const val = dateVal + timeVal;\r\n            if (val < 0) {\r\n                return new CellContent.Error(ErrorType.NUM, ErrorMessage.DateBounds);\r\n            }\r\n            if (val % 1 === 0) {\r\n                return new CellContent.Number(new DateNumber(val, 'Date()'));\r\n            }\r\n            else if (val < 1) {\r\n                return new CellContent.Number(new TimeNumber(val, 'Date()'));\r\n            }\r\n            else {\r\n                return new CellContent.Number(new DateTimeNumber(val, 'Date()'));\r\n            }\r\n        }\r\n        else if (typeof content === 'string') {\r\n            if (isBoolean(content)) {\r\n                return new CellContent.Boolean(content.toLowerCase() === 'true');\r\n            }\r\n            else if (isFormula(content)) {\r\n                return new CellContent.Formula(content);\r\n            }\r\n            else if (isError(content, this.config.errorMapping)) {\r\n                return new CellContent.Error(this.config.errorMapping[content.toUpperCase()]);\r\n            }\r\n            else {\r\n                let trimmedContent = content.trim();\r\n                let mode = 0;\r\n                let currency;\r\n                if (trimmedContent.endsWith('%')) {\r\n                    mode = 1;\r\n                    trimmedContent = trimmedContent.slice(0, trimmedContent.length - 1);\r\n                }\r\n                else {\r\n                    const res = this.currencyMatcher(trimmedContent);\r\n                    if (res !== undefined) {\r\n                        mode = 2;\r\n                        [currency, trimmedContent] = res;\r\n                    }\r\n                }\r\n                const val = this.numberLiteralsHelper.numericStringToMaybeNumber(trimmedContent);\r\n                if (val !== undefined) {\r\n                    let parseAsNum;\r\n                    if (mode === 1) {\r\n                        parseAsNum = new PercentNumber(val / 100);\r\n                    }\r\n                    else if (mode === 2) {\r\n                        parseAsNum = new CurrencyNumber(val, currency);\r\n                    }\r\n                    else {\r\n                        parseAsNum = val;\r\n                    }\r\n                    return new CellContent.Number(parseAsNum);\r\n                }\r\n                const parsedDateNumber = this.dateHelper.dateStringToDateNumber(trimmedContent);\r\n                if (parsedDateNumber !== undefined) {\r\n                    return new CellContent.Number(parsedDateNumber);\r\n                }\r\n                else {\r\n                    return new CellContent.String(content.startsWith('\\'') ? content.slice(1) : content);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            throw new UnableToParseError(content);\r\n        }\r\n    }\r\n    currencyMatcher(token) {\r\n        for (const currency of this.config.currencySymbol) {\r\n            if (token.startsWith(currency)) {\r\n                return [currency, token.slice(currency.length)];\r\n            }\r\n            if (token.endsWith(currency)) {\r\n                return [currency, token.slice(0, token.length - currency.length)];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from './AbsoluteCellRange';\r\nimport { invalidSimpleCellAddress, simpleCellAddress } from './Cell';\r\nimport { InvalidArgumentsError, SheetSizeLimitExceededError } from './errors';\r\nvar ClipboardOperationType;\r\n(function (ClipboardOperationType) {\r\n    ClipboardOperationType[ClipboardOperationType[\"COPY\"] = 0] = \"COPY\";\r\n    ClipboardOperationType[ClipboardOperationType[\"CUT\"] = 1] = \"CUT\";\r\n})(ClipboardOperationType || (ClipboardOperationType = {}));\r\nexport var ClipboardCellType;\r\n(function (ClipboardCellType) {\r\n    ClipboardCellType[ClipboardCellType[\"VALUE\"] = 0] = \"VALUE\";\r\n    ClipboardCellType[ClipboardCellType[\"EMPTY\"] = 1] = \"EMPTY\";\r\n    ClipboardCellType[ClipboardCellType[\"FORMULA\"] = 2] = \"FORMULA\";\r\n    ClipboardCellType[ClipboardCellType[\"PARSING_ERROR\"] = 3] = \"PARSING_ERROR\";\r\n})(ClipboardCellType || (ClipboardCellType = {}));\r\nclass Clipboard {\r\n    constructor(sourceLeftCorner, width, height, type, content) {\r\n        this.sourceLeftCorner = sourceLeftCorner;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.type = type;\r\n        this.content = content;\r\n    }\r\n    *getContent(leftCorner) {\r\n        if (this.content === undefined) {\r\n            return;\r\n        }\r\n        else {\r\n            for (let y = 0; y < this.height; ++y) {\r\n                for (let x = 0; x < this.width; ++x) {\r\n                    yield [simpleCellAddress(leftCorner.sheet, leftCorner.col + x, leftCorner.row + y), this.content[y][x]];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexport class ClipboardOperations {\r\n    constructor(config, dependencyGraph, operations) {\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.operations = operations;\r\n        this.maxRows = config.maxRows;\r\n        this.maxColumns = config.maxColumns;\r\n    }\r\n    cut(leftCorner, width, height) {\r\n        this.clipboard = new Clipboard(leftCorner, width, height, ClipboardOperationType.CUT);\r\n    }\r\n    copy(leftCorner, width, height) {\r\n        const content = [];\r\n        for (let y = 0; y < height; ++y) {\r\n            content[y] = [];\r\n            for (let x = 0; x < width; ++x) {\r\n                const clipboardCell = this.operations.getClipboardCell(simpleCellAddress(leftCorner.sheet, leftCorner.col + x, leftCorner.row + y));\r\n                content[y].push(clipboardCell);\r\n            }\r\n        }\r\n        this.clipboard = new Clipboard(leftCorner, width, height, ClipboardOperationType.COPY, content);\r\n    }\r\n    abortCut() {\r\n        if (this.clipboard && this.clipboard.type === ClipboardOperationType.CUT) {\r\n            this.clear();\r\n        }\r\n    }\r\n    clear() {\r\n        this.clipboard = undefined;\r\n    }\r\n    ensureItIsPossibleToCopyPaste(destinationLeftCorner) {\r\n        if (this.clipboard === undefined) {\r\n            return;\r\n        }\r\n        if (invalidSimpleCellAddress(destinationLeftCorner) ||\r\n            !this.dependencyGraph.sheetMapping.hasSheetWithId(destinationLeftCorner.sheet)) {\r\n            throw new InvalidArgumentsError('a valid target address.');\r\n        }\r\n        const targetRange = AbsoluteCellRange.spanFrom(destinationLeftCorner, this.clipboard.width, this.clipboard.height);\r\n        if (targetRange.exceedsSheetSizeLimits(this.maxColumns, this.maxRows)) {\r\n            throw new SheetSizeLimitExceededError();\r\n        }\r\n        if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(targetRange)) {\r\n            throw new Error('It is not possible to paste onto an array');\r\n        }\r\n    }\r\n    isCutClipboard() {\r\n        return this.clipboard !== undefined && this.clipboard.type === ClipboardOperationType.CUT;\r\n    }\r\n    isCopyClipboard() {\r\n        return this.clipboard !== undefined && this.clipboard.type === ClipboardOperationType.COPY;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from './AbsoluteCellRange';\r\nimport { invalidSimpleCellAddress, simpleCellAddress } from './Cell';\r\nimport { CellContent } from './CellContentParser';\r\nimport { InvalidAddressError, InvalidArgumentsError, NamedExpressionDoesNotExistError, NamedExpressionNameIsAlreadyTakenError, NamedExpressionNameIsInvalidError, NoOperationToRedoError, NoOperationToUndoError, NoRelativeAddressesAllowedError, NoSheetWithIdError, NothingToPasteError, SheetNameAlreadyTakenError, SheetSizeLimitExceededError, SourceLocationHasArrayError, TargetLocationHasArrayError } from './errors';\r\nimport { doesContainRelativeReferences } from './NamedExpressions';\r\nimport { AddColumnsCommand, AddRowsCommand, RemoveColumnsCommand, RemoveRowsCommand } from './Operations';\r\nimport { findBoundaries, validateAsSheet } from './Sheet';\r\nimport { ColumnsSpan, RowsSpan } from './Span';\r\nimport { AddColumnsUndoEntry, AddNamedExpressionUndoEntry, AddRowsUndoEntry, AddSheetUndoEntry, ChangeNamedExpressionUndoEntry, ClearSheetUndoEntry, MoveCellsUndoEntry, MoveColumnsUndoEntry, MoveRowsUndoEntry, PasteUndoEntry, RemoveColumnsUndoEntry, RemoveNamedExpressionUndoEntry, RemoveRowsUndoEntry, RemoveSheetUndoEntry, RenameSheetUndoEntry, SetCellContentsUndoEntry, SetColumnOrderUndoEntry, SetRowOrderUndoEntry, SetSheetContentUndoEntry } from './UndoRedo';\r\nexport class CrudOperations {\r\n    constructor(config, operations, undoRedo, clipboardOperations, dependencyGraph, columnSearch, parser, cellContentParser, lazilyTransformingAstService, namedExpressions) {\r\n        this.operations = operations;\r\n        this.undoRedo = undoRedo;\r\n        this.clipboardOperations = clipboardOperations;\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.columnSearch = columnSearch;\r\n        this.parser = parser;\r\n        this.cellContentParser = cellContentParser;\r\n        this.lazilyTransformingAstService = lazilyTransformingAstService;\r\n        this.namedExpressions = namedExpressions;\r\n        this.maxRows = config.maxRows;\r\n        this.maxColumns = config.maxColumns;\r\n    }\r\n    get sheetMapping() {\r\n        return this.dependencyGraph.sheetMapping;\r\n    }\r\n    addRows(sheet, ...indexes) {\r\n        const addRowsCommand = new AddRowsCommand(sheet, indexes);\r\n        this.ensureItIsPossibleToAddRows(sheet, ...indexes);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        this.operations.addRows(addRowsCommand);\r\n        this.undoRedo.saveOperation(new AddRowsUndoEntry(addRowsCommand));\r\n    }\r\n    removeRows(sheet, ...indexes) {\r\n        const removeRowsCommand = new RemoveRowsCommand(sheet, indexes);\r\n        this.ensureItIsPossibleToRemoveRows(sheet, ...indexes);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const rowsRemovals = this.operations.removeRows(removeRowsCommand);\r\n        this.undoRedo.saveOperation(new RemoveRowsUndoEntry(removeRowsCommand, rowsRemovals));\r\n    }\r\n    addColumns(sheet, ...indexes) {\r\n        const addColumnsCommand = new AddColumnsCommand(sheet, indexes);\r\n        this.ensureItIsPossibleToAddColumns(sheet, ...indexes);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        this.operations.addColumns(addColumnsCommand);\r\n        this.undoRedo.saveOperation(new AddColumnsUndoEntry(addColumnsCommand));\r\n    }\r\n    removeColumns(sheet, ...indexes) {\r\n        const removeColumnsCommand = new RemoveColumnsCommand(sheet, indexes);\r\n        this.ensureItIsPossibleToRemoveColumns(sheet, ...indexes);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const columnsRemovals = this.operations.removeColumns(removeColumnsCommand);\r\n        this.undoRedo.saveOperation(new RemoveColumnsUndoEntry(removeColumnsCommand, columnsRemovals));\r\n    }\r\n    moveCells(sourceLeftCorner, width, height, destinationLeftCorner) {\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const { version, overwrittenCellsData, addedGlobalNamedExpressions } = this.operations.moveCells(sourceLeftCorner, width, height, destinationLeftCorner);\r\n        this.undoRedo.saveOperation(new MoveCellsUndoEntry(sourceLeftCorner, width, height, destinationLeftCorner, overwrittenCellsData, addedGlobalNamedExpressions, version));\r\n    }\r\n    moveRows(sheet, startRow, numberOfRows, targetRow) {\r\n        this.ensureItIsPossibleToMoveRows(sheet, startRow, numberOfRows, targetRow);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const version = this.operations.moveRows(sheet, startRow, numberOfRows, targetRow);\r\n        this.undoRedo.saveOperation(new MoveRowsUndoEntry(sheet, startRow, numberOfRows, targetRow, version));\r\n    }\r\n    moveColumns(sheet, startColumn, numberOfColumns, targetColumn) {\r\n        this.ensureItIsPossibleToMoveColumns(sheet, startColumn, numberOfColumns, targetColumn);\r\n        this.undoRedo.clearRedoStack();\r\n        const version = this.operations.moveColumns(sheet, startColumn, numberOfColumns, targetColumn);\r\n        this.undoRedo.saveOperation(new MoveColumnsUndoEntry(sheet, startColumn, numberOfColumns, targetColumn, version));\r\n    }\r\n    cut(sourceLeftCorner, width, height) {\r\n        this.clipboardOperations.cut(sourceLeftCorner, width, height);\r\n    }\r\n    ensureItIsPossibleToCopy(sourceLeftCorner, width, height) {\r\n        if (!isPositiveInteger(width)) {\r\n            throw new InvalidArgumentsError('width to be positive integer.');\r\n        }\r\n        if (!isPositiveInteger(height)) {\r\n            throw new InvalidArgumentsError('height to be positive integer.');\r\n        }\r\n    }\r\n    copy(sourceLeftCorner, width, height) {\r\n        this.ensureItIsPossibleToCopy(sourceLeftCorner, width, height);\r\n        this.clipboardOperations.copy(sourceLeftCorner, width, height);\r\n    }\r\n    paste(targetLeftCorner) {\r\n        const clipboard = this.clipboardOperations.clipboard;\r\n        if (clipboard === undefined) {\r\n            throw new NothingToPasteError();\r\n        }\r\n        else if (this.clipboardOperations.isCutClipboard()) {\r\n            this.moveCells(clipboard.sourceLeftCorner, clipboard.width, clipboard.height, targetLeftCorner);\r\n        }\r\n        else if (this.clipboardOperations.isCopyClipboard()) {\r\n            this.clipboardOperations.ensureItIsPossibleToCopyPaste(targetLeftCorner);\r\n            const targetRange = AbsoluteCellRange.spanFrom(targetLeftCorner, clipboard.width, clipboard.height);\r\n            const oldContent = this.operations.getRangeClipboardCells(targetRange);\r\n            this.undoRedo.clearRedoStack();\r\n            const addedGlobalNamedExpressions = this.operations.restoreClipboardCells(clipboard.sourceLeftCorner.sheet, clipboard.getContent(targetLeftCorner));\r\n            this.undoRedo.saveOperation(new PasteUndoEntry(targetLeftCorner, oldContent, clipboard.content, addedGlobalNamedExpressions));\r\n        }\r\n    }\r\n    beginUndoRedoBatchMode() {\r\n        this.undoRedo.beginBatchMode();\r\n    }\r\n    commitUndoRedoBatchMode() {\r\n        this.undoRedo.commitBatchMode();\r\n    }\r\n    isClipboardEmpty() {\r\n        return this.clipboardOperations.clipboard === undefined;\r\n    }\r\n    clearClipboard() {\r\n        this.clipboardOperations.clear();\r\n    }\r\n    addSheet(name) {\r\n        if (name !== undefined) {\r\n            this.ensureItIsPossibleToAddSheet(name);\r\n        }\r\n        this.undoRedo.clearRedoStack();\r\n        const addedSheetName = this.operations.addSheet(name);\r\n        this.undoRedo.saveOperation(new AddSheetUndoEntry(addedSheetName));\r\n        return addedSheetName;\r\n    }\r\n    removeSheet(sheetId) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const originalName = this.sheetMapping.fetchDisplayName(sheetId);\r\n        const oldSheetContent = this.operations.getSheetClipboardCells(sheetId);\r\n        const { version, scopedNamedExpressions } = this.operations.removeSheet(sheetId);\r\n        this.undoRedo.saveOperation(new RemoveSheetUndoEntry(originalName, sheetId, oldSheetContent, scopedNamedExpressions, version));\r\n    }\r\n    renameSheet(sheetId, newName) {\r\n        this.ensureItIsPossibleToRenameSheet(sheetId, newName);\r\n        const oldName = this.operations.renameSheet(sheetId, newName);\r\n        if (oldName !== undefined) {\r\n            this.undoRedo.clearRedoStack();\r\n            this.undoRedo.saveOperation(new RenameSheetUndoEntry(sheetId, oldName, newName));\r\n        }\r\n        return oldName;\r\n    }\r\n    clearSheet(sheetId) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const oldSheetContent = this.operations.getSheetClipboardCells(sheetId);\r\n        this.operations.clearSheet(sheetId);\r\n        this.undoRedo.saveOperation(new ClearSheetUndoEntry(sheetId, oldSheetContent));\r\n    }\r\n    setCellContents(topLeftCornerAddress, cellContents) {\r\n        if (!(cellContents instanceof Array)) {\r\n            cellContents = [[cellContents]];\r\n        }\r\n        else {\r\n            for (let i = 0; i < cellContents.length; i++) {\r\n                if (!(cellContents[i] instanceof Array)) {\r\n                    throw new InvalidArgumentsError('an array of arrays or a raw cell value.');\r\n                }\r\n            }\r\n        }\r\n        this.ensureItIsPossibleToChangeCellContents(topLeftCornerAddress, cellContents);\r\n        this.undoRedo.clearRedoStack();\r\n        const oldContents = [];\r\n        for (let i = 0; i < cellContents.length; i++) {\r\n            for (let j = 0; j < cellContents[i].length; j++) {\r\n                const address = {\r\n                    sheet: topLeftCornerAddress.sheet,\r\n                    row: topLeftCornerAddress.row + i,\r\n                    col: topLeftCornerAddress.col + j,\r\n                };\r\n                const newContent = cellContents[i][j];\r\n                this.clipboardOperations.abortCut();\r\n                const oldContent = this.operations.setCellContent(address, newContent);\r\n                oldContents.push({ address, newContent, oldContent });\r\n            }\r\n        }\r\n        this.undoRedo.saveOperation(new SetCellContentsUndoEntry(oldContents));\r\n    }\r\n    setSheetContent(sheetId, values) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        this.ensureItIsPossibleToChangeSheetContents(sheetId, values);\r\n        validateAsSheet(values);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const oldSheetContent = this.operations.getSheetClipboardCells(sheetId);\r\n        this.operations.setSheetContent(sheetId, values);\r\n        this.undoRedo.saveOperation(new SetSheetContentUndoEntry(sheetId, oldSheetContent, values));\r\n    }\r\n    setRowOrder(sheetId, rowMapping) {\r\n        this.validateSwapRowIndexes(sheetId, rowMapping);\r\n        this.testRowOrderForArrays(sheetId, rowMapping);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const oldContent = this.operations.setRowOrder(sheetId, rowMapping);\r\n        this.undoRedo.saveOperation(new SetRowOrderUndoEntry(sheetId, rowMapping, oldContent));\r\n    }\r\n    validateSwapRowIndexes(sheetId, rowMapping) {\r\n        if (!this.sheetMapping.hasSheetWithId(sheetId)) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        this.validateRowOrColumnMapping(sheetId, rowMapping, 'row');\r\n    }\r\n    testColumnOrderForArrays(sheetId, columnMapping) {\r\n        for (const [source, target] of columnMapping) {\r\n            if (source !== target) {\r\n                const rowRange = AbsoluteCellRange.spanFrom({ sheet: sheetId, col: source, row: 0 }, 1, Infinity);\r\n                if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(rowRange)) {\r\n                    throw new SourceLocationHasArrayError();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setColumnOrder(sheetId, columnMapping) {\r\n        this.validateSwapColumnIndexes(sheetId, columnMapping);\r\n        this.testColumnOrderForArrays(sheetId, columnMapping);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        const oldContent = this.operations.setColumnOrder(sheetId, columnMapping);\r\n        this.undoRedo.saveOperation(new SetColumnOrderUndoEntry(sheetId, columnMapping, oldContent));\r\n    }\r\n    validateSwapColumnIndexes(sheetId, columnMapping) {\r\n        if (!this.sheetMapping.hasSheetWithId(sheetId)) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        this.validateRowOrColumnMapping(sheetId, columnMapping, 'column');\r\n    }\r\n    testRowOrderForArrays(sheetId, rowMapping) {\r\n        for (const [source, target] of rowMapping) {\r\n            if (source !== target) {\r\n                const rowRange = AbsoluteCellRange.spanFrom({ sheet: sheetId, col: 0, row: source }, Infinity, 1);\r\n                if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(rowRange)) {\r\n                    throw new SourceLocationHasArrayError();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    mappingFromOrder(sheetId, newOrder, rowOrColumn) {\r\n        if (!this.sheetMapping.hasSheetWithId(sheetId)) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        const limit = rowOrColumn === 'row' ? this.dependencyGraph.getSheetHeight(sheetId) : this.dependencyGraph.getSheetWidth(sheetId);\r\n        if (newOrder.length !== limit) {\r\n            throw new InvalidArgumentsError(`number of ${rowOrColumn}s provided to be sheet ${rowOrColumn === 'row' ? 'height' : 'width'}.`);\r\n        }\r\n        const ret = [];\r\n        for (let i = 0; i < limit; i++) {\r\n            if (newOrder[i] !== i) {\r\n                ret.push([i, newOrder[i]]);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    undo() {\r\n        if (this.undoRedo.isUndoStackEmpty()) {\r\n            throw new NoOperationToUndoError();\r\n        }\r\n        this.clipboardOperations.abortCut();\r\n        this.undoRedo.undo();\r\n    }\r\n    redo() {\r\n        if (this.undoRedo.isRedoStackEmpty()) {\r\n            throw new NoOperationToRedoError();\r\n        }\r\n        this.clipboardOperations.abortCut();\r\n        this.undoRedo.redo();\r\n    }\r\n    addNamedExpression(expressionName, expression, sheetId, options) {\r\n        this.ensureItIsPossibleToAddNamedExpression(expressionName, expression, sheetId);\r\n        this.operations.addNamedExpression(expressionName, expression, sheetId, options);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        this.undoRedo.saveOperation(new AddNamedExpressionUndoEntry(expressionName, expression, sheetId, options));\r\n    }\r\n    changeNamedExpressionExpression(expressionName, sheetId, newExpression, options) {\r\n        this.ensureItIsPossibleToChangeNamedExpression(expressionName, newExpression, sheetId);\r\n        const [oldNamedExpression, content] = this.operations.changeNamedExpressionExpression(expressionName, newExpression, sheetId, options);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        this.undoRedo.saveOperation(new ChangeNamedExpressionUndoEntry(oldNamedExpression, newExpression, content, sheetId, options));\r\n    }\r\n    removeNamedExpression(expressionName, sheetId) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        const [namedExpression, content] = this.operations.removeNamedExpression(expressionName, sheetId);\r\n        this.undoRedo.clearRedoStack();\r\n        this.clipboardOperations.abortCut();\r\n        this.undoRedo.saveOperation(new RemoveNamedExpressionUndoEntry(namedExpression, content, sheetId));\r\n        return namedExpression;\r\n    }\r\n    ensureItIsPossibleToAddNamedExpression(expressionName, expression, sheetId) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        this.ensureNamedExpressionNameIsValid(expressionName, sheetId);\r\n        this.ensureNamedExpressionIsValid(expression);\r\n    }\r\n    ensureItIsPossibleToChangeNamedExpression(expressionName, expression, sheetId) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        if (this.namedExpressions.namedExpressionForScope(expressionName, sheetId) === undefined) {\r\n            throw new NamedExpressionDoesNotExistError(expressionName);\r\n        }\r\n        this.ensureNamedExpressionIsValid(expression);\r\n    }\r\n    isItPossibleToRemoveNamedExpression(expressionName, sheetId) {\r\n        this.ensureScopeIdIsValid(sheetId);\r\n        if (this.namedExpressions.namedExpressionForScope(expressionName, sheetId) === undefined) {\r\n            throw new NamedExpressionDoesNotExistError(expressionName);\r\n        }\r\n    }\r\n    ensureItIsPossibleToAddRows(sheet, ...indexes) {\r\n        if (!this.sheetMapping.hasSheetWithId(sheet)) {\r\n            throw new NoSheetWithIdError(sheet);\r\n        }\r\n        const sheetHeight = this.dependencyGraph.getSheetHeight(sheet);\r\n        const newRowsCount = indexes.map(index => index[1]).reduce((a, b) => a + b, 0);\r\n        if (sheetHeight + newRowsCount > this.maxRows) {\r\n            throw new SheetSizeLimitExceededError();\r\n        }\r\n        for (const [row, numberOfRowsToAdd] of indexes) {\r\n            if (!isNonnegativeInteger(row) || !isPositiveInteger(numberOfRowsToAdd)) {\r\n                throw new InvalidArgumentsError('row number to be nonnegative and number of rows to add to be positive.');\r\n            }\r\n        }\r\n    }\r\n    ensureItIsPossibleToRemoveRows(sheet, ...indexes) {\r\n        for (const [rowStart, numberOfRows] of indexes) {\r\n            const rowEnd = rowStart + numberOfRows - 1;\r\n            if (!isNonnegativeInteger(rowStart) || !isNonnegativeInteger(rowEnd)) {\r\n                throw new InvalidArgumentsError('starting and ending row to be nonnegative.');\r\n            }\r\n            if (rowEnd < rowStart) {\r\n                throw new InvalidArgumentsError('starting row to be smaller than the ending row.');\r\n            }\r\n            if (!this.sheetMapping.hasSheetWithId(sheet)) {\r\n                throw new NoSheetWithIdError(sheet);\r\n            }\r\n        }\r\n    }\r\n    ensureItIsPossibleToAddColumns(sheet, ...indexes) {\r\n        if (!this.sheetMapping.hasSheetWithId(sheet)) {\r\n            throw new NoSheetWithIdError(sheet);\r\n        }\r\n        const sheetWidth = this.dependencyGraph.getSheetWidth(sheet);\r\n        const newColumnsCount = indexes.map(index => index[1]).reduce((a, b) => a + b, 0);\r\n        if (sheetWidth + newColumnsCount > this.maxColumns) {\r\n            throw new SheetSizeLimitExceededError();\r\n        }\r\n        for (const [column, numberOfColumnsToAdd] of indexes) {\r\n            if (!isNonnegativeInteger(column) || !isPositiveInteger(numberOfColumnsToAdd)) {\r\n                throw new InvalidArgumentsError('column number to be nonnegative and number of columns to add to be positive.');\r\n            }\r\n        }\r\n    }\r\n    ensureItIsPossibleToRemoveColumns(sheet, ...indexes) {\r\n        for (const [columnStart, numberOfColumns] of indexes) {\r\n            const columnEnd = columnStart + numberOfColumns - 1;\r\n            if (!isNonnegativeInteger(columnStart) || !isNonnegativeInteger(columnEnd)) {\r\n                throw new InvalidArgumentsError('starting and ending column to be nonnegative.');\r\n            }\r\n            if (columnEnd < columnStart) {\r\n                throw new InvalidArgumentsError('starting column to be smaller than the ending column.');\r\n            }\r\n            if (!this.sheetMapping.hasSheetWithId(sheet)) {\r\n                throw new NoSheetWithIdError(sheet);\r\n            }\r\n        }\r\n    }\r\n    ensureItIsPossibleToMoveRows(sheet, startRow, numberOfRows, targetRow) {\r\n        this.ensureItIsPossibleToAddRows(sheet, [targetRow, numberOfRows]);\r\n        const sourceStart = simpleCellAddress(sheet, 0, startRow);\r\n        const targetStart = simpleCellAddress(sheet, 0, targetRow);\r\n        if (!this.sheetMapping.hasSheetWithId(sheet)\r\n            || invalidSimpleCellAddress(sourceStart)\r\n            || invalidSimpleCellAddress(targetStart)\r\n            || !isPositiveInteger(numberOfRows)\r\n            || (targetRow <= startRow + numberOfRows && targetRow >= startRow)) {\r\n            throw new InvalidArgumentsError('a valid range of rows to move.');\r\n        }\r\n        const width = this.dependencyGraph.getSheetWidth(sheet);\r\n        const sourceRange = AbsoluteCellRange.spanFrom(sourceStart, width, numberOfRows);\r\n        if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(sourceRange)) {\r\n            throw new SourceLocationHasArrayError();\r\n        }\r\n        if (targetRow > 0 && this.dependencyGraph.arrayMapping.isFormulaArrayInAllRows(RowsSpan.fromNumberOfRows(sheet, targetRow - 1, 2))) {\r\n            throw new TargetLocationHasArrayError();\r\n        }\r\n    }\r\n    ensureItIsPossibleToMoveColumns(sheet, startColumn, numberOfColumns, targetColumn) {\r\n        this.ensureItIsPossibleToAddColumns(sheet, [targetColumn, numberOfColumns]);\r\n        const sourceStart = simpleCellAddress(sheet, startColumn, 0);\r\n        const targetStart = simpleCellAddress(sheet, targetColumn, 0);\r\n        if (!this.sheetMapping.hasSheetWithId(sheet)\r\n            || invalidSimpleCellAddress(sourceStart)\r\n            || invalidSimpleCellAddress(targetStart)\r\n            || !isPositiveInteger(numberOfColumns)\r\n            || (targetColumn <= startColumn + numberOfColumns && targetColumn >= startColumn)) {\r\n            throw new InvalidArgumentsError('a valid range of columns to move.');\r\n        }\r\n        const sheetHeight = this.dependencyGraph.getSheetHeight(sheet);\r\n        const sourceRange = AbsoluteCellRange.spanFrom(sourceStart, numberOfColumns, sheetHeight);\r\n        if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(sourceRange)) {\r\n            throw new SourceLocationHasArrayError();\r\n        }\r\n        if (targetColumn > 0 && this.dependencyGraph.arrayMapping.isFormulaArrayInAllColumns(ColumnsSpan.fromNumberOfColumns(sheet, targetColumn - 1, 2))) {\r\n            throw new TargetLocationHasArrayError();\r\n        }\r\n    }\r\n    ensureItIsPossibleToAddSheet(name) {\r\n        if (this.sheetMapping.hasSheetWithName(name)) {\r\n            throw new SheetNameAlreadyTakenError(name);\r\n        }\r\n    }\r\n    ensureItIsPossibleToRenameSheet(sheetId, name) {\r\n        if (!this.sheetMapping.hasSheetWithId(sheetId)) {\r\n            throw new NoSheetWithIdError(sheetId);\r\n        }\r\n        const existingSheetId = this.sheetMapping.get(name);\r\n        if (existingSheetId !== undefined && existingSheetId !== sheetId) {\r\n            throw new SheetNameAlreadyTakenError(name);\r\n        }\r\n    }\r\n    ensureItIsPossibleToChangeContent(address) {\r\n        if (invalidSimpleCellAddress(address)) {\r\n            throw new InvalidAddressError(address);\r\n        }\r\n        if (!this.sheetMapping.hasSheetWithId(address.sheet)) {\r\n            throw new NoSheetWithIdError(address.sheet);\r\n        }\r\n    }\r\n    ensureItIsPossibleToChangeCellContents(inputAddress, content) {\r\n        const boundaries = findBoundaries(content);\r\n        const targetRange = AbsoluteCellRange.spanFrom(inputAddress, boundaries.width, boundaries.height);\r\n        this.ensureRangeInSizeLimits(targetRange);\r\n        for (const address of targetRange.addresses(this.dependencyGraph)) {\r\n            this.ensureItIsPossibleToChangeContent(address);\r\n        }\r\n    }\r\n    ensureItIsPossibleToChangeSheetContents(sheetId, content) {\r\n        const boundaries = findBoundaries(content);\r\n        const targetRange = AbsoluteCellRange.spanFrom(simpleCellAddress(sheetId, 0, 0), boundaries.width, boundaries.height);\r\n        this.ensureRangeInSizeLimits(targetRange);\r\n    }\r\n    ensureRangeInSizeLimits(range) {\r\n        if (range.exceedsSheetSizeLimits(this.maxColumns, this.maxRows)) {\r\n            throw new SheetSizeLimitExceededError();\r\n        }\r\n    }\r\n    isThereSomethingToUndo() {\r\n        return !this.undoRedo.isUndoStackEmpty();\r\n    }\r\n    isThereSomethingToRedo() {\r\n        return !this.undoRedo.isRedoStackEmpty();\r\n    }\r\n    getAndClearContentChanges() {\r\n        return this.operations.getAndClearContentChanges();\r\n    }\r\n    ensureScopeIdIsValid(scopeId) {\r\n        if (scopeId !== undefined && !this.sheetMapping.hasSheetWithId(scopeId)) {\r\n            throw new NoSheetWithIdError(scopeId);\r\n        }\r\n    }\r\n    validateRowOrColumnMapping(sheetId, rowMapping, rowOrColumn) {\r\n        const limit = rowOrColumn === 'row' ? this.dependencyGraph.getSheetHeight(sheetId) : this.dependencyGraph.getSheetWidth(sheetId);\r\n        const sources = rowMapping.map(([a, _]) => a).sort((a, b) => a - b);\r\n        const targets = rowMapping.map(([_, b]) => b).sort((a, b) => a - b);\r\n        for (let i = 0; i < sources.length; i++) {\r\n            if (!isNonnegativeInteger(sources[i]) || sources[i] >= limit) {\r\n                throw new InvalidArgumentsError(`${rowOrColumn} numbers to be nonnegative integers and less than sheet ${rowOrColumn === 'row' ? 'height' : 'width'}.`);\r\n            }\r\n            if (sources[i] === sources[i + 1]) {\r\n                throw new InvalidArgumentsError(`source ${rowOrColumn} numbers to be unique.`);\r\n            }\r\n            if (sources[i] !== targets[i]) {\r\n                throw new InvalidArgumentsError(`target ${rowOrColumn} numbers to be permutation of source ${rowOrColumn} numbers.`);\r\n            }\r\n        }\r\n    }\r\n    ensureNamedExpressionNameIsValid(expressionName, sheetId) {\r\n        if (!this.namedExpressions.isNameValid(expressionName)) {\r\n            throw new NamedExpressionNameIsInvalidError(expressionName);\r\n        }\r\n        if (!this.namedExpressions.isNameAvailable(expressionName, sheetId)) {\r\n            throw new NamedExpressionNameIsAlreadyTakenError(expressionName);\r\n        }\r\n    }\r\n    ensureNamedExpressionIsValid(expression) {\r\n        const parsedExpression = this.cellContentParser.parse(expression);\r\n        if (parsedExpression instanceof CellContent.Formula) {\r\n            const parsingResult = this.parser.parse(parsedExpression.formula, simpleCellAddress(-1, 0, 0));\r\n            if (doesContainRelativeReferences(parsingResult.ast)) {\r\n                throw new NoRelativeAddressesAllowedError();\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction isPositiveInteger(x) {\r\n    return Number.isInteger(x) && x > 0;\r\n}\r\nfunction isNonnegativeInteger(x) {\r\n    return Number.isInteger(x) && x >= 0;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { simpleCellAddress } from './Cell';\r\nimport { AstNodeType } from './parser';\r\nimport { CELL_REFERENCE_PATTERN, NAMED_EXPRESSION_PATTERN, R1C1_CELL_REFERENCE_PATTERN } from './parser/parser-consts';\r\nexport class InternalNamedExpression {\r\n    constructor(displayName, address, added, options) {\r\n        this.displayName = displayName;\r\n        this.address = address;\r\n        this.added = added;\r\n        this.options = options;\r\n    }\r\n    normalizeExpressionName() {\r\n        return this.displayName.toLowerCase();\r\n    }\r\n    copy() {\r\n        return new InternalNamedExpression(this.displayName, this.address, this.added, this.options);\r\n    }\r\n}\r\nclass WorkbookStore {\r\n    constructor() {\r\n        this.mapping = new Map();\r\n    }\r\n    has(expressionName) {\r\n        return this.mapping.has(this.normalizeExpressionName(expressionName));\r\n    }\r\n    isNameAvailable(expressionName) {\r\n        const normalizedExpressionName = this.normalizeExpressionName(expressionName);\r\n        const namedExpression = this.mapping.get(normalizedExpressionName);\r\n        return !(namedExpression && namedExpression.added);\r\n    }\r\n    add(namedExpression) {\r\n        this.mapping.set(namedExpression.normalizeExpressionName(), namedExpression);\r\n    }\r\n    get(expressionName) {\r\n        return this.mapping.get(this.normalizeExpressionName(expressionName));\r\n    }\r\n    getExisting(expressionName) {\r\n        const namedExpression = this.mapping.get(this.normalizeExpressionName(expressionName));\r\n        if (namedExpression && namedExpression.added) {\r\n            return namedExpression;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    remove(expressionName) {\r\n        const normalizedExpressionName = this.normalizeExpressionName(expressionName);\r\n        const namedExpression = this.mapping.get(normalizedExpressionName);\r\n        if (namedExpression) {\r\n            namedExpression.added = false;\r\n        }\r\n    }\r\n    getAllNamedExpressions() {\r\n        return Array.from(this.mapping.values()).filter((ne) => ne.added);\r\n    }\r\n    normalizeExpressionName(expressionName) {\r\n        return expressionName.toLowerCase();\r\n    }\r\n}\r\nclass WorksheetStore {\r\n    constructor() {\r\n        this.mapping = new Map();\r\n    }\r\n    add(namedExpression) {\r\n        this.mapping.set(this.normalizeExpressionName(namedExpression.displayName), namedExpression);\r\n    }\r\n    get(expressionName) {\r\n        return this.mapping.get(this.normalizeExpressionName(expressionName));\r\n    }\r\n    has(expressionName) {\r\n        return this.mapping.has(this.normalizeExpressionName(expressionName));\r\n    }\r\n    getAllNamedExpressions() {\r\n        return Array.from(this.mapping.values()).filter((ne) => ne.added);\r\n    }\r\n    isNameAvailable(expressionName) {\r\n        const normalizedExpressionName = this.normalizeExpressionName(expressionName);\r\n        return !this.mapping.has(normalizedExpressionName);\r\n    }\r\n    remove(expressionName) {\r\n        const normalizedExpressionName = this.normalizeExpressionName(expressionName);\r\n        const namedExpression = this.mapping.get(normalizedExpressionName);\r\n        if (namedExpression) {\r\n            this.mapping.delete(normalizedExpressionName);\r\n        }\r\n    }\r\n    normalizeExpressionName(expressionName) {\r\n        return expressionName.toLowerCase();\r\n    }\r\n}\r\nexport class NamedExpressions {\r\n    constructor() {\r\n        this.nextNamedExpressionRow = 0;\r\n        this.workbookStore = new WorkbookStore();\r\n        this.worksheetStores = new Map();\r\n        this.addressCache = new Map();\r\n    }\r\n    isNameAvailable(expressionName, sheetId) {\r\n        var _a, _b;\r\n        if (sheetId === undefined) {\r\n            return this.workbookStore.isNameAvailable(expressionName);\r\n        }\r\n        else {\r\n            return (_b = (_a = this.worksheetStore(sheetId)) === null || _a === void 0 ? void 0 : _a.isNameAvailable(expressionName)) !== null && _b !== void 0 ? _b : true;\r\n        }\r\n    }\r\n    namedExpressionInAddress(row) {\r\n        const namedExpression = this.addressCache.get(row);\r\n        if (namedExpression && namedExpression.added) {\r\n            return namedExpression;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    namedExpressionForScope(expressionName, sheetId) {\r\n        var _a;\r\n        if (sheetId === undefined) {\r\n            return this.workbookStore.getExisting(expressionName);\r\n        }\r\n        else {\r\n            return (_a = this.worksheetStore(sheetId)) === null || _a === void 0 ? void 0 : _a.get(expressionName);\r\n        }\r\n    }\r\n    nearestNamedExpression(expressionName, sheetId) {\r\n        var _a, _b;\r\n        return (_b = (_a = this.worksheetStore(sheetId)) === null || _a === void 0 ? void 0 : _a.get(expressionName)) !== null && _b !== void 0 ? _b : this.workbookStore.getExisting(expressionName);\r\n    }\r\n    isExpressionInScope(expressionName, sheetId) {\r\n        var _a, _b;\r\n        return (_b = (_a = this.worksheetStore(sheetId)) === null || _a === void 0 ? void 0 : _a.has(expressionName)) !== null && _b !== void 0 ? _b : false;\r\n    }\r\n    /**\r\n     * Checks the validity of a named-expression's name.\r\n     *\r\n     * The name:\r\n     * - Must start with a Unicode letter or with an underscore (`_`).\r\n     * - Can contain only Unicode letters, numbers, underscores, and periods (`.`).\r\n     * - Can't be the same as any possible reference in the A1 notation (`[A-Za-z]+[0-9]+`).\r\n     * - Can't be the same as any possible reference in the R1C1 notation (`[rR][0-9]*[cC][0-9]*`).\r\n     *\r\n     * The naming rules follow the [OpenDocument](https://docs.oasis-open.org/office/OpenDocument/v1.3/os/part4-formula/OpenDocument-v1.3-os-part4-formula.html#__RefHeading__1017964_715980110) standard.\r\n     */\r\n    isNameValid(expressionName) {\r\n        const a1CellRefRegexp = new RegExp(`^${CELL_REFERENCE_PATTERN}$`);\r\n        const r1c1CellRefRegexp = new RegExp(`^${R1C1_CELL_REFERENCE_PATTERN}$`);\r\n        const namedExpRegexp = new RegExp(`^${NAMED_EXPRESSION_PATTERN}$`);\r\n        if (a1CellRefRegexp.test(expressionName) || r1c1CellRefRegexp.test(expressionName)) {\r\n            return false;\r\n        }\r\n        return namedExpRegexp.test(expressionName);\r\n    }\r\n    addNamedExpression(expressionName, sheetId, options) {\r\n        const store = sheetId === undefined ? this.workbookStore : this.worksheetStoreOrCreate(sheetId);\r\n        let namedExpression = store.get(expressionName);\r\n        if (namedExpression !== undefined) {\r\n            namedExpression.added = true;\r\n            namedExpression.displayName = expressionName;\r\n            namedExpression.options = options;\r\n        }\r\n        else {\r\n            namedExpression = new InternalNamedExpression(expressionName, this.nextAddress(), true, options);\r\n            store.add(namedExpression);\r\n        }\r\n        this.addressCache.set(namedExpression.address.row, namedExpression);\r\n        return namedExpression;\r\n    }\r\n    restoreNamedExpression(namedExpression, sheetId) {\r\n        const store = sheetId === undefined ? this.workbookStore : this.worksheetStoreOrCreate(sheetId);\r\n        namedExpression.added = true;\r\n        store.add(namedExpression);\r\n        this.addressCache.set(namedExpression.address.row, namedExpression);\r\n        return namedExpression;\r\n    }\r\n    namedExpressionOrPlaceholder(expressionName, sheetId) {\r\n        var _a;\r\n        return (_a = this.worksheetStoreOrCreate(sheetId).get(expressionName)) !== null && _a !== void 0 ? _a : this.workbookNamedExpressionOrPlaceholder(expressionName);\r\n    }\r\n    workbookNamedExpressionOrPlaceholder(expressionName) {\r\n        let namedExpression = this.workbookStore.get(expressionName);\r\n        if (namedExpression === undefined) {\r\n            namedExpression = new InternalNamedExpression(expressionName, this.nextAddress(), false);\r\n            this.workbookStore.add(namedExpression);\r\n        }\r\n        return namedExpression;\r\n    }\r\n    remove(expressionName, sheetId) {\r\n        let store;\r\n        if (sheetId === undefined) {\r\n            store = this.workbookStore;\r\n        }\r\n        else {\r\n            store = this.worksheetStore(sheetId);\r\n        }\r\n        const namedExpression = store === null || store === void 0 ? void 0 : store.get(expressionName);\r\n        if (store === undefined || namedExpression === undefined || !namedExpression.added) {\r\n            throw Error('Named expression does not exist');\r\n        }\r\n        store.remove(expressionName);\r\n        if (store instanceof WorksheetStore && store.mapping.size === 0) {\r\n            this.worksheetStores.delete(sheetId);\r\n        }\r\n        this.addressCache.delete(namedExpression.address.row);\r\n    }\r\n    getAllNamedExpressionsNamesInScope(sheetId) {\r\n        return this.getAllNamedExpressions().filter(({ scope }) => scope === sheetId).map((ne) => ne.expression.displayName);\r\n    }\r\n    getAllNamedExpressionsNames() {\r\n        return this.getAllNamedExpressions().map((ne) => ne.expression.displayName);\r\n    }\r\n    getAllNamedExpressions() {\r\n        const storedNamedExpressions = [];\r\n        this.workbookStore.getAllNamedExpressions().forEach(expr => {\r\n            storedNamedExpressions.push({\r\n                expression: expr,\r\n                scope: undefined\r\n            });\r\n        });\r\n        this.worksheetStores.forEach((store, sheetNum) => {\r\n            store.getAllNamedExpressions().forEach(expr => {\r\n                storedNamedExpressions.push({\r\n                    expression: expr,\r\n                    scope: sheetNum\r\n                });\r\n            });\r\n        });\r\n        return storedNamedExpressions;\r\n    }\r\n    getAllNamedExpressionsForScope(scope) {\r\n        var _a, _b;\r\n        if (scope === undefined) {\r\n            return this.workbookStore.getAllNamedExpressions();\r\n        }\r\n        else {\r\n            return (_b = (_a = this.worksheetStores.get(scope)) === null || _a === void 0 ? void 0 : _a.getAllNamedExpressions()) !== null && _b !== void 0 ? _b : [];\r\n        }\r\n    }\r\n    worksheetStoreOrCreate(sheetId) {\r\n        let store = this.worksheetStores.get(sheetId);\r\n        if (!store) {\r\n            store = new WorksheetStore();\r\n            this.worksheetStores.set(sheetId, store);\r\n        }\r\n        return store;\r\n    }\r\n    worksheetStore(sheetId) {\r\n        return this.worksheetStores.get(sheetId);\r\n    }\r\n    nextAddress() {\r\n        return simpleCellAddress(NamedExpressions.SHEET_FOR_WORKBOOK_EXPRESSIONS, 0, this.nextNamedExpressionRow++);\r\n    }\r\n}\r\nNamedExpressions.SHEET_FOR_WORKBOOK_EXPRESSIONS = -1;\r\nexport const doesContainRelativeReferences = (ast) => {\r\n    switch (ast.type) {\r\n        case AstNodeType.EMPTY:\r\n        case AstNodeType.NUMBER:\r\n        case AstNodeType.STRING:\r\n        case AstNodeType.ERROR:\r\n        case AstNodeType.ERROR_WITH_RAW_INPUT:\r\n            return false;\r\n        case AstNodeType.CELL_REFERENCE:\r\n            return !ast.reference.isAbsolute();\r\n        case AstNodeType.CELL_RANGE:\r\n        case AstNodeType.COLUMN_RANGE:\r\n        case AstNodeType.ROW_RANGE:\r\n            return !ast.start.isAbsolute();\r\n        case AstNodeType.NAMED_EXPRESSION:\r\n            return false;\r\n        case AstNodeType.PERCENT_OP:\r\n        case AstNodeType.PLUS_UNARY_OP:\r\n        case AstNodeType.MINUS_UNARY_OP: {\r\n            return doesContainRelativeReferences(ast.value);\r\n        }\r\n        case AstNodeType.CONCATENATE_OP:\r\n        case AstNodeType.EQUALS_OP:\r\n        case AstNodeType.NOT_EQUAL_OP:\r\n        case AstNodeType.LESS_THAN_OP:\r\n        case AstNodeType.GREATER_THAN_OP:\r\n        case AstNodeType.LESS_THAN_OR_EQUAL_OP:\r\n        case AstNodeType.GREATER_THAN_OR_EQUAL_OP:\r\n        case AstNodeType.MINUS_OP:\r\n        case AstNodeType.PLUS_OP:\r\n        case AstNodeType.TIMES_OP:\r\n        case AstNodeType.DIV_OP:\r\n        case AstNodeType.POWER_OP:\r\n            return doesContainRelativeReferences(ast.left) || doesContainRelativeReferences(ast.right);\r\n        case AstNodeType.PARENTHESIS:\r\n            return doesContainRelativeReferences(ast.expression);\r\n        case AstNodeType.FUNCTION_CALL: {\r\n            return ast.args.some((arg) => doesContainRelativeReferences(arg));\r\n        }\r\n        case AstNodeType.ARRAY: {\r\n            return ast.args.some(row => row.some(arg => doesContainRelativeReferences(arg)));\r\n        }\r\n    }\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from './AbsoluteCellRange';\r\nimport { absolutizeDependencies, filterDependenciesOutOfScope } from './absolutizeDependencies';\r\nimport { ArraySize } from './ArraySize';\r\nimport { equalSimpleCellAddress, invalidSimpleCellAddress, simpleCellAddress } from './Cell';\r\nimport { CellContent } from './CellContentParser';\r\nimport { ClipboardCellType } from './ClipboardOperations';\r\nimport { ContentChanges } from './ContentChanges';\r\nimport { ArrayVertex, EmptyCellVertex, FormulaCellVertex, ParsingErrorVertex, SparseStrategy, ValueCellVertex } from './DependencyGraph';\r\nimport { FormulaVertex } from './DependencyGraph/FormulaCellVertex';\r\nimport { AddColumnsTransformer } from './dependencyTransformers/AddColumnsTransformer';\r\nimport { AddRowsTransformer } from './dependencyTransformers/AddRowsTransformer';\r\nimport { CleanOutOfScopeDependenciesTransformer } from './dependencyTransformers/CleanOutOfScopeDependenciesTransformer';\r\nimport { MoveCellsTransformer } from './dependencyTransformers/MoveCellsTransformer';\r\nimport { RemoveColumnsTransformer } from './dependencyTransformers/RemoveColumnsTransformer';\r\nimport { RemoveRowsTransformer } from './dependencyTransformers/RemoveRowsTransformer';\r\nimport { RemoveSheetTransformer } from './dependencyTransformers/RemoveSheetTransformer';\r\nimport { InvalidArgumentsError, NamedExpressionDoesNotExistError, NoRelativeAddressesAllowedError, SheetSizeLimitExceededError, SourceLocationHasArrayError, TargetLocationHasArrayError } from './errors';\r\nimport { EmptyValue, getRawValue } from './interpreter/InterpreterValue';\r\nimport { doesContainRelativeReferences, NamedExpressions } from './NamedExpressions';\r\nimport { NamedExpressionDependency } from './parser';\r\nimport { findBoundaries } from './Sheet';\r\nimport { ColumnsSpan, RowsSpan } from './Span';\r\nimport { StatType } from './statistics';\r\nexport class RemoveRowsCommand {\r\n    constructor(sheet, indexes) {\r\n        this.sheet = sheet;\r\n        this.indexes = indexes;\r\n    }\r\n    normalizedIndexes() {\r\n        return normalizeRemovedIndexes(this.indexes);\r\n    }\r\n    rowsSpans() {\r\n        return this.normalizedIndexes().map(normalizedIndex => RowsSpan.fromNumberOfRows(this.sheet, normalizedIndex[0], normalizedIndex[1]));\r\n    }\r\n}\r\nexport class AddRowsCommand {\r\n    constructor(sheet, indexes) {\r\n        this.sheet = sheet;\r\n        this.indexes = indexes;\r\n    }\r\n    normalizedIndexes() {\r\n        return normalizeAddedIndexes(this.indexes);\r\n    }\r\n    rowsSpans() {\r\n        return this.normalizedIndexes().map(normalizedIndex => RowsSpan.fromNumberOfRows(this.sheet, normalizedIndex[0], normalizedIndex[1]));\r\n    }\r\n}\r\nexport class AddColumnsCommand {\r\n    constructor(sheet, indexes) {\r\n        this.sheet = sheet;\r\n        this.indexes = indexes;\r\n    }\r\n    normalizedIndexes() {\r\n        return normalizeAddedIndexes(this.indexes);\r\n    }\r\n    columnsSpans() {\r\n        return this.normalizedIndexes().map(normalizedIndex => ColumnsSpan.fromNumberOfColumns(this.sheet, normalizedIndex[0], normalizedIndex[1]));\r\n    }\r\n}\r\nexport class RemoveColumnsCommand {\r\n    constructor(sheet, indexes) {\r\n        this.sheet = sheet;\r\n        this.indexes = indexes;\r\n    }\r\n    normalizedIndexes() {\r\n        return normalizeRemovedIndexes(this.indexes);\r\n    }\r\n    columnsSpans() {\r\n        return this.normalizedIndexes().map(normalizedIndex => ColumnsSpan.fromNumberOfColumns(this.sheet, normalizedIndex[0], normalizedIndex[1]));\r\n    }\r\n}\r\nexport class Operations {\r\n    constructor(config, dependencyGraph, columnSearch, cellContentParser, parser, stats, lazilyTransformingAstService, namedExpressions, arraySizePredictor) {\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.columnSearch = columnSearch;\r\n        this.cellContentParser = cellContentParser;\r\n        this.parser = parser;\r\n        this.stats = stats;\r\n        this.lazilyTransformingAstService = lazilyTransformingAstService;\r\n        this.namedExpressions = namedExpressions;\r\n        this.arraySizePredictor = arraySizePredictor;\r\n        this.changes = ContentChanges.empty();\r\n        this.allocateNamedExpressionAddressSpace();\r\n        this.maxColumns = config.maxColumns;\r\n        this.maxRows = config.maxRows;\r\n    }\r\n    get sheetMapping() {\r\n        return this.dependencyGraph.sheetMapping;\r\n    }\r\n    get addressMapping() {\r\n        return this.dependencyGraph.addressMapping;\r\n    }\r\n    removeRows(cmd) {\r\n        const rowsRemovals = [];\r\n        for (const rowsToRemove of cmd.rowsSpans()) {\r\n            const rowsRemoval = this.doRemoveRows(rowsToRemove);\r\n            if (rowsRemoval) {\r\n                rowsRemovals.push(rowsRemoval);\r\n            }\r\n        }\r\n        return rowsRemovals;\r\n    }\r\n    addRows(cmd) {\r\n        for (const addedRows of cmd.rowsSpans()) {\r\n            this.doAddRows(addedRows);\r\n        }\r\n    }\r\n    addColumns(cmd) {\r\n        for (const addedColumns of cmd.columnsSpans()) {\r\n            this.doAddColumns(addedColumns);\r\n        }\r\n    }\r\n    removeColumns(cmd) {\r\n        const columnsRemovals = [];\r\n        for (const columnsToRemove of cmd.columnsSpans()) {\r\n            const columnsRemoval = this.doRemoveColumns(columnsToRemove);\r\n            if (columnsRemoval) {\r\n                columnsRemovals.push(columnsRemoval);\r\n            }\r\n        }\r\n        return columnsRemovals;\r\n    }\r\n    removeSheet(sheetId) {\r\n        this.dependencyGraph.removeSheet(sheetId);\r\n        let version;\r\n        this.stats.measure(StatType.TRANSFORM_ASTS, () => {\r\n            const transformation = new RemoveSheetTransformer(sheetId);\r\n            transformation.performEagerTransformations(this.dependencyGraph, this.parser);\r\n            version = this.lazilyTransformingAstService.addTransformation(transformation);\r\n        });\r\n        this.sheetMapping.removeSheet(sheetId);\r\n        this.columnSearch.removeSheet(sheetId);\r\n        const scopedNamedExpressions = this.namedExpressions.getAllNamedExpressionsForScope(sheetId).map((namedexpression) => this.removeNamedExpression(namedexpression.normalizeExpressionName(), sheetId));\r\n        return { version: version, scopedNamedExpressions };\r\n    }\r\n    removeSheetByName(sheetName) {\r\n        const sheetId = this.sheetMapping.fetch(sheetName);\r\n        return this.removeSheet(sheetId);\r\n    }\r\n    clearSheet(sheetId) {\r\n        this.dependencyGraph.clearSheet(sheetId);\r\n        this.columnSearch.removeSheet(sheetId);\r\n    }\r\n    addSheet(name) {\r\n        const sheetId = this.sheetMapping.addSheet(name);\r\n        const sheet = [];\r\n        this.dependencyGraph.addressMapping.autoAddSheet(sheetId, sheet, findBoundaries(sheet));\r\n        return this.sheetMapping.fetchDisplayName(sheetId);\r\n    }\r\n    renameSheet(sheetId, newName) {\r\n        return this.sheetMapping.renameSheet(sheetId, newName);\r\n    }\r\n    moveRows(sheet, startRow, numberOfRows, targetRow) {\r\n        const rowsToAdd = RowsSpan.fromNumberOfRows(sheet, targetRow, numberOfRows);\r\n        this.lazilyTransformingAstService.beginCombinedMode(sheet);\r\n        this.doAddRows(rowsToAdd);\r\n        if (targetRow < startRow) {\r\n            startRow += numberOfRows;\r\n        }\r\n        const startAddress = simpleCellAddress(sheet, 0, startRow);\r\n        const targetAddress = simpleCellAddress(sheet, 0, targetRow);\r\n        this.moveCells(startAddress, Number.POSITIVE_INFINITY, numberOfRows, targetAddress);\r\n        const rowsToRemove = RowsSpan.fromNumberOfRows(sheet, startRow, numberOfRows);\r\n        this.doRemoveRows(rowsToRemove);\r\n        return this.lazilyTransformingAstService.commitCombinedMode();\r\n    }\r\n    moveColumns(sheet, startColumn, numberOfColumns, targetColumn) {\r\n        const columnsToAdd = ColumnsSpan.fromNumberOfColumns(sheet, targetColumn, numberOfColumns);\r\n        this.lazilyTransformingAstService.beginCombinedMode(sheet);\r\n        this.doAddColumns(columnsToAdd);\r\n        if (targetColumn < startColumn) {\r\n            startColumn += numberOfColumns;\r\n        }\r\n        const startAddress = simpleCellAddress(sheet, startColumn, 0);\r\n        const targetAddress = simpleCellAddress(sheet, targetColumn, 0);\r\n        this.moveCells(startAddress, numberOfColumns, Number.POSITIVE_INFINITY, targetAddress);\r\n        const columnsToRemove = ColumnsSpan.fromNumberOfColumns(sheet, startColumn, numberOfColumns);\r\n        this.doRemoveColumns(columnsToRemove);\r\n        return this.lazilyTransformingAstService.commitCombinedMode();\r\n    }\r\n    moveCells(sourceLeftCorner, width, height, destinationLeftCorner) {\r\n        this.ensureItIsPossibleToMoveCells(sourceLeftCorner, width, height, destinationLeftCorner);\r\n        const sourceRange = AbsoluteCellRange.spanFrom(sourceLeftCorner, width, height);\r\n        const targetRange = AbsoluteCellRange.spanFrom(destinationLeftCorner, width, height);\r\n        const toRight = destinationLeftCorner.col - sourceLeftCorner.col;\r\n        const toBottom = destinationLeftCorner.row - sourceLeftCorner.row;\r\n        const toSheet = destinationLeftCorner.sheet;\r\n        const currentDataAtTarget = this.getRangeClipboardCells(targetRange);\r\n        const valuesToRemove = this.dependencyGraph.rawValuesFromRange(targetRange);\r\n        this.columnSearch.removeValues(valuesToRemove);\r\n        const valuesToMove = this.dependencyGraph.rawValuesFromRange(sourceRange);\r\n        this.columnSearch.moveValues(valuesToMove, toRight, toBottom, toSheet);\r\n        let version;\r\n        this.stats.measure(StatType.TRANSFORM_ASTS, () => {\r\n            const transformation = new MoveCellsTransformer(sourceRange, toRight, toBottom, toSheet);\r\n            transformation.performEagerTransformations(this.dependencyGraph, this.parser);\r\n            version = this.lazilyTransformingAstService.addTransformation(transformation);\r\n        });\r\n        this.dependencyGraph.moveCells(sourceRange, toRight, toBottom, toSheet);\r\n        const addedGlobalNamedExpressions = this.updateNamedExpressionsForMovedCells(sourceLeftCorner, width, height, destinationLeftCorner);\r\n        return {\r\n            version: version,\r\n            overwrittenCellsData: currentDataAtTarget,\r\n            addedGlobalNamedExpressions: addedGlobalNamedExpressions\r\n        };\r\n    }\r\n    setRowOrder(sheetId, rowMapping) {\r\n        const buffer = [];\r\n        let oldContent = [];\r\n        for (const [source, target] of rowMapping) {\r\n            if (source !== target) {\r\n                const rowRange = AbsoluteCellRange.spanFrom({ sheet: sheetId, col: 0, row: source }, Infinity, 1);\r\n                const row = this.getRangeClipboardCells(rowRange);\r\n                oldContent = oldContent.concat(row);\r\n                buffer.push(row.map(([{ sheet, col }, cell]) => [{ sheet, col, row: target }, cell]));\r\n            }\r\n        }\r\n        buffer.forEach(row => this.restoreClipboardCells(sheetId, row.values()));\r\n        return oldContent;\r\n    }\r\n    setColumnOrder(sheetId, columnMapping) {\r\n        const buffer = [];\r\n        let oldContent = [];\r\n        for (const [source, target] of columnMapping) {\r\n            if (source !== target) {\r\n                const rowRange = AbsoluteCellRange.spanFrom({ sheet: sheetId, col: source, row: 0 }, 1, Infinity);\r\n                const column = this.getRangeClipboardCells(rowRange);\r\n                oldContent = oldContent.concat(column);\r\n                buffer.push(column.map(([{ sheet, col: _col, row }, cell]) => [{ sheet, col: target, row }, cell]));\r\n            }\r\n        }\r\n        buffer.forEach(column => this.restoreClipboardCells(sheetId, column.values()));\r\n        return oldContent;\r\n    }\r\n    addNamedExpression(expressionName, expression, sheetId, options) {\r\n        const namedExpression = this.namedExpressions.addNamedExpression(expressionName, sheetId, options);\r\n        this.storeNamedExpressionInCell(namedExpression.address, expression);\r\n        this.adjustNamedExpressionEdges(namedExpression, expressionName, sheetId);\r\n    }\r\n    restoreNamedExpression(namedExpression, content, sheetId) {\r\n        const expressionName = namedExpression.displayName;\r\n        this.restoreCell(namedExpression.address, content);\r\n        const restoredNamedExpression = this.namedExpressions.restoreNamedExpression(namedExpression, sheetId);\r\n        this.adjustNamedExpressionEdges(restoredNamedExpression, expressionName, sheetId);\r\n    }\r\n    changeNamedExpressionExpression(expressionName, newExpression, sheetId, options) {\r\n        const namedExpression = this.namedExpressions.namedExpressionForScope(expressionName, sheetId);\r\n        if (!namedExpression) {\r\n            throw new NamedExpressionDoesNotExistError(expressionName);\r\n        }\r\n        const oldNamedExpression = namedExpression.copy();\r\n        namedExpression.options = options;\r\n        const content = this.getClipboardCell(namedExpression.address);\r\n        this.storeNamedExpressionInCell(namedExpression.address, newExpression);\r\n        return [oldNamedExpression, content];\r\n    }\r\n    removeNamedExpression(expressionName, sheetId) {\r\n        const namedExpression = this.namedExpressions.namedExpressionForScope(expressionName, sheetId);\r\n        if (!namedExpression) {\r\n            throw new NamedExpressionDoesNotExistError(expressionName);\r\n        }\r\n        this.namedExpressions.remove(namedExpression.displayName, sheetId);\r\n        const content = this.getClipboardCell(namedExpression.address);\r\n        if (sheetId !== undefined) {\r\n            const globalNamedExpression = this.namedExpressions.workbookNamedExpressionOrPlaceholder(expressionName);\r\n            this.dependencyGraph.exchangeNode(namedExpression.address, globalNamedExpression.address);\r\n        }\r\n        else {\r\n            this.dependencyGraph.setCellEmpty(namedExpression.address);\r\n        }\r\n        return [\r\n            namedExpression,\r\n            content\r\n        ];\r\n    }\r\n    ensureItIsPossibleToMoveCells(sourceLeftCorner, width, height, destinationLeftCorner) {\r\n        if (invalidSimpleCellAddress(sourceLeftCorner) ||\r\n            !((isPositiveInteger(width) && isPositiveInteger(height)) || isRowOrColumnRange(sourceLeftCorner, width, height)) ||\r\n            invalidSimpleCellAddress(destinationLeftCorner) ||\r\n            !this.sheetMapping.hasSheetWithId(sourceLeftCorner.sheet) ||\r\n            !this.sheetMapping.hasSheetWithId(destinationLeftCorner.sheet)) {\r\n            throw new InvalidArgumentsError('a valid range of cells to move.');\r\n        }\r\n        const sourceRange = AbsoluteCellRange.spanFrom(sourceLeftCorner, width, height);\r\n        const targetRange = AbsoluteCellRange.spanFrom(destinationLeftCorner, width, height);\r\n        if (targetRange.exceedsSheetSizeLimits(this.maxColumns, this.maxRows)) {\r\n            throw new SheetSizeLimitExceededError();\r\n        }\r\n        if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(sourceRange)) {\r\n            throw new SourceLocationHasArrayError();\r\n        }\r\n        if (this.dependencyGraph.arrayMapping.isFormulaArrayInRange(targetRange)) {\r\n            throw new TargetLocationHasArrayError();\r\n        }\r\n    }\r\n    restoreClipboardCells(sourceSheetId, cells) {\r\n        const addedNamedExpressions = [];\r\n        for (const [address, clipboardCell] of cells) {\r\n            this.restoreCell(address, clipboardCell);\r\n            if (clipboardCell.type === ClipboardCellType.FORMULA) {\r\n                const { dependencies } = this.parser.fetchCachedResult(clipboardCell.hash);\r\n                addedNamedExpressions.push(...this.updateNamedExpressionsForTargetAddress(sourceSheetId, address, dependencies));\r\n            }\r\n        }\r\n        return addedNamedExpressions;\r\n    }\r\n    restoreCell(address, clipboardCell) {\r\n        switch (clipboardCell.type) {\r\n            case ClipboardCellType.VALUE: {\r\n                this.setValueToCell(clipboardCell, address);\r\n                break;\r\n            }\r\n            case ClipboardCellType.FORMULA: {\r\n                this.setFormulaToCellFromCache(clipboardCell.hash, address);\r\n                break;\r\n            }\r\n            case ClipboardCellType.EMPTY: {\r\n                this.setCellEmpty(address);\r\n                break;\r\n            }\r\n            case ClipboardCellType.PARSING_ERROR: {\r\n                this.setParsingErrorToCell(clipboardCell.rawInput, clipboardCell.errors, address);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    getOldContent(address) {\r\n        const vertex = this.dependencyGraph.getCell(address);\r\n        if (vertex === undefined || vertex instanceof EmptyCellVertex) {\r\n            return [address, { type: ClipboardCellType.EMPTY }];\r\n        }\r\n        else if (vertex instanceof ValueCellVertex) {\r\n            return [address, Object.assign({ type: ClipboardCellType.VALUE }, vertex.getValues())];\r\n        }\r\n        else if (vertex instanceof FormulaVertex) {\r\n            return [vertex.getAddress(this.lazilyTransformingAstService), {\r\n                    type: ClipboardCellType.FORMULA,\r\n                    hash: this.parser.computeHashFromAst(vertex.getFormula(this.lazilyTransformingAstService))\r\n                }];\r\n        }\r\n        else if (vertex instanceof ParsingErrorVertex) {\r\n            return [address, { type: ClipboardCellType.PARSING_ERROR, rawInput: vertex.rawInput, errors: vertex.errors }];\r\n        }\r\n        throw Error('Trying to copy unsupported type');\r\n    }\r\n    getClipboardCell(address) {\r\n        const vertex = this.dependencyGraph.getCell(address);\r\n        if (vertex === undefined || vertex instanceof EmptyCellVertex) {\r\n            return { type: ClipboardCellType.EMPTY };\r\n        }\r\n        else if (vertex instanceof ValueCellVertex) {\r\n            return Object.assign({ type: ClipboardCellType.VALUE }, vertex.getValues());\r\n        }\r\n        else if (vertex instanceof ArrayVertex) {\r\n            const val = vertex.getArrayCellValue(address);\r\n            if (val === EmptyValue) {\r\n                return { type: ClipboardCellType.EMPTY };\r\n            }\r\n            return { type: ClipboardCellType.VALUE, parsedValue: val, rawValue: vertex.getArrayCellRawValue(address) };\r\n        }\r\n        else if (vertex instanceof FormulaCellVertex) {\r\n            return {\r\n                type: ClipboardCellType.FORMULA,\r\n                hash: this.parser.computeHashFromAst(vertex.getFormula(this.lazilyTransformingAstService))\r\n            };\r\n        }\r\n        else if (vertex instanceof ParsingErrorVertex) {\r\n            return { type: ClipboardCellType.PARSING_ERROR, rawInput: vertex.rawInput, errors: vertex.errors };\r\n        }\r\n        throw Error('Trying to copy unsupported type');\r\n    }\r\n    getSheetClipboardCells(sheet) {\r\n        const sheetHeight = this.dependencyGraph.getSheetHeight(sheet);\r\n        const sheetWidth = this.dependencyGraph.getSheetWidth(sheet);\r\n        const arr = new Array(sheetHeight);\r\n        for (let i = 0; i < sheetHeight; i++) {\r\n            arr[i] = new Array(sheetWidth);\r\n            for (let j = 0; j < sheetWidth; j++) {\r\n                const address = simpleCellAddress(sheet, j, i);\r\n                arr[i][j] = this.getClipboardCell(address);\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n    getRangeClipboardCells(range) {\r\n        const result = [];\r\n        for (const address of range.addresses(this.dependencyGraph)) {\r\n            result.push([address, this.getClipboardCell(address)]);\r\n        }\r\n        return result;\r\n    }\r\n    setCellContent(address, newCellContent) {\r\n        const parsedCellContent = this.cellContentParser.parse(newCellContent);\r\n        const oldContent = this.getOldContent(address);\r\n        if (parsedCellContent instanceof CellContent.Formula) {\r\n            const parserResult = this.parser.parse(parsedCellContent.formula, address);\r\n            const { ast, errors } = parserResult;\r\n            if (errors.length > 0) {\r\n                this.setParsingErrorToCell(parsedCellContent.formula, errors, address);\r\n            }\r\n            else {\r\n                const size = this.arraySizePredictor.checkArraySize(ast, address);\r\n                this.setFormulaToCell(address, size, parserResult);\r\n            }\r\n        }\r\n        else if (parsedCellContent instanceof CellContent.Empty) {\r\n            this.setCellEmpty(address);\r\n        }\r\n        else {\r\n            this.setValueToCell({ parsedValue: parsedCellContent.value, rawValue: newCellContent }, address);\r\n        }\r\n        return oldContent;\r\n    }\r\n    setSheetContent(sheetId, newSheetContent) {\r\n        this.clearSheet(sheetId);\r\n        for (let i = 0; i < newSheetContent.length; i++) {\r\n            for (let j = 0; j < newSheetContent[i].length; j++) {\r\n                const address = simpleCellAddress(sheetId, j, i);\r\n                this.setCellContent(address, newSheetContent[i][j]);\r\n            }\r\n        }\r\n    }\r\n    setParsingErrorToCell(rawInput, errors, address) {\r\n        const oldValue = this.dependencyGraph.getCellValue(address);\r\n        const vertex = new ParsingErrorVertex(errors, rawInput);\r\n        const arrayChanges = this.dependencyGraph.setParsingErrorToCell(address, vertex);\r\n        this.columnSearch.remove(getRawValue(oldValue), address);\r\n        this.columnSearch.applyChanges(arrayChanges.getChanges());\r\n        this.changes.addAll(arrayChanges);\r\n        this.changes.addChange(vertex.getCellValue(), address);\r\n    }\r\n    setFormulaToCell(address, size, { ast, hasVolatileFunction, hasStructuralChangeFunction, dependencies }) {\r\n        const oldValue = this.dependencyGraph.getCellValue(address);\r\n        const arrayChanges = this.dependencyGraph.setFormulaToCell(address, ast, absolutizeDependencies(dependencies, address), size, hasVolatileFunction, hasStructuralChangeFunction);\r\n        this.columnSearch.remove(getRawValue(oldValue), address);\r\n        this.columnSearch.applyChanges(arrayChanges.getChanges());\r\n        this.changes.addAll(arrayChanges);\r\n    }\r\n    setValueToCell(value, address) {\r\n        const oldValue = this.dependencyGraph.getCellValue(address);\r\n        const arrayChanges = this.dependencyGraph.setValueToCell(address, value);\r\n        this.columnSearch.change(getRawValue(oldValue), getRawValue(value.parsedValue), address);\r\n        this.columnSearch.applyChanges(arrayChanges.getChanges().filter(change => !equalSimpleCellAddress(change.address, address)));\r\n        this.changes.addAll(arrayChanges);\r\n        this.changes.addChange(value.parsedValue, address);\r\n    }\r\n    setCellEmpty(address) {\r\n        if (this.dependencyGraph.isArrayInternalCell(address)) {\r\n            return;\r\n        }\r\n        const oldValue = this.dependencyGraph.getCellValue(address);\r\n        const arrayChanges = this.dependencyGraph.setCellEmpty(address);\r\n        this.columnSearch.remove(getRawValue(oldValue), address);\r\n        this.columnSearch.applyChanges(arrayChanges.getChanges());\r\n        this.changes.addAll(arrayChanges);\r\n        this.changes.addChange(EmptyValue, address);\r\n    }\r\n    setFormulaToCellFromCache(formulaHash, address) {\r\n        const { ast, hasVolatileFunction, hasStructuralChangeFunction, dependencies } = this.parser.fetchCachedResult(formulaHash);\r\n        const absoluteDependencies = absolutizeDependencies(dependencies, address);\r\n        const [cleanedAst] = new CleanOutOfScopeDependenciesTransformer(address.sheet).transformSingleAst(ast, address);\r\n        this.parser.rememberNewAst(cleanedAst);\r\n        const cleanedDependencies = filterDependenciesOutOfScope(absoluteDependencies);\r\n        const size = this.arraySizePredictor.checkArraySize(ast, address);\r\n        this.dependencyGraph.setFormulaToCell(address, cleanedAst, cleanedDependencies, size, hasVolatileFunction, hasStructuralChangeFunction);\r\n    }\r\n    /**\r\n     * Returns true if row number is outside of given sheet.\r\n     *\r\n     * @param row - row number\r\n     * @param sheet - sheet id number\r\n     */\r\n    rowEffectivelyNotInSheet(row, sheet) {\r\n        const height = this.dependencyGraph.addressMapping.getHeight(sheet);\r\n        return row >= height;\r\n    }\r\n    getAndClearContentChanges() {\r\n        const changes = this.changes;\r\n        this.changes = ContentChanges.empty();\r\n        return changes;\r\n    }\r\n    forceApplyPostponedTransformations() {\r\n        this.dependencyGraph.forceApplyPostponedTransformations();\r\n    }\r\n    /**\r\n     * Removes multiple rows from sheet. </br>\r\n     * Does nothing if rows are outside of effective sheet size.\r\n     *\r\n     * @param sheet - sheet id from which rows will be removed\r\n     * @param rowStart - number of the first row to be deleted\r\n     * @param rowEnd - number of the last row to be deleted\r\n     */\r\n    doRemoveRows(rowsToRemove) {\r\n        if (this.rowEffectivelyNotInSheet(rowsToRemove.rowStart, rowsToRemove.sheet)) {\r\n            return;\r\n        }\r\n        const removedCells = [];\r\n        for (const [address] of this.dependencyGraph.entriesFromRowsSpan(rowsToRemove)) {\r\n            removedCells.push({ address, cellType: this.getClipboardCell(address) });\r\n        }\r\n        const { affectedArrays, contentChanges } = this.dependencyGraph.removeRows(rowsToRemove);\r\n        this.columnSearch.applyChanges(contentChanges.getChanges());\r\n        let version;\r\n        this.stats.measure(StatType.TRANSFORM_ASTS, () => {\r\n            const transformation = new RemoveRowsTransformer(rowsToRemove);\r\n            transformation.performEagerTransformations(this.dependencyGraph, this.parser);\r\n            version = this.lazilyTransformingAstService.addTransformation(transformation);\r\n        });\r\n        this.rewriteAffectedArrays(affectedArrays);\r\n        return { version: version, removedCells, rowFrom: rowsToRemove.rowStart, rowCount: rowsToRemove.numberOfRows };\r\n    }\r\n    /**\r\n     * Removes multiple columns from sheet. </br>\r\n     * Does nothing if columns are outside of effective sheet size.\r\n     *\r\n     * @param sheet - sheet id from which columns will be removed\r\n     * @param columnStart - number of the first column to be deleted\r\n     * @param columnEnd - number of the last row to be deleted\r\n     */\r\n    doRemoveColumns(columnsToRemove) {\r\n        if (this.columnEffectivelyNotInSheet(columnsToRemove.columnStart, columnsToRemove.sheet)) {\r\n            return;\r\n        }\r\n        const removedCells = [];\r\n        for (const [address] of this.dependencyGraph.entriesFromColumnsSpan(columnsToRemove)) {\r\n            removedCells.push({ address, cellType: this.getClipboardCell(address) });\r\n        }\r\n        const { affectedArrays, contentChanges } = this.dependencyGraph.removeColumns(columnsToRemove);\r\n        this.columnSearch.applyChanges(contentChanges.getChanges());\r\n        this.columnSearch.removeColumns(columnsToRemove);\r\n        let version;\r\n        this.stats.measure(StatType.TRANSFORM_ASTS, () => {\r\n            const transformation = new RemoveColumnsTransformer(columnsToRemove);\r\n            transformation.performEagerTransformations(this.dependencyGraph, this.parser);\r\n            version = this.lazilyTransformingAstService.addTransformation(transformation);\r\n        });\r\n        this.rewriteAffectedArrays(affectedArrays);\r\n        return {\r\n            version: version,\r\n            removedCells,\r\n            columnFrom: columnsToRemove.columnStart,\r\n            columnCount: columnsToRemove.numberOfColumns\r\n        };\r\n    }\r\n    /**\r\n     * Add multiple rows to sheet. </br>\r\n     * Does nothing if rows are outside of effective sheet size.\r\n     *\r\n     * @param sheet - sheet id in which rows will be added\r\n     * @param row - row number above which the rows will be added\r\n     * @param numberOfRowsToAdd - number of rows to add\r\n     */\r\n    doAddRows(addedRows) {\r\n        if (this.rowEffectivelyNotInSheet(addedRows.rowStart, addedRows.sheet)) {\r\n            return;\r\n        }\r\n        const { affectedArrays } = this.dependencyGraph.addRows(addedRows);\r\n        this.stats.measure(StatType.TRANSFORM_ASTS, () => {\r\n            const transformation = new AddRowsTransformer(addedRows);\r\n            transformation.performEagerTransformations(this.dependencyGraph, this.parser);\r\n            this.lazilyTransformingAstService.addTransformation(transformation);\r\n        });\r\n        this.rewriteAffectedArrays(affectedArrays);\r\n    }\r\n    rewriteAffectedArrays(affectedArrays) {\r\n        for (const arrayVertex of affectedArrays.values()) {\r\n            if (arrayVertex.array.size.isRef) {\r\n                continue;\r\n            }\r\n            const ast = arrayVertex.getFormula(this.lazilyTransformingAstService);\r\n            const address = arrayVertex.getAddress(this.lazilyTransformingAstService);\r\n            const hash = this.parser.computeHashFromAst(ast);\r\n            this.setFormulaToCellFromCache(hash, address);\r\n        }\r\n    }\r\n    /**\r\n     * Add multiple columns to sheet </br>\r\n     * Does nothing if columns are outside of effective sheet size\r\n     *\r\n     * @param sheet - sheet id in which columns will be added\r\n     * @param column - column number above which the columns will be added\r\n     * @param numberOfColumns - number of columns to add\r\n     */\r\n    doAddColumns(addedColumns) {\r\n        if (this.columnEffectivelyNotInSheet(addedColumns.columnStart, addedColumns.sheet)) {\r\n            return;\r\n        }\r\n        const { affectedArrays, contentChanges } = this.dependencyGraph.addColumns(addedColumns);\r\n        this.columnSearch.addColumns(addedColumns);\r\n        this.columnSearch.applyChanges(contentChanges.getChanges());\r\n        this.stats.measure(StatType.TRANSFORM_ASTS, () => {\r\n            const transformation = new AddColumnsTransformer(addedColumns);\r\n            transformation.performEagerTransformations(this.dependencyGraph, this.parser);\r\n            this.lazilyTransformingAstService.addTransformation(transformation);\r\n        });\r\n        this.rewriteAffectedArrays(affectedArrays);\r\n    }\r\n    /**\r\n     * Returns true if row number is outside of given sheet.\r\n     *\r\n     * @param column - row number\r\n     * @param sheet - sheet id number\r\n     */\r\n    columnEffectivelyNotInSheet(column, sheet) {\r\n        const width = this.dependencyGraph.addressMapping.getWidth(sheet);\r\n        return column >= width;\r\n    }\r\n    adjustNamedExpressionEdges(namedExpression, expressionName, sheetId) {\r\n        if (sheetId === undefined) {\r\n            return;\r\n        }\r\n        const localVertex = this.dependencyGraph.fetchCellOrCreateEmpty(namedExpression.address);\r\n        const globalNamedExpression = this.namedExpressions.workbookNamedExpressionOrPlaceholder(expressionName);\r\n        const globalVertex = this.dependencyGraph.fetchCellOrCreateEmpty(globalNamedExpression.address);\r\n        for (const adjacentNode of this.dependencyGraph.graph.adjacentNodes(globalVertex)) {\r\n            if (adjacentNode instanceof FormulaCellVertex && adjacentNode.getAddress(this.lazilyTransformingAstService).sheet === sheetId) {\r\n                const ast = adjacentNode.getFormula(this.lazilyTransformingAstService);\r\n                const formulaAddress = adjacentNode.getAddress(this.lazilyTransformingAstService);\r\n                const { dependencies } = this.parser.fetchCachedResultForAst(ast);\r\n                for (const dependency of absolutizeDependencies(dependencies, formulaAddress)) {\r\n                    if (dependency instanceof NamedExpressionDependency && dependency.name.toLowerCase() === namedExpression.displayName.toLowerCase()) {\r\n                        this.dependencyGraph.graph.removeEdge(globalVertex, adjacentNode);\r\n                        this.dependencyGraph.graph.addEdge(localVertex, adjacentNode);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    storeNamedExpressionInCell(address, expression) {\r\n        const parsedCellContent = this.cellContentParser.parse(expression);\r\n        if (parsedCellContent instanceof CellContent.Formula) {\r\n            const parsingResult = this.parser.parse(parsedCellContent.formula, simpleCellAddress(-1, 0, 0));\r\n            if (doesContainRelativeReferences(parsingResult.ast)) {\r\n                throw new NoRelativeAddressesAllowedError();\r\n            }\r\n            const { ast, hasVolatileFunction, hasStructuralChangeFunction, dependencies } = parsingResult;\r\n            this.dependencyGraph.setFormulaToCell(address, ast, absolutizeDependencies(dependencies, address), ArraySize.scalar(), hasVolatileFunction, hasStructuralChangeFunction);\r\n        }\r\n        else if (parsedCellContent instanceof CellContent.Empty) {\r\n            this.setCellEmpty(address);\r\n        }\r\n        else {\r\n            this.setValueToCell({ parsedValue: parsedCellContent.value, rawValue: expression }, address);\r\n        }\r\n    }\r\n    updateNamedExpressionsForMovedCells(sourceLeftCorner, width, height, destinationLeftCorner) {\r\n        if (sourceLeftCorner.sheet === destinationLeftCorner.sheet) {\r\n            return [];\r\n        }\r\n        const addedGlobalNamedExpressions = [];\r\n        const targetRange = AbsoluteCellRange.spanFrom(destinationLeftCorner, width, height);\r\n        for (const formulaAddress of targetRange.addresses(this.dependencyGraph)) {\r\n            const vertex = this.addressMapping.fetchCell(formulaAddress);\r\n            if (vertex instanceof FormulaCellVertex && formulaAddress.sheet !== sourceLeftCorner.sheet) {\r\n                const ast = vertex.getFormula(this.lazilyTransformingAstService);\r\n                const { dependencies } = this.parser.fetchCachedResultForAst(ast);\r\n                addedGlobalNamedExpressions.push(...this.updateNamedExpressionsForTargetAddress(sourceLeftCorner.sheet, formulaAddress, dependencies));\r\n            }\r\n        }\r\n        return addedGlobalNamedExpressions;\r\n    }\r\n    updateNamedExpressionsForTargetAddress(sourceSheet, targetAddress, dependencies) {\r\n        if (sourceSheet === targetAddress.sheet) {\r\n            return [];\r\n        }\r\n        const addedGlobalNamedExpressions = [];\r\n        const vertex = this.addressMapping.fetchCell(targetAddress);\r\n        for (const namedExpressionDependency of absolutizeDependencies(dependencies, targetAddress)) {\r\n            if (!(namedExpressionDependency instanceof NamedExpressionDependency)) {\r\n                continue;\r\n            }\r\n            const expressionName = namedExpressionDependency.name;\r\n            const sourceVertex = this.dependencyGraph.fetchNamedExpressionVertex(expressionName, sourceSheet);\r\n            const namedExpressionInTargetScope = this.namedExpressions.isExpressionInScope(expressionName, targetAddress.sheet);\r\n            const targetScopeExpressionVertex = namedExpressionInTargetScope\r\n                ? this.dependencyGraph.fetchNamedExpressionVertex(expressionName, targetAddress.sheet)\r\n                : this.copyOrFetchGlobalNamedExpressionVertex(expressionName, sourceVertex, addedGlobalNamedExpressions);\r\n            if (targetScopeExpressionVertex !== sourceVertex) {\r\n                this.dependencyGraph.graph.softRemoveEdge(sourceVertex, vertex);\r\n                this.dependencyGraph.graph.addEdge(targetScopeExpressionVertex, vertex);\r\n            }\r\n        }\r\n        return addedGlobalNamedExpressions;\r\n    }\r\n    allocateNamedExpressionAddressSpace() {\r\n        this.dependencyGraph.addressMapping.addSheet(NamedExpressions.SHEET_FOR_WORKBOOK_EXPRESSIONS, new SparseStrategy(0, 0));\r\n    }\r\n    copyOrFetchGlobalNamedExpressionVertex(expressionName, sourceVertex, addedNamedExpressions) {\r\n        let expression = this.namedExpressions.namedExpressionForScope(expressionName);\r\n        if (expression === undefined) {\r\n            expression = this.namedExpressions.addNamedExpression(expressionName);\r\n            addedNamedExpressions.push(expression.normalizeExpressionName());\r\n            if (sourceVertex instanceof FormulaCellVertex) {\r\n                const parsingResult = this.parser.fetchCachedResultForAst(sourceVertex.getFormula(this.lazilyTransformingAstService));\r\n                const { ast, hasVolatileFunction, hasStructuralChangeFunction, dependencies } = parsingResult;\r\n                this.dependencyGraph.setFormulaToCell(expression.address, ast, absolutizeDependencies(dependencies, expression.address), ArraySize.scalar(), hasVolatileFunction, hasStructuralChangeFunction);\r\n            }\r\n            else if (sourceVertex instanceof EmptyCellVertex) {\r\n                this.setCellEmpty(expression.address);\r\n            }\r\n            else if (sourceVertex instanceof ValueCellVertex) {\r\n                this.setValueToCell(sourceVertex.getValues(), expression.address);\r\n            }\r\n        }\r\n        return this.dependencyGraph.fetchCellOrCreateEmpty(expression.address);\r\n    }\r\n}\r\nexport function normalizeRemovedIndexes(indexes) {\r\n    if (indexes.length <= 1) {\r\n        return indexes;\r\n    }\r\n    const sorted = [...indexes].sort(([a], [b]) => a - b);\r\n    /* merge overlapping and adjacent indexes */\r\n    const merged = sorted.reduce((acc, [startIndex, amount]) => {\r\n        const previous = acc[acc.length - 1];\r\n        const lastIndex = previous[0] + previous[1];\r\n        if (startIndex <= lastIndex) {\r\n            previous[1] += Math.max(0, amount - (lastIndex - startIndex));\r\n        }\r\n        else {\r\n            acc.push([startIndex, amount]);\r\n        }\r\n        return acc;\r\n    }, [sorted[0]]);\r\n    /* shift further indexes */\r\n    let shift = 0;\r\n    for (let i = 0; i < merged.length; ++i) {\r\n        merged[i][0] -= shift;\r\n        shift += merged[i][1];\r\n    }\r\n    return merged;\r\n}\r\nexport function normalizeAddedIndexes(indexes) {\r\n    if (indexes.length <= 1) {\r\n        return indexes;\r\n    }\r\n    const sorted = [...indexes].sort(([a], [b]) => a - b);\r\n    /* merge indexes with same start */\r\n    const merged = sorted.reduce((acc, [startIndex, amount]) => {\r\n        const previous = acc[acc.length - 1];\r\n        if (startIndex === previous[0]) {\r\n            previous[1] = Math.max(previous[1], amount);\r\n        }\r\n        else {\r\n            acc.push([startIndex, amount]);\r\n        }\r\n        return acc;\r\n    }, [sorted[0]]);\r\n    /* shift further indexes */\r\n    let shift = 0;\r\n    for (let i = 0; i < merged.length; ++i) {\r\n        merged[i][0] += shift;\r\n        shift += merged[i][1];\r\n    }\r\n    return merged;\r\n}\r\nfunction isPositiveInteger(x) {\r\n    return Number.isInteger(x) && x > 0;\r\n}\r\nfunction isRowOrColumnRange(leftCorner, width, height) {\r\n    return (leftCorner.row === 0 && isPositiveInteger(width) && height === Number.POSITIVE_INFINITY)\r\n        || (leftCorner.col === 0 && isPositiveInteger(height) && width === Number.POSITIVE_INFINITY);\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, ErrorType } from '../Cell';\r\nimport { Transformer } from './Transformer';\r\nexport class AddColumnsTransformer extends Transformer {\r\n    constructor(columnsSpan) {\r\n        super();\r\n        this.columnsSpan = columnsSpan;\r\n    }\r\n    get sheet() {\r\n        return this.columnsSpan.sheet;\r\n    }\r\n    isIrreversible() {\r\n        return false;\r\n    }\r\n    transformRowRangeAst(ast, _formulaAddress) {\r\n        return ast;\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformRowRange(_start, _end, _formulaAddress) {\r\n        throw Error('Not implemented');\r\n    }\r\n    transformColumnRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        const absoluteDependencySheet = absoluteSheetReference(dependencyAddress, formulaAddress);\r\n        // Case 4 and 5\r\n        if ((absoluteDependencySheet !== this.columnsSpan.sheet)\r\n            && (formulaAddress.sheet !== this.columnsSpan.sheet)) {\r\n            return false;\r\n        }\r\n        const absolutizedDependencyAddress = dependencyAddress.toSimpleColumnAddress(formulaAddress);\r\n        // Case 3\r\n        if ((absoluteDependencySheet === this.columnsSpan.sheet)\r\n            && (formulaAddress.sheet !== this.columnsSpan.sheet)) {\r\n            if (this.columnsSpan.columnStart <= absolutizedDependencyAddress.col) {\r\n                return dependencyAddress.shiftedByColumns(this.columnsSpan.numberOfColumns);\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        // Case 2\r\n        if ((formulaAddress.sheet === this.columnsSpan.sheet)\r\n            && (absoluteDependencySheet !== this.columnsSpan.sheet)) {\r\n            if (dependencyAddress.isColumnAbsolute()) {\r\n                return false;\r\n            }\r\n            if (formulaAddress.col < this.columnsSpan.columnStart) {\r\n                return false;\r\n            }\r\n            return dependencyAddress.shiftedByColumns(-this.columnsSpan.numberOfColumns);\r\n        }\r\n        // Case 1\r\n        if (dependencyAddress.isColumnAbsolute()) {\r\n            if (dependencyAddress.col < this.columnsSpan.columnStart) { // Case Aa\r\n                return false;\r\n            }\r\n            else { // Case Ab\r\n                return dependencyAddress.shiftedByColumns(this.columnsSpan.numberOfColumns);\r\n            }\r\n        }\r\n        else {\r\n            const absolutizedDependencyAddress = dependencyAddress.toSimpleColumnAddress(formulaAddress);\r\n            if (absolutizedDependencyAddress.col < this.columnsSpan.columnStart) {\r\n                if (formulaAddress.col < this.columnsSpan.columnStart) { // Case Raa\r\n                    return false;\r\n                }\r\n                else { // Case Rab\r\n                    return dependencyAddress.shiftedByColumns(-this.columnsSpan.numberOfColumns);\r\n                }\r\n            }\r\n            else {\r\n                if (formulaAddress.col < this.columnsSpan.columnStart) { // Case Rba\r\n                    return dependencyAddress.shiftedByColumns(this.columnsSpan.numberOfColumns);\r\n                }\r\n                else { // Case Rbb\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    fixNodeAddress(address) {\r\n        if (this.columnsSpan.sheet === address.sheet && this.columnsSpan.columnStart <= address.col) {\r\n            return Object.assign(Object.assign({}, address), { col: address.col + this.columnsSpan.numberOfColumns });\r\n        }\r\n        else {\r\n            return address;\r\n        }\r\n    }\r\n    transformRange(start, end, formulaAddress) {\r\n        const newStart = this.transformCellAddress(start, formulaAddress);\r\n        const newEnd = this.transformCellAddress(end, formulaAddress);\r\n        if (newStart === ErrorType.REF || newEnd === ErrorType.REF) {\r\n            return ErrorType.REF;\r\n        }\r\n        else if (newStart || newEnd) {\r\n            return [newStart || start, newEnd || end];\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../Cell';\r\nimport { AstNodeType, buildCellErrorAst, CellAddress, } from '../parser';\r\nexport class Transformer {\r\n    performEagerTransformations(graph, parser) {\r\n        for (const node of graph.arrayFormulaNodes()) {\r\n            const [newAst, newAddress] = this.transformSingleAst(node.getFormula(graph.lazilyTransformingAstService), node.getAddress(graph.lazilyTransformingAstService));\r\n            const cachedAst = parser.rememberNewAst(newAst);\r\n            node.setFormula(cachedAst);\r\n            node.setAddress(newAddress);\r\n        }\r\n    }\r\n    transformSingleAst(ast, address) {\r\n        const newAst = this.transformAst(ast, address);\r\n        const newAddress = this.fixNodeAddress(address);\r\n        return [newAst, newAddress];\r\n    }\r\n    transformAst(ast, address) {\r\n        switch (ast.type) {\r\n            case AstNodeType.CELL_REFERENCE: {\r\n                return this.transformCellReferenceAst(ast, address);\r\n            }\r\n            case AstNodeType.CELL_RANGE: {\r\n                return this.transformCellRangeAst(ast, address);\r\n            }\r\n            case AstNodeType.COLUMN_RANGE: {\r\n                return this.transformColumnRangeAst(ast, address);\r\n            }\r\n            case AstNodeType.ROW_RANGE: {\r\n                return this.transformRowRangeAst(ast, address);\r\n            }\r\n            case AstNodeType.EMPTY:\r\n            case AstNodeType.ERROR:\r\n            case AstNodeType.NUMBER:\r\n            case AstNodeType.NAMED_EXPRESSION:\r\n            case AstNodeType.ERROR_WITH_RAW_INPUT:\r\n            case AstNodeType.STRING: {\r\n                return ast;\r\n            }\r\n            case AstNodeType.PERCENT_OP:\r\n            case AstNodeType.MINUS_UNARY_OP:\r\n            case AstNodeType.PLUS_UNARY_OP: {\r\n                return Object.assign(Object.assign({}, ast), { value: this.transformAst(ast.value, address) });\r\n            }\r\n            case AstNodeType.FUNCTION_CALL: {\r\n                return Object.assign(Object.assign({}, ast), { procedureName: ast.procedureName, args: ast.args.map((arg) => this.transformAst(arg, address)) });\r\n            }\r\n            case AstNodeType.PARENTHESIS: {\r\n                return Object.assign(Object.assign({}, ast), { expression: this.transformAst(ast.expression, address) });\r\n            }\r\n            case AstNodeType.ARRAY: {\r\n                return Object.assign(Object.assign({}, ast), { args: ast.args.map((row) => row.map(val => this.transformAst(val, address))) });\r\n            }\r\n            default: {\r\n                return Object.assign(Object.assign({}, ast), { left: this.transformAst(ast.left, address), right: this.transformAst(ast.right, address) });\r\n            }\r\n        }\r\n    }\r\n    transformCellReferenceAst(ast, formulaAddress) {\r\n        const newCellAddress = this.transformCellAddress(ast.reference, formulaAddress);\r\n        if (newCellAddress instanceof CellAddress) {\r\n            return Object.assign(Object.assign({}, ast), { reference: newCellAddress });\r\n        }\r\n        else if (newCellAddress === ErrorType.REF) {\r\n            return buildCellErrorAst(new CellError(ErrorType.REF));\r\n        }\r\n        else {\r\n            return ast;\r\n        }\r\n    }\r\n    transformCellRangeAst(ast, formulaAddress) {\r\n        const newRange = this.transformCellRange(ast.start, ast.end, formulaAddress);\r\n        if (Array.isArray(newRange)) {\r\n            return Object.assign(Object.assign({}, ast), { start: newRange[0], end: newRange[1] });\r\n        }\r\n        else if (newRange === ErrorType.REF) {\r\n            return buildCellErrorAst(new CellError(ErrorType.REF));\r\n        }\r\n        else {\r\n            return ast;\r\n        }\r\n    }\r\n    transformColumnRangeAst(ast, formulaAddress) {\r\n        const newRange = this.transformColumnRange(ast.start, ast.end, formulaAddress);\r\n        if (Array.isArray(newRange)) {\r\n            return Object.assign(Object.assign({}, ast), { start: newRange[0], end: newRange[1] });\r\n        }\r\n        else if (newRange === ErrorType.REF) {\r\n            return buildCellErrorAst(new CellError(ErrorType.REF));\r\n        }\r\n        else {\r\n            return ast;\r\n        }\r\n    }\r\n    transformRowRangeAst(ast, formulaAddress) {\r\n        const newRange = this.transformRowRange(ast.start, ast.end, formulaAddress);\r\n        if (Array.isArray(newRange)) {\r\n            return Object.assign(Object.assign({}, ast), { start: newRange[0], end: newRange[1] });\r\n        }\r\n        else if (newRange === ErrorType.REF) {\r\n            return buildCellErrorAst(new CellError(ErrorType.REF));\r\n        }\r\n        else {\r\n            return ast;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, ErrorType } from '../Cell';\r\nimport { Transformer } from './Transformer';\r\nexport class AddRowsTransformer extends Transformer {\r\n    constructor(rowsSpan) {\r\n        super();\r\n        this.rowsSpan = rowsSpan;\r\n    }\r\n    get sheet() {\r\n        return this.rowsSpan.sheet;\r\n    }\r\n    isIrreversible() {\r\n        return false;\r\n    }\r\n    transformColumnRangeAst(ast, _formulaAddress) {\r\n        return ast;\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformRowRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformColumnRange(_start, _end, _formulaAddress) {\r\n        throw Error('Not implemented');\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        const absoluteDependencySheet = absoluteSheetReference(dependencyAddress, formulaAddress);\r\n        // Case 4 and 5\r\n        if ((absoluteDependencySheet !== this.rowsSpan.sheet)\r\n            && (formulaAddress.sheet !== this.rowsSpan.sheet)) {\r\n            return false;\r\n        }\r\n        const absolutizedDependencyAddress = dependencyAddress.toSimpleRowAddress(formulaAddress);\r\n        // Case 3\r\n        if ((absoluteDependencySheet === this.rowsSpan.sheet)\r\n            && (formulaAddress.sheet !== this.rowsSpan.sheet)) {\r\n            if (this.rowsSpan.rowStart <= absolutizedDependencyAddress.row) {\r\n                return dependencyAddress.shiftedByRows(this.rowsSpan.numberOfRows);\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        // Case 2\r\n        if ((formulaAddress.sheet === this.rowsSpan.sheet)\r\n            && (absoluteDependencySheet !== this.rowsSpan.sheet)) {\r\n            if (dependencyAddress.isRowAbsolute()) {\r\n                return false;\r\n            }\r\n            if (formulaAddress.row < this.rowsSpan.rowStart) {\r\n                return false;\r\n            }\r\n            return dependencyAddress.shiftedByRows(-this.rowsSpan.numberOfRows);\r\n        }\r\n        // Case 1\r\n        if (dependencyAddress.isRowAbsolute()) {\r\n            if (dependencyAddress.row < this.rowsSpan.rowStart) { // Case Aa\r\n                return false;\r\n            }\r\n            else { // Case Ab\r\n                return dependencyAddress.shiftedByRows(this.rowsSpan.numberOfRows);\r\n            }\r\n        }\r\n        else {\r\n            if (absolutizedDependencyAddress.row < this.rowsSpan.rowStart) {\r\n                if (formulaAddress.row < this.rowsSpan.rowStart) { // Case Raa\r\n                    return false;\r\n                }\r\n                else { // Case Rab\r\n                    return dependencyAddress.shiftedByRows(-this.rowsSpan.numberOfRows);\r\n                }\r\n            }\r\n            else {\r\n                if (formulaAddress.row < this.rowsSpan.rowStart) { // Case Rba\r\n                    return dependencyAddress.shiftedByRows(this.rowsSpan.numberOfRows);\r\n                }\r\n                else { // Case Rbb\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    fixNodeAddress(address) {\r\n        if (this.rowsSpan.sheet === address.sheet && this.rowsSpan.rowStart <= address.row) {\r\n            return Object.assign(Object.assign({}, address), { row: address.row + this.rowsSpan.numberOfRows });\r\n        }\r\n        else {\r\n            return address;\r\n        }\r\n    }\r\n    transformRange(start, end, formulaAddress) {\r\n        const newStart = this.transformCellAddress(start, formulaAddress);\r\n        const newEnd = this.transformCellAddress(end, formulaAddress);\r\n        if (newStart === ErrorType.REF || newEnd === ErrorType.REF) {\r\n            return ErrorType.REF;\r\n        }\r\n        else if (newStart || newEnd) {\r\n            return [newStart || start, newEnd || end];\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ErrorType } from '../Cell';\r\nimport { Transformer } from './Transformer';\r\nexport class CleanOutOfScopeDependenciesTransformer extends Transformer {\r\n    constructor(sheet) {\r\n        super();\r\n        this.sheet = sheet;\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n    fixNodeAddress(address) {\r\n        return address;\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        return dependencyAddress.isInvalid(formulaAddress) ? ErrorType.REF : false;\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return start.isInvalid(formulaAddress) || end.isInvalid(formulaAddress) ? ErrorType.REF : false;\r\n    }\r\n    transformColumnRange(start, end, formulaAddress) {\r\n        return start.isInvalid(formulaAddress) || end.isInvalid(formulaAddress) ? ErrorType.REF : false;\r\n    }\r\n    transformRowRange(start, end, formulaAddress) {\r\n        return start.isInvalid(formulaAddress) || end.isInvalid(formulaAddress) ? ErrorType.REF : false;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { simpleCellAddress } from '../Cell';\r\nimport { CellAddress } from '../parser';\r\nimport { RowAddress } from '../parser/RowAddress';\r\nimport { Transformer } from './Transformer';\r\nexport class MoveCellsTransformer extends Transformer {\r\n    constructor(sourceRange, toRight, toBottom, toSheet) {\r\n        super();\r\n        this.sourceRange = sourceRange;\r\n        this.toRight = toRight;\r\n        this.toBottom = toBottom;\r\n        this.toSheet = toSheet;\r\n        this.dependentFormulaTransformer = new DependentFormulaTransformer(sourceRange, toRight, toBottom, toSheet);\r\n    }\r\n    get sheet() {\r\n        return this.sourceRange.sheet;\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n    transformSingleAst(ast, address) {\r\n        if (this.sourceRange.addressInRange(address)) {\r\n            const newAst = this.transformAst(ast, address);\r\n            return [newAst, this.fixNodeAddress(address)];\r\n        }\r\n        else {\r\n            return this.dependentFormulaTransformer.transformSingleAst(ast, address);\r\n        }\r\n    }\r\n    fixNodeAddress(address) {\r\n        return simpleCellAddress(this.toSheet, address.col + this.toRight, address.row + this.toBottom);\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        return this.transformAddress(dependencyAddress, formulaAddress);\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformColumnRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformRowRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformAddress(dependencyAddress, formulaAddress) {\r\n        const sourceRange = this.sourceRange;\r\n        if (dependencyAddress instanceof CellAddress) {\r\n            const absoluteDependencyAddress = dependencyAddress.toSimpleCellAddress(formulaAddress);\r\n            if (sourceRange.addressInRange(absoluteDependencyAddress)) { // If dependency is internal, move only absolute dimensions\r\n                return dependencyAddress.shiftAbsoluteDimensions(this.toRight, this.toBottom);\r\n            }\r\n        }\r\n        return dependencyAddress.shiftRelativeDimensions(-this.toRight, -this.toBottom);\r\n    }\r\n    transformRange(start, end, formulaAddress) {\r\n        const sourceRange = this.sourceRange;\r\n        if (start instanceof CellAddress && end instanceof CellAddress) {\r\n            const absoluteStart = start.toSimpleCellAddress(formulaAddress);\r\n            const absoluteEnd = end.toSimpleCellAddress(formulaAddress);\r\n            if (sourceRange.addressInRange(absoluteStart) && sourceRange.addressInRange(absoluteEnd)) {\r\n                return [\r\n                    start.shiftAbsoluteDimensions(this.toRight, this.toBottom),\r\n                    end.shiftAbsoluteDimensions(this.toRight, this.toBottom)\r\n                ];\r\n            }\r\n        }\r\n        return [\r\n            start.shiftRelativeDimensions(-this.toRight, -this.toBottom),\r\n            end.shiftRelativeDimensions(-this.toRight, -this.toBottom)\r\n        ];\r\n    }\r\n}\r\nexport class DependentFormulaTransformer extends Transformer {\r\n    constructor(sourceRange, toRight, toBottom, toSheet) {\r\n        super();\r\n        this.sourceRange = sourceRange;\r\n        this.toRight = toRight;\r\n        this.toBottom = toBottom;\r\n        this.toSheet = toSheet;\r\n    }\r\n    get sheet() {\r\n        return this.sourceRange.sheet;\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n    fixNodeAddress(address) {\r\n        return address;\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        if (this.shouldMove(dependencyAddress, formulaAddress)) {\r\n            return dependencyAddress.moved(this.toSheet, this.toRight, this.toBottom);\r\n        }\r\n        return false;\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformColumnRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformRowRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    shouldMove(dependencyAddress, formulaAddress) {\r\n        if (dependencyAddress instanceof CellAddress) {\r\n            return this.sourceRange.addressInRange(dependencyAddress.toSimpleCellAddress(formulaAddress));\r\n        }\r\n        else if (dependencyAddress instanceof RowAddress) {\r\n            return this.sourceRange.rowInRange(dependencyAddress.toSimpleRowAddress(formulaAddress)) && !this.sourceRange.isFinite();\r\n        }\r\n        else {\r\n            return this.sourceRange.columnInRange(dependencyAddress.toSimpleColumnAddress(formulaAddress)) && !this.sourceRange.isFinite();\r\n        }\r\n    }\r\n    transformRange(start, end, formulaAddress) {\r\n        const newStart = this.transformCellAddress(start, formulaAddress);\r\n        const newEnd = this.transformCellAddress(end, formulaAddress);\r\n        if (newStart && newEnd) {\r\n            return [newStart, newEnd];\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, ErrorType } from '../Cell';\r\nimport { Transformer } from './Transformer';\r\nexport class RemoveColumnsTransformer extends Transformer {\r\n    constructor(columnsSpan) {\r\n        super();\r\n        this.columnsSpan = columnsSpan;\r\n    }\r\n    get sheet() {\r\n        return this.columnsSpan.sheet;\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n    transformRowRangeAst(ast, _formulaAddress) {\r\n        return ast;\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformRowRange(_start, _end, _formulaAddress) {\r\n        throw Error('Not implemented');\r\n    }\r\n    transformColumnRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        const absoluteDependencySheet = absoluteSheetReference(dependencyAddress, formulaAddress);\r\n        // Case 4\r\n        if (this.columnsSpan.sheet !== formulaAddress.sheet && this.columnsSpan.sheet !== absoluteDependencySheet) {\r\n            return false;\r\n        }\r\n        // Case 3 -- removed column in same sheet where dependency is but formula in different\r\n        if (this.columnsSpan.sheet !== formulaAddress.sheet && this.columnsSpan.sheet === absoluteDependencySheet) {\r\n            const absoluteDependencyAddress = dependencyAddress.toSimpleColumnAddress(formulaAddress);\r\n            if (absoluteDependencyAddress.col < this.columnsSpan.columnStart) { // 3.ARa\r\n                return false;\r\n            }\r\n            else if (absoluteDependencyAddress.col > this.columnsSpan.columnEnd) { // 3.ARb\r\n                return dependencyAddress.shiftedByColumns(-this.columnsSpan.numberOfColumns);\r\n            }\r\n        }\r\n        // Case 2 -- removed column in same sheet where formula but dependency in different sheet\r\n        if (this.columnsSpan.sheet === formulaAddress.sheet && this.columnsSpan.sheet !== absoluteDependencySheet) {\r\n            if (dependencyAddress.isColumnAbsolute()) { // 2.A\r\n                return false;\r\n            }\r\n            else {\r\n                if (formulaAddress.col < this.columnsSpan.columnStart) { // 2.Ra\r\n                    return false;\r\n                }\r\n                else if (formulaAddress.col > this.columnsSpan.columnEnd) { // 2.Rb\r\n                    return dependencyAddress.shiftedByColumns(this.columnsSpan.numberOfColumns);\r\n                }\r\n            }\r\n        }\r\n        // Case 1 -- same sheet\r\n        if (this.columnsSpan.sheet === formulaAddress.sheet && this.columnsSpan.sheet === absoluteDependencySheet) {\r\n            if (dependencyAddress.isColumnAbsolute()) {\r\n                if (dependencyAddress.col < this.columnsSpan.columnStart) { // 1.Aa\r\n                    return false;\r\n                }\r\n                else if (dependencyAddress.col > this.columnsSpan.columnEnd) { // 1.Ab\r\n                    return dependencyAddress.shiftedByColumns(-this.columnsSpan.numberOfColumns);\r\n                }\r\n            }\r\n            else {\r\n                const absoluteDependencyAddress = dependencyAddress.toSimpleColumnAddress(formulaAddress);\r\n                if (absoluteDependencyAddress.col < this.columnsSpan.columnStart) {\r\n                    if (formulaAddress.col < this.columnsSpan.columnStart) { // 1.Raa\r\n                        return false;\r\n                    }\r\n                    else if (formulaAddress.col > this.columnsSpan.columnEnd) { // 1.Rab\r\n                        return dependencyAddress.shiftedByColumns(this.columnsSpan.numberOfColumns);\r\n                    }\r\n                }\r\n                else if (absoluteDependencyAddress.col > this.columnsSpan.columnEnd) {\r\n                    if (formulaAddress.col < this.columnsSpan.columnStart) { // 1.Rba\r\n                        return dependencyAddress.shiftedByColumns(-this.columnsSpan.numberOfColumns);\r\n                    }\r\n                    else if (formulaAddress.col > this.columnsSpan.columnEnd) { // 1.Rbb\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // 1.Ac, 1.Rca, 1.Rcb, 3.Ac, 3.Rca, 3.Rcb\r\n        return ErrorType.REF;\r\n    }\r\n    fixNodeAddress(address) {\r\n        if (this.columnsSpan.sheet === address.sheet && this.columnsSpan.columnStart <= address.col) {\r\n            return Object.assign(Object.assign({}, address), { col: address.col - this.columnsSpan.numberOfColumns });\r\n        }\r\n        else {\r\n            return address;\r\n        }\r\n    }\r\n    transformRange(start, end, formulaAddress) {\r\n        const startSheet = absoluteSheetReference(start, formulaAddress);\r\n        let actualStart = start;\r\n        let actualEnd = end;\r\n        if (this.columnsSpan.sheet === startSheet) {\r\n            const startSCA = start.toSimpleColumnAddress(formulaAddress);\r\n            const endSCA = end.toSimpleColumnAddress(formulaAddress);\r\n            if (this.columnsSpan.columnStart <= startSCA.col && this.columnsSpan.columnEnd >= endSCA.col) {\r\n                return ErrorType.REF;\r\n            }\r\n            if (startSCA.col >= this.columnsSpan.columnStart && startSCA.col <= this.columnsSpan.columnEnd) {\r\n                actualStart = start.shiftedByColumns(this.columnsSpan.columnEnd - startSCA.col + 1);\r\n            }\r\n            if (endSCA.col >= this.columnsSpan.columnStart && endSCA.col <= this.columnsSpan.columnEnd) {\r\n                actualEnd = end.shiftedByColumns(-(endSCA.col - this.columnsSpan.columnStart + 1));\r\n            }\r\n        }\r\n        const newStart = this.transformCellAddress(actualStart, formulaAddress);\r\n        const newEnd = this.transformCellAddress(actualEnd, formulaAddress);\r\n        if (newStart === false && newEnd === false) {\r\n            return [actualStart, actualEnd];\r\n        }\r\n        else if (newStart === ErrorType.REF || newEnd === ErrorType.REF) {\r\n            throw Error('Cannot happen');\r\n        }\r\n        else {\r\n            return [newStart || actualStart, newEnd || actualEnd];\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absoluteSheetReference, ErrorType } from '../Cell';\r\nimport { Transformer } from './Transformer';\r\nexport class RemoveRowsTransformer extends Transformer {\r\n    constructor(rowsSpan) {\r\n        super();\r\n        this.rowsSpan = rowsSpan;\r\n    }\r\n    get sheet() {\r\n        return this.rowsSpan.sheet;\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n    transformColumnRangeAst(ast, _formulaAddress) {\r\n        return ast;\r\n    }\r\n    transformCellAddress(dependencyAddress, formulaAddress) {\r\n        const absoluteDependencySheet = absoluteSheetReference(dependencyAddress, formulaAddress);\r\n        // Case 4\r\n        if (this.rowsSpan.sheet !== formulaAddress.sheet && this.rowsSpan.sheet !== absoluteDependencySheet) {\r\n            return false;\r\n        }\r\n        // Case 3 -- removed row in same sheet where dependency is but formula in different\r\n        if (this.rowsSpan.sheet !== formulaAddress.sheet && this.rowsSpan.sheet === absoluteDependencySheet) {\r\n            const absoluteDependencyAddress = dependencyAddress.toSimpleRowAddress(formulaAddress);\r\n            if (absoluteDependencyAddress.row < this.rowsSpan.rowStart) { // 3.ARa\r\n                return false;\r\n            }\r\n            else if (absoluteDependencyAddress.row > this.rowsSpan.rowEnd) { // 3.ARb\r\n                return dependencyAddress.shiftedByRows(-this.rowsSpan.numberOfRows);\r\n            }\r\n        }\r\n        // Case 2 -- removed row in same sheet where formula but dependency in different sheet\r\n        if (this.rowsSpan.sheet === formulaAddress.sheet && this.rowsSpan.sheet !== absoluteDependencySheet) {\r\n            if (dependencyAddress.isRowAbsolute()) { // 2.A\r\n                return false;\r\n            }\r\n            else {\r\n                if (formulaAddress.row < this.rowsSpan.rowStart) { // 2.Ra\r\n                    return false;\r\n                }\r\n                else if (formulaAddress.row > this.rowsSpan.rowEnd) { // 2.Rb\r\n                    return dependencyAddress.shiftedByRows(this.rowsSpan.numberOfRows);\r\n                }\r\n            }\r\n        }\r\n        // Case 1 -- same sheet\r\n        if (this.rowsSpan.sheet === formulaAddress.sheet && this.rowsSpan.sheet === absoluteDependencySheet) {\r\n            if (dependencyAddress.isRowAbsolute()) {\r\n                if (dependencyAddress.row < this.rowsSpan.rowStart) { // 1.Aa\r\n                    return false;\r\n                }\r\n                else if (dependencyAddress.row > this.rowsSpan.rowEnd) { // 1.Ab\r\n                    return dependencyAddress.shiftedByRows(-this.rowsSpan.numberOfRows);\r\n                }\r\n            }\r\n            else {\r\n                const absoluteDependencyAddress = dependencyAddress.toSimpleRowAddress(formulaAddress);\r\n                if (absoluteDependencyAddress.row < this.rowsSpan.rowStart) {\r\n                    if (formulaAddress.row < this.rowsSpan.rowStart) { // 1.Raa\r\n                        return false;\r\n                    }\r\n                    else if (formulaAddress.row > this.rowsSpan.rowEnd) { // 1.Rab\r\n                        return dependencyAddress.shiftedByRows(this.rowsSpan.numberOfRows);\r\n                    }\r\n                }\r\n                else if (absoluteDependencyAddress.row > this.rowsSpan.rowEnd) {\r\n                    if (formulaAddress.row < this.rowsSpan.rowStart) { // 1.Rba\r\n                        return dependencyAddress.shiftedByRows(-this.rowsSpan.numberOfRows);\r\n                    }\r\n                    else if (formulaAddress.row > this.rowsSpan.rowEnd) { // 1.Rbb\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // 1.Ac, 1.Rca, 1.Rcb, 3.Ac, 3.Rca, 3.Rcb\r\n        return ErrorType.REF;\r\n    }\r\n    transformCellRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformRowRange(start, end, formulaAddress) {\r\n        return this.transformRange(start, end, formulaAddress);\r\n    }\r\n    transformColumnRange(_start, _end, _formulaAddress) {\r\n        throw Error('Not implemented');\r\n    }\r\n    fixNodeAddress(address) {\r\n        if (this.rowsSpan.sheet === address.sheet && this.rowsSpan.rowStart <= address.row) {\r\n            return Object.assign(Object.assign({}, address), { row: address.row - this.rowsSpan.numberOfRows });\r\n        }\r\n        else {\r\n            return address;\r\n        }\r\n    }\r\n    transformRange(start, end, formulaAddress) {\r\n        const startSheet = absoluteSheetReference(start, formulaAddress);\r\n        let actualStart = start;\r\n        let actualEnd = end;\r\n        if (this.rowsSpan.sheet === startSheet) {\r\n            const startSCA = start.toSimpleRowAddress(formulaAddress);\r\n            const endSCA = end.toSimpleRowAddress(formulaAddress);\r\n            if (this.rowsSpan.rowStart <= startSCA.row && this.rowsSpan.rowEnd >= endSCA.row) {\r\n                return ErrorType.REF;\r\n            }\r\n            if (startSCA.row >= this.rowsSpan.rowStart && startSCA.row <= this.rowsSpan.rowEnd) {\r\n                actualStart = start.shiftedByRows(this.rowsSpan.rowEnd - startSCA.row + 1);\r\n            }\r\n            if (endSCA.row >= this.rowsSpan.rowStart && endSCA.row <= this.rowsSpan.rowEnd) {\r\n                actualEnd = end.shiftedByRows(-(endSCA.row - this.rowsSpan.rowStart + 1));\r\n            }\r\n        }\r\n        const newStart = this.transformCellAddress(actualStart, formulaAddress);\r\n        const newEnd = this.transformCellAddress(actualEnd, formulaAddress);\r\n        if (newStart === false && newEnd === false) {\r\n            return [actualStart, actualEnd];\r\n        }\r\n        else if (newStart === ErrorType.REF || newEnd === ErrorType.REF) {\r\n            return ErrorType.REF;\r\n        }\r\n        else {\r\n            return [newStart || actualStart, newEnd || actualEnd];\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ErrorType } from '../Cell';\r\nimport { Transformer } from './Transformer';\r\nexport class RemoveSheetTransformer extends Transformer {\r\n    constructor(sheet) {\r\n        super();\r\n        this.sheet = sheet;\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n    performEagerTransformations(graph, _parser) {\r\n        for (const node of graph.arrayFormulaNodes()) {\r\n            const [newAst] = this.transformSingleAst(node.getFormula(graph.lazilyTransformingAstService), node.getAddress(graph.lazilyTransformingAstService));\r\n            node.setFormula(newAst);\r\n        }\r\n    }\r\n    fixNodeAddress(address) {\r\n        return address;\r\n    }\r\n    transformCellAddress(dependencyAddress, _formulaAddress) {\r\n        return this.transformAddress(dependencyAddress);\r\n    }\r\n    transformCellRange(start, _end, _formulaAddress) {\r\n        return this.transformAddress(start);\r\n    }\r\n    transformColumnRange(start, _end, _formulaAddress) {\r\n        return this.transformAddress(start);\r\n    }\r\n    transformRowRange(start, _end, _formulaAddress) {\r\n        return this.transformAddress(start);\r\n    }\r\n    transformAddress(address) {\r\n        if (address.sheet === this.sheet) {\r\n            return ErrorType.REF;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { InvalidArgumentsError } from './errors';\r\nexport function validateAsSheet(sheet) {\r\n    if (!Array.isArray(sheet)) {\r\n        throw new InvalidArgumentsError('an array of arrays.');\r\n    }\r\n    for (let i = 0; i < sheet.length; i++) {\r\n        if (!Array.isArray(sheet[i])) {\r\n            throw new InvalidArgumentsError('an array of arrays.');\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns actual width, height and fill ratio of a sheet\r\n *\r\n * @param sheet - two-dimmensional array sheet representation\r\n */\r\nexport function findBoundaries(sheet) {\r\n    let width = 0;\r\n    let height = 0;\r\n    let cellsCount = 0;\r\n    for (let currentRow = 0; currentRow < sheet.length; currentRow++) {\r\n        let currentRowWidth = 0;\r\n        for (let currentCol = 0; currentCol < sheet[currentRow].length; currentCol++) {\r\n            const currentValue = sheet[currentRow][currentCol];\r\n            if (currentValue === undefined || currentValue === null) {\r\n                continue;\r\n            }\r\n            currentRowWidth = currentCol + 1;\r\n            ++cellsCount;\r\n        }\r\n        width = Math.max(width, currentRowWidth);\r\n        if (currentRowWidth > 0) {\r\n            height = currentRow + 1;\r\n        }\r\n    }\r\n    const sheetSize = width * height;\r\n    return {\r\n        height: height,\r\n        width: width,\r\n        fill: sheetSize === 0 ? 0 : cellsCount / sheetSize,\r\n    };\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { equalSimpleCellAddress, simpleCellAddress } from './Cell';\r\nimport { AddColumnsCommand, AddRowsCommand, RemoveColumnsCommand, RemoveRowsCommand } from './Operations';\r\nexport class BaseUndoEntry {\r\n}\r\nexport class RemoveRowsUndoEntry extends BaseUndoEntry {\r\n    constructor(command, rowsRemovals) {\r\n        super();\r\n        this.command = command;\r\n        this.rowsRemovals = rowsRemovals;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoRemoveRows(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoRemoveRows(this);\r\n    }\r\n}\r\nexport class MoveCellsUndoEntry extends BaseUndoEntry {\r\n    constructor(sourceLeftCorner, width, height, destinationLeftCorner, overwrittenCellsData, addedGlobalNamedExpressions, version) {\r\n        super();\r\n        this.sourceLeftCorner = sourceLeftCorner;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.destinationLeftCorner = destinationLeftCorner;\r\n        this.overwrittenCellsData = overwrittenCellsData;\r\n        this.addedGlobalNamedExpressions = addedGlobalNamedExpressions;\r\n        this.version = version;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoMoveCells(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoMoveCells(this);\r\n    }\r\n}\r\nexport class AddRowsUndoEntry extends BaseUndoEntry {\r\n    constructor(command) {\r\n        super();\r\n        this.command = command;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoAddRows(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoAddRows(this);\r\n    }\r\n}\r\nexport class SetRowOrderUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetId, rowMapping, oldContent) {\r\n        super();\r\n        this.sheetId = sheetId;\r\n        this.rowMapping = rowMapping;\r\n        this.oldContent = oldContent;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoSetRowOrder(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoSetRowOrder(this);\r\n    }\r\n}\r\nexport class SetColumnOrderUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetId, columnMapping, oldContent) {\r\n        super();\r\n        this.sheetId = sheetId;\r\n        this.columnMapping = columnMapping;\r\n        this.oldContent = oldContent;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoSetColumnOrder(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoSetColumnOrder(this);\r\n    }\r\n}\r\nexport class SetSheetContentUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetId, oldSheetContent, newSheetContent) {\r\n        super();\r\n        this.sheetId = sheetId;\r\n        this.oldSheetContent = oldSheetContent;\r\n        this.newSheetContent = newSheetContent;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoSetSheetContent(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoSetSheetContent(this);\r\n    }\r\n}\r\nexport class MoveRowsUndoEntry extends BaseUndoEntry {\r\n    constructor(sheet, startRow, numberOfRows, targetRow, version) {\r\n        super();\r\n        this.sheet = sheet;\r\n        this.startRow = startRow;\r\n        this.numberOfRows = numberOfRows;\r\n        this.targetRow = targetRow;\r\n        this.version = version;\r\n        this.undoStart = this.startRow < this.targetRow ? this.targetRow - this.numberOfRows : this.targetRow;\r\n        this.undoEnd = this.startRow > this.targetRow ? this.startRow + this.numberOfRows : this.startRow;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoMoveRows(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoMoveRows(this);\r\n    }\r\n}\r\nexport class MoveColumnsUndoEntry extends BaseUndoEntry {\r\n    constructor(sheet, startColumn, numberOfColumns, targetColumn, version) {\r\n        super();\r\n        this.sheet = sheet;\r\n        this.startColumn = startColumn;\r\n        this.numberOfColumns = numberOfColumns;\r\n        this.targetColumn = targetColumn;\r\n        this.version = version;\r\n        this.undoStart = this.startColumn < this.targetColumn ? this.targetColumn - this.numberOfColumns : this.targetColumn;\r\n        this.undoEnd = this.startColumn > this.targetColumn ? this.startColumn + this.numberOfColumns : this.startColumn;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoMoveColumns(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoMoveColumns(this);\r\n    }\r\n}\r\nexport class AddColumnsUndoEntry extends BaseUndoEntry {\r\n    constructor(command) {\r\n        super();\r\n        this.command = command;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoAddColumns(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoAddColumns(this);\r\n    }\r\n}\r\nexport class RemoveColumnsUndoEntry extends BaseUndoEntry {\r\n    constructor(command, columnsRemovals) {\r\n        super();\r\n        this.command = command;\r\n        this.columnsRemovals = columnsRemovals;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoRemoveColumns(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoRemoveColumns(this);\r\n    }\r\n}\r\nexport class AddSheetUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetName) {\r\n        super();\r\n        this.sheetName = sheetName;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoAddSheet(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoAddSheet(this);\r\n    }\r\n}\r\nexport class RemoveSheetUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetName, sheetId, oldSheetContent, scopedNamedExpressions, version) {\r\n        super();\r\n        this.sheetName = sheetName;\r\n        this.sheetId = sheetId;\r\n        this.oldSheetContent = oldSheetContent;\r\n        this.scopedNamedExpressions = scopedNamedExpressions;\r\n        this.version = version;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoRemoveSheet(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoRemoveSheet(this);\r\n    }\r\n}\r\nexport class RenameSheetUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetId, oldName, newName) {\r\n        super();\r\n        this.sheetId = sheetId;\r\n        this.oldName = oldName;\r\n        this.newName = newName;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoRenameSheet(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoRenameSheet(this);\r\n    }\r\n}\r\nexport class ClearSheetUndoEntry extends BaseUndoEntry {\r\n    constructor(sheetId, oldSheetContent) {\r\n        super();\r\n        this.sheetId = sheetId;\r\n        this.oldSheetContent = oldSheetContent;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoClearSheet(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoClearSheet(this);\r\n    }\r\n}\r\nexport class SetCellContentsUndoEntry extends BaseUndoEntry {\r\n    constructor(cellContents) {\r\n        super();\r\n        this.cellContents = cellContents;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoSetCellContents(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoSetCellContents(this);\r\n    }\r\n}\r\nexport class PasteUndoEntry extends BaseUndoEntry {\r\n    constructor(targetLeftCorner, oldContent, newContent, addedGlobalNamedExpressions) {\r\n        super();\r\n        this.targetLeftCorner = targetLeftCorner;\r\n        this.oldContent = oldContent;\r\n        this.newContent = newContent;\r\n        this.addedGlobalNamedExpressions = addedGlobalNamedExpressions;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoPaste(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoPaste(this);\r\n    }\r\n}\r\nexport class AddNamedExpressionUndoEntry extends BaseUndoEntry {\r\n    constructor(name, newContent, scope, options) {\r\n        super();\r\n        this.name = name;\r\n        this.newContent = newContent;\r\n        this.scope = scope;\r\n        this.options = options;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoAddNamedExpression(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoAddNamedExpression(this);\r\n    }\r\n}\r\nexport class RemoveNamedExpressionUndoEntry extends BaseUndoEntry {\r\n    constructor(namedExpression, content, scope) {\r\n        super();\r\n        this.namedExpression = namedExpression;\r\n        this.content = content;\r\n        this.scope = scope;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoRemoveNamedExpression(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoRemoveNamedExpression(this);\r\n    }\r\n}\r\nexport class ChangeNamedExpressionUndoEntry extends BaseUndoEntry {\r\n    constructor(namedExpression, newContent, oldContent, scope, options) {\r\n        super();\r\n        this.namedExpression = namedExpression;\r\n        this.newContent = newContent;\r\n        this.oldContent = oldContent;\r\n        this.scope = scope;\r\n        this.options = options;\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoChangeNamedExpression(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoChangeNamedExpression(this);\r\n    }\r\n}\r\nexport class BatchUndoEntry extends BaseUndoEntry {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.operations = [];\r\n    }\r\n    add(operation) {\r\n        this.operations.push(operation);\r\n    }\r\n    *reversedOperations() {\r\n        for (let i = this.operations.length - 1; i >= 0; i--) {\r\n            yield this.operations[i];\r\n        }\r\n    }\r\n    doUndo(undoRedo) {\r\n        undoRedo.undoBatch(this);\r\n    }\r\n    doRedo(undoRedo) {\r\n        undoRedo.redoBatch(this);\r\n    }\r\n}\r\nexport class UndoRedo {\r\n    constructor(config, operations) {\r\n        this.operations = operations;\r\n        this.oldData = new Map();\r\n        this.undoStack = [];\r\n        this.redoStack = [];\r\n        this.undoLimit = config.undoLimit;\r\n    }\r\n    saveOperation(operation) {\r\n        if (this.batchUndoEntry !== undefined) {\r\n            this.batchUndoEntry.add(operation);\r\n        }\r\n        else {\r\n            this.addUndoEntry(operation);\r\n        }\r\n    }\r\n    beginBatchMode() {\r\n        this.batchUndoEntry = new BatchUndoEntry();\r\n    }\r\n    commitBatchMode() {\r\n        if (this.batchUndoEntry === undefined) {\r\n            throw Error('Batch mode wasn\\'t started');\r\n        }\r\n        this.addUndoEntry(this.batchUndoEntry);\r\n        this.batchUndoEntry = undefined;\r\n    }\r\n    storeDataForVersion(version, address, astHash) {\r\n        if (!this.oldData.has(version)) {\r\n            this.oldData.set(version, []);\r\n        }\r\n        const currentOldData = this.oldData.get(version);\r\n        currentOldData.push([address, astHash]);\r\n    }\r\n    clearRedoStack() {\r\n        this.redoStack = [];\r\n    }\r\n    clearUndoStack() {\r\n        this.undoStack = [];\r\n    }\r\n    isUndoStackEmpty() {\r\n        return this.undoStack.length === 0;\r\n    }\r\n    isRedoStackEmpty() {\r\n        return this.redoStack.length === 0;\r\n    }\r\n    undo() {\r\n        const operation = this.undoStack.pop();\r\n        if (!operation) {\r\n            throw Error('Attempted to undo without operation on stack');\r\n        }\r\n        this.undoEntry(operation);\r\n        this.redoStack.push(operation);\r\n    }\r\n    undoBatch(batchOperation) {\r\n        for (const operation of batchOperation.reversedOperations()) {\r\n            this.undoEntry(operation);\r\n        }\r\n    }\r\n    undoRemoveRows(operation) {\r\n        this.operations.forceApplyPostponedTransformations();\r\n        const { command: { sheet }, rowsRemovals } = operation;\r\n        for (let i = rowsRemovals.length - 1; i >= 0; --i) {\r\n            const rowsRemoval = rowsRemovals[i];\r\n            this.operations.addRows(new AddRowsCommand(sheet, [[rowsRemoval.rowFrom, rowsRemoval.rowCount]]));\r\n            for (const { address, cellType } of rowsRemoval.removedCells) {\r\n                this.operations.restoreCell(address, cellType);\r\n            }\r\n            this.restoreOldDataFromVersion(rowsRemoval.version - 1);\r\n        }\r\n    }\r\n    undoRemoveColumns(operation) {\r\n        this.operations.forceApplyPostponedTransformations();\r\n        const { command: { sheet }, columnsRemovals } = operation;\r\n        for (let i = columnsRemovals.length - 1; i >= 0; --i) {\r\n            const columnsRemoval = columnsRemovals[i];\r\n            this.operations.addColumns(new AddColumnsCommand(sheet, [[columnsRemoval.columnFrom, columnsRemoval.columnCount]]));\r\n            for (const { address, cellType } of columnsRemoval.removedCells) {\r\n                this.operations.restoreCell(address, cellType);\r\n            }\r\n            this.restoreOldDataFromVersion(columnsRemoval.version - 1);\r\n        }\r\n    }\r\n    undoAddRows(operation) {\r\n        const addedRowsSpans = operation.command.rowsSpans();\r\n        for (let i = addedRowsSpans.length - 1; i >= 0; --i) {\r\n            const addedRows = addedRowsSpans[i];\r\n            this.operations.removeRows(new RemoveRowsCommand(operation.command.sheet, [[addedRows.rowStart, addedRows.numberOfRows]]));\r\n        }\r\n    }\r\n    undoAddColumns(operation) {\r\n        const addedColumnsSpans = operation.command.columnsSpans();\r\n        for (let i = addedColumnsSpans.length - 1; i >= 0; --i) {\r\n            const addedColumns = addedColumnsSpans[i];\r\n            this.operations.removeColumns(new RemoveColumnsCommand(operation.command.sheet, [[addedColumns.columnStart, addedColumns.numberOfColumns]]));\r\n        }\r\n    }\r\n    undoSetCellContents(operation) {\r\n        for (const cellContentData of operation.cellContents) {\r\n            const address = cellContentData.address;\r\n            const [oldContentAddress, oldContent] = cellContentData.oldContent;\r\n            if (!equalSimpleCellAddress(address, oldContentAddress)) {\r\n                this.operations.setCellEmpty(address);\r\n            }\r\n            this.operations.restoreCell(oldContentAddress, oldContent);\r\n        }\r\n    }\r\n    undoPaste(operation) {\r\n        this.restoreOperationOldContent(operation.oldContent);\r\n        for (const namedExpression of operation.addedGlobalNamedExpressions) {\r\n            this.operations.removeNamedExpression(namedExpression);\r\n        }\r\n    }\r\n    undoMoveRows(operation) {\r\n        const { sheet } = operation;\r\n        this.operations.moveRows(sheet, operation.undoStart, operation.numberOfRows, operation.undoEnd);\r\n        this.restoreOldDataFromVersion(operation.version - 1);\r\n    }\r\n    undoMoveColumns(operation) {\r\n        const { sheet } = operation;\r\n        this.operations.moveColumns(sheet, operation.undoStart, operation.numberOfColumns, operation.undoEnd);\r\n        this.restoreOldDataFromVersion(operation.version - 1);\r\n    }\r\n    undoMoveCells(operation) {\r\n        this.operations.forceApplyPostponedTransformations();\r\n        this.operations.moveCells(operation.destinationLeftCorner, operation.width, operation.height, operation.sourceLeftCorner);\r\n        this.restoreOperationOldContent(operation.overwrittenCellsData);\r\n        this.restoreOldDataFromVersion(operation.version - 1);\r\n        for (const namedExpression of operation.addedGlobalNamedExpressions) {\r\n            this.operations.removeNamedExpression(namedExpression);\r\n        }\r\n    }\r\n    undoAddSheet(operation) {\r\n        const { sheetName } = operation;\r\n        this.operations.removeSheetByName(sheetName);\r\n    }\r\n    undoRemoveSheet(operation) {\r\n        this.operations.forceApplyPostponedTransformations();\r\n        const { oldSheetContent, sheetId } = operation;\r\n        this.operations.addSheet(operation.sheetName);\r\n        for (let rowIndex = 0; rowIndex < oldSheetContent.length; rowIndex++) {\r\n            const row = oldSheetContent[rowIndex];\r\n            for (let col = 0; col < row.length; col++) {\r\n                const cellType = row[col];\r\n                const address = simpleCellAddress(sheetId, col, rowIndex);\r\n                this.operations.restoreCell(address, cellType);\r\n            }\r\n        }\r\n        for (const [namedexpression, content] of operation.scopedNamedExpressions) {\r\n            this.operations.restoreNamedExpression(namedexpression, content, sheetId);\r\n        }\r\n        this.restoreOldDataFromVersion(operation.version - 1);\r\n    }\r\n    undoRenameSheet(operation) {\r\n        this.operations.renameSheet(operation.sheetId, operation.oldName);\r\n    }\r\n    undoClearSheet(operation) {\r\n        const { oldSheetContent, sheetId } = operation;\r\n        for (let rowIndex = 0; rowIndex < oldSheetContent.length; rowIndex++) {\r\n            const row = oldSheetContent[rowIndex];\r\n            for (let col = 0; col < row.length; col++) {\r\n                const cellType = row[col];\r\n                const address = simpleCellAddress(sheetId, col, rowIndex);\r\n                this.operations.restoreCell(address, cellType);\r\n            }\r\n        }\r\n    }\r\n    undoSetSheetContent(operation) {\r\n        const { oldSheetContent, sheetId } = operation;\r\n        this.operations.clearSheet(sheetId);\r\n        for (let rowIndex = 0; rowIndex < oldSheetContent.length; rowIndex++) {\r\n            const row = oldSheetContent[rowIndex];\r\n            for (let col = 0; col < row.length; col++) {\r\n                const cellType = row[col];\r\n                const address = simpleCellAddress(sheetId, col, rowIndex);\r\n                this.operations.restoreCell(address, cellType);\r\n            }\r\n        }\r\n    }\r\n    undoAddNamedExpression(operation) {\r\n        this.operations.removeNamedExpression(operation.name, operation.scope);\r\n    }\r\n    undoRemoveNamedExpression(operation) {\r\n        this.operations.restoreNamedExpression(operation.namedExpression, operation.content, operation.scope);\r\n    }\r\n    undoChangeNamedExpression(operation) {\r\n        this.operations.restoreNamedExpression(operation.namedExpression, operation.oldContent, operation.scope);\r\n    }\r\n    undoSetRowOrder(operation) {\r\n        this.restoreOperationOldContent(operation.oldContent);\r\n    }\r\n    undoSetColumnOrder(operation) {\r\n        this.restoreOperationOldContent(operation.oldContent);\r\n    }\r\n    redo() {\r\n        const operation = this.redoStack.pop();\r\n        if (!operation) {\r\n            throw Error('Attempted to redo without operation on stack');\r\n        }\r\n        this.redoEntry(operation);\r\n        this.undoStack.push(operation);\r\n    }\r\n    redoBatch(batchOperation) {\r\n        for (const operation of batchOperation.operations) {\r\n            this.redoEntry(operation);\r\n        }\r\n    }\r\n    redoRemoveRows(operation) {\r\n        this.operations.removeRows(operation.command);\r\n    }\r\n    redoMoveCells(operation) {\r\n        this.operations.moveCells(operation.sourceLeftCorner, operation.width, operation.height, operation.destinationLeftCorner);\r\n    }\r\n    redoRemoveColumns(operation) {\r\n        this.operations.removeColumns(operation.command);\r\n    }\r\n    redoPaste(operation) {\r\n        const { targetLeftCorner, newContent } = operation;\r\n        const height = newContent.length;\r\n        const width = newContent[0].length;\r\n        for (let y = 0; y < height; ++y) {\r\n            for (let x = 0; x < width; ++x) {\r\n                const address = simpleCellAddress(targetLeftCorner.sheet, targetLeftCorner.col + x, targetLeftCorner.row + y);\r\n                this.operations.restoreCell(address, newContent[y][x]);\r\n            }\r\n        }\r\n    }\r\n    redoSetCellContents(operation) {\r\n        for (const cellContentData of operation.cellContents) {\r\n            this.operations.setCellContent(cellContentData.address, cellContentData.newContent);\r\n        }\r\n    }\r\n    redoAddRows(operation) {\r\n        this.operations.addRows(operation.command);\r\n    }\r\n    redoAddColumns(operation) {\r\n        this.operations.addColumns(operation.command);\r\n    }\r\n    redoRemoveSheet(operation) {\r\n        this.operations.removeSheetByName(operation.sheetName);\r\n    }\r\n    redoAddSheet(operation) {\r\n        this.operations.addSheet(operation.sheetName);\r\n    }\r\n    redoRenameSheet(operation) {\r\n        this.operations.renameSheet(operation.sheetId, operation.newName);\r\n    }\r\n    redoMoveRows(operation) {\r\n        this.operations.moveRows(operation.sheet, operation.startRow, operation.numberOfRows, operation.targetRow);\r\n    }\r\n    redoMoveColumns(operation) {\r\n        this.operations.moveColumns(operation.sheet, operation.startColumn, operation.numberOfColumns, operation.targetColumn);\r\n    }\r\n    redoClearSheet(operation) {\r\n        this.operations.clearSheet(operation.sheetId);\r\n    }\r\n    redoSetSheetContent(operation) {\r\n        const { sheetId, newSheetContent } = operation;\r\n        this.operations.setSheetContent(sheetId, newSheetContent);\r\n    }\r\n    redoAddNamedExpression(operation) {\r\n        this.operations.addNamedExpression(operation.name, operation.newContent, operation.scope, operation.options);\r\n    }\r\n    redoRemoveNamedExpression(operation) {\r\n        this.operations.removeNamedExpression(operation.namedExpression.displayName, operation.scope);\r\n    }\r\n    redoChangeNamedExpression(operation) {\r\n        this.operations.changeNamedExpressionExpression(operation.namedExpression.displayName, operation.newContent, operation.scope, operation.options);\r\n    }\r\n    redoSetRowOrder(operation) {\r\n        this.operations.setRowOrder(operation.sheetId, operation.rowMapping);\r\n    }\r\n    redoSetColumnOrder(operation) {\r\n        this.operations.setColumnOrder(operation.sheetId, operation.columnMapping);\r\n    }\r\n    addUndoEntry(operation) {\r\n        this.undoStack.push(operation);\r\n        this.undoStack.splice(0, Math.max(0, this.undoStack.length - this.undoLimit));\r\n    }\r\n    undoEntry(operation) {\r\n        operation.doUndo(this);\r\n    }\r\n    restoreOperationOldContent(oldContent) {\r\n        for (const [address, clipboardCell] of oldContent) {\r\n            this.operations.restoreCell(address, clipboardCell);\r\n        }\r\n    }\r\n    redoEntry(operation) {\r\n        operation.doRedo(this);\r\n    }\r\n    restoreOldDataFromVersion(version) {\r\n        const oldDataToRestore = this.oldData.get(version) || [];\r\n        for (const entryToRestore of oldDataToRestore) {\r\n            const [address, hash] = entryToRestore;\r\n            this.operations.setFormulaToCellFromCache(hash, address);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from './AbsoluteCellRange';\r\nimport { absolutizeDependencies } from './absolutizeDependencies';\r\nimport { CellError, ErrorType } from './Cell';\r\nimport { ContentChanges } from './ContentChanges';\r\nimport { ArrayVertex, RangeVertex } from './DependencyGraph';\r\nimport { FormulaVertex } from './DependencyGraph/FormulaCellVertex';\r\nimport { InterpreterState } from './interpreter/InterpreterState';\r\nimport { EmptyValue, getRawValue } from './interpreter/InterpreterValue';\r\nimport { SimpleRangeValue } from './SimpleRangeValue';\r\nimport { StatType } from './statistics';\r\nexport class Evaluator {\r\n    constructor(config, stats, interpreter, lazilyTransformingAstService, dependencyGraph, columnSearch) {\r\n        this.config = config;\r\n        this.stats = stats;\r\n        this.interpreter = interpreter;\r\n        this.lazilyTransformingAstService = lazilyTransformingAstService;\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.columnSearch = columnSearch;\r\n    }\r\n    run() {\r\n        this.stats.start(StatType.TOP_SORT);\r\n        const { sorted, cycled } = this.dependencyGraph.topSortWithScc();\r\n        this.stats.end(StatType.TOP_SORT);\r\n        this.stats.measure(StatType.EVALUATION, () => {\r\n            this.recomputeFormulas(cycled, sorted);\r\n        });\r\n    }\r\n    partialRun(vertices) {\r\n        const changes = ContentChanges.empty();\r\n        this.stats.measure(StatType.EVALUATION, () => {\r\n            this.dependencyGraph.graph.getTopSortedWithSccSubgraphFrom(vertices, (vertex) => {\r\n                if (vertex instanceof FormulaVertex) {\r\n                    const currentValue = vertex.isComputed() ? vertex.getCellValue() : undefined;\r\n                    const newCellValue = this.recomputeFormulaVertexValue(vertex);\r\n                    if (newCellValue !== currentValue) {\r\n                        const address = vertex.getAddress(this.lazilyTransformingAstService);\r\n                        changes.addChange(newCellValue, address);\r\n                        this.columnSearch.change(getRawValue(currentValue), getRawValue(newCellValue), address);\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n                else if (vertex instanceof RangeVertex) {\r\n                    vertex.clearCache();\r\n                    return true;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            }, (vertex) => {\r\n                if (vertex instanceof RangeVertex) {\r\n                    vertex.clearCache();\r\n                }\r\n                else if (vertex instanceof FormulaVertex) {\r\n                    const address = vertex.getAddress(this.lazilyTransformingAstService);\r\n                    this.columnSearch.remove(getRawValue(vertex.valueOrUndef()), address);\r\n                    const error = new CellError(ErrorType.CYCLE, undefined, vertex);\r\n                    vertex.setCellValue(error);\r\n                    changes.addChange(error, address);\r\n                }\r\n            });\r\n        });\r\n        return changes;\r\n    }\r\n    runAndForget(ast, address, dependencies) {\r\n        const tmpRanges = [];\r\n        for (const dep of absolutizeDependencies(dependencies, address)) {\r\n            if (dep instanceof AbsoluteCellRange) {\r\n                const range = dep;\r\n                if (this.dependencyGraph.getRange(range.start, range.end) === undefined) {\r\n                    const rangeVertex = new RangeVertex(range);\r\n                    this.dependencyGraph.rangeMapping.setRange(rangeVertex);\r\n                    tmpRanges.push(rangeVertex);\r\n                }\r\n            }\r\n        }\r\n        const ret = this.evaluateAstToCellValue(ast, new InterpreterState(address, this.config.useArrayArithmetic));\r\n        tmpRanges.forEach((rangeVertex) => {\r\n            this.dependencyGraph.rangeMapping.removeRange(rangeVertex);\r\n        });\r\n        return ret;\r\n    }\r\n    /**\r\n     * Recalculates formulas in the topological sort order\r\n     */\r\n    recomputeFormulas(cycled, sorted) {\r\n        cycled.forEach((vertex) => {\r\n            if (vertex instanceof FormulaVertex) {\r\n                vertex.setCellValue(new CellError(ErrorType.CYCLE, undefined, vertex));\r\n            }\r\n        });\r\n        sorted.forEach((vertex) => {\r\n            if (vertex instanceof FormulaVertex) {\r\n                const newCellValue = this.recomputeFormulaVertexValue(vertex);\r\n                const address = vertex.getAddress(this.lazilyTransformingAstService);\r\n                this.columnSearch.add(getRawValue(newCellValue), address);\r\n            }\r\n            else if (vertex instanceof RangeVertex) {\r\n                vertex.clearCache();\r\n            }\r\n        });\r\n    }\r\n    recomputeFormulaVertexValue(vertex) {\r\n        const address = vertex.getAddress(this.lazilyTransformingAstService);\r\n        if (vertex instanceof ArrayVertex && (vertex.array.size.isRef || !this.dependencyGraph.isThereSpaceForArray(vertex))) {\r\n            return vertex.setNoSpace();\r\n        }\r\n        else {\r\n            const formula = vertex.getFormula(this.lazilyTransformingAstService);\r\n            const newCellValue = this.evaluateAstToCellValue(formula, new InterpreterState(address, this.config.useArrayArithmetic, vertex));\r\n            return vertex.setCellValue(newCellValue);\r\n        }\r\n    }\r\n    evaluateAstToCellValue(ast, state) {\r\n        const interpreterValue = this.interpreter.evaluateAst(ast, state);\r\n        if (interpreterValue instanceof SimpleRangeValue) {\r\n            return interpreterValue;\r\n        }\r\n        else if (interpreterValue === EmptyValue && this.config.evaluateNullToZero) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return interpreterValue;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from './Cell';\r\nimport { DetailedCellError } from './CellValue';\r\nimport { ErrorMessage } from './error-message';\r\nimport { EmptyValue, getRawValue, isExtendedNumber } from './interpreter/InterpreterValue';\r\nimport { SimpleRangeValue } from './SimpleRangeValue';\r\nimport { NamedExpressions } from './NamedExpressions';\r\nimport { simpleCellAddressToString } from './parser/addressRepresentationConverters';\r\n/**\r\n * A list of cells which values changed after the operation, their absolute addresses and new values.\r\n */\r\nexport class ExportedCellChange {\r\n    constructor(address, newValue) {\r\n        this.address = address;\r\n        this.newValue = newValue;\r\n    }\r\n    get col() {\r\n        return this.address.col;\r\n    }\r\n    get row() {\r\n        return this.address.row;\r\n    }\r\n    get sheet() {\r\n        return this.address.sheet;\r\n    }\r\n    get value() {\r\n        return this.newValue;\r\n    }\r\n}\r\nexport class ExportedNamedExpressionChange {\r\n    constructor(name, newValue) {\r\n        this.name = name;\r\n        this.newValue = newValue;\r\n    }\r\n}\r\nexport class Exporter {\r\n    constructor(config, namedExpressions, sheetIndexMapping, lazilyTransformingService) {\r\n        this.config = config;\r\n        this.namedExpressions = namedExpressions;\r\n        this.sheetIndexMapping = sheetIndexMapping;\r\n        this.lazilyTransformingService = lazilyTransformingService;\r\n    }\r\n    exportChange(change) {\r\n        const value = change.value;\r\n        const address = change.address;\r\n        if (address.sheet === NamedExpressions.SHEET_FOR_WORKBOOK_EXPRESSIONS) {\r\n            const namedExpression = this.namedExpressions.namedExpressionInAddress(address.row);\r\n            if (!namedExpression) {\r\n                throw new Error('Missing named expression');\r\n            }\r\n            return new ExportedNamedExpressionChange(namedExpression.displayName, this.exportScalarOrRange(value));\r\n        }\r\n        else if (value instanceof SimpleRangeValue) {\r\n            const result = [];\r\n            for (const [cellValue, cellAddress] of value.entriesFromTopLeftCorner(address)) {\r\n                result.push(new ExportedCellChange(cellAddress, this.exportValue(cellValue)));\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            return new ExportedCellChange(address, this.exportValue(value));\r\n        }\r\n    }\r\n    exportValue(value) {\r\n        if (value instanceof SimpleRangeValue) {\r\n            return this.detailedError(new CellError(ErrorType.VALUE, ErrorMessage.ScalarExpected));\r\n        }\r\n        else if (this.config.smartRounding && isExtendedNumber(value)) {\r\n            return this.cellValueRounding(getRawValue(value));\r\n        }\r\n        else if (value instanceof CellError) {\r\n            return this.detailedError(value);\r\n        }\r\n        else if (value === EmptyValue) {\r\n            return null;\r\n        }\r\n        else {\r\n            return getRawValue(value);\r\n        }\r\n    }\r\n    exportScalarOrRange(value) {\r\n        if (value instanceof SimpleRangeValue) {\r\n            return value.rawData().map(row => row.map(v => this.exportValue(v)));\r\n        }\r\n        else {\r\n            return this.exportValue(value);\r\n        }\r\n    }\r\n    detailedError(error) {\r\n        var _a, _b;\r\n        let address = undefined;\r\n        const originAddress = (_a = error.root) === null || _a === void 0 ? void 0 : _a.getAddress(this.lazilyTransformingService);\r\n        if (originAddress !== undefined) {\r\n            if (originAddress.sheet === NamedExpressions.SHEET_FOR_WORKBOOK_EXPRESSIONS) {\r\n                address = (_b = this.namedExpressions.namedExpressionInAddress(originAddress.row)) === null || _b === void 0 ? void 0 : _b.displayName;\r\n            }\r\n            else {\r\n                address = simpleCellAddressToString(this.sheetIndexMapping, originAddress, -1);\r\n            }\r\n        }\r\n        return new DetailedCellError(error, this.config.translationPackage.getErrorTranslation(error.type), address);\r\n    }\r\n    cellValueRounding(value) {\r\n        if (value === 0) {\r\n            return value;\r\n        }\r\n        const magnitudeMultiplierExponent = Math.floor(Math.log10(Math.abs(value)));\r\n        const placesMultiplier = Math.pow(10, this.config.precisionRounding - magnitudeMultiplierExponent);\r\n        if (value < 0) {\r\n            return -Math.round(-value * placesMultiplier) / placesMultiplier;\r\n        }\r\n        else {\r\n            return Math.round(value * placesMultiplier) / placesMultiplier;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { absolutizeDependencies } from './absolutizeDependencies';\r\nimport { ArraySize } from './ArraySize';\r\nimport { simpleCellAddress } from './Cell';\r\nimport { CellContent } from './CellContentParser';\r\nimport { ArrayVertex, FormulaCellVertex, ParsingErrorVertex, ValueCellVertex } from './DependencyGraph';\r\nimport { getRawValue } from './interpreter/InterpreterValue';\r\nimport { StatType } from './statistics';\r\n/**\r\n * Service building the graph and mappings.\r\n */\r\nexport class GraphBuilder {\r\n    /**\r\n     * Configures the building service.\r\n     */\r\n    constructor(dependencyGraph, columnSearch, parser, cellContentParser, stats, arraySizePredictor) {\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.columnSearch = columnSearch;\r\n        this.parser = parser;\r\n        this.cellContentParser = cellContentParser;\r\n        this.stats = stats;\r\n        this.arraySizePredictor = arraySizePredictor;\r\n        this.buildStrategy = new SimpleStrategy(dependencyGraph, columnSearch, parser, stats, cellContentParser, arraySizePredictor);\r\n    }\r\n    /**\r\n     * Builds graph.\r\n     */\r\n    buildGraph(sheets, stats) {\r\n        const dependencies = stats.measure(StatType.COLLECT_DEPENDENCIES, () => this.buildStrategy.run(sheets));\r\n        this.dependencyGraph.getAndClearContentChanges();\r\n        stats.measure(StatType.PROCESS_DEPENDENCIES, () => this.processDependencies(dependencies));\r\n    }\r\n    processDependencies(dependencies) {\r\n        dependencies.forEach((cellDependencies, endVertex) => {\r\n            this.dependencyGraph.processCellDependencies(cellDependencies, endVertex);\r\n        });\r\n    }\r\n}\r\nexport class SimpleStrategy {\r\n    constructor(dependencyGraph, columnIndex, parser, stats, cellContentParser, arraySizePredictor) {\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.columnIndex = columnIndex;\r\n        this.parser = parser;\r\n        this.stats = stats;\r\n        this.cellContentParser = cellContentParser;\r\n        this.arraySizePredictor = arraySizePredictor;\r\n    }\r\n    run(sheets) {\r\n        const dependencies = new Map();\r\n        for (const sheetName in sheets) {\r\n            const sheetId = this.dependencyGraph.getSheetId(sheetName);\r\n            const sheet = sheets[sheetName];\r\n            for (let i = 0; i < sheet.length; ++i) {\r\n                const row = sheet[i];\r\n                for (let j = 0; j < row.length; ++j) {\r\n                    const cellContent = row[j];\r\n                    const address = simpleCellAddress(sheetId, j, i);\r\n                    const parsedCellContent = this.cellContentParser.parse(cellContent);\r\n                    if (parsedCellContent instanceof CellContent.Formula) {\r\n                        const parseResult = this.stats.measure(StatType.PARSER, () => this.parser.parse(parsedCellContent.formula, address));\r\n                        if (parseResult.errors.length > 0) {\r\n                            this.shrinkArrayIfNeeded(address);\r\n                            const vertex = new ParsingErrorVertex(parseResult.errors, parsedCellContent.formula);\r\n                            this.dependencyGraph.addVertex(address, vertex);\r\n                        }\r\n                        else {\r\n                            this.shrinkArrayIfNeeded(address);\r\n                            const size = this.arraySizePredictor.checkArraySize(parseResult.ast, address);\r\n                            if (size.isScalar()) {\r\n                                const vertex = new FormulaCellVertex(parseResult.ast, address, 0);\r\n                                dependencies.set(vertex, absolutizeDependencies(parseResult.dependencies, address));\r\n                                this.dependencyGraph.addVertex(address, vertex);\r\n                                if (parseResult.hasVolatileFunction) {\r\n                                    this.dependencyGraph.markAsVolatile(vertex);\r\n                                }\r\n                                if (parseResult.hasStructuralChangeFunction) {\r\n                                    this.dependencyGraph.markAsDependentOnStructureChange(vertex);\r\n                                }\r\n                            }\r\n                            else {\r\n                                const vertex = new ArrayVertex(parseResult.ast, address, new ArraySize(size.width, size.height));\r\n                                dependencies.set(vertex, absolutizeDependencies(parseResult.dependencies, address));\r\n                                this.dependencyGraph.addArrayVertex(address, vertex);\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (parsedCellContent instanceof CellContent.Empty) {\r\n                        /* we don't care about empty cells here */\r\n                    }\r\n                    else {\r\n                        this.shrinkArrayIfNeeded(address);\r\n                        const vertex = new ValueCellVertex(parsedCellContent.value, cellContent);\r\n                        this.columnIndex.add(getRawValue(parsedCellContent.value), address);\r\n                        this.dependencyGraph.addVertex(address, vertex);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return dependencies;\r\n    }\r\n    shrinkArrayIfNeeded(address) {\r\n        const vertex = this.dependencyGraph.getCell(address);\r\n        if (vertex instanceof ArrayVertex) {\r\n            this.dependencyGraph.shrinkArrayToCorner(vertex);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AliasAlreadyExisting, FunctionPluginValidationError, ProtectedFunctionError } from '../errors';\r\nimport { HyperFormula } from '../HyperFormula';\r\nimport { VersionPlugin } from './plugin/VersionPlugin';\r\nfunction validateAndReturnMetadataFromName(functionId, plugin) {\r\n    var _a;\r\n    let entry = plugin.implementedFunctions[functionId];\r\n    const key = (_a = plugin.aliases) === null || _a === void 0 ? void 0 : _a[functionId];\r\n    if (key !== undefined) {\r\n        if (entry !== undefined) {\r\n            throw new AliasAlreadyExisting(functionId, plugin.name);\r\n        }\r\n        entry = plugin.implementedFunctions[key];\r\n    }\r\n    if (entry === undefined) {\r\n        throw FunctionPluginValidationError.functionNotDeclaredInPlugin(functionId, plugin.name);\r\n    }\r\n    return entry;\r\n}\r\nexport class FunctionRegistry {\r\n    constructor(config) {\r\n        this.config = config;\r\n        this.functions = new Map();\r\n        this.arraySizeFunctions = new Map();\r\n        this.volatileFunctions = new Set();\r\n        this.arrayFunctions = new Set();\r\n        this.structuralChangeFunctions = new Set();\r\n        this.functionsWhichDoesNotNeedArgumentsToBeComputed = new Set();\r\n        this.functionsMetadata = new Map();\r\n        this.doesFunctionNeedArgumentToBeComputed = (functionId) => this.functionsWhichDoesNotNeedArgumentsToBeComputed.has(functionId);\r\n        this.isFunctionVolatile = (functionId) => this.volatileFunctions.has(functionId);\r\n        this.isArrayFunction = (functionId) => this.arrayFunctions.has(functionId);\r\n        this.isFunctionDependentOnSheetStructureChange = (functionId) => this.structuralChangeFunctions.has(functionId);\r\n        if (config.functionPlugins.length > 0) {\r\n            this.instancePlugins = new Map();\r\n            for (const plugin of config.functionPlugins) {\r\n                FunctionRegistry.loadPluginFunctions(plugin, this.instancePlugins);\r\n            }\r\n        }\r\n        else {\r\n            this.instancePlugins = new Map(FunctionRegistry.plugins);\r\n        }\r\n        for (const [functionId, plugin] of FunctionRegistry.protectedFunctions()) {\r\n            FunctionRegistry.loadFunctionUnprotected(plugin, functionId, this.instancePlugins);\r\n        }\r\n        for (const [functionId, plugin] of this.instancePlugins.entries()) {\r\n            this.categorizeFunction(functionId, validateAndReturnMetadataFromName(functionId, plugin));\r\n        }\r\n    }\r\n    static registerFunctionPlugin(plugin, translations) {\r\n        this.loadPluginFunctions(plugin, this.plugins);\r\n        if (translations !== undefined) {\r\n            this.loadTranslations(translations);\r\n        }\r\n    }\r\n    static registerFunction(functionId, plugin, translations) {\r\n        this.loadPluginFunction(plugin, functionId, this.plugins);\r\n        if (translations !== undefined) {\r\n            this.loadTranslations(translations);\r\n        }\r\n    }\r\n    static unregisterFunction(functionId) {\r\n        if (this.functionIsProtected(functionId)) {\r\n            throw ProtectedFunctionError.cannotUnregisterFunctionWithId(functionId);\r\n        }\r\n        this.plugins.delete(functionId);\r\n    }\r\n    static unregisterFunctionPlugin(plugin) {\r\n        for (const protectedPlugin of this.protectedPlugins()) {\r\n            if (protectedPlugin === plugin) {\r\n                throw ProtectedFunctionError.cannotUnregisterProtectedPlugin();\r\n            }\r\n        }\r\n        for (const [functionId, registeredPlugin] of this.plugins.entries()) {\r\n            if (registeredPlugin === plugin) {\r\n                this.plugins.delete(functionId);\r\n            }\r\n        }\r\n    }\r\n    static unregisterAll() {\r\n        this.plugins.clear();\r\n    }\r\n    static getRegisteredFunctionIds() {\r\n        return [\r\n            ...Array.from(this.plugins.keys()),\r\n            ...Array.from(this._protectedPlugins.keys())\r\n        ];\r\n    }\r\n    static getPlugins() {\r\n        return Array.from(new Set(this.plugins.values()).values());\r\n    }\r\n    static getFunctionPlugin(functionId) {\r\n        if (this.functionIsProtected(functionId)) {\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this.plugins.get(functionId);\r\n        }\r\n    }\r\n    static functionIsProtected(functionId) {\r\n        return this._protectedPlugins.has(functionId);\r\n    }\r\n    static loadTranslations(translations) {\r\n        const registeredLanguages = new Set(HyperFormula.getRegisteredLanguagesCodes());\r\n        Object.keys(translations).forEach(code => {\r\n            if (registeredLanguages.has(code)) {\r\n                HyperFormula.getLanguage(code).extendFunctions(translations[code]);\r\n            }\r\n        });\r\n    }\r\n    static loadPluginFunctions(plugin, registry) {\r\n        Object.keys(plugin.implementedFunctions).forEach((functionName) => {\r\n            this.loadPluginFunction(plugin, functionName, registry);\r\n        });\r\n        if (plugin.aliases !== undefined) {\r\n            Object.keys(plugin.aliases).forEach((functionName) => {\r\n                this.loadPluginFunction(plugin, functionName, registry);\r\n            });\r\n        }\r\n    }\r\n    static loadPluginFunction(plugin, functionId, registry) {\r\n        if (this.functionIsProtected(functionId)) {\r\n            throw ProtectedFunctionError.cannotRegisterFunctionWithId(functionId);\r\n        }\r\n        else {\r\n            this.loadFunctionUnprotected(plugin, functionId, registry);\r\n        }\r\n    }\r\n    static loadFunctionUnprotected(plugin, functionId, registry) {\r\n        const methodName = validateAndReturnMetadataFromName(functionId, plugin).method;\r\n        if (Object.prototype.hasOwnProperty.call(plugin.prototype, methodName)) {\r\n            registry.set(functionId, plugin);\r\n        }\r\n        else {\r\n            throw FunctionPluginValidationError.functionMethodNotFound(methodName, plugin.name);\r\n        }\r\n    }\r\n    static *protectedFunctions() {\r\n        for (const [functionId, plugin] of this._protectedPlugins) {\r\n            if (plugin !== undefined) {\r\n                yield [functionId, plugin];\r\n            }\r\n        }\r\n    }\r\n    static *protectedPlugins() {\r\n        for (const [, plugin] of this._protectedPlugins) {\r\n            if (plugin !== undefined) {\r\n                yield plugin;\r\n            }\r\n        }\r\n    }\r\n    initializePlugins(interpreter) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        const instances = [];\r\n        for (const [functionId, plugin] of this.instancePlugins.entries()) {\r\n            let foundPluginInstance = instances.find(pluginInstance => pluginInstance instanceof plugin);\r\n            if (foundPluginInstance === undefined) {\r\n                foundPluginInstance = new plugin(interpreter);\r\n                instances.push(foundPluginInstance);\r\n            }\r\n            const metadata = validateAndReturnMetadataFromName(functionId, plugin);\r\n            const methodName = metadata.method;\r\n            this.functions.set(functionId, [methodName, foundPluginInstance]);\r\n            const arraySizeMethodName = metadata.arraySizeMethod;\r\n            if (arraySizeMethodName !== undefined) {\r\n                this.arraySizeFunctions.set(functionId, [arraySizeMethodName, foundPluginInstance]);\r\n            }\r\n        }\r\n    }\r\n    getFunctionPlugin(functionId) {\r\n        if (FunctionRegistry.functionIsProtected(functionId)) {\r\n            return undefined;\r\n        }\r\n        return this.instancePlugins.get(functionId);\r\n    }\r\n    getFunction(functionId) {\r\n        const pluginEntry = this.functions.get(functionId);\r\n        if (pluginEntry !== undefined && this.config.translationPackage.isFunctionTranslated(functionId)) {\r\n            const [pluginFunction, pluginInstance] = pluginEntry;\r\n            return (ast, state) => pluginInstance[pluginFunction](ast, state);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    getArraySizeFunction(functionId) {\r\n        const pluginEntry = this.arraySizeFunctions.get(functionId);\r\n        if (pluginEntry !== undefined && this.config.translationPackage.isFunctionTranslated(functionId)) {\r\n            const [pluginArraySizeFunction, pluginInstance] = pluginEntry;\r\n            return (ast, state) => pluginInstance[pluginArraySizeFunction](ast, state);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    getMetadata(functionId) {\r\n        return this.functionsMetadata.get(functionId);\r\n    }\r\n    getPlugins() {\r\n        const plugins = new Set();\r\n        for (const [functionId, plugin] of this.instancePlugins) {\r\n            if (!FunctionRegistry.functionIsProtected(functionId)) {\r\n                plugins.add(plugin);\r\n            }\r\n        }\r\n        return Array.from(plugins);\r\n    }\r\n    getRegisteredFunctionIds() {\r\n        return Array.from(this.functions.keys());\r\n    }\r\n    categorizeFunction(functionId, functionMetadata) {\r\n        if (functionMetadata.isVolatile) {\r\n            this.volatileFunctions.add(functionId);\r\n        }\r\n        if (functionMetadata.arrayFunction) {\r\n            this.arrayFunctions.add(functionId);\r\n        }\r\n        if (functionMetadata.doesNotNeedArgumentsToBeComputed) {\r\n            this.functionsWhichDoesNotNeedArgumentsToBeComputed.add(functionId);\r\n        }\r\n        if (functionMetadata.isDependentOnSheetStructureChange) {\r\n            this.structuralChangeFunctions.add(functionId);\r\n        }\r\n        this.functionsMetadata.set(functionId, functionMetadata);\r\n    }\r\n}\r\nFunctionRegistry.plugins = new Map();\r\nFunctionRegistry._protectedPlugins = new Map([\r\n    ['VERSION', VersionPlugin],\r\n    ['OFFSET', undefined],\r\n]);\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { HyperFormula } from '../../HyperFormula';\r\nimport { FunctionPlugin } from './FunctionPlugin';\r\nconst LICENSE_STATUS_MAP = new Map([\r\n    ['gpl-v3', 1],\r\n    [\"missing\" /* MISSING */, 2],\r\n    [\"invalid\" /* INVALID */, 3],\r\n    [\"expired\" /* EXPIRED */, 4],\r\n]);\r\nexport class VersionPlugin extends FunctionPlugin {\r\n    version(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('VERSION'), () => {\r\n            const { licenseKeyValidityState: validityState, licenseKey, } = this.config;\r\n            let status;\r\n            if (LICENSE_STATUS_MAP.has(licenseKey)) {\r\n                status = LICENSE_STATUS_MAP.get(licenseKey);\r\n            }\r\n            else if (LICENSE_STATUS_MAP.has(validityState)) {\r\n                status = LICENSE_STATUS_MAP.get(validityState);\r\n            }\r\n            else if (validityState === \"valid\" /* VALID */) {\r\n                status = licenseKey.slice(-5);\r\n            }\r\n            return `HyperFormula v${HyperFormula.version}, ${status}`;\r\n        });\r\n    }\r\n}\r\nVersionPlugin.implementedFunctions = {\r\n    'VERSION': {\r\n        method: 'version',\r\n        parameters: [],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange, AbsoluteColumnRange, AbsoluteRowRange } from '../AbsoluteCellRange';\r\nimport { ArrayValue, NotComputedArray } from '../ArrayValue';\r\nimport { CellError, ErrorType, invalidSimpleCellAddress } from '../Cell';\r\nimport { ErrorMessage } from '../error-message';\r\n// noinspection TypeScriptPreferShortImport\r\nimport { AstNodeType } from '../parser/Ast';\r\nimport { coerceRangeToScalar, coerceScalarToString, coerceToRange, fixNegativeZero, isNumberOverflow } from './ArithmeticHelper';\r\nimport { CriterionBuilder } from './Criterion';\r\nimport { FunctionRegistry } from './FunctionRegistry';\r\nimport { InterpreterState } from './InterpreterState';\r\nimport { cloneNumber, EmptyValue, getRawValue, isExtendedNumber, } from './InterpreterValue';\r\nimport { SimpleRangeValue } from '../SimpleRangeValue';\r\nexport class Interpreter {\r\n    constructor(config, dependencyGraph, columnSearch, stats, arithmeticHelper, functionRegistry, namedExpressions, serialization, arraySizePredictor, dateTimeHelper) {\r\n        this.config = config;\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.columnSearch = columnSearch;\r\n        this.stats = stats;\r\n        this.arithmeticHelper = arithmeticHelper;\r\n        this.functionRegistry = functionRegistry;\r\n        this.namedExpressions = namedExpressions;\r\n        this.serialization = serialization;\r\n        this.arraySizePredictor = arraySizePredictor;\r\n        this.dateTimeHelper = dateTimeHelper;\r\n        this.equalOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.eq, arg1, arg2);\r\n        this.notEqualOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.neq, arg1, arg2);\r\n        this.greaterThanOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.gt, arg1, arg2);\r\n        this.lessThanOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.lt, arg1, arg2);\r\n        this.greaterThanOrEqualOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.geq, arg1, arg2);\r\n        this.lessThanOrEqualOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.leq, arg1, arg2);\r\n        this.concatOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.concat, coerceScalarToString(arg1), coerceScalarToString(arg2));\r\n        this.plusOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.addWithEpsilon, this.arithmeticHelper.coerceScalarToNumberOrError(arg1), this.arithmeticHelper.coerceScalarToNumberOrError(arg2));\r\n        this.minusOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.subtract, this.arithmeticHelper.coerceScalarToNumberOrError(arg1), this.arithmeticHelper.coerceScalarToNumberOrError(arg2));\r\n        this.timesOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.multiply, this.arithmeticHelper.coerceScalarToNumberOrError(arg1), this.arithmeticHelper.coerceScalarToNumberOrError(arg2));\r\n        this.powerOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.pow, this.arithmeticHelper.coerceScalarToNumberOrError(arg1), this.arithmeticHelper.coerceScalarToNumberOrError(arg2));\r\n        this.divOp = (arg1, arg2) => binaryErrorWrapper(this.arithmeticHelper.divide, this.arithmeticHelper.coerceScalarToNumberOrError(arg1), this.arithmeticHelper.coerceScalarToNumberOrError(arg2));\r\n        this.unaryMinusOp = (arg) => unaryErrorWrapper(this.arithmeticHelper.unaryMinus, this.arithmeticHelper.coerceScalarToNumberOrError(arg));\r\n        this.percentOp = (arg) => unaryErrorWrapper(this.arithmeticHelper.unaryPercent, this.arithmeticHelper.coerceScalarToNumberOrError(arg));\r\n        this.unaryPlusOp = (arg) => this.arithmeticHelper.unaryPlus(arg);\r\n        this.functionRegistry.initializePlugins(this);\r\n        this.criterionBuilder = new CriterionBuilder(config);\r\n    }\r\n    evaluateAst(ast, state) {\r\n        let val = this.evaluateAstWithoutPostprocessing(ast, state);\r\n        if (isExtendedNumber(val)) {\r\n            if (isNumberOverflow(getRawValue(val))) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NaN);\r\n            }\r\n            else {\r\n                val = cloneNumber(val, fixNegativeZero(getRawValue(val)));\r\n            }\r\n        }\r\n        if (val instanceof SimpleRangeValue && val.height() === 1 && val.width() === 1) {\r\n            [[val]] = val.data;\r\n        }\r\n        return wrapperForRootVertex(val, state.formulaVertex);\r\n    }\r\n    /**\r\n     * Calculates cell value from formula abstract syntax tree\r\n     *\r\n     * @param formula - abstract syntax tree of formula\r\n     * @param formulaAddress - address of the cell in which formula is located\r\n     */\r\n    evaluateAstWithoutPostprocessing(ast, state) {\r\n        switch (ast.type) {\r\n            case AstNodeType.EMPTY: {\r\n                return EmptyValue;\r\n            }\r\n            case AstNodeType.CELL_REFERENCE: {\r\n                const address = ast.reference.toSimpleCellAddress(state.formulaAddress);\r\n                if (invalidSimpleCellAddress(address)) {\r\n                    return new CellError(ErrorType.REF, ErrorMessage.BadRef);\r\n                }\r\n                return this.dependencyGraph.getCellValue(address);\r\n            }\r\n            case AstNodeType.NUMBER:\r\n            case AstNodeType.STRING: {\r\n                return ast.value;\r\n            }\r\n            case AstNodeType.CONCATENATE_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.concatOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.EQUALS_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.equalOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.NOT_EQUAL_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.notEqualOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.GREATER_THAN_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.greaterThanOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.LESS_THAN_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.lessThanOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.GREATER_THAN_OR_EQUAL_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.greaterThanOrEqualOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.LESS_THAN_OR_EQUAL_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.lessThanOrEqualOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.PLUS_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.plusOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.MINUS_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.minusOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.TIMES_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.timesOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.POWER_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.powerOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.DIV_OP: {\r\n                const leftResult = this.evaluateAst(ast.left, state);\r\n                const rightResult = this.evaluateAst(ast.right, state);\r\n                return this.binaryRangeWrapper(this.divOp, leftResult, rightResult, state);\r\n            }\r\n            case AstNodeType.PLUS_UNARY_OP: {\r\n                const result = this.evaluateAst(ast.value, state);\r\n                return this.unaryRangeWrapper(this.unaryPlusOp, result, state);\r\n            }\r\n            case AstNodeType.MINUS_UNARY_OP: {\r\n                const result = this.evaluateAst(ast.value, state);\r\n                return this.unaryRangeWrapper(this.unaryMinusOp, result, state);\r\n            }\r\n            case AstNodeType.PERCENT_OP: {\r\n                const result = this.evaluateAst(ast.value, state);\r\n                return this.unaryRangeWrapper(this.percentOp, result, state);\r\n            }\r\n            case AstNodeType.FUNCTION_CALL: {\r\n                if (this.config.licenseKeyValidityState !== \"valid\" /* VALID */ && !FunctionRegistry.functionIsProtected(ast.procedureName)) {\r\n                    return new CellError(ErrorType.LIC, ErrorMessage.LicenseKey(this.config.licenseKeyValidityState));\r\n                }\r\n                const pluginFunction = this.functionRegistry.getFunction(ast.procedureName);\r\n                if (pluginFunction !== undefined) {\r\n                    return pluginFunction(ast, new InterpreterState(state.formulaAddress, state.arraysFlag || this.functionRegistry.isArrayFunction(ast.procedureName), state.formulaVertex));\r\n                }\r\n                else {\r\n                    return new CellError(ErrorType.NAME, ErrorMessage.FunctionName(ast.procedureName));\r\n                }\r\n            }\r\n            case AstNodeType.NAMED_EXPRESSION: {\r\n                const namedExpression = this.namedExpressions.nearestNamedExpression(ast.expressionName, state.formulaAddress.sheet);\r\n                if (namedExpression) {\r\n                    return this.dependencyGraph.getCellValue(namedExpression.address);\r\n                }\r\n                else {\r\n                    return new CellError(ErrorType.NAME, ErrorMessage.NamedExpressionName(ast.expressionName));\r\n                }\r\n            }\r\n            case AstNodeType.CELL_RANGE: {\r\n                if (!this.rangeSpansOneSheet(ast)) {\r\n                    return new CellError(ErrorType.REF, ErrorMessage.RangeManySheets);\r\n                }\r\n                const range = AbsoluteCellRange.fromCellRange(ast, state.formulaAddress);\r\n                const arrayVertex = this.dependencyGraph.getArray(range);\r\n                if (arrayVertex) {\r\n                    const array = arrayVertex.array;\r\n                    if (array instanceof NotComputedArray) {\r\n                        throw new Error('Array should be already computed');\r\n                    }\r\n                    else if (array instanceof CellError) {\r\n                        return array;\r\n                    }\r\n                    else if (array instanceof ArrayValue) {\r\n                        return SimpleRangeValue.fromRange(array.raw(), range, this.dependencyGraph);\r\n                    }\r\n                    else {\r\n                        throw new Error('Unknown array');\r\n                    }\r\n                }\r\n                else {\r\n                    return SimpleRangeValue.onlyRange(range, this.dependencyGraph);\r\n                }\r\n            }\r\n            case AstNodeType.COLUMN_RANGE: {\r\n                if (!this.rangeSpansOneSheet(ast)) {\r\n                    return new CellError(ErrorType.REF, ErrorMessage.RangeManySheets);\r\n                }\r\n                const range = AbsoluteColumnRange.fromColumnRange(ast, state.formulaAddress);\r\n                return SimpleRangeValue.onlyRange(range, this.dependencyGraph);\r\n            }\r\n            case AstNodeType.ROW_RANGE: {\r\n                if (!this.rangeSpansOneSheet(ast)) {\r\n                    return new CellError(ErrorType.REF, ErrorMessage.RangeManySheets);\r\n                }\r\n                const range = AbsoluteRowRange.fromRowRangeAst(ast, state.formulaAddress);\r\n                return SimpleRangeValue.onlyRange(range, this.dependencyGraph);\r\n            }\r\n            case AstNodeType.PARENTHESIS: {\r\n                return this.evaluateAst(ast.expression, state);\r\n            }\r\n            case AstNodeType.ARRAY: {\r\n                let totalWidth = undefined;\r\n                const ret = [];\r\n                for (const astRow of ast.args) {\r\n                    let rowHeight = undefined;\r\n                    const rowRet = [];\r\n                    for (const astIt of astRow) {\r\n                        const arr = coerceToRange(this.evaluateAst(astIt, state));\r\n                        const height = arr.height();\r\n                        if (rowHeight === undefined) {\r\n                            rowHeight = height;\r\n                            rowRet.push(...arr.data);\r\n                        }\r\n                        else if (rowHeight === height) {\r\n                            for (let i = 0; i < height; i++) {\r\n                                rowRet[i].push(...arr.data[i]);\r\n                            }\r\n                        }\r\n                        else {\r\n                            return new CellError(ErrorType.REF, ErrorMessage.SizeMismatch);\r\n                        }\r\n                    }\r\n                    const width = rowRet[0].length;\r\n                    if (totalWidth === undefined) {\r\n                        totalWidth = width;\r\n                        ret.push(...rowRet);\r\n                    }\r\n                    else if (totalWidth === width) {\r\n                        ret.push(...rowRet);\r\n                    }\r\n                    else {\r\n                        return new CellError(ErrorType.REF, ErrorMessage.SizeMismatch);\r\n                    }\r\n                }\r\n                return SimpleRangeValue.onlyValues(ret);\r\n            }\r\n            case AstNodeType.ERROR_WITH_RAW_INPUT:\r\n            case AstNodeType.ERROR: {\r\n                return ast.error;\r\n            }\r\n        }\r\n    }\r\n    rangeSpansOneSheet(ast) {\r\n        return ast.start.sheet === ast.end.sheet;\r\n    }\r\n    unaryRangeWrapper(op, arg, state) {\r\n        var _a;\r\n        if (arg instanceof SimpleRangeValue && !state.arraysFlag) {\r\n            arg = (_a = coerceRangeToScalar(arg, state)) !== null && _a !== void 0 ? _a : new CellError(ErrorType.VALUE, ErrorMessage.ScalarExpected);\r\n        }\r\n        if (arg instanceof CellError) {\r\n            return arg;\r\n        }\r\n        if (arg instanceof SimpleRangeValue) {\r\n            const newRaw = arg.data.map((row) => row.map(op));\r\n            return SimpleRangeValue.onlyValues(newRaw);\r\n        }\r\n        return op(arg);\r\n    }\r\n    binaryRangeWrapper(op, arg1, arg2, state) {\r\n        var _a, _b;\r\n        if (arg1 instanceof SimpleRangeValue && !state.arraysFlag) {\r\n            arg1 = (_a = coerceRangeToScalar(arg1, state)) !== null && _a !== void 0 ? _a : new CellError(ErrorType.VALUE, ErrorMessage.ScalarExpected);\r\n        }\r\n        if (arg1 instanceof CellError) {\r\n            return arg1;\r\n        }\r\n        if (arg2 instanceof SimpleRangeValue && !state.arraysFlag) {\r\n            arg2 = (_b = coerceRangeToScalar(arg2, state)) !== null && _b !== void 0 ? _b : new CellError(ErrorType.VALUE, ErrorMessage.ScalarExpected);\r\n        }\r\n        if (arg2 instanceof CellError) {\r\n            return arg2;\r\n        }\r\n        if (arg1 instanceof SimpleRangeValue || arg2 instanceof SimpleRangeValue) {\r\n            if (!(arg1 instanceof SimpleRangeValue)) {\r\n                if (arg2.isAdHoc()) {\r\n                    const raw2 = arg2.data;\r\n                    for (let i = 0; i < raw2.length; i++) {\r\n                        for (let j = 0; j < raw2[0].length; j++) {\r\n                            raw2[i][j] = op(arg1, raw2[i][j]);\r\n                        }\r\n                    }\r\n                    return SimpleRangeValue.onlyValues(raw2);\r\n                }\r\n                else {\r\n                    arg1 = SimpleRangeValue.fromScalar(arg1);\r\n                }\r\n            }\r\n            if (!(arg2 instanceof SimpleRangeValue)) {\r\n                if (arg1.isAdHoc()) {\r\n                    const raw1 = arg1.data;\r\n                    for (let i = 0; i < raw1.length; i++) {\r\n                        for (let j = 0; j < raw1[0].length; j++) {\r\n                            raw1[i][j] = op(raw1[i][j], arg2);\r\n                        }\r\n                    }\r\n                    return SimpleRangeValue.onlyValues(raw1);\r\n                }\r\n                else {\r\n                    arg2 = SimpleRangeValue.fromScalar(arg2);\r\n                }\r\n            }\r\n            if (arg1.width() === arg2.width() && arg1.height() === arg2.height()) {\r\n                if (arg1.isAdHoc()) {\r\n                    const raw1 = arg1.data;\r\n                    const raw2 = arg2.data;\r\n                    for (let i = 0; i < raw1.length; i++) {\r\n                        for (let j = 0; j < raw1[0].length; j++) {\r\n                            raw1[i][j] = op(raw1[i][j], raw2[i][j]);\r\n                        }\r\n                    }\r\n                    return SimpleRangeValue.onlyValues(raw1);\r\n                }\r\n                if (arg2.isAdHoc()) {\r\n                    const raw1 = arg1.data;\r\n                    const raw2 = arg2.data;\r\n                    for (let i = 0; i < raw1.length; i++) {\r\n                        for (let j = 0; j < raw1[0].length; j++) {\r\n                            raw2[i][j] = op(raw1[i][j], raw2[i][j]);\r\n                        }\r\n                    }\r\n                    return SimpleRangeValue.onlyValues(raw2);\r\n                }\r\n            }\r\n            const width = Math.max(arg1.width(), arg2.width());\r\n            const height = Math.max(arg1.height(), arg2.height());\r\n            const ret = Array(height);\r\n            for (let i = 0; i < height; i++) {\r\n                ret[i] = Array(width);\r\n            }\r\n            for (let i = 0; i < height; i++) {\r\n                const i1 = (arg1.height() !== 1) ? i : 0;\r\n                const i2 = (arg2.height() !== 1) ? i : 0;\r\n                for (let j = 0; j < width; j++) {\r\n                    const j1 = (arg1.width() !== 1) ? j : 0;\r\n                    const j2 = (arg2.width() !== 1) ? j : 0;\r\n                    if (i1 < arg1.height() && i2 < arg2.height() && j1 < arg1.width() && j2 < arg2.width()) {\r\n                        ret[i][j] = op(arg1.data[i1][j1], arg2.data[i2][j2]);\r\n                    }\r\n                    else {\r\n                        ret[i][j] = new CellError(ErrorType.NA);\r\n                    }\r\n                }\r\n            }\r\n            return SimpleRangeValue.onlyValues(ret);\r\n        }\r\n        return op(arg1, arg2);\r\n    }\r\n}\r\nfunction unaryErrorWrapper(op, arg) {\r\n    if (arg instanceof CellError) {\r\n        return arg;\r\n    }\r\n    else {\r\n        return op(arg);\r\n    }\r\n}\r\nfunction binaryErrorWrapper(op, arg1, arg2) {\r\n    if (arg1 instanceof CellError) {\r\n        return arg1;\r\n    }\r\n    else if (arg2 instanceof CellError) {\r\n        return arg2;\r\n    }\r\n    else {\r\n        return op(arg1, arg2);\r\n    }\r\n}\r\nfunction wrapperForRootVertex(val, vertex) {\r\n    if (val instanceof CellError && vertex !== undefined) {\r\n        return val.attachRootVertex(vertex);\r\n    }\r\n    return val;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { EmptyValue, getRawValue } from './InterpreterValue';\r\nexport var CriterionType;\r\n(function (CriterionType) {\r\n    CriterionType[\"GREATER_THAN\"] = \"GREATER_THAN\";\r\n    CriterionType[\"GREATER_THAN_OR_EQUAL\"] = \"GREATER_THAN_OR_EQUAL\";\r\n    CriterionType[\"LESS_THAN\"] = \"LESS_THAN\";\r\n    CriterionType[\"LESS_THAN_OR_EQUAL\"] = \"LESS_THAN_OR_EQUAL\";\r\n    CriterionType[\"NOT_EQUAL\"] = \"NOT_EQUAL\";\r\n    CriterionType[\"EQUAL\"] = \"EQUAL\";\r\n})(CriterionType || (CriterionType = {}));\r\nexport const buildCriterion = (operator, value) => ({ operator, value });\r\nexport class CriterionBuilder {\r\n    constructor(config) {\r\n        var _a, _b, _c, _d;\r\n        this.trueString = (_b = (_a = config.translationPackage.getMaybeFunctionTranslation('TRUE')) === null || _a === void 0 ? void 0 : _a.toLowerCase()) !== null && _b !== void 0 ? _b : 'true';\r\n        this.falseString = (_d = (_c = config.translationPackage.getMaybeFunctionTranslation('FALSE')) === null || _c === void 0 ? void 0 : _c.toLowerCase()) !== null && _d !== void 0 ? _d : 'false';\r\n    }\r\n    fromCellValue(raw, arithmeticHelper) {\r\n        if (typeof raw !== 'string' && typeof raw !== 'boolean' && typeof raw !== 'number') {\r\n            return undefined;\r\n        }\r\n        const criterion = this.parseCriterion(raw, arithmeticHelper);\r\n        if (criterion === undefined) {\r\n            return undefined;\r\n        }\r\n        return { raw, lambda: buildCriterionLambda(criterion, arithmeticHelper) };\r\n    }\r\n    parseCriterion(criterion, arithmeticHelper) {\r\n        if (typeof criterion === 'number' || typeof criterion === 'boolean') {\r\n            return buildCriterion(CriterionType.EQUAL, criterion);\r\n        }\r\n        else if (typeof criterion === 'string') {\r\n            const regexResult = ANY_CRITERION_REGEX.exec(criterion);\r\n            let criterionValue;\r\n            let criterionType;\r\n            if (regexResult) {\r\n                criterionType = StrToCriterionType(regexResult[1]);\r\n                criterionValue = regexResult[2];\r\n            }\r\n            else {\r\n                criterionType = CriterionType.EQUAL;\r\n                criterionValue = criterion;\r\n            }\r\n            const value = arithmeticHelper.coerceToMaybeNumber(criterionValue);\r\n            const boolvalue = criterionValue.toLowerCase() === this.trueString ? true : criterionValue.toLowerCase() === this.falseString ? false : undefined;\r\n            if (criterionType === undefined) {\r\n                return undefined;\r\n            }\r\n            if (criterionValue === '') {\r\n                return buildCriterion(criterionType, null);\r\n            }\r\n            else if (value === undefined) {\r\n                if (criterionType === CriterionType.EQUAL || criterionType === CriterionType.NOT_EQUAL) {\r\n                    return buildCriterion(criterionType, boolvalue !== null && boolvalue !== void 0 ? boolvalue : criterionValue);\r\n                }\r\n            }\r\n            else {\r\n                return buildCriterion(criterionType, getRawValue(value));\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\nconst ANY_CRITERION_REGEX = /([<>=]+)(.*)/;\r\nfunction StrToCriterionType(str) {\r\n    switch (str) {\r\n        case '>':\r\n            return CriterionType.GREATER_THAN;\r\n        case '>=':\r\n            return CriterionType.GREATER_THAN_OR_EQUAL;\r\n        case '<':\r\n            return CriterionType.LESS_THAN;\r\n        case '<=':\r\n            return CriterionType.LESS_THAN_OR_EQUAL;\r\n        case '<>':\r\n            return CriterionType.NOT_EQUAL;\r\n        case '=':\r\n            return CriterionType.EQUAL;\r\n        default:\r\n            return undefined;\r\n    }\r\n}\r\nexport const buildCriterionLambda = (criterion, arithmeticHelper) => {\r\n    switch (criterion.operator) {\r\n        case CriterionType.GREATER_THAN: {\r\n            if (typeof criterion.value === 'number') {\r\n                return (cellValue) => (typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) > 0);\r\n            }\r\n            else {\r\n                return (_cellValue) => false;\r\n            }\r\n        }\r\n        case CriterionType.GREATER_THAN_OR_EQUAL: {\r\n            if (typeof criterion.value === 'number') {\r\n                return (cellValue) => (typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) >= 0);\r\n            }\r\n            else {\r\n                return (_cellValue) => false;\r\n            }\r\n        }\r\n        case CriterionType.LESS_THAN: {\r\n            if (typeof criterion.value === 'number') {\r\n                return (cellValue) => (typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) < 0);\r\n            }\r\n            else {\r\n                return (_cellValue) => false;\r\n            }\r\n        }\r\n        case CriterionType.LESS_THAN_OR_EQUAL: {\r\n            if (typeof criterion.value === 'number') {\r\n                return (cellValue) => (typeof cellValue === 'number' && arithmeticHelper.floatCmp(cellValue, criterion.value) <= 0);\r\n            }\r\n            else {\r\n                return (_cellValue) => false;\r\n            }\r\n        }\r\n        case CriterionType.EQUAL: {\r\n            if (typeof criterion.value === 'number') {\r\n                return (cellValue) => {\r\n                    if (typeof cellValue === 'number') {\r\n                        return arithmeticHelper.floatCmp(cellValue, criterion.value) === 0;\r\n                    }\r\n                    else if (typeof cellValue === 'string') {\r\n                        if (cellValue === '') {\r\n                            return false;\r\n                        }\r\n                        const val = arithmeticHelper.coerceToMaybeNumber(cellValue);\r\n                        if (val === undefined) {\r\n                            return false;\r\n                        }\r\n                        return arithmeticHelper.floatCmp(val, criterion.value) === 0;\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                };\r\n            }\r\n            else if (typeof criterion.value === 'string') {\r\n                return arithmeticHelper.eqMatcherFunction(criterion.value);\r\n            }\r\n            else if (typeof criterion.value === 'boolean') {\r\n                return (cellValue) => (typeof cellValue === 'boolean' && cellValue === criterion.value);\r\n            }\r\n            else {\r\n                return (cellValue) => (cellValue === EmptyValue);\r\n            }\r\n        }\r\n        case CriterionType.NOT_EQUAL: {\r\n            if (typeof criterion.value === 'number') {\r\n                return (cellValue) => {\r\n                    if (typeof cellValue === 'number') {\r\n                        return arithmeticHelper.floatCmp(cellValue, criterion.value) !== 0;\r\n                    }\r\n                    else if (typeof cellValue === 'string') {\r\n                        if (cellValue === '') {\r\n                            return true;\r\n                        }\r\n                        const val = arithmeticHelper.coerceToMaybeNumber(cellValue);\r\n                        if (val === undefined) {\r\n                            return true;\r\n                        }\r\n                        return arithmeticHelper.floatCmp(val, criterion.value) !== 0;\r\n                    }\r\n                    else {\r\n                        return true;\r\n                    }\r\n                };\r\n            }\r\n            else if (typeof criterion.value === 'string') {\r\n                return arithmeticHelper.neqMatcherFunction(criterion.value);\r\n            }\r\n            else if (typeof criterion.value === 'boolean') {\r\n                return (cellValue) => (typeof cellValue !== 'boolean' || cellValue !== criterion.value);\r\n            }\r\n            else {\r\n                return (cellValue) => (cellValue !== EmptyValue);\r\n            }\r\n        }\r\n    }\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CombinedTransformer } from './dependencyTransformers/CombinedTransformer';\r\nimport { StatType } from './statistics';\r\nexport class LazilyTransformingAstService {\r\n    constructor(stats) {\r\n        this.stats = stats;\r\n        this.transformations = [];\r\n    }\r\n    version() {\r\n        return this.transformations.length;\r\n    }\r\n    addTransformation(transformation) {\r\n        if (this.combinedTransformer !== undefined) {\r\n            this.combinedTransformer.add(transformation);\r\n        }\r\n        else {\r\n            this.transformations.push(transformation);\r\n        }\r\n        return this.version();\r\n    }\r\n    beginCombinedMode(sheet) {\r\n        this.combinedTransformer = new CombinedTransformer(sheet);\r\n    }\r\n    commitCombinedMode() {\r\n        if (this.combinedTransformer === undefined) {\r\n            throw Error('Combined mode wasn\\'t started');\r\n        }\r\n        this.transformations.push(this.combinedTransformer);\r\n        this.combinedTransformer = undefined;\r\n        return this.version();\r\n    }\r\n    applyTransformations(ast, address, version) {\r\n        this.stats.start(StatType.TRANSFORM_ASTS_POSTPONED);\r\n        for (let v = version; v < this.transformations.length; v++) {\r\n            const transformation = this.transformations[v];\r\n            if (transformation.isIrreversible()) {\r\n                this.undoRedo.storeDataForVersion(v, address, this.parser.computeHashFromAst(ast));\r\n                this.parser.rememberNewAst(ast);\r\n            }\r\n            const [newAst, newAddress] = transformation.transformSingleAst(ast, address);\r\n            ast = newAst;\r\n            address = newAddress;\r\n        }\r\n        const cachedAst = this.parser.rememberNewAst(ast);\r\n        this.stats.end(StatType.TRANSFORM_ASTS_POSTPONED);\r\n        return [cachedAst, address, this.transformations.length];\r\n    }\r\n    *getTransformationsFrom(version, filter) {\r\n        for (let v = version; v < this.transformations.length; v++) {\r\n            const transformation = this.transformations[v];\r\n            if (!filter || filter(transformation)) {\r\n                yield transformation;\r\n            }\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport class CombinedTransformer {\r\n    constructor(sheet) {\r\n        this.sheet = sheet;\r\n        this.transformations = [];\r\n    }\r\n    add(transformation) {\r\n        this.transformations.push(transformation);\r\n    }\r\n    performEagerTransformations(graph, parser) {\r\n        this.transformations.forEach(transformation => transformation.performEagerTransformations(graph, parser));\r\n    }\r\n    transformSingleAst(ast, address) {\r\n        let [transformedAst, transformedAddress] = [ast, address];\r\n        this.transformations.forEach(transformation => {\r\n            [transformedAst, transformedAddress] = transformation.transformSingleAst(transformedAst, transformedAddress);\r\n        });\r\n        return [transformedAst, transformedAddress];\r\n    }\r\n    isIrreversible() {\r\n        return true;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ColumnBinarySearch } from './ColumnBinarySearch';\r\nimport { ColumnIndex } from './ColumnIndex';\r\nexport function buildColumnSearchStrategy(dependencyGraph, config, statistics) {\r\n    if (config.useColumnIndex) {\r\n        return new ColumnIndex(dependencyGraph, config, statistics);\r\n    }\r\n    else {\r\n        return new ColumnBinarySearch(dependencyGraph);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AdvancedFind } from './AdvancedFind';\r\nexport class ColumnBinarySearch extends AdvancedFind {\r\n    constructor(dependencyGraph) {\r\n        super(dependencyGraph);\r\n        this.dependencyGraph = dependencyGraph;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars \r\n    add(value, address) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    remove(value, address) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    change(oldValue, newValue, address) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    applyChanges(contentChanges) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    addColumns(columnsSpan) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    removeColumns(columnsSpan) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    removeSheet(sheetId) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    moveValues(sourceRange, toRight, toBottom, toSheet) {\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    removeValues(range) {\r\n    }\r\n    /*\r\n     * WARNING: Finding lower/upper bounds in unordered ranges is not supported. When ordering === 'none', assumes matchExactly === true\r\n     */\r\n    find(searchKey, rangeValue, searchOptions) {\r\n        return this.basicFind(searchKey, rangeValue, 'row', searchOptions);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { getRawValue } from '../interpreter/InterpreterValue';\r\nimport { forceNormalizeString } from '../interpreter/ArithmeticHelper';\r\nimport { findLastOccurrenceInOrderedRange } from '../interpreter/binarySearch';\r\nexport class AdvancedFind {\r\n    constructor(dependencyGraph) {\r\n        this.dependencyGraph = dependencyGraph;\r\n    }\r\n    advancedFind(keyMatcher, rangeValue) {\r\n        let values;\r\n        const range = rangeValue.range;\r\n        if (range === undefined) {\r\n            values = rangeValue.valuesFromTopLeftCorner();\r\n        }\r\n        else {\r\n            values = this.dependencyGraph.computeListOfValuesInRange(range);\r\n        }\r\n        for (let i = 0; i < values.length; i++) {\r\n            if (keyMatcher(getRawValue(values[i]))) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    /*\r\n     * WARNING: Finding lower/upper bounds in unordered ranges is not supported. When ordering === 'none', assumes matchExactly === true\r\n     */\r\n    basicFind(searchKey, rangeValue, searchCoordinate, { ordering, matchExactly }) {\r\n        const normalizedSearchKey = typeof searchKey === 'string' ? forceNormalizeString(searchKey) : searchKey;\r\n        const range = rangeValue.range;\r\n        if (range === undefined) {\r\n            return this.findNormalizedValue(normalizedSearchKey, rangeValue.valuesFromTopLeftCorner());\r\n        }\r\n        if (ordering === 'none') {\r\n            return this.findNormalizedValue(normalizedSearchKey, this.dependencyGraph.computeListOfValuesInRange(range));\r\n        }\r\n        return findLastOccurrenceInOrderedRange(normalizedSearchKey, range, { searchCoordinate, orderingDirection: ordering, matchExactly }, this.dependencyGraph);\r\n    }\r\n    findNormalizedValue(searchKey, searchArray) {\r\n        return searchArray\r\n            .map(getRawValue)\r\n            .map(val => typeof val === 'string' ? forceNormalizeString(val) : val)\r\n            .indexOf(searchKey);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, simpleCellAddress } from '../Cell';\r\nimport { EmptyValue, getRawValue } from './InterpreterValue';\r\nconst NOT_FOUND = -1;\r\n/*\r\n * Searches for the searchKey in a sorted 1-D range.\r\n *\r\n * Options:\r\n * - searchCoordinate - must be set to either 'row' or 'col' to indicate the dimension of the search,\r\n * - orderingDirection - must be set to either 'asc' or 'desc' to indicate the ordering direction for the search range,\r\n * - matchExactly - when set to false, searches for the lower/upper bound.\r\n *\r\n * Semantics:\r\n * - If orderingDirection === 'asc', searches for the lower bound for the searchKey value (unless marchExactly === true).\r\n * - If orderingDirection === 'desc', searches for the upper bound for the searchKey value (unless marchExactly === true).\r\n * - If the search range contains duplicates, returns the last matching value.\r\n * - If no value in the range satisfies the above, returns -1.\r\n *\r\n * Note: this function does not normalize input strings.\r\n */\r\nexport function findLastOccurrenceInOrderedRange(searchKey, range, { searchCoordinate, orderingDirection, matchExactly }, dependencyGraph) {\r\n    const start = range.start[searchCoordinate];\r\n    const end = searchCoordinate === 'col' ? range.effectiveEndColumn(dependencyGraph) : range.effectiveEndRow(dependencyGraph);\r\n    const getValueFromIndexFn = searchCoordinate === 'col'\r\n        ? (index) => getRawValue(dependencyGraph.getCellValue(simpleCellAddress(range.sheet, index, range.start.row)))\r\n        : (index) => getRawValue(dependencyGraph.getCellValue(simpleCellAddress(range.sheet, range.start.col, index)));\r\n    const compareFn = orderingDirection === 'asc'\r\n        ? (left, right) => compare(left, right)\r\n        : (left, right) => -compare(left, right);\r\n    const foundIndex = findLastMatchingIndex(index => compareFn(searchKey, getValueFromIndexFn(index)) >= 0, start, end);\r\n    const foundValue = getValueFromIndexFn(foundIndex);\r\n    if (foundIndex === NOT_FOUND || typeof foundValue !== typeof searchKey) {\r\n        return NOT_FOUND;\r\n    }\r\n    if (matchExactly && foundValue !== searchKey) {\r\n        return NOT_FOUND;\r\n    }\r\n    return foundIndex - start;\r\n}\r\n/*\r\n * Searches for the searchKey in a sorted array.\r\n * Param orderingDirection must be set to either 'asc' or 'desc' to indicate the ordering direction of the array.\r\n *\r\n * Semantics:\r\n * - If orderingDirection === 'asc', searches for the lower bound for the searchKey value.\r\n * - If orderingDirection === 'desc', searches for the upper bound for the searchKey value.\r\n * - If the array contains duplicates, returns the last matching value.\r\n * - If no value in the range satisfies the above, returns -1.\r\n */\r\nexport function findLastOccurrenceInOrderedArray(searchKey, array, orderingDirection = 'asc') {\r\n    const predicate = orderingDirection === 'asc'\r\n        ? (index) => compare(searchKey, array[index]) >= 0\r\n        : (index) => -compare(searchKey, array[index]) >= 0;\r\n    return findLastMatchingIndex(predicate, 0, array.length - 1);\r\n}\r\n/*\r\n * Returns:\r\n *   - the last element in the range for which predicate === true or,\r\n *   - value -1 if predicate === false for all elements.\r\n * Assumption: All elements for which predicate === true are before the elements for which predicate === false.\r\n */\r\nexport function findLastMatchingIndex(predicate, startRange, endRange) {\r\n    let start = startRange;\r\n    let end = endRange;\r\n    while (start < end) {\r\n        const pivot = Math.ceil((start + end) / 2);\r\n        if (predicate(pivot)) {\r\n            start = pivot;\r\n        }\r\n        else {\r\n            end = pivot - 1;\r\n        }\r\n    }\r\n    if (start === end && predicate(start)) {\r\n        return start;\r\n    }\r\n    return NOT_FOUND;\r\n}\r\n/*\r\n * numbers < strings < false < true\r\n */\r\nexport function compare(left, right) {\r\n    if (typeof left === typeof right) {\r\n        if (left === EmptyValue) {\r\n            return 0;\r\n        }\r\n        return (left < right ? -1 : (left > right ? 1 : 0));\r\n    }\r\n    if (left === EmptyValue) {\r\n        return -1;\r\n    }\r\n    if (right === EmptyValue) {\r\n        return 1;\r\n    }\r\n    if (right instanceof CellError) {\r\n        return -1;\r\n    }\r\n    if (typeof left === 'number' && typeof right === 'string') {\r\n        return -1;\r\n    }\r\n    if (typeof left === 'number' && typeof right === 'boolean') {\r\n        return -1;\r\n    }\r\n    if (typeof left === 'string' && typeof right === 'number') {\r\n        return 1;\r\n    }\r\n    if (typeof left === 'string' && typeof right === 'boolean') {\r\n        return -1;\r\n    }\r\n    return 1;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, movedSimpleCellAddress } from '../Cell';\r\nimport { AddRowsTransformer } from '../dependencyTransformers/AddRowsTransformer';\r\nimport { RemoveRowsTransformer } from '../dependencyTransformers/RemoveRowsTransformer';\r\nimport { forceNormalizeString } from '../interpreter/ArithmeticHelper';\r\nimport { EmptyValue, getRawValue } from '../interpreter/InterpreterValue';\r\nimport { SimpleRangeValue } from '../SimpleRangeValue';\r\nimport { StatType } from '../statistics';\r\nimport { ColumnBinarySearch } from './ColumnBinarySearch';\r\nexport class ColumnIndex {\r\n    constructor(dependencyGraph, config, stats) {\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.config = config;\r\n        this.stats = stats;\r\n        this.index = new Map();\r\n        this.transformingService = this.dependencyGraph.lazilyTransformingAstService;\r\n        this.binarySearchStrategy = new ColumnBinarySearch(dependencyGraph);\r\n    }\r\n    add(value, address) {\r\n        if (value === EmptyValue || value instanceof CellError) {\r\n            return;\r\n        }\r\n        else if (value instanceof SimpleRangeValue) {\r\n            for (const [arrayValue, cellAddress] of value.entriesFromTopLeftCorner(address)) {\r\n                this.addSingleCellValue(getRawValue(arrayValue), cellAddress);\r\n            }\r\n        }\r\n        else {\r\n            this.addSingleCellValue(value, address);\r\n        }\r\n    }\r\n    remove(value, address) {\r\n        if (value === undefined) {\r\n            return;\r\n        }\r\n        if (value instanceof SimpleRangeValue) {\r\n            for (const [arrayValue, cellAddress] of value.entriesFromTopLeftCorner(address)) {\r\n                this.removeSingleValue(getRawValue(arrayValue), cellAddress);\r\n            }\r\n        }\r\n        else {\r\n            this.removeSingleValue(value, address);\r\n        }\r\n    }\r\n    change(oldValue, newValue, address) {\r\n        if (oldValue === newValue) {\r\n            return;\r\n        }\r\n        this.remove(oldValue, address);\r\n        this.add(newValue, address);\r\n    }\r\n    applyChanges(contentChanges) {\r\n        for (const change of contentChanges) {\r\n            if (change.oldValue !== undefined) {\r\n                this.change(getRawValue(change.oldValue), getRawValue(change.value), change.address);\r\n            }\r\n        }\r\n    }\r\n    moveValues(sourceRange, toRight, toBottom, toSheet) {\r\n        for (const [value, address] of sourceRange) {\r\n            const targetAddress = movedSimpleCellAddress(address, toSheet, toRight, toBottom);\r\n            this.remove(value, address);\r\n            this.add(value, targetAddress);\r\n        }\r\n    }\r\n    removeValues(range) {\r\n        for (const [value, address] of range) {\r\n            this.remove(value, address);\r\n        }\r\n    }\r\n    /*\r\n     * WARNING: Finding lower/upper bounds in unordered ranges is not supported. When ordering === 'none', assumes matchExactly === true\r\n     */\r\n    find(searchKey, rangeValue, { ordering, matchExactly }) {\r\n        const handlingDuplicates = matchExactly === true ? 'findFirst' : 'findLast';\r\n        const resultUsingColumnIndex = this.findUsingColumnIndex(searchKey, rangeValue, handlingDuplicates);\r\n        return resultUsingColumnIndex !== undefined ? resultUsingColumnIndex : this.binarySearchStrategy.find(searchKey, rangeValue, { ordering, matchExactly });\r\n    }\r\n    findUsingColumnIndex(key, rangeValue, handlingDuplicates) {\r\n        const range = rangeValue.range;\r\n        if (range === undefined) {\r\n            return undefined;\r\n        }\r\n        this.ensureRecentData(range.sheet, range.start.col, key);\r\n        const columnMap = this.getColumnMap(range.sheet, range.start.col);\r\n        if (!columnMap) {\r\n            return -1;\r\n        }\r\n        const normalizedKey = typeof key === 'string' ? forceNormalizeString(key) : key;\r\n        const valueIndexForTheKey = columnMap.get(normalizedKey);\r\n        if (!valueIndexForTheKey || !valueIndexForTheKey.index || valueIndexForTheKey.index.length === 0) {\r\n            return undefined;\r\n        }\r\n        const rowNumber = ColumnIndex.findRowBelongingToRange(valueIndexForTheKey, range, handlingDuplicates);\r\n        return rowNumber !== undefined ? rowNumber - range.start.row : undefined;\r\n    }\r\n    static findRowBelongingToRange(valueIndex, range, handlingDuplicates) {\r\n        const start = range.start.row;\r\n        const end = range.end.row;\r\n        const positionInIndex = handlingDuplicates === 'findFirst'\r\n            ? findInOrderedArray(start, valueIndex.index, 'upperBound')\r\n            : findInOrderedArray(end, valueIndex.index, 'lowerBound');\r\n        if (positionInIndex === -1) {\r\n            return undefined;\r\n        }\r\n        const rowNumber = valueIndex.index[positionInIndex];\r\n        const isRowNumberBelongingToRange = rowNumber >= start && rowNumber <= end;\r\n        return isRowNumberBelongingToRange ? rowNumber : undefined;\r\n    }\r\n    advancedFind(keyMatcher, range) {\r\n        return this.binarySearchStrategy.advancedFind(keyMatcher, range);\r\n    }\r\n    addColumns(columnsSpan) {\r\n        const sheetIndex = this.index.get(columnsSpan.sheet);\r\n        if (!sheetIndex) {\r\n            return;\r\n        }\r\n        sheetIndex.splice(columnsSpan.columnStart, 0, ...Array(columnsSpan.numberOfColumns));\r\n    }\r\n    removeColumns(columnsSpan) {\r\n        const sheetIndex = this.index.get(columnsSpan.sheet);\r\n        if (!sheetIndex) {\r\n            return;\r\n        }\r\n        sheetIndex.splice(columnsSpan.columnStart, columnsSpan.numberOfColumns);\r\n    }\r\n    removeSheet(sheetId) {\r\n        this.index.delete(sheetId);\r\n    }\r\n    getColumnMap(sheet, col) {\r\n        if (!this.index.has(sheet)) {\r\n            this.index.set(sheet, []);\r\n        }\r\n        const sheetMap = this.index.get(sheet); // eslint-disable-line @typescript-eslint/no-non-null-assertion\r\n        let columnMap = sheetMap[col];\r\n        if (!columnMap) {\r\n            columnMap = new Map();\r\n            sheetMap[col] = columnMap;\r\n        }\r\n        return columnMap;\r\n    }\r\n    getValueIndex(sheet, col, value) {\r\n        const columnMap = this.getColumnMap(sheet, col);\r\n        let index = this.getColumnMap(sheet, col).get(value);\r\n        if (!index) {\r\n            index = {\r\n                version: this.transformingService.version(),\r\n                index: [],\r\n            };\r\n            columnMap.set(value, index);\r\n        }\r\n        return index;\r\n    }\r\n    ensureRecentData(sheet, col, value) {\r\n        const valueIndex = this.getValueIndex(sheet, col, value);\r\n        const actualVersion = this.transformingService.version();\r\n        if (valueIndex.version === actualVersion) {\r\n            return;\r\n        }\r\n        const relevantTransformations = this.transformingService.getTransformationsFrom(valueIndex.version, (transformation) => {\r\n            return transformation.sheet === sheet && (transformation instanceof AddRowsTransformer || transformation instanceof RemoveRowsTransformer);\r\n        });\r\n        for (const transformation of relevantTransformations) {\r\n            if (transformation instanceof AddRowsTransformer) {\r\n                this.addRows(col, transformation.rowsSpan, value);\r\n            }\r\n            else if (transformation instanceof RemoveRowsTransformer) {\r\n                this.removeRows(col, transformation.rowsSpan, value);\r\n            }\r\n        }\r\n        valueIndex.version = actualVersion;\r\n    }\r\n    addSingleCellValue(value, address) {\r\n        this.stats.measure(StatType.BUILD_COLUMN_INDEX, () => {\r\n            this.ensureRecentData(address.sheet, address.col, value);\r\n            if (typeof value === 'string') {\r\n                value = forceNormalizeString(value);\r\n            }\r\n            const valueIndex = this.getValueIndex(address.sheet, address.col, value);\r\n            ColumnIndex.addValue(valueIndex, address.row);\r\n        });\r\n    }\r\n    removeSingleValue(value, address) {\r\n        this.stats.measure(StatType.BUILD_COLUMN_INDEX, () => {\r\n            this.ensureRecentData(address.sheet, address.col, value);\r\n            const columnMap = this.getColumnMap(address.sheet, address.col);\r\n            if (typeof value === 'string') {\r\n                value = forceNormalizeString(value);\r\n            }\r\n            const valueIndex = columnMap.get(value);\r\n            if (!valueIndex) {\r\n                return;\r\n            }\r\n            const positionInIndex = findInOrderedArray(address.row, valueIndex.index);\r\n            if (positionInIndex > -1) {\r\n                valueIndex.index.splice(positionInIndex, 1);\r\n            }\r\n            if (valueIndex.index.length === 0) {\r\n                columnMap.delete(value);\r\n            }\r\n            if (columnMap.size === 0) {\r\n                delete this.index.get(address.sheet)[address.col]; // eslint-disable-line @typescript-eslint/no-non-null-assertion\r\n            }\r\n        });\r\n    }\r\n    addRows(col, rowsSpan, value) {\r\n        const valueIndex = this.getValueIndex(rowsSpan.sheet, col, value);\r\n        ColumnIndex.shiftRows(valueIndex, rowsSpan.rowStart, rowsSpan.numberOfRows);\r\n    }\r\n    removeRows(col, rowsSpan, value) {\r\n        const valueIndex = this.getValueIndex(rowsSpan.sheet, col, value);\r\n        ColumnIndex.removeRowsFromValues(valueIndex, rowsSpan);\r\n        ColumnIndex.shiftRows(valueIndex, rowsSpan.rowEnd + 1, -rowsSpan.numberOfRows);\r\n    }\r\n    static addValue(valueIndex, rowNumber) {\r\n        const rowIndex = findInOrderedArray(rowNumber, valueIndex.index, 'lowerBound');\r\n        const isRowNumberAlreadyInIndex = valueIndex.index[rowIndex] === rowNumber;\r\n        if (!isRowNumberAlreadyInIndex) {\r\n            valueIndex.index.splice(rowIndex + 1, 0, rowNumber);\r\n        }\r\n    }\r\n    static removeRowsFromValues(valueIndex, rowsSpan) {\r\n        const start = findInOrderedArray(rowsSpan.rowStart, valueIndex.index, 'upperBound');\r\n        const end = findInOrderedArray(rowsSpan.rowEnd, valueIndex.index, 'lowerBound');\r\n        const isFoundSpanValid = start > -1 && end > -1 && start <= end && valueIndex.index[start] <= rowsSpan.rowEnd;\r\n        if (isFoundSpanValid) {\r\n            valueIndex.index.splice(start, end - start + 1);\r\n        }\r\n    }\r\n    static shiftRows(valueIndex, afterRow, numberOfRows) {\r\n        const positionInIndex = findInOrderedArray(afterRow, valueIndex.index, 'upperBound');\r\n        if (positionInIndex === -1) {\r\n            return;\r\n        }\r\n        for (let i = positionInIndex; i < valueIndex.index.length; ++i) {\r\n            valueIndex.index[i] += numberOfRows;\r\n        }\r\n    }\r\n}\r\n/*\r\n * Returns:\r\n * - index of the key, if the key exists in the array,\r\n * - index of the lower/upper bound (depending on handlingMisses parameter) otherwise.\r\n * Assumption: The array is ordered ascending and contains no repetitions.\r\n */\r\nexport function findInOrderedArray(key, values, handlingMisses = 'upperBound') {\r\n    let start = 0;\r\n    let end = values.length - 1;\r\n    while (start <= end) {\r\n        const center = Math.floor((start + end) / 2);\r\n        if (key > values[center]) {\r\n            start = center + 1;\r\n        }\r\n        else if (key < values[center]) {\r\n            end = center - 1;\r\n        }\r\n        else {\r\n            return center;\r\n        }\r\n    }\r\n    const foundIndex = handlingMisses === 'lowerBound' ? end : start;\r\n    const isIndexInRange = foundIndex >= 0 && foundIndex <= values.length;\r\n    return isIndexInRange ? foundIndex : -1;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport class NumberLiteralHelper {\r\n    constructor(config) {\r\n        this.config = config;\r\n        const thousandSeparator = this.config.thousandSeparator === '.' ? `\\\\${this.config.thousandSeparator}` : this.config.thousandSeparator;\r\n        const decimalSeparator = this.config.decimalSeparator === '.' ? `\\\\${this.config.decimalSeparator}` : this.config.decimalSeparator;\r\n        this.numberPattern = new RegExp(`^([+-]?((${decimalSeparator}\\\\d+)|(\\\\d+(${thousandSeparator}\\\\d{3,})*(${decimalSeparator}\\\\d*)?)))(e[+-]?\\\\d+)?$`);\r\n        this.allThousandSeparatorsRegex = new RegExp(`${thousandSeparator}`, 'g');\r\n    }\r\n    numericStringToMaybeNumber(input) {\r\n        if (this.numberPattern.test(input)) {\r\n            const num = this.numericStringToNumber(input);\r\n            if (isNaN(num)) {\r\n                return undefined;\r\n            }\r\n            return num;\r\n        }\r\n        return undefined;\r\n    }\r\n    numericStringToNumber(input) {\r\n        const normalized = input\r\n            .replace(this.allThousandSeparatorsRegex, '')\r\n            .replace(this.config.decimalSeparator, '.');\r\n        return Number(normalized);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { simpleCellAddress } from './Cell';\r\nimport { ArrayVertex, FormulaCellVertex, ParsingErrorVertex } from './DependencyGraph';\r\nimport { buildLexerConfig, Unparser } from './parser';\r\nexport class Serialization {\r\n    constructor(dependencyGraph, unparser, exporter) {\r\n        this.dependencyGraph = dependencyGraph;\r\n        this.unparser = unparser;\r\n        this.exporter = exporter;\r\n    }\r\n    getCellFormula(address, targetAddress) {\r\n        const formulaVertex = this.dependencyGraph.getCell(address);\r\n        if (formulaVertex instanceof FormulaCellVertex) {\r\n            const formula = formulaVertex.getFormula(this.dependencyGraph.lazilyTransformingAstService);\r\n            targetAddress = targetAddress !== null && targetAddress !== void 0 ? targetAddress : address;\r\n            return this.unparser.unparse(formula, targetAddress);\r\n        }\r\n        else if (formulaVertex instanceof ArrayVertex) {\r\n            const arrayVertexAddress = formulaVertex.getAddress(this.dependencyGraph.lazilyTransformingAstService);\r\n            if (arrayVertexAddress.row !== address.row || arrayVertexAddress.col !== address.col || arrayVertexAddress.sheet !== address.sheet) {\r\n                return undefined;\r\n            }\r\n            targetAddress = targetAddress !== null && targetAddress !== void 0 ? targetAddress : address;\r\n            const formula = formulaVertex.getFormula(this.dependencyGraph.lazilyTransformingAstService);\r\n            if (formula !== undefined) {\r\n                return this.unparser.unparse(formula, targetAddress);\r\n            }\r\n        }\r\n        else if (formulaVertex instanceof ParsingErrorVertex) {\r\n            return formulaVertex.getFormula();\r\n        }\r\n        return undefined;\r\n    }\r\n    getCellSerialized(address, targetAddress) {\r\n        var _a;\r\n        return (_a = this.getCellFormula(address, targetAddress)) !== null && _a !== void 0 ? _a : this.getRawValue(address);\r\n    }\r\n    getCellValue(address) {\r\n        return this.exporter.exportValue(this.dependencyGraph.getScalarValue(address));\r\n    }\r\n    getRawValue(address) {\r\n        return this.dependencyGraph.getRawValue(address);\r\n    }\r\n    getSheetValues(sheet) {\r\n        return this.genericSheetGetter(sheet, (arg) => this.getCellValue(arg));\r\n    }\r\n    getSheetFormulas(sheet) {\r\n        return this.genericSheetGetter(sheet, (arg) => this.getCellFormula(arg));\r\n    }\r\n    genericSheetGetter(sheet, getter) {\r\n        const sheetHeight = this.dependencyGraph.getSheetHeight(sheet);\r\n        const sheetWidth = this.dependencyGraph.getSheetWidth(sheet);\r\n        const arr = new Array(sheetHeight);\r\n        for (let i = 0; i < sheetHeight; i++) {\r\n            arr[i] = new Array(sheetWidth);\r\n            for (let j = 0; j < sheetWidth; j++) {\r\n                const address = simpleCellAddress(sheet, j, i);\r\n                arr[i][j] = getter(address);\r\n            }\r\n            for (let j = sheetWidth - 1; j >= 0; j--) {\r\n                if (arr[i][j] === null || arr[i][j] === undefined) {\r\n                    arr[i].pop();\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        for (let i = sheetHeight - 1; i >= 0; i--) {\r\n            if (arr[i].length === 0) {\r\n                arr.pop();\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n    genericAllSheetsGetter(sheetGetter) {\r\n        const result = {};\r\n        for (const sheetName of this.dependencyGraph.sheetMapping.displayNames()) {\r\n            const sheetId = this.dependencyGraph.sheetMapping.fetch(sheetName);\r\n            result[sheetName] = sheetGetter(sheetId);\r\n        }\r\n        return result;\r\n    }\r\n    getSheetSerialized(sheet) {\r\n        return this.genericSheetGetter(sheet, (arg) => this.getCellSerialized(arg));\r\n    }\r\n    getAllSheetsValues() {\r\n        return this.genericAllSheetsGetter((arg) => this.getSheetValues(arg));\r\n    }\r\n    getAllSheetsFormulas() {\r\n        return this.genericAllSheetsGetter((arg) => this.getSheetFormulas(arg));\r\n    }\r\n    getAllSheetsSerialized() {\r\n        return this.genericAllSheetsGetter((arg) => this.getSheetSerialized(arg));\r\n    }\r\n    getAllNamedExpressionsSerialized() {\r\n        const idMap = [];\r\n        let id = 0;\r\n        for (const sheetName of this.dependencyGraph.sheetMapping.displayNames()) {\r\n            const sheetId = this.dependencyGraph.sheetMapping.fetch(sheetName);\r\n            idMap[sheetId] = id;\r\n            id++;\r\n        }\r\n        return this.dependencyGraph.namedExpressions.getAllNamedExpressions().map((entry) => {\r\n            return {\r\n                name: entry.expression.displayName,\r\n                expression: this.getCellSerialized(entry.expression.address),\r\n                scope: entry.scope !== undefined ? idMap[entry.scope] : undefined,\r\n                options: entry.expression.options\r\n            };\r\n        });\r\n    }\r\n    withNewConfig(newConfig, namedExpressions) {\r\n        const newUnparser = new Unparser(newConfig, buildLexerConfig(newConfig), this.dependencyGraph.sheetMapping.fetchDisplayName, namedExpressions);\r\n        return new Serialization(this.dependencyGraph, newUnparser, this.exporter);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport function objectDestroy(object) {\r\n    for (const [key, value] of Object.entries(object)) {\r\n        if (value instanceof Function) {\r\n            object[key] = postMortem(value);\r\n        }\r\n        else {\r\n            delete object[key];\r\n        }\r\n    }\r\n}\r\nfunction postMortem(method) {\r\n    return () => {\r\n        throw new Error(`The \"${method}\" method cannot be called because this HyperFormula instance has been destroyed`);\r\n    };\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { TinyEmitter } from 'tiny-emitter';\r\nexport var Events;\r\n(function (Events) {\r\n    Events[\"SheetAdded\"] = \"sheetAdded\";\r\n    Events[\"SheetRemoved\"] = \"sheetRemoved\";\r\n    Events[\"SheetRenamed\"] = \"sheetRenamed\";\r\n    Events[\"NamedExpressionAdded\"] = \"namedExpressionAdded\";\r\n    Events[\"NamedExpressionRemoved\"] = \"namedExpressionRemoved\";\r\n    Events[\"ValuesUpdated\"] = \"valuesUpdated\";\r\n    Events[\"EvaluationSuspended\"] = \"evaluationSuspended\";\r\n    Events[\"EvaluationResumed\"] = \"evaluationResumed\";\r\n})(Events || (Events = {}));\r\nexport class Emitter extends TinyEmitter {\r\n    emit(event, ...args) {\r\n        super.emit(event, ...args);\r\n        return this;\r\n    }\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__172__;","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nconst dictionary = {\r\n    errors: {\r\n        CYCLE: '#CYCLE!',\r\n        DIV_BY_ZERO: '#DIV/0!',\r\n        ERROR: '#ERROR!',\r\n        NA: '#N/A',\r\n        NAME: '#NAME?',\r\n        NUM: '#NUM!',\r\n        REF: '#REF!',\r\n        SPILL: '#SPILL!',\r\n        VALUE: '#VALUE!',\r\n    },\r\n    functions: {\r\n        FILTER: 'FILTER',\r\n        'ARRAY_CONSTRAIN': 'ARRAY_CONSTRAIN',\r\n        ARRAYFORMULA: 'ARRAYFORMULA',\r\n        ABS: 'ABS',\r\n        ACOS: 'ACOS',\r\n        ACOSH: 'ACOSH',\r\n        ACOT: 'ACOT',\r\n        ACOTH: 'ACOTH',\r\n        AND: 'AND',\r\n        ARABIC: 'ARABIC',\r\n        ASIN: 'ASIN',\r\n        ASINH: 'ASINH',\r\n        ATAN2: 'ATAN2',\r\n        ATAN: 'ATAN',\r\n        ATANH: 'ATANH',\r\n        AVERAGE: 'AVERAGE',\r\n        AVERAGEA: 'AVERAGEA',\r\n        AVERAGEIF: 'AVERAGEIF',\r\n        BASE: 'BASE',\r\n        BIN2DEC: 'BIN2DEC',\r\n        BIN2HEX: 'BIN2HEX',\r\n        BIN2OCT: 'BIN2OCT',\r\n        BITAND: 'BITAND',\r\n        BITLSHIFT: 'BITLSHIFT',\r\n        BITOR: 'BITOR',\r\n        BITRSHIFT: 'BITRSHIFT',\r\n        BITXOR: 'BITXOR',\r\n        CEILING: 'CEILING',\r\n        CHAR: 'CHAR',\r\n        CHOOSE: 'CHOOSE',\r\n        CLEAN: 'CLEAN',\r\n        CODE: 'CODE',\r\n        COLUMN: 'COLUMN',\r\n        COLUMNS: 'COLUMNS',\r\n        CONCATENATE: 'CONCATENATE',\r\n        CORREL: 'CORREL',\r\n        COS: 'COS',\r\n        COSH: 'COSH',\r\n        COT: 'COT',\r\n        COTH: 'COTH',\r\n        COUNT: 'COUNT',\r\n        COUNTA: 'COUNTA',\r\n        COUNTBLANK: 'COUNTBLANK',\r\n        COUNTIF: 'COUNTIF',\r\n        COUNTIFS: 'COUNTIFS',\r\n        COUNTUNIQUE: 'COUNTUNIQUE',\r\n        CSC: 'CSC',\r\n        CSCH: 'CSCH',\r\n        CUMIPMT: 'CUMIPMT',\r\n        CUMPRINC: 'CUMPRINC',\r\n        DATE: 'DATE',\r\n        DATEDIF: 'DATEDIF',\r\n        DATEVALUE: 'DATEVALUE',\r\n        DAY: 'DAY',\r\n        DAYS360: 'DAYS360',\r\n        DAYS: 'DAYS',\r\n        DB: 'DB',\r\n        DDB: 'DDB',\r\n        DEC2BIN: 'DEC2BIN',\r\n        DEC2HEX: 'DEC2HEX',\r\n        DEC2OCT: 'DEC2OCT',\r\n        DECIMAL: 'DECIMAL',\r\n        DEGREES: 'DEGREES',\r\n        DELTA: 'DELTA',\r\n        DOLLARDE: 'DOLLARDE',\r\n        DOLLARFR: 'DOLLARFR',\r\n        EDATE: 'EDATE',\r\n        EFFECT: 'EFFECT',\r\n        EOMONTH: 'EOMONTH',\r\n        ERF: 'ERF',\r\n        ERFC: 'ERFC',\r\n        EVEN: 'EVEN',\r\n        EXACT: 'EXACT',\r\n        EXP: 'EXP',\r\n        FALSE: 'FALSE',\r\n        FIND: 'FIND',\r\n        FORMULATEXT: 'FORMULATEXT',\r\n        FV: 'FV',\r\n        FVSCHEDULE: 'FVSCHEDULE',\r\n        HEX2BIN: 'HEX2BIN',\r\n        HEX2DEC: 'HEX2DEC',\r\n        HEX2OCT: 'HEX2OCT',\r\n        HLOOKUP: 'HLOOKUP',\r\n        HOUR: 'HOUR',\r\n        IF: 'IF',\r\n        IFERROR: 'IFERROR',\r\n        IFNA: 'IFNA',\r\n        INDEX: 'INDEX',\r\n        INT: 'INT',\r\n        INTERVAL: 'INTERVAL',\r\n        IPMT: 'IPMT',\r\n        ISBINARY: 'ISBINARY',\r\n        ISBLANK: 'ISBLANK',\r\n        ISERR: 'ISERR',\r\n        ISERROR: 'ISERROR',\r\n        ISEVEN: 'ISEVEN',\r\n        ISFORMULA: 'ISFORMULA',\r\n        ISLOGICAL: 'ISLOGICAL',\r\n        ISNA: 'ISNA',\r\n        ISNONTEXT: 'ISNONTEXT',\r\n        ISNUMBER: 'ISNUMBER',\r\n        ISODD: 'ISODD',\r\n        ISOWEEKNUM: 'ISOWEEKNUM',\r\n        ISPMT: 'ISPMT',\r\n        ISREF: 'ISREF',\r\n        ISTEXT: 'ISTEXT',\r\n        LEFT: 'LEFT',\r\n        LEN: 'LEN',\r\n        LN: 'LN',\r\n        LOG10: 'LOG10',\r\n        LOG: 'LOG',\r\n        LOWER: 'LOWER',\r\n        MATCH: 'MATCH',\r\n        MAX: 'MAX',\r\n        MAXA: 'MAXA',\r\n        MAXIFS: 'MAXIFS',\r\n        MAXPOOL: 'MAXPOOL',\r\n        MEDIAN: 'MEDIAN',\r\n        MEDIANPOOL: 'MEDIANPOOL',\r\n        MID: 'MID',\r\n        MIN: 'MIN',\r\n        MINA: 'MINA',\r\n        MINIFS: 'MINIFS',\r\n        MINUTE: 'MINUTE',\r\n        MIRR: 'MIRR',\r\n        MMULT: 'MMULT',\r\n        MOD: 'MOD',\r\n        MONTH: 'MONTH',\r\n        NA: 'NA',\r\n        NETWORKDAYS: 'NETWORKDAYS',\r\n        'NETWORKDAYS.INTL': 'NETWORKDAYS.INTL',\r\n        NOMINAL: 'NOMINAL',\r\n        NOT: 'NOT',\r\n        NOW: 'NOW',\r\n        NPER: 'NPER',\r\n        NPV: 'NPV',\r\n        OCT2BIN: 'OCT2BIN',\r\n        OCT2DEC: 'OCT2DEC',\r\n        OCT2HEX: 'OCT2HEX',\r\n        ODD: 'ODD',\r\n        OFFSET: 'OFFSET',\r\n        OR: 'OR',\r\n        PI: 'PI',\r\n        PMT: 'PMT',\r\n        PDURATION: 'PDURATION',\r\n        PRODUCT: 'PRODUCT',\r\n        POWER: 'POWER',\r\n        PPMT: 'PPMT',\r\n        PROPER: 'PROPER',\r\n        PV: 'PV',\r\n        RADIANS: 'RADIANS',\r\n        RAND: 'RAND',\r\n        RATE: 'RATE',\r\n        REPLACE: 'REPLACE',\r\n        REPT: 'REPT',\r\n        RIGHT: 'RIGHT',\r\n        ROMAN: 'ROMAN',\r\n        ROUND: 'ROUND',\r\n        ROUNDDOWN: 'ROUNDDOWN',\r\n        ROUNDUP: 'ROUNDUP',\r\n        ROW: 'ROW',\r\n        ROWS: 'ROWS',\r\n        RRI: 'RRI',\r\n        SEARCH: 'SEARCH',\r\n        SEC: 'SEC',\r\n        SECH: 'SECH',\r\n        SECOND: 'SECOND',\r\n        SHEET: 'SHEET',\r\n        SHEETS: 'SHEETS',\r\n        SIN: 'SIN',\r\n        SINH: 'SINH',\r\n        SLN: 'SLN',\r\n        SPLIT: 'SPLIT',\r\n        SQRT: 'SQRT',\r\n        STDEVA: 'STDEVA',\r\n        'STDEV.P': 'STDEV.P',\r\n        STDEVPA: 'STDEVPA',\r\n        'STDEV.S': 'STDEV.S',\r\n        SUBSTITUTE: 'SUBSTITUTE',\r\n        SUBTOTAL: 'SUBTOTAL',\r\n        SUM: 'SUM',\r\n        SUMIF: 'SUMIF',\r\n        SUMIFS: 'SUMIFS',\r\n        SUMPRODUCT: 'SUMPRODUCT',\r\n        SUMSQ: 'SUMSQ',\r\n        SWITCH: 'SWITCH',\r\n        SYD: 'SYD',\r\n        T: 'T',\r\n        TAN: 'TAN',\r\n        TANH: 'TANH',\r\n        TBILLEQ: 'TBILLEQ',\r\n        TBILLPRICE: 'TBILLPRICE',\r\n        TBILLYIELD: 'TBILLYIELD',\r\n        TEXT: 'TEXT',\r\n        TIME: 'TIME',\r\n        TIMEVALUE: 'TIMEVALUE',\r\n        TODAY: 'TODAY',\r\n        TRANSPOSE: 'TRANSPOSE',\r\n        TRIM: 'TRIM',\r\n        TRUE: 'TRUE',\r\n        TRUNC: 'TRUNC',\r\n        UNICHAR: 'UNICHAR',\r\n        UNICODE: 'UNICODE',\r\n        UPPER: 'UPPER',\r\n        VARA: 'VARA',\r\n        'VAR.P': 'VAR.P',\r\n        VARPA: 'VARPA',\r\n        'VAR.S': 'VAR.S',\r\n        VLOOKUP: 'VLOOKUP',\r\n        WEEKDAY: 'WEEKDAY',\r\n        WEEKNUM: 'WEEKNUM',\r\n        WORKDAY: 'WORKDAY',\r\n        'WORKDAY.INTL': 'WORKDAY.INTL',\r\n        XNPV: 'XNPV',\r\n        XOR: 'XOR',\r\n        YEAR: 'YEAR',\r\n        YEARFRAC: 'YEARFRAC',\r\n        'HF.ADD': 'HF.ADD',\r\n        'HF.CONCAT': 'HF.CONCAT',\r\n        'HF.DIVIDE': 'HF.DIVIDE',\r\n        'HF.EQ': 'HF.EQ',\r\n        'HF.GT': 'HF.GT',\r\n        'HF.GTE': 'HF.GTE',\r\n        'HF.LT': 'HF.LT',\r\n        'HF.LTE': 'HF.LTE',\r\n        'HF.MINUS': 'HF.MINUS',\r\n        'HF.MULTIPLY': 'HF.MULTIPLY',\r\n        'HF.NE': 'HF.NE',\r\n        'HF.POW': 'HF.POW',\r\n        'HF.UMINUS': 'HF.UMINUS',\r\n        'HF.UNARY_PERCENT': 'HF.UNARY_PERCENT',\r\n        'HF.UPLUS': 'HF.UPLUS',\r\n        VARP: 'VARP',\r\n        VAR: 'VAR',\r\n        STDEVP: 'STDEVP',\r\n        STDEV: 'STDEV',\r\n        'EXPON.DIST': 'EXPON.DIST',\r\n        FISHER: 'FISHER',\r\n        FISHERINV: 'FISHERINV',\r\n        GAMMA: 'GAMMA',\r\n        'GAMMA.DIST': 'GAMMA.DIST',\r\n        GAMMALN: 'GAMMALN',\r\n        'GAMMALN.PRECISE': 'GAMMALN.PRECISE',\r\n        'GAMMA.INV': 'GAMMA.INV',\r\n        GAUSS: 'GAUSS',\r\n        FACT: 'FACT',\r\n        FACTDOUBLE: 'FACTDOUBLE',\r\n        COMBIN: 'COMBIN',\r\n        COMBINA: 'COMBINA',\r\n        GCD: 'GCD',\r\n        LCM: 'LCM',\r\n        MROUND: 'MROUND',\r\n        MULTINOMIAL: 'MULTINOMIAL',\r\n        QUOTIENT: 'QUOTIENT',\r\n        RANDBETWEEN: 'RANDBETWEEN',\r\n        SERIESSUM: 'SERIESSUM',\r\n        SIGN: 'SIGN',\r\n        SQRTPI: 'SQRTPI',\r\n        SUMX2MY2: 'SUMX2MY2',\r\n        SUMX2PY2: 'SUMX2PY2',\r\n        SUMXMY2: 'SUMXMY2',\r\n        'EXPONDIST': 'EXPONDIST',\r\n        GAMMADIST: 'GAMMADIST',\r\n        GAMMAINV: 'GAMMAINV',\r\n        'BETA.DIST': 'BETA.DIST',\r\n        BETADIST: 'BETADIST',\r\n        'BETA.INV': 'BETA.INV',\r\n        BETAINV: 'BETAINV',\r\n        'BINOM.DIST': 'BINOM.DIST',\r\n        BINOMDIST: 'BINOMDIST',\r\n        'BINOM.INV': 'BINOM.INV',\r\n        BESSELI: 'BESSELI',\r\n        BESSELJ: 'BESSELJ',\r\n        BESSELK: 'BESSELK',\r\n        BESSELY: 'BESSELY',\r\n        'CHISQ.DIST': 'CHISQ.DIST',\r\n        'CHISQ.DIST.RT': 'CHISQ.DIST.RT',\r\n        'CHISQ.INV': 'CHISQ.INV',\r\n        'CHISQ.INV.RT': 'CHISQ.INV.RT',\r\n        CHIDIST: 'CHIDIST',\r\n        CHIINV: 'CHIINV',\r\n        'F.DIST': 'F.DIST',\r\n        'F.DIST.RT': 'F.DIST.RT',\r\n        'F.INV': 'F.INV',\r\n        'F.INV.RT': 'F.INV.RT',\r\n        FDIST: 'FDIST',\r\n        FINV: 'FINV',\r\n        WEIBULL: 'WEIBULL',\r\n        'WEIBULL.DIST': 'WEIBULL.DIST',\r\n        POISSON: 'POISSON',\r\n        'POISSON.DIST': 'POISSON.DIST',\r\n        'HYPGEOM.DIST': 'HYPGEOM.DIST',\r\n        HYPGEOMDIST: 'HYPGEOMDIST',\r\n        'T.DIST': 'T.DIST',\r\n        'T.DIST.2T': 'T.DIST.2T',\r\n        'T.DIST.RT': 'T.DIST.RT',\r\n        'T.INV': 'T.INV',\r\n        'T.INV.2T': 'T.INV.2T',\r\n        TDIST: 'TDIST',\r\n        TINV: 'TINV',\r\n        LOGINV: 'LOGINV',\r\n        'LOGNORM.DIST': 'LOGNORM.DIST',\r\n        'LOGNORM.INV': 'LOGNORM.INV',\r\n        LOGNORMDIST: 'LOGNORMDIST',\r\n        'NORM.DIST': 'NORM.DIST',\r\n        'NORM.INV': 'NORM.INV',\r\n        'NORM.S.DIST': 'NORM.S.DIST',\r\n        'NORM.S.INV': 'NORM.S.INV',\r\n        NORMDIST: 'NORMDIST',\r\n        NORMINV: 'NORMINV',\r\n        NORMSDIST: 'NORMSDIST',\r\n        NORMSINV: 'NORMSINV',\r\n        PHI: 'PHI',\r\n        'NEGBINOM.DIST': 'NEGBINOM.DIST',\r\n        'NEGBINOMDIST': 'NEGBINOMDIST',\r\n        COMPLEX: 'COMPLEX',\r\n        IMABS: 'IMABS',\r\n        IMAGINARY: 'IMAGINARY',\r\n        IMARGUMENT: 'IMARGUMENT',\r\n        IMCONJUGATE: 'IMCONJUGATE',\r\n        IMCOS: 'IMCOS',\r\n        IMCOSH: 'IMCOSH',\r\n        IMCOT: 'IMCOT',\r\n        IMCSC: 'IMCSC',\r\n        IMCSCH: 'IMCSCH',\r\n        IMDIV: 'IMDIV',\r\n        IMEXP: 'IMEXP',\r\n        IMLN: 'IMLN',\r\n        IMLOG10: 'IMLOG10',\r\n        IMLOG2: 'IMLOG2',\r\n        IMPOWER: 'IMPOWER',\r\n        IMPRODUCT: 'IMPRODUCT',\r\n        IMREAL: 'IMREAL',\r\n        IMSEC: 'IMSEC',\r\n        IMSECH: 'IMSECH',\r\n        IMSIN: 'IMSIN',\r\n        IMSINH: 'IMSINH',\r\n        IMSQRT: 'IMSQRT',\r\n        IMSUB: 'IMSUB',\r\n        IMSUM: 'IMSUM',\r\n        IMTAN: 'IMTAN',\r\n        LARGE: 'LARGE',\r\n        SMALL: 'SMALL',\r\n        AVEDEV: 'AVEDEV',\r\n        CONFIDENCE: 'CONFIDENCE',\r\n        'CONFIDENCE.NORM': 'CONFIDENCE.NORM',\r\n        'CONFIDENCE.T': 'CONFIDENCE.T',\r\n        DEVSQ: 'DEVSQ',\r\n        GEOMEAN: 'GEOMEAN',\r\n        HARMEAN: 'HARMEAN',\r\n        CRITBINOM: 'CRITBINOM',\r\n        'COVARIANCE.P': 'COVARIANCE.P',\r\n        'COVARIANCE.S': 'COVARIANCE.S',\r\n        'COVAR': 'COVAR',\r\n        PEARSON: 'PEARSON',\r\n        RSQ: 'RSQ',\r\n        STANDARDIZE: 'STANDARDIZE',\r\n        'Z.TEST': 'Z.TEST',\r\n        ZTEST: 'ZTEST',\r\n        'F.TEST': 'F.TEST',\r\n        FTEST: 'FTEST',\r\n        STEYX: 'STEYX',\r\n        SLOPE: 'SLOPE',\r\n        'CHISQ.TEST': 'CHISQ.TEST',\r\n        CHITEST: 'CHITEST',\r\n        'T.TEST': 'T.TEST',\r\n        TTEST: 'TTEST',\r\n        SKEW: 'SKEW',\r\n        'SKEW.P': 'SKEW.P',\r\n        WEIBULLDIST: 'WEIBULLDIST',\r\n        VARS: 'VARS',\r\n        TINV2T: 'TINV2T',\r\n        TDISTRT: 'TDISTRT',\r\n        TDIST2T: 'TDIST2T',\r\n        STDEVS: 'STDEVS',\r\n        FINVRT: 'FINVRT',\r\n        FDISTRT: 'FDISTRT',\r\n        CHIDISTRT: 'CHIDISTRT',\r\n        CHIINVRT: 'CHIINVRT',\r\n        COVARIANCEP: 'COVARIANCEP',\r\n        COVARIANCES: 'COVARIANCES',\r\n        LOGNORMINV: 'LOGNORMINV',\r\n        POISSONDIST: 'POISSONDIST',\r\n        SKEWP: 'SKEWP',\r\n        'CEILING.MATH': 'CEILING.MATH',\r\n        FLOOR: 'FLOOR',\r\n        'FLOOR.MATH': 'FLOOR.MATH',\r\n        'CEILING.PRECISE': 'CEILING.PRECISE',\r\n        'FLOOR.PRECISE': 'FLOOR.PRECISE',\r\n        'ISO.CEILING': 'ISO.CEILING',\r\n    },\r\n    langCode: 'enGB',\r\n    ui: {\r\n        NEW_SHEET_PREFIX: 'Sheet',\r\n    },\r\n};\r\nexport default dictionary;\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionPlugin, FunctionArgumentType, } from './plugin/FunctionPlugin';\r\nexport { FunctionPlugin, FunctionArgumentType, };\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport { ArrayPlugin } from './ArrayPlugin';\r\nexport { AbsPlugin } from './AbsPlugin';\r\nexport { BitShiftPlugin } from './BitShiftPlugin';\r\nexport { BitwiseLogicOperationsPlugin } from './BitwiseLogicOperationsPlugin';\r\nexport { BooleanPlugin } from './BooleanPlugin';\r\nexport { CharPlugin } from './CharPlugin';\r\nexport { CodePlugin } from './CodePlugin';\r\nexport { CountBlankPlugin } from './CountBlankPlugin';\r\nexport { CountUniquePlugin } from './CountUniquePlugin';\r\nexport { DateTimePlugin } from './DateTimePlugin';\r\nexport { DegreesPlugin } from './DegreesPlugin';\r\nexport { DeltaPlugin } from './DeltaPlugin';\r\nexport { ExpPlugin } from './ExpPlugin';\r\nexport { FinancialPlugin } from './FinancialPlugin';\r\nexport { FormulaTextPlugin } from './FormulaTextPlugin';\r\nexport { InformationPlugin } from './InformationPlugin';\r\nexport { IsEvenPlugin } from './IsEvenPlugin';\r\nexport { IsOddPlugin } from './IsOddPlugin';\r\nexport { LogarithmPlugin } from './LogarithmPlugin';\r\nexport { MathConstantsPlugin } from './MathConstantsPlugin';\r\nexport { MatrixPlugin } from './MatrixPlugin';\r\nexport { MedianPlugin } from './MedianPlugin';\r\nexport { ModuloPlugin } from './ModuloPlugin';\r\nexport { NumericAggregationPlugin } from './NumericAggregationPlugin';\r\nexport { PowerPlugin } from './PowerPlugin';\r\nexport { RadiansPlugin } from './RadiansPlugin';\r\nexport { RadixConversionPlugin } from './RadixConversionPlugin';\r\nexport { RandomPlugin } from './RandomPlugin';\r\nexport { RoundingPlugin } from './RoundingPlugin';\r\nexport { SqrtPlugin } from './SqrtPlugin';\r\nexport { ConditionalAggregationPlugin } from './ConditionalAggregationPlugin';\r\nexport { SumprodPlugin } from './SumprodPlugin';\r\nexport { TextPlugin } from './TextPlugin';\r\nexport { TrigonometryPlugin } from './TrigonometryPlugin';\r\nexport { LookupPlugin } from './LookupPlugin';\r\nexport { RomanPlugin } from './RomanPlugin';\r\nexport { SimpleArithmerticPlugin } from './SimpleArithmertic';\r\nexport { StatisticalPlugin } from './StatisticalPlugin';\r\nexport { MathPlugin } from './MathPlugin';\r\nexport { ComplexPlugin } from './ComplexPlugin';\r\nexport { StatisticalAggregationPlugin } from './StatisticalAggregationPlugin';\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArraySize } from '../../ArraySize';\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { AstNodeType } from '../../parser';\r\nimport { coerceScalarToBoolean } from '../ArithmeticHelper';\r\nimport { InterpreterState } from '../InterpreterState';\r\nimport { SimpleRangeValue } from '../../SimpleRangeValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class ArrayPlugin extends FunctionPlugin {\r\n    arrayformula(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ARRAYFORMULA'), (value) => value);\r\n    }\r\n    arrayformulaArraySize(ast, state) {\r\n        if (ast.args.length !== 1) {\r\n            return ArraySize.error();\r\n        }\r\n        const metadata = this.metadata('ARRAYFORMULA');\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.arraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        return subChecks[0];\r\n    }\r\n    arrayconstrain(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ARRAY_CONSTRAIN'), (range, numRows, numCols) => {\r\n            numRows = Math.min(numRows, range.height());\r\n            numCols = Math.min(numCols, range.width());\r\n            const data = range.data;\r\n            const ret = [];\r\n            for (let i = 0; i < numRows; i++) {\r\n                ret.push(data[i].slice(0, numCols));\r\n            }\r\n            return SimpleRangeValue.onlyValues(ret);\r\n        });\r\n    }\r\n    arrayconstrainArraySize(ast, state) {\r\n        if (ast.args.length !== 3) {\r\n            return ArraySize.error();\r\n        }\r\n        const metadata = this.metadata('ARRAY_CONSTRAIN');\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.arraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        let { height, width } = subChecks[0];\r\n        if (ast.args[1].type === AstNodeType.NUMBER) {\r\n            height = Math.min(height, ast.args[1].value);\r\n        }\r\n        if (ast.args[2].type === AstNodeType.NUMBER) {\r\n            width = Math.min(width, ast.args[2].value);\r\n        }\r\n        if (height < 1 || width < 1 || !Number.isInteger(height) || !Number.isInteger(width)) {\r\n            return ArraySize.error();\r\n        }\r\n        return new ArraySize(width, height);\r\n    }\r\n    filter(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FILTER'), (rangeVals, ...rangeFilters) => {\r\n            for (const filter of rangeFilters) {\r\n                if (rangeVals.width() !== filter.width() || rangeVals.height() !== filter.height()) {\r\n                    return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n                }\r\n            }\r\n            if (rangeVals.width() > 1 && rangeVals.height() > 1) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.WrongDimension);\r\n            }\r\n            const vals = rangeVals.data;\r\n            const ret = [];\r\n            for (let i = 0; i < rangeVals.height(); i++) {\r\n                const row = [];\r\n                for (let j = 0; j < rangeVals.width(); j++) {\r\n                    let ok = true;\r\n                    for (const filter of rangeFilters) {\r\n                        const val = coerceScalarToBoolean(filter.data[i][j]);\r\n                        if (val !== true) {\r\n                            ok = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (ok) {\r\n                        row.push(vals[i][j]);\r\n                    }\r\n                }\r\n                if (row.length > 0) {\r\n                    ret.push(row);\r\n                }\r\n            }\r\n            if (ret.length > 0) {\r\n                return SimpleRangeValue.onlyValues(ret);\r\n            }\r\n            else {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EmptyRange);\r\n            }\r\n        });\r\n    }\r\n    filterArraySize(ast, state) {\r\n        if (ast.args.length <= 1) {\r\n            return ArraySize.error();\r\n        }\r\n        const metadata = this.metadata('FILTER');\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.arraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        const width = Math.max(...(subChecks).map(val => val.width));\r\n        const height = Math.max(...(subChecks).map(val => val.height));\r\n        return new ArraySize(width, height);\r\n    }\r\n}\r\nArrayPlugin.implementedFunctions = {\r\n    'ARRAYFORMULA': {\r\n        method: 'arrayformula',\r\n        arraySizeMethod: 'arrayformulaArraySize',\r\n        arrayFunction: true,\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n    },\r\n    'ARRAY_CONSTRAIN': {\r\n        method: 'arrayconstrain',\r\n        arraySizeMethod: 'arrayconstrainArraySize',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n        ],\r\n        vectorizationForbidden: true,\r\n    },\r\n    'FILTER': {\r\n        method: 'filter',\r\n        arraySizeMethod: 'filterArraySize',\r\n        arrayFunction: true,\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    }\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class AbsPlugin extends FunctionPlugin {\r\n    abs(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ABS'), Math.abs);\r\n    }\r\n}\r\nAbsPlugin.implementedFunctions = {\r\n    'ABS': {\r\n        method: 'abs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nconst MAX_48BIT_INTEGER = 281474976710655;\r\nconst SHIFT_MIN_POSITIONS = -53;\r\nconst SHIFT_MAX_POSITIONS = 53;\r\nexport class BitShiftPlugin extends FunctionPlugin {\r\n    bitlshift(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BITLSHIFT'), shiftLeft);\r\n    }\r\n    bitrshift(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BITRSHIFT'), shiftRight);\r\n    }\r\n}\r\nBitShiftPlugin.implementedFunctions = {\r\n    'BITLSHIFT': {\r\n        method: 'bitlshift',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: SHIFT_MIN_POSITIONS, maxValue: SHIFT_MAX_POSITIONS },\r\n        ]\r\n    },\r\n    'BITRSHIFT': {\r\n        method: 'bitrshift',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: SHIFT_MIN_POSITIONS, maxValue: SHIFT_MAX_POSITIONS },\r\n        ]\r\n    },\r\n};\r\nfunction shiftLeft(value, positions) {\r\n    if (positions < 0) {\r\n        return shiftRight(value, -positions);\r\n    }\r\n    else {\r\n        return validate(value * Math.pow(2, positions));\r\n    }\r\n}\r\nfunction shiftRight(value, positions) {\r\n    if (positions < 0) {\r\n        return shiftLeft(value, -positions);\r\n    }\r\n    else {\r\n        return validate(Math.floor(value / Math.pow(2, positions)));\r\n    }\r\n}\r\nfunction validate(result) {\r\n    if (result > MAX_48BIT_INTEGER) {\r\n        return new CellError(ErrorType.NUM, ErrorMessage.BitshiftLong);\r\n    }\r\n    else {\r\n        return result;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class BitwiseLogicOperationsPlugin extends FunctionPlugin {\r\n    bitand(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BITAND'), (left, right) => left & right);\r\n    }\r\n    bitor(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BITOR'), (left, right) => left | right);\r\n    }\r\n    bitxor(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BITXOR'), (left, right) => left ^ right);\r\n    }\r\n}\r\nBitwiseLogicOperationsPlugin.implementedFunctions = {\r\n    'BITAND': {\r\n        method: 'bitand',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n        ]\r\n    },\r\n    'BITOR': {\r\n        method: 'bitor',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n        ]\r\n    },\r\n    'BITXOR': {\r\n        method: 'bitxor',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing boolean functions\r\n */\r\nexport class BooleanPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to TRUE()\r\n     *\r\n     * Returns the logical true\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    literalTrue(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TRUE'), () => true);\r\n    }\r\n    /**\r\n     * Corresponds to FALSE()\r\n     *\r\n     * Returns the logical false\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    literalFalse(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FALSE'), () => false);\r\n    }\r\n    /**\r\n     * Corresponds to IF(expression, value_if_true, value_if_false)\r\n     *\r\n     * Returns value specified as second argument if expression is true and third argument if expression is false\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    conditionalIf(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IF'), (condition, arg2, arg3) => {\r\n            return condition ? arg2 : arg3;\r\n        });\r\n    }\r\n    /**\r\n     * Corresponds to AND(expression1, [expression2, ...])\r\n     *\r\n     * Returns true if all of the provided arguments are logically true, and false if any of it is logically false\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    and(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('AND'), (...args) => args.filter((arg) => arg !== undefined).every((arg) => !!arg));\r\n    }\r\n    /**\r\n     * Corresponds to OR(expression1, [expression2, ...])\r\n     *\r\n     * Returns true if any of the provided arguments are logically true, and false otherwise\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    or(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('OR'), (...args) => args.filter((arg) => arg !== undefined).some((arg) => arg));\r\n    }\r\n    not(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NOT'), (arg) => !arg);\r\n    }\r\n    xor(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('XOR'), (...args) => {\r\n            let cnt = 0;\r\n            args.filter((arg) => arg !== undefined).forEach((arg) => {\r\n                if (arg) {\r\n                    cnt++;\r\n                }\r\n            });\r\n            return (cnt % 2) === 1;\r\n        });\r\n    }\r\n    switch(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SWITCH'), (selector, ...args) => {\r\n            const n = args.length;\r\n            let i = 0;\r\n            for (; i + 1 < n; i += 2) {\r\n                if (args[i] instanceof CellError) {\r\n                    continue;\r\n                }\r\n                if (this.arithmeticHelper.eq(selector, args[i])) {\r\n                    return args[i + 1];\r\n                }\r\n            }\r\n            if (i < n) {\r\n                return args[i];\r\n            }\r\n            else {\r\n                return new CellError(ErrorType.NA, ErrorMessage.NoDefault);\r\n            }\r\n        });\r\n    }\r\n    iferror(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IFERROR'), (arg1, arg2) => {\r\n            if (arg1 instanceof CellError) {\r\n                return arg2;\r\n            }\r\n            else {\r\n                return arg1;\r\n            }\r\n        });\r\n    }\r\n    ifna(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IFNA'), (arg1, arg2) => {\r\n            if (arg1 instanceof CellError && arg1.type === ErrorType.NA) {\r\n                return arg2;\r\n            }\r\n            else {\r\n                return arg1;\r\n            }\r\n        });\r\n    }\r\n    choose(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHOOSE'), (selector, ...args) => {\r\n            if (selector > args.length) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.Selector);\r\n            }\r\n            return args[selector - 1];\r\n        });\r\n    }\r\n}\r\nBooleanPlugin.implementedFunctions = {\r\n    'TRUE': {\r\n        method: 'literalTrue',\r\n        parameters: [],\r\n    },\r\n    'FALSE': {\r\n        method: 'literalFalse',\r\n        parameters: [],\r\n    },\r\n    'IF': {\r\n        method: 'conditionalIf',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.SCALAR, defaultValue: false, passSubtype: true },\r\n        ],\r\n    },\r\n    'AND': {\r\n        method: 'and',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n    'OR': {\r\n        method: 'or',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n    'XOR': {\r\n        method: 'xor',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n    'NOT': {\r\n        method: 'not',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'SWITCH': {\r\n        method: 'switch',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'IFERROR': {\r\n        method: 'iferror',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n        ]\r\n    },\r\n    'IFNA': {\r\n        method: 'ifna',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n        ]\r\n    },\r\n    'CHOOSE': {\r\n        method: 'choose',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.SCALAR, passSubtype: true },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class CharPlugin extends FunctionPlugin {\r\n    char(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHAR'), (value) => {\r\n            if (value < 1 || value >= 256) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.CharacterCodeBounds);\r\n            }\r\n            return String.fromCharCode(Math.trunc(value));\r\n        });\r\n    }\r\n    unichar(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHAR'), (value) => {\r\n            if (value < 1 || value >= 1114112) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.CharacterCodeBounds);\r\n            }\r\n            return String.fromCodePoint(Math.trunc(value));\r\n        });\r\n    }\r\n}\r\nCharPlugin.implementedFunctions = {\r\n    'CHAR': {\r\n        method: 'char',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n    'UNICHAR': {\r\n        method: 'unichar',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class CodePlugin extends FunctionPlugin {\r\n    code(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CODE'), (value) => {\r\n            if (value.length === 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.EmptyString);\r\n            }\r\n            return value.charCodeAt(0);\r\n        });\r\n    }\r\n    unicode(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('UNICODE'), (value) => {\r\n            var _a;\r\n            return (_a = value.codePointAt(0)) !== null && _a !== void 0 ? _a : new CellError(ErrorType.VALUE, ErrorMessage.EmptyString);\r\n        });\r\n    }\r\n}\r\nCodePlugin.implementedFunctions = {\r\n    'CODE': {\r\n        method: 'code',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'UNICODE': {\r\n        method: 'unicode',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { EmptyValue } from '../InterpreterValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing MEDIAN function\r\n */\r\nexport class CountBlankPlugin extends FunctionPlugin {\r\n    countblank(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COUNTBLANK'), (...args) => {\r\n            let counter = 0;\r\n            args.forEach((arg) => {\r\n                if (arg === EmptyValue) {\r\n                    counter++;\r\n                }\r\n            });\r\n            return counter;\r\n        });\r\n    }\r\n}\r\nCountBlankPlugin.implementedFunctions = {\r\n    'COUNTBLANK': {\r\n        method: 'countblank',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError } from '../../Cell';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing COUNTUNIQUE function\r\n */\r\nexport class CountUniquePlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to COUNTUNIQUE(Number1, Number2, ...).\r\n     *\r\n     * Returns number of unique numbers from arguments\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    countunique(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COUNTUNIQUE'), (...args) => {\r\n            const valuesSet = new Set();\r\n            const errorsSet = new Set();\r\n            for (const scalarValue of args) {\r\n                if (scalarValue instanceof CellError) {\r\n                    errorsSet.add(scalarValue.type);\r\n                }\r\n                else if (scalarValue !== '') {\r\n                    valuesSet.add(scalarValue);\r\n                }\r\n            }\r\n            return valuesSet.size + errorsSet.size;\r\n        });\r\n    }\r\n}\r\nCountUniquePlugin.implementedFunctions = {\r\n    'COUNTUNIQUE': {\r\n        method: 'countunique',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR },\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { instanceOfSimpleDate, instanceOfSimpleTime, numberToSimpleTime, offsetMonth, roundToNearestSecond, timeToNumber, toBasisEU, truncateDayInMonth } from '../../DateTimeHelper';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { format } from '../../format/format';\r\nimport { EmptyValue, getRawValue, isExtendedNumber, NumberType, } from '../InterpreterValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing date-specific functions\r\n */\r\nexport class DateTimePlugin extends FunctionPlugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.isoweeknumCore = (day) => {\r\n            const absoluteDay = Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(day));\r\n            const date = this.dateTimeHelper.numberToSimpleDate(day);\r\n            const yearStart = this.dateTimeHelper.dateToNumber({ year: date.year, month: 1, day: 1 });\r\n            const yearStartAbsolute = this.dateTimeHelper.relativeNumberToAbsoluteNumber(yearStart);\r\n            const firstThursdayAbs = yearStartAbsolute + ((4 - yearStartAbsolute) % 7 + 7) % 7;\r\n            const ret = Math.floor((absoluteDay - 1) / 7) - Math.floor((firstThursdayAbs - 1) / 7) + 1;\r\n            if (ret === 0) {\r\n                return this.isoweeknumCore(day - 7) + 1;\r\n            }\r\n            return ret;\r\n        };\r\n        this.days360Core = (startDate, endDate, mode) => {\r\n            const start = this.dateTimeHelper.numberToSimpleDate(startDate);\r\n            const end = this.dateTimeHelper.numberToSimpleDate(endDate);\r\n            let nStart, nEnd;\r\n            if (mode) {\r\n                nStart = toBasisEU(start);\r\n                nEnd = toBasisEU(end);\r\n            }\r\n            else {\r\n                [nStart, nEnd] = this.dateTimeHelper.toBasisUS(start, end);\r\n            }\r\n            return 360 * (nEnd.year - nStart.year) + 30 * (nEnd.month - nStart.month) + nEnd.day - nStart.day;\r\n        };\r\n    }\r\n    /**\r\n     * Corresponds to DATE(year, month, day)\r\n     *\r\n     * Converts a provided year, month and day into date\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    date(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DATE'), (year, month, day) => {\r\n            const d = Math.trunc(day);\r\n            let m = Math.trunc(month);\r\n            let y = Math.trunc(year);\r\n            if (y < this.dateTimeHelper.getEpochYearZero()) {\r\n                y += this.dateTimeHelper.getEpochYearZero();\r\n            }\r\n            const delta = Math.floor((m - 1) / 12);\r\n            y += delta;\r\n            m -= delta * 12;\r\n            const date = { year: y, month: m, day: 1 };\r\n            if (this.dateTimeHelper.isValidDate(date)) {\r\n                let ret = this.dateTimeHelper.dateToNumber(date) + (d - 1);\r\n                ret = this.dateTimeHelper.getWithinBounds(ret);\r\n                if (ret === undefined) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.DateBounds);\r\n                }\r\n                return ret;\r\n            }\r\n            return new CellError(ErrorType.VALUE, ErrorMessage.InvalidDate);\r\n        });\r\n    }\r\n    time(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TIME'), (h, m, s) => {\r\n            const ret = timeToNumber({ hours: Math.trunc(h), minutes: Math.trunc(m), seconds: Math.trunc(s) });\r\n            if (ret < 0) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NegativeTime);\r\n            }\r\n            return ret % 1;\r\n        });\r\n    }\r\n    /**\r\n     * Implementation for the EOMONTH function\r\n     */\r\n    eomonth(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EOMONTH'), (dateNumber, numberOfMonthsToShift) => {\r\n            const date = this.dateTimeHelper.numberToSimpleDate(dateNumber);\r\n            let ret = this.dateTimeHelper.dateToNumber(this.dateTimeHelper.endOfMonth(offsetMonth(date, numberOfMonthsToShift)));\r\n            ret = this.dateTimeHelper.getWithinBounds(ret);\r\n            if (ret === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.DateBounds);\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    day(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DAY'), (dateNumber) => this.dateTimeHelper.numberToSimpleDate(dateNumber).day);\r\n    }\r\n    days(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DAYS'), (endDate, startDate) => Math.trunc(endDate) - Math.trunc(startDate));\r\n    }\r\n    /**\r\n     * Corresponds to MONTH(date)\r\n     *\r\n     * Returns the month of the year specified by a given date\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    month(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MONTH'), (dateNumber) => this.dateTimeHelper.numberToSimpleDate(dateNumber).month);\r\n    }\r\n    /**\r\n     * Corresponds to YEAR(date)\r\n     *\r\n     * Returns the year specified by a given date\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    year(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('YEAR'), (dateNumber) => this.dateTimeHelper.numberToSimpleDate(dateNumber).year);\r\n    }\r\n    hour(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HOUR'), (timeNumber) => numberToSimpleTime(roundToNearestSecond(timeNumber) % 1).hours);\r\n    }\r\n    minute(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MINUTE'), (timeNumber) => numberToSimpleTime(roundToNearestSecond(timeNumber) % 1).minutes);\r\n    }\r\n    second(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SECOND'), (timeNumber) => numberToSimpleTime(roundToNearestSecond(timeNumber) % 1).seconds);\r\n    }\r\n    /**\r\n     * Corresponds to TEXT(number, format)\r\n     *\r\n     * Tries to convert number to specified date format.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    text(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TEXT'), (numberRepresentation, formatArg) => format(numberRepresentation, formatArg, this.config, this.dateTimeHelper));\r\n    }\r\n    weekday(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('WEEKDAY'), (day, type) => {\r\n            const absoluteDay = Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(day));\r\n            if (type === 3) {\r\n                return (absoluteDay - 1) % 7;\r\n            }\r\n            const offset = weekdayOffsets.get(type);\r\n            if (offset === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.BadMode);\r\n            }\r\n            return (absoluteDay - offset) % 7 + 1;\r\n        });\r\n    }\r\n    weeknum(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('WEEKNUM'), (day, type) => {\r\n            const absoluteDay = Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(day));\r\n            const date = this.dateTimeHelper.numberToSimpleDate(day);\r\n            const yearStart = this.dateTimeHelper.dateToNumber({ year: date.year, month: 1, day: 1 });\r\n            const yearStartAbsolute = this.dateTimeHelper.relativeNumberToAbsoluteNumber(yearStart);\r\n            if (type === 21) {\r\n                return this.isoweeknumCore(day);\r\n            }\r\n            const offset = weekdayOffsets.get(type);\r\n            if (offset === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.BadMode);\r\n            }\r\n            return Math.floor((absoluteDay - offset) / 7) - Math.floor((yearStartAbsolute - offset) / 7) + 1;\r\n        });\r\n    }\r\n    isoweeknum(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISOWEEKNUM'), this.isoweeknumCore);\r\n    }\r\n    datevalue(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DATEVALUE'), (date) => {\r\n            const { dateTime } = this.dateTimeHelper.parseDateTimeFromConfigFormats(date);\r\n            if (dateTime === undefined) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.IncorrectDateTime);\r\n            }\r\n            if (!instanceOfSimpleDate(dateTime)) {\r\n                return 0;\r\n            }\r\n            return (instanceOfSimpleTime(dateTime) ? Math.trunc(timeToNumber(dateTime)) : 0) +\r\n                this.dateTimeHelper.dateToNumber(dateTime);\r\n        });\r\n    }\r\n    timevalue(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TIMEVALUE'), (date) => {\r\n            const dateNumber = this.dateTimeHelper.dateStringToDateNumber(date);\r\n            if (dateNumber === undefined) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.IncorrectDateTime);\r\n            }\r\n            return getRawValue(dateNumber) % 1;\r\n        });\r\n    }\r\n    now(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NOW'), () => {\r\n            const now = new Date(Date.now());\r\n            return timeToNumber({ hours: now.getHours(), minutes: now.getMinutes(), seconds: now.getSeconds() }) +\r\n                this.dateTimeHelper.dateToNumber({ year: now.getFullYear(), month: now.getMonth() + 1, day: now.getDate() });\r\n        });\r\n    }\r\n    today(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TODAY'), () => {\r\n            const now = new Date(Date.now());\r\n            return this.dateTimeHelper.dateToNumber({\r\n                year: now.getFullYear(),\r\n                month: now.getMonth() + 1,\r\n                day: now.getDate()\r\n            });\r\n        });\r\n    }\r\n    edate(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EDATE'), (dateNumber, delta) => {\r\n            const date = this.dateTimeHelper.numberToSimpleDate(dateNumber);\r\n            const newDate = truncateDayInMonth(offsetMonth(date, delta));\r\n            let ret = this.dateTimeHelper.dateToNumber(newDate);\r\n            ret = this.dateTimeHelper.getWithinBounds(ret);\r\n            if (ret === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.DateBounds);\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    datedif(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DATEDIF'), (startDate, endDate, unit) => {\r\n            if (startDate > endDate) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.StartEndDate);\r\n            }\r\n            if (unit === 'D') {\r\n                return Math.floor(endDate) - Math.floor(startDate);\r\n            }\r\n            const start = this.dateTimeHelper.numberToSimpleDate(startDate);\r\n            const end = this.dateTimeHelper.numberToSimpleDate(endDate);\r\n            switch (unit) {\r\n                case 'M':\r\n                    return (end.year - start.year) * 12 + (end.month - start.month) - (end.day < start.day ? 1 : 0);\r\n                case 'YM':\r\n                    return (12 + (end.month - start.month) - (end.day < start.day ? 1 : 0)) % 12;\r\n                case 'Y':\r\n                    if ((end.month > start.month) || (end.month === start.month && end.day >= start.day)) {\r\n                        return end.year - start.year;\r\n                    }\r\n                    else {\r\n                        return end.year - start.year - 1;\r\n                    }\r\n                case 'MD':\r\n                    if (end.day >= start.day) {\r\n                        return end.day - start.day;\r\n                    }\r\n                    else {\r\n                        const m = end.month === 1 ? 12 : end.month - 1;\r\n                        const y = end.month === 1 ? end.year - 1 : end.year;\r\n                        return this.dateTimeHelper.daysInMonth(y, m) + end.day - start.day;\r\n                    }\r\n                case 'YD':\r\n                    if (end.month > start.month || (end.month === start.month && end.day >= start.day)) {\r\n                        return Math.floor(endDate) - this.dateTimeHelper.dateToNumber({\r\n                            year: end.year,\r\n                            month: start.month,\r\n                            day: start.day\r\n                        });\r\n                    }\r\n                    else {\r\n                        return Math.floor(endDate)\r\n                            - Math.floor(startDate)\r\n                            - 365 * (end.year - start.year - 1)\r\n                            - this.dateTimeHelper.leapYearsCount(end.year - 1)\r\n                            + this.dateTimeHelper.leapYearsCount(start.year);\r\n                    }\r\n                default:\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.BadMode);\r\n            }\r\n        });\r\n    }\r\n    days360(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DAYS360'), this.days360Core);\r\n    }\r\n    yearfrac(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('YEARFRAC'), (startDate, endDate, mode) => {\r\n            startDate = Math.trunc(startDate);\r\n            endDate = Math.trunc(endDate);\r\n            if (startDate > endDate) {\r\n                [startDate, endDate] = [endDate, startDate];\r\n            }\r\n            switch (mode) {\r\n                case 0:\r\n                    return this.days360Core(startDate, endDate, false) / 360;\r\n                case 1:\r\n                    return (endDate - startDate) / this.dateTimeHelper.yearLengthForBasis(this.dateTimeHelper.numberToSimpleDate(startDate), this.dateTimeHelper.numberToSimpleDate(endDate));\r\n                case 2:\r\n                    return (endDate - startDate) / 360;\r\n                case 3:\r\n                    return (endDate - startDate) / 365;\r\n                case 4:\r\n                    return this.days360Core(startDate, endDate, true) / 360;\r\n            }\r\n            throw new Error('Should not be reachable.');\r\n        });\r\n    }\r\n    interval(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('INTERVAL'), (arg) => {\r\n            arg = Math.trunc(arg);\r\n            const second = arg % 60;\r\n            arg = Math.trunc(arg / 60);\r\n            const minute = arg % 60;\r\n            arg = Math.trunc(arg / 60);\r\n            const hour = arg % 24;\r\n            arg = Math.trunc(arg / 24);\r\n            const day = arg % 30;\r\n            arg = Math.trunc(arg / 30);\r\n            const month = arg % 12;\r\n            const year = Math.trunc(arg / 12);\r\n            return 'P' + ((year > 0) ? year + 'Y' : '')\r\n                + ((month > 0) ? month + 'M' : '')\r\n                + ((day > 0) ? day + 'D' : '')\r\n                + 'T'\r\n                + ((hour > 0) ? hour + 'H' : '')\r\n                + ((minute > 0) ? minute + 'M' : '')\r\n                + ((second > 0) ? second + 'S' : '');\r\n        });\r\n    }\r\n    networkdays(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NETWORKDAYS'), (start, end, holidays) => this.networkdayscore(start, end, 1, holidays));\r\n    }\r\n    networkdaysintl(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NETWORKDAYS.INTL'), (start, end, weekend, holidays) => this.networkdayscore(start, end, weekend, holidays));\r\n    }\r\n    workday(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('WORKDAY'), (start, end, holidays) => this.workdaycore(start, end, 1, holidays));\r\n    }\r\n    workdayintl(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('WORKDAY.INTL'), (start, end, weekend, holidays) => this.workdaycore(start, end, weekend, holidays));\r\n    }\r\n    networkdayscore(start, end, weekend, holidays) {\r\n        start = Math.trunc(start);\r\n        end = Math.trunc(end);\r\n        let multiplier = 1;\r\n        if (start > end) {\r\n            [start, end] = [end, start];\r\n            multiplier = -1;\r\n        }\r\n        const weekendPattern = computeWeekendPattern(weekend);\r\n        if (weekendPattern instanceof CellError) {\r\n            return weekendPattern;\r\n        }\r\n        const filteredHolidays = this.simpleRangeToFilteredHolidays(weekendPattern, holidays);\r\n        if (filteredHolidays instanceof CellError) {\r\n            return filteredHolidays;\r\n        }\r\n        return multiplier * this.countWorkdays(start, end, weekendPattern, filteredHolidays);\r\n    }\r\n    workdaycore(start, delta, weekend, holidays) {\r\n        start = Math.trunc(start);\r\n        delta = Math.trunc(delta);\r\n        const weekendPattern = computeWeekendPattern(weekend);\r\n        if (weekendPattern instanceof CellError) {\r\n            return weekendPattern;\r\n        }\r\n        const filteredHolidays = this.simpleRangeToFilteredHolidays(weekendPattern, holidays);\r\n        if (filteredHolidays instanceof CellError) {\r\n            return filteredHolidays;\r\n        }\r\n        if (delta > 0) {\r\n            let upper = 1;\r\n            while (this.countWorkdays(start + 1, start + upper, weekendPattern, filteredHolidays) < delta) {\r\n                upper *= 2;\r\n            }\r\n            let lower = 1;\r\n            while (lower + 1 < upper) {\r\n                const mid = Math.trunc((lower + upper) / 2);\r\n                if (this.countWorkdays(start + 1, start + mid, weekendPattern, filteredHolidays) < delta) {\r\n                    lower = mid;\r\n                }\r\n                else {\r\n                    upper = mid;\r\n                }\r\n            }\r\n            return start + upper;\r\n        }\r\n        else if (delta < 0) {\r\n            delta *= -1;\r\n            let upper = 1;\r\n            while (this.countWorkdays(start - upper, start - 1, weekendPattern, filteredHolidays) < delta) {\r\n                upper *= 2;\r\n            }\r\n            let lower = 1;\r\n            while (lower + 1 < upper) {\r\n                const mid = Math.trunc((lower + upper) / 2);\r\n                if (this.countWorkdays(start - mid, start - 1, weekendPattern, filteredHolidays) < delta) {\r\n                    lower = mid;\r\n                }\r\n                else {\r\n                    upper = mid;\r\n                }\r\n            }\r\n            return start - upper;\r\n        }\r\n        else {\r\n            return start;\r\n        }\r\n    }\r\n    countWorkdays(start, end, weekendPattern, sortedHolidays) {\r\n        const absoluteEnd = Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(end));\r\n        const absoluteStart = Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(start));\r\n        let ans = 0;\r\n        for (let i = 0; i < 7; i++) {\r\n            if (weekendPattern.charAt(i) === '0') {\r\n                ans += Math.floor((absoluteEnd + 6 - i) / 7);\r\n                ans -= Math.floor((absoluteStart - 1 + 6 - i) / 7);\r\n            }\r\n        }\r\n        ans -= lowerBound(end + 1, sortedHolidays) - lowerBound(start, sortedHolidays);\r\n        return ans;\r\n    }\r\n    simpleRangeToFilteredHolidays(weekendPattern, holidays) {\r\n        var _a;\r\n        const holidaysArr = (_a = holidays === null || holidays === void 0 ? void 0 : holidays.valuesFromTopLeftCorner()) !== null && _a !== void 0 ? _a : [];\r\n        for (const val of holidaysArr) {\r\n            if (val instanceof CellError) {\r\n                return val;\r\n            }\r\n        }\r\n        const processedHolidays = [];\r\n        for (const val of holidaysArr) {\r\n            if (val === EmptyValue) {\r\n                continue;\r\n            }\r\n            if (isExtendedNumber(val)) {\r\n                processedHolidays.push(Math.trunc(getRawValue(val)));\r\n            }\r\n            else {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n            }\r\n        }\r\n        return [...new Set(processedHolidays)].sort((a, b) => a - b)\r\n            .filter((arg) => {\r\n            const val = this.dateTimeHelper.relativeNumberToAbsoluteNumber(arg);\r\n            const i = (val - 1) % 7;\r\n            return (weekendPattern.charAt(i) === '0');\r\n        });\r\n    }\r\n}\r\nDateTimePlugin.implementedFunctions = {\r\n    'DATE': {\r\n        method: 'date',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_DATE\r\n    },\r\n    'TIME': {\r\n        method: 'time',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_TIME\r\n    },\r\n    'MONTH': {\r\n        method: 'month',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'YEAR': {\r\n        method: 'year',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'HOUR': {\r\n        method: 'hour',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'MINUTE': {\r\n        method: 'minute',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'SECOND': {\r\n        method: 'second',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'TEXT': {\r\n        method: 'text',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.STRING },\r\n        ]\r\n    },\r\n    'EOMONTH': {\r\n        method: 'eomonth',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_DATE\r\n    },\r\n    'DAY': {\r\n        method: 'day',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'DAYS': {\r\n        method: 'days',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'WEEKDAY': {\r\n        method: 'weekday',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'WEEKNUM': {\r\n        method: 'weeknum',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'ISOWEEKNUM': {\r\n        method: 'isoweeknum',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'DATEVALUE': {\r\n        method: 'datevalue',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_DATE\r\n    },\r\n    'TIMEVALUE': {\r\n        method: 'timevalue',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_TIME\r\n    },\r\n    'NOW': {\r\n        method: 'now',\r\n        parameters: [],\r\n        isVolatile: true,\r\n        returnNumberType: NumberType.NUMBER_DATETIME\r\n    },\r\n    'TODAY': {\r\n        method: 'today',\r\n        parameters: [],\r\n        isVolatile: true,\r\n        returnNumberType: NumberType.NUMBER_DATE\r\n    },\r\n    'EDATE': {\r\n        method: 'edate',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_DATE\r\n    },\r\n    'DAYS360': {\r\n        method: 'days360',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN, defaultValue: false },\r\n        ],\r\n    },\r\n    'DATEDIF': {\r\n        method: 'datedif',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.STRING },\r\n        ],\r\n    },\r\n    'YEARFRAC': {\r\n        method: 'yearfrac',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, defaultValue: 0, minValue: 0, maxValue: 4 },\r\n        ],\r\n    },\r\n    'INTERVAL': {\r\n        method: 'interval',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ],\r\n    },\r\n    'NETWORKDAYS': {\r\n        method: 'networkdays',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.RANGE, optionalArg: true }\r\n        ],\r\n    },\r\n    'NETWORKDAYS.INTL': {\r\n        method: 'networkdaysintl',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NOERROR, defaultValue: 1 },\r\n            { argumentType: FunctionArgumentType.RANGE, optionalArg: true }\r\n        ],\r\n    },\r\n    'WORKDAY': {\r\n        method: 'workday',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.RANGE, optionalArg: true }\r\n        ],\r\n    },\r\n    'WORKDAY.INTL': {\r\n        method: 'workdayintl',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NOERROR, defaultValue: 1 },\r\n            { argumentType: FunctionArgumentType.RANGE, optionalArg: true }\r\n        ],\r\n    },\r\n};\r\n/**\r\n * Returns i such that:\r\n * sortedArray[i-1] < val <= sortedArray[i]\r\n *\r\n */\r\nfunction lowerBound(val, sortedArray) {\r\n    if (sortedArray.length === 0) {\r\n        return 0;\r\n    }\r\n    if (val <= sortedArray[0]) {\r\n        return 0;\r\n    }\r\n    if (sortedArray[sortedArray.length - 1] < val) {\r\n        return sortedArray.length;\r\n    }\r\n    let lower = 0; //sortedArray[lower] < val\r\n    let upper = sortedArray.length - 1; //sortedArray[upper] >= val\r\n    while (lower + 1 < upper) {\r\n        const mid = Math.floor((upper + lower) / 2);\r\n        if (sortedArray[mid] >= val) {\r\n            upper = mid;\r\n        }\r\n        else {\r\n            lower = mid;\r\n        }\r\n    }\r\n    return upper;\r\n}\r\nfunction computeWeekendPattern(weekend) {\r\n    var _a;\r\n    if (typeof weekend !== 'number' && typeof weekend !== 'string') {\r\n        return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n    }\r\n    if (typeof weekend === 'string') {\r\n        if (weekend.length !== 7 || !/^(0|1)*$/.test(weekend) || weekend === '1111111') {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.WeekendString);\r\n        }\r\n        else {\r\n            return weekend;\r\n        }\r\n    }\r\n    else {\r\n        return (_a = workdayPatterns.get(weekend)) !== null && _a !== void 0 ? _a : new CellError(ErrorType.NUM, ErrorMessage.BadMode);\r\n    }\r\n}\r\nconst weekdayOffsets = new Map([[1, 0], [2, 1], [11, 1], [12, 2], [13, 3], [14, 4], [15, 5], [16, 6], [17, 0]]);\r\nconst workdayPatterns = new Map([\r\n    [1, '0000011'],\r\n    [2, '1000001'],\r\n    [3, '1100000'],\r\n    [4, '0110000'],\r\n    [5, '0011000'],\r\n    [6, '0001100'],\r\n    [7, '0000110'],\r\n    [11, '0000001'],\r\n    [12, '1000000'],\r\n    [13, '0100000'],\r\n    [14, '0010000'],\r\n    [15, '0001000'],\r\n    [16, '0000100'],\r\n    [17, '0000010'],\r\n]);\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class DegreesPlugin extends FunctionPlugin {\r\n    degrees(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DEGREES'), (arg) => arg * (180 / Math.PI));\r\n    }\r\n}\r\nDegreesPlugin.implementedFunctions = {\r\n    'DEGREES': {\r\n        method: 'degrees',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class DeltaPlugin extends FunctionPlugin {\r\n    delta(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DELTA'), (left, right) => (left === right ? 1 : 0));\r\n    }\r\n}\r\nDeltaPlugin.implementedFunctions = {\r\n    'DELTA': {\r\n        method: 'delta',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class ExpPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to EXP(value)\r\n     *\r\n     * Calculates the exponent for basis e\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    exp(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EXP'), Math.exp);\r\n    }\r\n}\r\nExpPlugin.implementedFunctions = {\r\n    'EXP': {\r\n        method: 'exp',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { EmptyValue, getRawValue, isExtendedNumber, NumberType } from '../InterpreterValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class FinancialPlugin extends FunctionPlugin {\r\n    pmt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PMT'), pmtCore);\r\n    }\r\n    ipmt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IPMT'), ipmtCore);\r\n    }\r\n    ppmt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PPMT'), ppmtCore);\r\n    }\r\n    fv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FV'), fvCore);\r\n    }\r\n    cumipmt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CUMIPMT'), (rate, periods, value, start, end, type) => {\r\n            if (start > end) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.EndStartPeriod);\r\n            }\r\n            let acc = 0;\r\n            for (let i = start; i <= end; i++) {\r\n                acc += ipmtCore(rate, i, periods, value, 0, type);\r\n            }\r\n            return acc;\r\n        });\r\n    }\r\n    cumprinc(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CUMPRINC'), (rate, periods, value, start, end, type) => {\r\n            if (start > end) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.EndStartPeriod);\r\n            }\r\n            let acc = 0;\r\n            for (let i = start; i <= end; i++) {\r\n                acc += ppmtCore(rate, i, periods, value, 0, type);\r\n            }\r\n            return acc;\r\n        });\r\n    }\r\n    db(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DB'), (cost, salvage, life, period, month) => {\r\n            if ((month === 12 && period > life) || (period > life + 1)) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.PeriodLong);\r\n            }\r\n            if (salvage >= cost) {\r\n                return 0;\r\n            }\r\n            const rate = Math.round((1 - Math.pow(salvage / cost, 1 / life)) * 1000) / 1000;\r\n            const initial = cost * rate * month / 12;\r\n            if (period === 1) {\r\n                return initial;\r\n            }\r\n            let total = initial;\r\n            for (let i = 0; i < period - 2; i++) {\r\n                total += (cost - total) * rate;\r\n            }\r\n            if (period === life + 1) {\r\n                return (cost - total) * rate * (12 - month) / 12;\r\n            }\r\n            return (cost - total) * rate;\r\n        });\r\n    }\r\n    ddb(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DDB'), (cost, salvage, life, period, factor) => {\r\n            if (period > life) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            let rate = factor / life;\r\n            let oldValue;\r\n            if (rate >= 1) {\r\n                rate = 1;\r\n                if (period === 1) {\r\n                    oldValue = cost;\r\n                }\r\n                else {\r\n                    oldValue = 0;\r\n                }\r\n            }\r\n            else {\r\n                oldValue = cost * Math.pow(1 - rate, period - 1);\r\n            }\r\n            const newValue = cost * Math.pow(1 - rate, period);\r\n            return Math.max(oldValue - Math.max(salvage, newValue), 0);\r\n        });\r\n    }\r\n    dollarde(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DOLLARDE'), (dollar, fraction) => {\r\n            if (fraction < 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            fraction = Math.trunc(fraction);\r\n            while (fraction > 10) {\r\n                fraction /= 10;\r\n            }\r\n            return Math.trunc(dollar) + (dollar - Math.trunc(dollar)) * 10 / fraction;\r\n        });\r\n    }\r\n    dollarfr(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DOLLARFR'), (dollar, fraction) => {\r\n            if (fraction < 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            fraction = Math.trunc(fraction);\r\n            while (fraction > 10) {\r\n                fraction /= 10;\r\n            }\r\n            return Math.trunc(dollar) + (dollar - Math.trunc(dollar)) * fraction / 10;\r\n        });\r\n    }\r\n    effect(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EFFECT'), (rate, periods) => {\r\n            periods = Math.trunc(periods);\r\n            return Math.pow(1 + rate / periods, periods) - 1;\r\n        });\r\n    }\r\n    ispmt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISPMT'), (rate, period, periods, value) => {\r\n            if (periods === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return value * rate * (period / periods - 1);\r\n        });\r\n    }\r\n    nominal(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NOMINAL'), (rate, periods) => {\r\n            periods = Math.trunc(periods);\r\n            return (Math.pow(rate + 1, 1 / periods) - 1) * periods;\r\n        });\r\n    }\r\n    nper(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NPER'), (rate, payment, present, future, type) => {\r\n            if (rate === 0) {\r\n                if (payment === 0) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO);\r\n                }\r\n                return (-present - future) / payment;\r\n            }\r\n            if (type) {\r\n                payment *= 1 + rate;\r\n            }\r\n            return Math.log((payment - future * rate) / (present * rate + payment)) / Math.log(1 + rate);\r\n        });\r\n    }\r\n    rate(ast, state) {\r\n        // Newton's method: https://en.wikipedia.org/wiki/Newton%27s_method\r\n        return this.runFunction(ast.args, state, this.metadata('RATE'), (periods, payment, present, future, type, guess) => {\r\n            if (guess <= -1) {\r\n                return new CellError(ErrorType.VALUE);\r\n            }\r\n            const epsMax = 1e-7;\r\n            const iterMax = 50;\r\n            let rate = guess;\r\n            type = type ? 1 : 0;\r\n            for (let i = 0; i < iterMax; i++) {\r\n                if (rate <= -1) {\r\n                    return new CellError(ErrorType.NUM);\r\n                }\r\n                let y;\r\n                if (Math.abs(rate) < epsMax) {\r\n                    y = present * (1 + periods * rate) + payment * (1 + rate * type) * periods + future;\r\n                }\r\n                else {\r\n                    const f = Math.pow(1 + rate, periods);\r\n                    y = present * f + payment * (1 / rate + type) * (f - 1) + future;\r\n                }\r\n                if (Math.abs(y) < epsMax) {\r\n                    return rate;\r\n                }\r\n                let dy;\r\n                if (Math.abs(rate) < epsMax) {\r\n                    dy = present * periods + payment * type * periods;\r\n                }\r\n                else {\r\n                    const f = Math.pow(1 + rate, periods);\r\n                    const df = periods * Math.pow(1 + rate, periods - 1);\r\n                    dy = present * df + payment * (1 / rate + type) * df + payment * (-1 / (rate * rate)) * (f - 1);\r\n                }\r\n                rate -= y / dy;\r\n            }\r\n            return new CellError(ErrorType.NUM);\r\n        });\r\n    }\r\n    pv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PV'), (rate, periods, payment, future, type) => {\r\n            type = type ? 1 : 0;\r\n            if (rate === -1) {\r\n                if (periods === 0) {\r\n                    return new CellError(ErrorType.NUM);\r\n                }\r\n                else {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO);\r\n                }\r\n            }\r\n            if (rate === 0) {\r\n                return -payment * periods - future;\r\n            }\r\n            else {\r\n                return ((1 - Math.pow(1 + rate, periods)) * payment * (1 + rate * type) / rate - future) / Math.pow(1 + rate, periods);\r\n            }\r\n        });\r\n    }\r\n    rri(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('RRI'), (periods, present, future) => {\r\n            if (present === 0 || (future < 0 && present > 0) || (future > 0 && present < 0)) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            return Math.pow(future / present, 1 / periods) - 1;\r\n        });\r\n    }\r\n    sln(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SLN'), (cost, salvage, life) => {\r\n            if (life === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return (cost - salvage) / life;\r\n        });\r\n    }\r\n    syd(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SYD'), (cost, salvage, life, period) => {\r\n            if (period > life) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            return ((cost - salvage) * (life - period + 1) * 2) / (life * (life + 1));\r\n        });\r\n    }\r\n    tbilleq(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TBILLEQ'), (settlement, maturity, discount) => {\r\n            settlement = Math.round(settlement);\r\n            maturity = Math.round(maturity);\r\n            if (settlement >= maturity) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            const startDate = this.dateTimeHelper.numberToSimpleDate(settlement);\r\n            const endDate = this.dateTimeHelper.numberToSimpleDate(maturity);\r\n            if (endDate.year > startDate.year + 1 || (endDate.year === startDate.year + 1 && (endDate.month > startDate.month || (endDate.month === startDate.month && endDate.day > startDate.day)))) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            const denom = 360 - discount * (maturity - settlement);\r\n            if (denom === 0) {\r\n                return 0;\r\n            }\r\n            if (denom < 0) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            return 365 * discount / denom;\r\n        });\r\n    }\r\n    tbillprice(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TBILLPRICE'), (settlement, maturity, discount) => {\r\n            settlement = Math.round(settlement);\r\n            maturity = Math.round(maturity);\r\n            if (settlement >= maturity) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            const startDate = this.dateTimeHelper.numberToSimpleDate(settlement);\r\n            const endDate = this.dateTimeHelper.numberToSimpleDate(maturity);\r\n            if (endDate.year > startDate.year + 1 || (endDate.year === startDate.year + 1 && (endDate.month > startDate.month || (endDate.month === startDate.month && endDate.day > startDate.day)))) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            const denom = 360 - discount * (maturity - settlement);\r\n            if (denom === 0) {\r\n                return 0;\r\n            }\r\n            if (denom < 0) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            return 100 * (1 - discount * (maturity - settlement) / 360);\r\n        });\r\n    }\r\n    tbillyield(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TBILLYIELD'), (settlement, maturity, price) => {\r\n            settlement = Math.round(settlement);\r\n            maturity = Math.round(maturity);\r\n            if (settlement >= maturity) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            const startDate = this.dateTimeHelper.numberToSimpleDate(settlement);\r\n            const endDate = this.dateTimeHelper.numberToSimpleDate(maturity);\r\n            if (endDate.year > startDate.year + 1 || (endDate.year === startDate.year + 1 && (endDate.month > startDate.month || (endDate.month === startDate.month && endDate.day > startDate.day)))) {\r\n                return new CellError(ErrorType.NUM);\r\n            }\r\n            return (100 - price) * 360 / (price * (maturity - settlement));\r\n        });\r\n    }\r\n    fvschedule(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FVSCHEDULE'), (value, ratios) => {\r\n            const vals = ratios.valuesFromTopLeftCorner();\r\n            for (const val of vals) {\r\n                if (val instanceof CellError) {\r\n                    return val;\r\n                }\r\n            }\r\n            for (const val of vals) {\r\n                if (isExtendedNumber(val)) {\r\n                    value *= 1 + getRawValue(val);\r\n                }\r\n                else if (val !== EmptyValue) {\r\n                    return new CellError(ErrorType.VALUE, ErrorMessage.NumberExpected);\r\n                }\r\n            }\r\n            return value;\r\n        });\r\n    }\r\n    npv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NPV'), (rate, ...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            return npvCore(rate, coerced);\r\n        });\r\n    }\r\n    mirr(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MIRR'), (range, frate, rrate) => {\r\n            const vals = this.arithmeticHelper.manyToExactNumbers(range.valuesFromTopLeftCorner());\r\n            if (vals instanceof CellError) {\r\n                return vals;\r\n            }\r\n            let posFlag = false;\r\n            let negFlag = false;\r\n            const posValues = [];\r\n            const negValues = [];\r\n            for (const val of vals) {\r\n                if (val > 0) {\r\n                    posFlag = true;\r\n                    posValues.push(val);\r\n                    negValues.push(0);\r\n                }\r\n                else if (val < 0) {\r\n                    negFlag = true;\r\n                    negValues.push(val);\r\n                    posValues.push(0);\r\n                }\r\n                else {\r\n                    negValues.push(0);\r\n                    posValues.push(0);\r\n                }\r\n            }\r\n            if (!posFlag || !negFlag) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            const n = vals.length;\r\n            const nom = npvCore(rrate, posValues);\r\n            if (nom instanceof CellError) {\r\n                return nom;\r\n            }\r\n            const denom = npvCore(frate, negValues);\r\n            if (denom instanceof CellError) {\r\n                return denom;\r\n            }\r\n            return Math.pow((-nom * Math.pow(1 + rrate, n) / denom / (1 + frate)), 1 / (n - 1)) - 1;\r\n        });\r\n    }\r\n    pduration(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PDURATION'), (rate, pv, fv) => (Math.log(fv) - Math.log(pv)) / Math.log(1 + rate));\r\n    }\r\n    xnpv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('XNPV'), (rate, values, dates) => {\r\n            const valArr = values.valuesFromTopLeftCorner();\r\n            for (const val of valArr) {\r\n                if (typeof val !== 'number') {\r\n                    return new CellError(ErrorType.VALUE, ErrorMessage.NumberExpected);\r\n                }\r\n            }\r\n            const valArrNum = valArr;\r\n            const dateArr = dates.valuesFromTopLeftCorner();\r\n            for (const date of dateArr) {\r\n                if (typeof date !== 'number') {\r\n                    return new CellError(ErrorType.VALUE, ErrorMessage.NumberExpected);\r\n                }\r\n            }\r\n            const dateArrNum = dateArr;\r\n            if (dateArrNum.length !== valArrNum.length) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.EqualLength);\r\n            }\r\n            const n = dateArrNum.length;\r\n            let ret = 0;\r\n            if (dateArrNum[0] < 0) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n            }\r\n            for (let i = 0; i < n; i++) {\r\n                dateArrNum[i] = Math.floor(dateArrNum[i]);\r\n                if (dateArrNum[i] < dateArrNum[0]) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                }\r\n                ret += valArrNum[i] / Math.pow(1 + rate, (dateArrNum[i] - dateArrNum[0]) / 365);\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n}\r\nFinancialPlugin.implementedFunctions = {\r\n    'PMT': {\r\n        method: 'pmt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'IPMT': {\r\n        method: 'ipmt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'PPMT': {\r\n        method: 'ppmt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'FV': {\r\n        method: 'fv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'CUMIPMT': {\r\n        method: 'cumipmt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0, maxValue: 1 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'CUMPRINC': {\r\n        method: 'cumprinc',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0, maxValue: 1 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'DB': {\r\n        method: 'db',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1, maxValue: 12, defaultValue: 12 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'DDB': {\r\n        method: 'ddb',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, defaultValue: 2 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'DOLLARDE': {\r\n        method: 'dollarde',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ],\r\n    },\r\n    'DOLLARFR': {\r\n        method: 'dollarfr',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ],\r\n    },\r\n    'EFFECT': {\r\n        method: 'effect',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'ISPMT': {\r\n        method: 'ispmt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'NOMINAL': {\r\n        method: 'nominal',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'NPER': {\r\n        method: 'nper',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n    },\r\n    'PV': {\r\n        method: 'pv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'RATE': {\r\n        method: 'rate',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0.1 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'RRI': {\r\n        method: 'rri',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'SLN': {\r\n        method: 'sln',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'SYD': {\r\n        method: 'syd',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'TBILLEQ': {\r\n        method: 'tbilleq',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'TBILLPRICE': {\r\n        method: 'tbillprice',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'TBILLYIELD': {\r\n        method: 'tbillyield',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'FVSCHEDULE': {\r\n        method: 'fvschedule',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'NPV': {\r\n        method: 'npv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n        returnNumberType: NumberType.NUMBER_CURRENCY\r\n    },\r\n    'MIRR': {\r\n        method: 'mirr',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        returnNumberType: NumberType.NUMBER_PERCENT\r\n    },\r\n    'PDURATION': {\r\n        method: 'pduration',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ],\r\n    },\r\n    'XNPV': {\r\n        method: 'xnpv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: -1 },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n};\r\nfunction pmtCore(rate, periods, present, future, type) {\r\n    if (rate === 0) {\r\n        return (-present - future) / periods;\r\n    }\r\n    else {\r\n        const term = Math.pow(1 + rate, periods);\r\n        return (future * rate + present * rate * term) * (type ? 1 / (1 + rate) : 1) / (1 - term);\r\n    }\r\n}\r\nfunction ipmtCore(rate, period, periods, present, future, type) {\r\n    const payment = pmtCore(rate, periods, present, future, type);\r\n    if (period === 1) {\r\n        return rate * (type ? 0 : -present);\r\n    }\r\n    else {\r\n        return rate * (type ? fvCore(rate, period - 2, payment, present, type) - payment : fvCore(rate, period - 1, payment, present, type));\r\n    }\r\n}\r\nfunction fvCore(rate, periods, payment, value, type) {\r\n    if (rate === 0) {\r\n        return -value - payment * periods;\r\n    }\r\n    else {\r\n        const term = Math.pow(1 + rate, periods);\r\n        return payment * (type ? (1 + rate) : 1) * (1 - term) / rate - value * term;\r\n    }\r\n}\r\nfunction ppmtCore(rate, period, periods, present, future, type) {\r\n    return pmtCore(rate, periods, present, future, type) - ipmtCore(rate, period, periods, present, future, type);\r\n}\r\nfunction npvCore(rate, args) {\r\n    let acc = 0;\r\n    for (let i = args.length - 1; i >= 0; i--) {\r\n        acc += args[i];\r\n        if (rate === -1) {\r\n            if (acc === 0) {\r\n                continue;\r\n            }\r\n            else {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n        }\r\n        acc /= 1 + rate;\r\n    }\r\n    return acc;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionPlugin } from '../index';\r\nimport { FunctionArgumentType } from './FunctionPlugin';\r\nexport class FormulaTextPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to FORMULATEXT(value)\r\n     *\r\n     * Returns a formula in a given cell as a string.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    formulatext(ast, state) {\r\n        return this.runFunctionWithReferenceArgument(ast.args, state, this.metadata('FORMULATEXT'), () => new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber), (cellReference) => { var _a; return (_a = this.serialization.getCellFormula(cellReference)) !== null && _a !== void 0 ? _a : new CellError(ErrorType.NA, ErrorMessage.Formula); });\r\n    }\r\n}\r\nFormulaTextPlugin.implementedFunctions = {\r\n    'FORMULATEXT': {\r\n        method: 'formulatext',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR }\r\n        ],\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        isDependentOnSheetStructureChange: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { FormulaVertex } from '../../DependencyGraph/FormulaCellVertex';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { AstNodeType } from '../../parser';\r\nimport { EmptyValue, isExtendedNumber } from '../InterpreterValue';\r\nimport { SimpleRangeValue } from '../../SimpleRangeValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing information functions\r\n */\r\nexport class InformationPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to ISBINARY(value)\r\n     *\r\n     * Returns true if provided value is a valid binary number\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isbinary(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISBINARY'), (arg) => /^[01]{1,10}$/.test(arg));\r\n    }\r\n    /**\r\n     * Corresponds to ISERR(value)\r\n     *\r\n     * Returns true if provided value is an error except #N/A!\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    iserr(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISERR'), (arg) => (arg instanceof CellError && arg.type !== ErrorType.NA));\r\n    }\r\n    /**\r\n     * Corresponds to ISERROR(value)\r\n     *\r\n     * Checks whether provided value is an error\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    iserror(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISERROR'), (arg) => (arg instanceof CellError));\r\n    }\r\n    /**\r\n     * Corresponds to ISFORMULA(value)\r\n     *\r\n     * Checks whether referenced cell is a formula\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isformula(ast, state) {\r\n        return this.runFunctionWithReferenceArgument(ast.args, state, this.metadata('ISFORMULA'), () => new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber), (reference) => {\r\n            const vertex = this.dependencyGraph.addressMapping.getCell(reference);\r\n            return vertex instanceof FormulaVertex;\r\n        });\r\n    }\r\n    /**\r\n     * Corresponds to ISBLANK(value)\r\n     *\r\n     * Checks whether provided cell reference is empty\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isblank(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISBLANK'), (arg) => (arg === EmptyValue));\r\n    }\r\n    /**\r\n     * Corresponds to ISNA(value)\r\n     *\r\n     * Returns true if provided value is #N/A! error\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isna(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISNA'), (arg) => (arg instanceof CellError && arg.type == ErrorType.NA));\r\n    }\r\n    /**\r\n     * Corresponds to ISNUMBER(value)\r\n     *\r\n     * Checks whether provided cell reference is a number\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isnumber(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISNUMBER'), isExtendedNumber);\r\n    }\r\n    /**\r\n     * Corresponds to ISLOGICAL(value)\r\n     *\r\n     * Checks whether provided cell reference is of logical type\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    islogical(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISLOGICAL'), (arg) => (typeof arg === 'boolean'));\r\n    }\r\n    /**\r\n     * Corresponds to ISREF(value)\r\n     *\r\n     * Returns true if provided value is #REF! error\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isref(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISREF'), (arg) => (arg instanceof CellError && (arg.type == ErrorType.REF || arg.type == ErrorType.CYCLE)));\r\n    }\r\n    /**\r\n     * Corresponds to ISTEXT(value)\r\n     *\r\n     * Checks whether provided cell reference is of logical type\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    istext(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISTEXT'), (arg) => (typeof arg === 'string'));\r\n    }\r\n    /**\r\n     * Corresponds to ISNONTEXT(value)\r\n     *\r\n     * Checks whether provided cell reference is of logical type\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    isnontext(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISNONTEXT'), (arg) => !(typeof arg === 'string'));\r\n    }\r\n    /**\r\n     * Corresponds to COLUMN(reference)\r\n     *\r\n     * Returns column number of a reference or a formula cell if reference not provided\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    column(ast, state) {\r\n        return this.runFunctionWithReferenceArgument(ast.args, state, this.metadata('COLUMN'), () => state.formulaAddress.col + 1, (reference) => reference.col + 1);\r\n    }\r\n    /**\r\n     * Corresponds to COLUMNS(range)\r\n     *\r\n     * Returns number of columns in provided range of cells\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    columns(ast, state) {\r\n        if (ast.args.length !== 1) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber);\r\n        }\r\n        if (ast.args.some((astIt) => astIt.type === AstNodeType.EMPTY)) {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.EmptyArg);\r\n        }\r\n        let argAst = ast.args[0];\r\n        while (argAst.type === AstNodeType.PARENTHESIS) {\r\n            argAst = argAst.expression;\r\n        }\r\n        if (argAst.type === AstNodeType.CELL_RANGE || argAst.type === AstNodeType.COLUMN_RANGE) {\r\n            return argAst.end.col - argAst.start.col + 1;\r\n        }\r\n        else if (argAst.type === AstNodeType.CELL_REFERENCE) {\r\n            return 1;\r\n        }\r\n        else if (argAst.type === AstNodeType.ROW_RANGE) {\r\n            return this.config.maxColumns;\r\n        }\r\n        else {\r\n            const val = this.evaluateAst(argAst, state);\r\n            if (val instanceof SimpleRangeValue) {\r\n                return val.width();\r\n            }\r\n            else if (val instanceof CellError) {\r\n                return val;\r\n            }\r\n            else {\r\n                return 1;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Corresponds to ROW(reference)\r\n     *\r\n     * Returns row number of a reference or a formula cell if reference not provided\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    row(ast, state) {\r\n        return this.runFunctionWithReferenceArgument(ast.args, state, this.metadata('ROW'), () => state.formulaAddress.row + 1, (reference) => reference.row + 1);\r\n    }\r\n    /**\r\n     * Corresponds to ROWS(range)\r\n     *\r\n     * Returns number of rows in provided range of cells\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    rows(ast, state) {\r\n        if (ast.args.length !== 1) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber);\r\n        }\r\n        if (ast.args.some((astIt) => astIt.type === AstNodeType.EMPTY)) {\r\n            return new CellError(ErrorType.NUM, ErrorMessage.EmptyArg);\r\n        }\r\n        let argAst = ast.args[0];\r\n        while (argAst.type === AstNodeType.PARENTHESIS) {\r\n            argAst = argAst.expression;\r\n        }\r\n        if (argAst.type === AstNodeType.CELL_RANGE || argAst.type === AstNodeType.ROW_RANGE) {\r\n            return argAst.end.row - argAst.start.row + 1;\r\n        }\r\n        else if (argAst.type === AstNodeType.CELL_REFERENCE) {\r\n            return 1;\r\n        }\r\n        else if (argAst.type === AstNodeType.COLUMN_RANGE) {\r\n            return this.config.maxRows;\r\n        }\r\n        else {\r\n            const val = this.evaluateAst(argAst, state);\r\n            if (val instanceof SimpleRangeValue) {\r\n                return val.height();\r\n            }\r\n            else if (val instanceof CellError) {\r\n                return val;\r\n            }\r\n            else {\r\n                return 1;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Corresponds to INDEX\r\n     *\r\n     * Returns specific position in 2d array.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    index(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('INDEX'), (rangeValue, row, col) => {\r\n            var _a, _b, _c, _d, _e, _f;\r\n            if (col < 1 || row < 1) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LessThanOne);\r\n            }\r\n            if (col > rangeValue.width() || row > rangeValue.height()) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            return (_f = (_c = (_b = (_a = rangeValue === null || rangeValue === void 0 ? void 0 : rangeValue.data) === null || _a === void 0 ? void 0 : _a[row - 1]) === null || _b === void 0 ? void 0 : _b[col - 1]) !== null && _c !== void 0 ? _c : (_e = (_d = rangeValue === null || rangeValue === void 0 ? void 0 : rangeValue.data) === null || _d === void 0 ? void 0 : _d[0]) === null || _e === void 0 ? void 0 : _e[0]) !== null && _f !== void 0 ? _f : new CellError(ErrorType.VALUE, ErrorMessage.CellRangeExpected);\r\n        });\r\n    }\r\n    /**\r\n     * Corresponds to NA()\r\n     *\r\n     * Returns #N/A!\r\n     *\r\n     * @param _ast\r\n     * @param _state\r\n     */\r\n    na(_ast, _state) {\r\n        return new CellError(ErrorType.NA);\r\n    }\r\n    /**\r\n     * Corresponds to SHEET(value)\r\n     *\r\n     * Returns sheet number of a given value or a formula sheet number if no argument is provided\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    sheet(ast, state) {\r\n        return this.runFunctionWithReferenceArgument(ast.args, state, this.metadata('SHEET'), () => state.formulaAddress.sheet + 1, (reference) => reference.sheet + 1, (value) => {\r\n            const sheetNumber = this.dependencyGraph.sheetMapping.get(value);\r\n            if (sheetNumber !== undefined) {\r\n                return sheetNumber + 1;\r\n            }\r\n            else {\r\n                return new CellError(ErrorType.NA, ErrorMessage.SheetRef);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Corresponds to SHEETS(value)\r\n     *\r\n     * Returns number of sheet of a given reference or number of all sheets in workbook when no argument is provided.\r\n     * It returns always 1 for a valid reference as 3D references are not supported.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    sheets(ast, state) {\r\n        return this.runFunctionWithReferenceArgument(ast.args, state, this.metadata('SHEETS'), () => this.dependencyGraph.sheetMapping.numberOfSheets(), // return number of sheets if no argument\r\n        () => 1, // return 1 for valid reference\r\n        () => new CellError(ErrorType.VALUE, ErrorMessage.CellRefExpected) // error otherwise\r\n        );\r\n    }\r\n}\r\nInformationPlugin.implementedFunctions = {\r\n    'COLUMN': {\r\n        method: 'column',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, optionalArg: true }\r\n        ],\r\n        isDependentOnSheetStructureChange: true,\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n    'COLUMNS': {\r\n        method: 'columns',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE }\r\n        ],\r\n        isDependentOnSheetStructureChange: true,\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n    'ISBINARY': {\r\n        method: 'isbinary',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'ISERR': {\r\n        method: 'iserr',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISFORMULA': {\r\n        method: 'isformula',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR }\r\n        ],\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n    'ISNA': {\r\n        method: 'isna',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISREF': {\r\n        method: 'isref',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ],\r\n        vectorizationForbidden: true,\r\n    },\r\n    'ISERROR': {\r\n        method: 'iserror',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISBLANK': {\r\n        method: 'isblank',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISNUMBER': {\r\n        method: 'isnumber',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISLOGICAL': {\r\n        method: 'islogical',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISTEXT': {\r\n        method: 'istext',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'ISNONTEXT': {\r\n        method: 'isnontext',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'INDEX': {\r\n        method: 'index',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'NA': {\r\n        method: 'na',\r\n        parameters: [],\r\n    },\r\n    'ROW': {\r\n        method: 'row',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, optionalArg: true }\r\n        ],\r\n        isDependentOnSheetStructureChange: true,\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n    'ROWS': {\r\n        method: 'rows',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE }\r\n        ],\r\n        isDependentOnSheetStructureChange: true,\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n    'SHEET': {\r\n        method: 'sheet',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ],\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    },\r\n    'SHEETS': {\r\n        method: 'sheets',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ],\r\n        doesNotNeedArgumentsToBeComputed: true,\r\n        vectorizationForbidden: true,\r\n    }\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class IsEvenPlugin extends FunctionPlugin {\r\n    iseven(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISEVEN'), (val) => (val % 2 === 0));\r\n    }\r\n}\r\nIsEvenPlugin.implementedFunctions = {\r\n    'ISEVEN': {\r\n        method: 'iseven',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class IsOddPlugin extends FunctionPlugin {\r\n    isodd(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ISODD'), (val) => (val % 2 === 1));\r\n    }\r\n}\r\nIsOddPlugin.implementedFunctions = {\r\n    'ISODD': {\r\n        method: 'isodd',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class LogarithmPlugin extends FunctionPlugin {\r\n    log10(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LOG10'), Math.log10);\r\n    }\r\n    log(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LOG'), (arg, base) => Math.log(arg) / Math.log(base));\r\n    }\r\n    ln(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LN'), Math.log);\r\n    }\r\n}\r\nLogarithmPlugin.implementedFunctions = {\r\n    'LOG10': {\r\n        method: 'log10',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'LOG': {\r\n        method: 'log',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 10, greaterThan: 0 },\r\n        ]\r\n    },\r\n    'LN': {\r\n        method: 'ln',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport const PI = parseFloat(Math.PI.toFixed(14));\r\nexport class MathConstantsPlugin extends FunctionPlugin {\r\n    pi(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PI'), () => PI);\r\n    }\r\n    sqrtpi(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SQRTPI'), (arg) => Math.sqrt(PI * arg));\r\n    }\r\n}\r\nMathConstantsPlugin.implementedFunctions = {\r\n    'PI': {\r\n        method: 'pi',\r\n        parameters: [],\r\n    },\r\n    'SQRTPI': {\r\n        method: 'sqrtpi',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 }\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { ArraySize } from '../../ArraySize';\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { AstNodeType } from '../../parser';\r\nimport { InterpreterState } from '../InterpreterState';\r\nimport { SimpleRangeValue } from '../../SimpleRangeValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nfunction arraySizeForMultiplication(leftArraySize, rightArraySize) {\r\n    return new ArraySize(rightArraySize.width, leftArraySize.height);\r\n}\r\nfunction arraySizeForPoolFunction(inputArray, windowSize, stride) {\r\n    return new ArraySize(1 + (inputArray.width - windowSize) / stride, 1 + (inputArray.height - windowSize) / stride);\r\n}\r\nexport class MatrixPlugin extends FunctionPlugin {\r\n    mmult(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MMULT'), (leftMatrix, rightMatrix) => {\r\n            if (!leftMatrix.hasOnlyNumbers() || !rightMatrix.hasOnlyNumbers()) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NumberRange);\r\n            }\r\n            if (rightMatrix.height() !== leftMatrix.width()) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.ArrayDimensions);\r\n            }\r\n            const outputSize = arraySizeForMultiplication(leftMatrix.size, rightMatrix.size);\r\n            const result = this.createKernel(function (a, b, width) {\r\n                let sum = 0;\r\n                for (let i = 0; i < width; ++i) {\r\n                    sum += a[this.thread.y][i] * b[i][this.thread.x];\r\n                }\r\n                return sum;\r\n            }, outputSize)(leftMatrix.rawNumbers(), rightMatrix.rawNumbers(), leftMatrix.width());\r\n            return SimpleRangeValue.onlyNumbers(result);\r\n        });\r\n    }\r\n    mmultArraySize(ast, state) {\r\n        if (ast.args.length !== 2) {\r\n            return ArraySize.error();\r\n        }\r\n        const metadata = this.metadata('MMULT');\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.arraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        const [left, right] = subChecks;\r\n        return arraySizeForMultiplication(left, right);\r\n    }\r\n    maxpool(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MAXPOOL'), (matrix, windowSize, stride = windowSize) => {\r\n            if (!matrix.hasOnlyNumbers()) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NumberRange);\r\n            }\r\n            const outputSize = arraySizeForPoolFunction(matrix.size, windowSize, stride);\r\n            const result = this.createKernel(function (a, windowSize, stride) {\r\n                const leftCornerX = this.thread.x * stride;\r\n                const leftCornerY = this.thread.y * stride;\r\n                let currentMax = a[leftCornerY][leftCornerX];\r\n                for (let i = 0; i < windowSize; i++) {\r\n                    for (let j = 0; j < windowSize; j++) {\r\n                        currentMax = Math.max(currentMax, a[leftCornerY + i][leftCornerX + j]);\r\n                    }\r\n                }\r\n                return currentMax;\r\n            }, outputSize)(matrix.rawNumbers(), windowSize, stride);\r\n            return SimpleRangeValue.onlyNumbers(result);\r\n        });\r\n    }\r\n    medianpool(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MEDIANPOOL'), (matrix, windowSize, stride = windowSize) => {\r\n            if (!matrix.hasOnlyNumbers()) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NumberRange);\r\n            }\r\n            const outputSize = arraySizeForPoolFunction(matrix.size, windowSize, stride);\r\n            const result = this.createKernel(function (a, windowSize, stride) {\r\n                const leftCornerX = this.thread.x * stride;\r\n                const leftCornerY = this.thread.y * stride;\r\n                let currentMax = a[leftCornerY][leftCornerX];\r\n                for (let i = 0; i < windowSize; i++) {\r\n                    for (let j = 0; j < windowSize; j++) {\r\n                        currentMax = Math.max(currentMax, a[leftCornerY + i][leftCornerX + j]);\r\n                    }\r\n                }\r\n                let currentMin = a[leftCornerY][leftCornerX];\r\n                for (let i2 = 0; i2 < windowSize; i2++) {\r\n                    for (let j2 = 0; j2 < windowSize; j2++) {\r\n                        currentMin = Math.min(currentMin, a[leftCornerY + i2][leftCornerX + j2]);\r\n                    }\r\n                }\r\n                const numberOfElements = windowSize * windowSize;\r\n                let leftEnd = currentMin;\r\n                let rightEnd = currentMax;\r\n                let result = 42;\r\n                for (let iter = 0; iter < 32; iter++) {\r\n                    const medianGuess = (leftEnd + rightEnd) / 2;\r\n                    let medianGuessCount = 0;\r\n                    for (let i3 = 0; i3 < windowSize; i3++) {\r\n                        for (let j3 = 0; j3 < windowSize; j3++) {\r\n                            if (a[leftCornerY + i3][leftCornerX + j3] > medianGuess) {\r\n                                medianGuessCount++;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (windowSize % 2 === 0) {\r\n                        if (medianGuessCount === numberOfElements / 2) {\r\n                            result = medianGuess;\r\n                            break;\r\n                        }\r\n                        else if (medianGuessCount > numberOfElements / 2) {\r\n                            leftEnd = medianGuess;\r\n                        }\r\n                        else {\r\n                            rightEnd = medianGuess;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (medianGuessCount === (numberOfElements - 1) / 2) {\r\n                            result = medianGuess;\r\n                            break;\r\n                        }\r\n                        else if (medianGuessCount > (numberOfElements - 1) / 2) {\r\n                            leftEnd = medianGuess;\r\n                        }\r\n                        else {\r\n                            rightEnd = medianGuess;\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            }, outputSize)(matrix.rawNumbers(), windowSize, stride);\r\n            return SimpleRangeValue.onlyNumbers(result);\r\n        });\r\n    }\r\n    maxpoolArraySize(ast, state) {\r\n        if (ast.args.length < 2 || ast.args.length > 3) {\r\n            return ArraySize.error();\r\n        }\r\n        const metadata = this.metadata('MAXPOOL');\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.arraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        const array = subChecks[0];\r\n        const windowArg = ast.args[1];\r\n        let window;\r\n        if (windowArg.type === AstNodeType.NUMBER) {\r\n            window = windowArg.value;\r\n        }\r\n        else {\r\n            window = 1;\r\n        }\r\n        let stride = window;\r\n        if (ast.args.length === 3) {\r\n            const strideArg = ast.args[2];\r\n            if (strideArg.type === AstNodeType.NUMBER) {\r\n                stride = strideArg.value;\r\n            }\r\n            else {\r\n                stride = 1;\r\n            }\r\n        }\r\n        if (window > array.width || window > array.height\r\n            || stride > window\r\n            || (array.width - window) % stride !== 0 || (array.height - window) % stride !== 0) {\r\n            return ArraySize.error();\r\n        }\r\n        return arraySizeForPoolFunction(array, window, stride);\r\n    }\r\n    medianpoolArraySize(ast, state) {\r\n        return this.maxpoolArraySize(ast, state);\r\n    }\r\n    transpose(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TRANSPOSE'), (matrix) => {\r\n            const input = matrix.rawData();\r\n            const inputSize = matrix.size;\r\n            const result = [];\r\n            for (let i = 0; i < inputSize.width; ++i) {\r\n                result[i] = [];\r\n                for (let j = 0; j < inputSize.height; ++j) {\r\n                    result[i][j] = input[j][i];\r\n                }\r\n            }\r\n            return SimpleRangeValue.onlyValues(result);\r\n        });\r\n    }\r\n    transposeArraySize(ast, state) {\r\n        if (ast.args.length !== 1) {\r\n            return ArraySize.error();\r\n        }\r\n        const metadata = this.metadata('MMULT');\r\n        const subChecks = ast.args.map((arg) => { var _a; return this.arraySizeForAst(arg, new InterpreterState(state.formulaAddress, state.arraysFlag || ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.arrayFunction) !== null && _a !== void 0 ? _a : false))); });\r\n        const [size] = subChecks;\r\n        return new ArraySize(size.height, size.width);\r\n    }\r\n    createKernel(kernel, outputSize) {\r\n        return function (...args) {\r\n            const result = [];\r\n            for (let y = 0; y < outputSize.height; ++y) {\r\n                result.push([]);\r\n                for (let x = 0; x < outputSize.width; ++x) {\r\n                    result[y][x] = kernel.apply({ thread: { x, y } }, args);\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n}\r\nMatrixPlugin.implementedFunctions = {\r\n    'MMULT': {\r\n        method: 'mmult',\r\n        arraySizeMethod: 'mmultArraySize',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n        vectorizationForbidden: true,\r\n    },\r\n    'TRANSPOSE': {\r\n        method: 'transpose',\r\n        arraySizeMethod: 'transposeArraySize',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n        vectorizationForbidden: true,\r\n    },\r\n    'MAXPOOL': {\r\n        method: 'maxpool',\r\n        arraySizeMethod: 'maxpoolArraySize',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true },\r\n        ],\r\n        vectorizationForbidden: true,\r\n    },\r\n    'MEDIANPOOL': {\r\n        method: 'medianpool',\r\n        arraySizeMethod: 'medianpoolArraySize',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true },\r\n        ],\r\n        vectorizationForbidden: true,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing MEDIAN function\r\n */\r\nexport class MedianPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to MEDIAN(Number1, Number2, ...).\r\n     *\r\n     * Returns a median of given numbers.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    median(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MEDIAN'), (...args) => {\r\n            const values = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (values instanceof CellError) {\r\n                return values;\r\n            }\r\n            if (values.length === 0) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\r\n            }\r\n            values.sort((a, b) => (a - b));\r\n            if (values.length % 2 === 0) {\r\n                return (values[(values.length / 2) - 1] + values[values.length / 2]) / 2;\r\n            }\r\n            else {\r\n                return values[Math.floor(values.length / 2)];\r\n            }\r\n        });\r\n    }\r\n    large(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LARGE'), (range, n) => {\r\n            const vals = this.arithmeticHelper.manyToExactNumbers(range.valuesFromTopLeftCorner());\r\n            if (vals instanceof CellError) {\r\n                return vals;\r\n            }\r\n            vals.sort((a, b) => a - b);\r\n            n = Math.trunc(n);\r\n            if (n > vals.length) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            return vals[vals.length - n];\r\n        });\r\n    }\r\n    small(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SMALL'), (range, n) => {\r\n            const vals = this.arithmeticHelper.manyToExactNumbers(range.valuesFromTopLeftCorner());\r\n            if (vals instanceof CellError) {\r\n                return vals;\r\n            }\r\n            vals.sort((a, b) => a - b);\r\n            n = Math.trunc(n);\r\n            if (n > vals.length) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            return vals[n - 1];\r\n        });\r\n    }\r\n}\r\nMedianPlugin.implementedFunctions = {\r\n    'MEDIAN': {\r\n        method: 'median',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'LARGE': {\r\n        method: 'large',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ],\r\n    },\r\n    'SMALL': {\r\n        method: 'small',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class ModuloPlugin extends FunctionPlugin {\r\n    mod(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MOD'), (dividend, divisor) => {\r\n            if (divisor === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            else {\r\n                return dividend % divisor;\r\n            }\r\n        });\r\n    }\r\n}\r\nModuloPlugin.implementedFunctions = {\r\n    'MOD': {\r\n        method: 'mod',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from '../../AbsoluteCellRange';\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { SheetsNotEqual } from '../../errors';\r\nimport { AstNodeType } from '../../parser';\r\nimport { coerceBooleanToNumber } from '../ArithmeticHelper';\r\nimport { EmptyValue, getRawValue, isExtendedNumber } from '../InterpreterValue';\r\nimport { SimpleRangeValue } from '../../SimpleRangeValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nfunction zeroForInfinite(value) {\r\n    if (isExtendedNumber(value) && !Number.isFinite(getRawValue(value))) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nclass MomentsAggregate {\r\n    constructor(sumsq, sum, count) {\r\n        this.sumsq = sumsq;\r\n        this.sum = sum;\r\n        this.count = count;\r\n    }\r\n    static single(arg) {\r\n        return new MomentsAggregate(arg * arg, arg, 1);\r\n    }\r\n    compose(other) {\r\n        return new MomentsAggregate(this.sumsq + other.sumsq, this.sum + other.sum, this.count + other.count);\r\n    }\r\n    averageValue() {\r\n        if (this.count > 0) {\r\n            return this.sum / this.count;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    varSValue() {\r\n        if (this.count > 1) {\r\n            return (this.sumsq - (this.sum * this.sum) / this.count) / (this.count - 1);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    varPValue() {\r\n        if (this.count > 0) {\r\n            return (this.sumsq - (this.sum * this.sum) / this.count) / this.count;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nMomentsAggregate.empty = new MomentsAggregate(0, 0, 0);\r\nexport class NumericAggregationPlugin extends FunctionPlugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.addWithEpsilonRaw = (left, right) => this.arithmeticHelper.addWithEpsilonRaw(left, right);\r\n    }\r\n    /**\r\n     * Corresponds to SUM(Number1, Number2, ...).\r\n     *\r\n     * Returns a sum of given numbers.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    sum(ast, state) {\r\n        return this.doSum(ast.args, state);\r\n    }\r\n    sumsq(ast, state) {\r\n        return this.reduce(ast.args, state, 0, 'SUMSQ', this.addWithEpsilonRaw, (arg) => Math.pow(getRawValue(arg), 2), strictlyNumbers);\r\n    }\r\n    /**\r\n     * Corresponds to MAX(Number1, Number2, ...).\r\n     *\r\n     * Returns a max of given numbers.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    max(ast, state) {\r\n        return this.doMax(ast.args, state);\r\n    }\r\n    maxa(ast, state) {\r\n        const value = this.reduce(ast.args, state, Number.NEGATIVE_INFINITY, 'MAXA', (left, right) => Math.max(left, right), getRawValue, numbersBooleans);\r\n        return zeroForInfinite(value);\r\n    }\r\n    /**\r\n     * Corresponds to MIN(Number1, Number2, ...).\r\n     *\r\n     * Returns a min of given numbers.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    min(ast, state) {\r\n        return this.doMin(ast.args, state);\r\n    }\r\n    mina(ast, state) {\r\n        const value = this.reduce(ast.args, state, Number.POSITIVE_INFINITY, 'MINA', (left, right) => Math.min(left, right), getRawValue, numbersBooleans);\r\n        return zeroForInfinite(value);\r\n    }\r\n    count(ast, state) {\r\n        return this.doCount(ast.args, state);\r\n    }\r\n    counta(ast, state) {\r\n        return this.doCounta(ast.args, state);\r\n    }\r\n    average(ast, state) {\r\n        return this.doAverage(ast.args, state);\r\n    }\r\n    averagea(ast, state) {\r\n        var _a;\r\n        const result = this.reduce(ast.args, state, MomentsAggregate.empty, '_AGGREGATE_A', (left, right) => left.compose(right), (arg) => MomentsAggregate.single(getRawValue(arg)), numbersBooleans);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            return (_a = result.averageValue()) !== null && _a !== void 0 ? _a : new CellError(ErrorType.DIV_BY_ZERO);\r\n        }\r\n    }\r\n    vars(ast, state) {\r\n        return this.doVarS(ast.args, state);\r\n    }\r\n    varp(ast, state) {\r\n        return this.doVarP(ast.args, state);\r\n    }\r\n    vara(ast, state) {\r\n        var _a;\r\n        const result = this.reduceAggregateA(ast.args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            return (_a = result.varSValue()) !== null && _a !== void 0 ? _a : new CellError(ErrorType.DIV_BY_ZERO);\r\n        }\r\n    }\r\n    varpa(ast, state) {\r\n        var _a;\r\n        const result = this.reduceAggregateA(ast.args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            return (_a = result.varPValue()) !== null && _a !== void 0 ? _a : new CellError(ErrorType.DIV_BY_ZERO);\r\n        }\r\n    }\r\n    stdevs(ast, state) {\r\n        return this.doStdevS(ast.args, state);\r\n    }\r\n    stdevp(ast, state) {\r\n        return this.doStdevP(ast.args, state);\r\n    }\r\n    stdeva(ast, state) {\r\n        const result = this.reduceAggregateA(ast.args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            const val = result.varSValue();\r\n            return val === undefined ? new CellError(ErrorType.DIV_BY_ZERO) : Math.sqrt(val);\r\n        }\r\n    }\r\n    stdevpa(ast, state) {\r\n        const result = this.reduceAggregateA(ast.args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            const val = result.varPValue();\r\n            return val === undefined ? new CellError(ErrorType.DIV_BY_ZERO) : Math.sqrt(val);\r\n        }\r\n    }\r\n    product(ast, state) {\r\n        return this.doProduct(ast.args, state);\r\n    }\r\n    subtotal(ast, state) {\r\n        if (ast.args.length < 2) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber);\r\n        }\r\n        const functionType = this.coerceToType(this.evaluateAst(ast.args[0], state), { argumentType: FunctionArgumentType.NUMBER }, state);\r\n        const args = ast.args.slice(1);\r\n        switch (functionType) {\r\n            case 1:\r\n            case 101:\r\n                return this.doAverage(args, state);\r\n            case 2:\r\n            case 102:\r\n                return this.doCount(args, state);\r\n            case 3:\r\n            case 103:\r\n                return this.doCounta(args, state);\r\n            case 4:\r\n            case 104:\r\n                return this.doMax(args, state);\r\n            case 5:\r\n            case 105:\r\n                return this.doMin(args, state);\r\n            case 6:\r\n            case 106:\r\n                return this.doProduct(args, state);\r\n            case 7:\r\n            case 107:\r\n                return this.doStdevS(args, state);\r\n            case 8:\r\n            case 108:\r\n                return this.doStdevP(args, state);\r\n            case 9:\r\n            case 109:\r\n                return this.doSum(args, state);\r\n            case 10:\r\n            case 110:\r\n                return this.doVarS(args, state);\r\n            case 11:\r\n            case 111:\r\n                return this.doVarP(args, state);\r\n            default:\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.BadMode);\r\n        }\r\n    }\r\n    reduceAggregate(args, state) {\r\n        return this.reduce(args, state, MomentsAggregate.empty, '_AGGREGATE', (left, right) => {\r\n            return left.compose(right);\r\n        }, (arg) => {\r\n            return MomentsAggregate.single(getRawValue(arg));\r\n        }, strictlyNumbers);\r\n    }\r\n    reduceAggregateA(args, state) {\r\n        return this.reduce(args, state, MomentsAggregate.empty, '_AGGREGATE_A', (left, right) => {\r\n            return left.compose(right);\r\n        }, (arg) => {\r\n            return MomentsAggregate.single(getRawValue(arg));\r\n        }, numbersBooleans);\r\n    }\r\n    doAverage(args, state) {\r\n        var _a;\r\n        const result = this.reduceAggregate(args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            return (_a = result.averageValue()) !== null && _a !== void 0 ? _a : new CellError(ErrorType.DIV_BY_ZERO);\r\n        }\r\n    }\r\n    doVarS(args, state) {\r\n        var _a;\r\n        const result = this.reduceAggregate(args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            return (_a = result.varSValue()) !== null && _a !== void 0 ? _a : new CellError(ErrorType.DIV_BY_ZERO);\r\n        }\r\n    }\r\n    doVarP(args, state) {\r\n        var _a;\r\n        const result = this.reduceAggregate(args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            return (_a = result.varPValue()) !== null && _a !== void 0 ? _a : new CellError(ErrorType.DIV_BY_ZERO);\r\n        }\r\n    }\r\n    doStdevS(args, state) {\r\n        const result = this.reduceAggregate(args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            const val = result.varSValue();\r\n            return val === undefined ? new CellError(ErrorType.DIV_BY_ZERO) : Math.sqrt(val);\r\n        }\r\n    }\r\n    doStdevP(args, state) {\r\n        const result = this.reduceAggregate(args, state);\r\n        if (result instanceof CellError) {\r\n            return result;\r\n        }\r\n        else {\r\n            const val = result.varPValue();\r\n            return val === undefined ? new CellError(ErrorType.DIV_BY_ZERO) : Math.sqrt(val);\r\n        }\r\n    }\r\n    doCount(args, state) {\r\n        return this.reduce(args, state, 0, 'COUNT', (left, right) => left + right, getRawValue, (arg) => (isExtendedNumber(arg)) ? 1 : 0);\r\n    }\r\n    doCounta(args, state) {\r\n        return this.reduce(args, state, 0, 'COUNTA', (left, right) => left + right, getRawValue, (arg) => (arg === EmptyValue) ? 0 : 1);\r\n    }\r\n    doMax(args, state) {\r\n        const value = this.reduce(args, state, Number.NEGATIVE_INFINITY, 'MAX', (left, right) => Math.max(left, right), getRawValue, strictlyNumbers);\r\n        return zeroForInfinite(value);\r\n    }\r\n    doMin(args, state) {\r\n        const value = this.reduce(args, state, Number.POSITIVE_INFINITY, 'MIN', (left, right) => Math.min(left, right), getRawValue, strictlyNumbers);\r\n        return zeroForInfinite(value);\r\n    }\r\n    doSum(args, state) {\r\n        return this.reduce(args, state, 0, 'SUM', this.addWithEpsilonRaw, getRawValue, strictlyNumbers);\r\n    }\r\n    doProduct(args, state) {\r\n        return this.reduce(args, state, 1, 'PRODUCT', (left, right) => left * right, getRawValue, strictlyNumbers);\r\n    }\r\n    /**\r\n     * Reduces procedure arguments with given reducing function\r\n     *\r\n     * @param args\r\n     * @param state\r\n     * @param initialAccValue - \"neutral\" value (equivalent of 0)\r\n     * @param functionName - function name to use as cache key\r\n     * @param reducingFunction - reducing function\r\n     * @param mapFunction\r\n     * @param coercionFunction\r\n     */\r\n    reduce(args, state, initialAccValue, functionName, reducingFunction, mapFunction, coercionFunction) {\r\n        if (args.length < 1) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.WrongArgNumber);\r\n        }\r\n        return args.reduce((acc, arg) => {\r\n            if (acc instanceof CellError) {\r\n                return acc;\r\n            }\r\n            if (arg.type === AstNodeType.CELL_RANGE || arg.type === AstNodeType.COLUMN_RANGE || arg.type === AstNodeType.ROW_RANGE) {\r\n                const val = this.evaluateRange(arg, state, initialAccValue, functionName, reducingFunction, mapFunction, coercionFunction);\r\n                if (val instanceof CellError) {\r\n                    return val;\r\n                }\r\n                return reducingFunction(val, acc);\r\n            }\r\n            let value;\r\n            value = this.evaluateAst(arg, state);\r\n            if (value instanceof SimpleRangeValue) {\r\n                const coercedRangeValues = Array.from(value.valuesFromTopLeftCorner())\r\n                    .map(coercionFunction)\r\n                    .filter((arg) => (arg !== undefined));\r\n                return coercedRangeValues\r\n                    .map((arg) => {\r\n                    if (arg instanceof CellError) {\r\n                        return arg;\r\n                    }\r\n                    else {\r\n                        return mapFunction(arg);\r\n                    }\r\n                })\r\n                    .reduce((left, right) => {\r\n                    if (left instanceof CellError) {\r\n                        return left;\r\n                    }\r\n                    else if (right instanceof CellError) {\r\n                        return right;\r\n                    }\r\n                    else {\r\n                        return reducingFunction(left, right);\r\n                    }\r\n                }, acc);\r\n            }\r\n            else if (arg.type === AstNodeType.CELL_REFERENCE) {\r\n                value = coercionFunction(value);\r\n                if (value === undefined) {\r\n                    return acc;\r\n                }\r\n            }\r\n            else {\r\n                value = this.coerceScalarToNumberOrError(value);\r\n                value = coercionFunction(value);\r\n                if (value === undefined) {\r\n                    return acc;\r\n                }\r\n            }\r\n            if (value instanceof CellError) {\r\n                return value;\r\n            }\r\n            return reducingFunction(acc, mapFunction(value));\r\n        }, initialAccValue);\r\n    }\r\n    /**\r\n     * Performs range operation on given range\r\n     *\r\n     * @param ast - cell range ast\r\n     * @param state\r\n     * @param initialAccValue - initial accumulator value for reducing function\r\n     * @param functionName - function name to use as cache key\r\n     * @param reducingFunction - reducing function\r\n     * @param mapFunction\r\n     * @param coercionFunction\r\n     */\r\n    evaluateRange(ast, state, initialAccValue, functionName, reducingFunction, mapFunction, coercionFunction) {\r\n        let range;\r\n        try {\r\n            range = AbsoluteCellRange.fromAst(ast, state.formulaAddress);\r\n        }\r\n        catch (err) {\r\n            if (err instanceof SheetsNotEqual) {\r\n                return new CellError(ErrorType.REF, ErrorMessage.RangeManySheets);\r\n            }\r\n            else {\r\n                throw err;\r\n            }\r\n        }\r\n        const rangeVertex = this.dependencyGraph.getRange(range.start, range.end);\r\n        if (rangeVertex === undefined) {\r\n            throw new Error('Range does not exists in graph');\r\n        }\r\n        let value = rangeVertex.getFunctionValue(functionName);\r\n        if (value === undefined) {\r\n            const rangeValues = this.getRangeValues(functionName, range, rangeVertex, mapFunction, coercionFunction);\r\n            value = rangeValues.reduce((arg1, arg2) => {\r\n                if (arg1 instanceof CellError) {\r\n                    return arg1;\r\n                }\r\n                else if (arg2 instanceof CellError) {\r\n                    return arg2;\r\n                }\r\n                else {\r\n                    return reducingFunction(arg1, arg2);\r\n                }\r\n            }, initialAccValue);\r\n            rangeVertex.setFunctionValue(functionName, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Returns list of values for given range and function name\r\n     *\r\n     * If range is dependent on smaller range, list will contain value of smaller range for this function\r\n     * and values of cells that are not present in smaller range\r\n     *\r\n     * @param functionName - function name (e.g. SUM)\r\n     * @param range - cell range\r\n     * @param rangeVertex\r\n     * @param mapFunction\r\n     * @param coercionFunction\r\n     */\r\n    getRangeValues(functionName, range, rangeVertex, mapFunction, coercionFunction) {\r\n        const rangeResult = [];\r\n        const { smallerRangeVertex, restRange } = this.dependencyGraph.rangeMapping.findSmallerRange(range);\r\n        let actualRange;\r\n        if (smallerRangeVertex !== undefined && this.dependencyGraph.existsEdge(smallerRangeVertex, rangeVertex)) {\r\n            const cachedValue = smallerRangeVertex.getFunctionValue(functionName);\r\n            if (cachedValue !== undefined) {\r\n                rangeResult.push(cachedValue);\r\n            }\r\n            else {\r\n                for (const cellFromRange of smallerRangeVertex.range.addresses(this.dependencyGraph)) {\r\n                    const val = coercionFunction(this.dependencyGraph.getScalarValue(cellFromRange));\r\n                    if (val instanceof CellError) {\r\n                        rangeResult.push(val);\r\n                    }\r\n                    else if (val !== undefined) {\r\n                        rangeResult.push(mapFunction(val));\r\n                    }\r\n                }\r\n            }\r\n            actualRange = restRange;\r\n        }\r\n        else {\r\n            actualRange = range;\r\n        }\r\n        for (const cellFromRange of actualRange.addresses(this.dependencyGraph)) {\r\n            const val = coercionFunction(this.dependencyGraph.getScalarValue(cellFromRange));\r\n            if (val instanceof CellError) {\r\n                rangeResult.push(val);\r\n            }\r\n            else if (val !== undefined) {\r\n                rangeResult.push(mapFunction(val));\r\n            }\r\n        }\r\n        return rangeResult;\r\n    }\r\n}\r\nNumericAggregationPlugin.implementedFunctions = {\r\n    'SUM': {\r\n        method: 'sum',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'SUMSQ': {\r\n        method: 'sumsq',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'MAX': {\r\n        method: 'max',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'MIN': {\r\n        method: 'min',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'MAXA': {\r\n        method: 'maxa',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'MINA': {\r\n        method: 'mina',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'COUNT': {\r\n        method: 'count',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'COUNTA': {\r\n        method: 'counta',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'AVERAGE': {\r\n        method: 'average',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'AVERAGEA': {\r\n        method: 'averagea',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'PRODUCT': {\r\n        method: 'product',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'VAR.S': {\r\n        method: 'vars',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'VAR.P': {\r\n        method: 'varp',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'VARA': {\r\n        method: 'vara',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'VARPA': {\r\n        method: 'varpa',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'STDEV.S': {\r\n        method: 'stdevs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'STDEV.P': {\r\n        method: 'stdevp',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'STDEVA': {\r\n        method: 'stdeva',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'STDEVPA': {\r\n        method: 'stdevpa',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'SUBTOTAL': {\r\n        method: 'subtotal',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.ANY }\r\n        ],\r\n        repeatLastArgs: 1,\r\n    }\r\n};\r\nNumericAggregationPlugin.aliases = {\r\n    VAR: 'VAR.S',\r\n    VARP: 'VAR.P',\r\n    STDEV: 'STDEV.S',\r\n    STDEVP: 'STDEV.P',\r\n    VARS: 'VAR.S',\r\n    STDEVS: 'STDEV.S',\r\n};\r\nfunction strictlyNumbers(arg) {\r\n    if (isExtendedNumber(arg) || arg instanceof CellError) {\r\n        return arg;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nfunction numbersBooleans(arg) {\r\n    if (typeof arg === 'boolean') {\r\n        return coerceBooleanToNumber(arg);\r\n    }\r\n    else if (isExtendedNumber(arg) || arg instanceof CellError) {\r\n        return arg;\r\n    }\r\n    else if (typeof arg === 'string') {\r\n        return 0;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class PowerPlugin extends FunctionPlugin {\r\n    power(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('POWER'), Math.pow);\r\n    }\r\n}\r\nPowerPlugin.implementedFunctions = {\r\n    'POWER': {\r\n        method: 'power',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class RadiansPlugin extends FunctionPlugin {\r\n    radians(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('RADIANS'), (arg) => arg * (Math.PI / 180));\r\n    }\r\n}\r\nRadiansPlugin.implementedFunctions = {\r\n    'RADIANS': {\r\n        method: 'radians',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { padLeft } from '../../format/format';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nconst MAX_LENGTH = 10;\r\nconst DECIMAL_NUMBER_OF_BITS = 255;\r\nconst MIN_BASE = 2;\r\nconst MAX_BASE = 36;\r\nconst ALPHABET = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\nexport class RadixConversionPlugin extends FunctionPlugin {\r\n    dec2bin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DEC2BIN'), (value, places) => decimalToBaseWithExactPadding(value, 2, places));\r\n    }\r\n    dec2oct(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DEC2OCT'), (value, places) => decimalToBaseWithExactPadding(value, 8, places));\r\n    }\r\n    dec2hex(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DEC2HEX'), (value, places) => decimalToBaseWithExactPadding(value, 16, places));\r\n    }\r\n    bin2dec(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BIN2DEC'), (binary) => {\r\n            const binaryWithSign = coerceStringToBase(binary, 2, MAX_LENGTH);\r\n            if (binaryWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotBinary);\r\n            }\r\n            return twoComplementToDecimal(binaryWithSign, 2);\r\n        });\r\n    }\r\n    bin2oct(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BIN2OCT'), (binary, places) => {\r\n            const binaryWithSign = coerceStringToBase(binary, 2, MAX_LENGTH);\r\n            if (binaryWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotBinary);\r\n            }\r\n            return decimalToBaseWithExactPadding(twoComplementToDecimal(binaryWithSign, 2), 8, places);\r\n        });\r\n    }\r\n    bin2hex(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BIN2HEX'), (binary, places) => {\r\n            const binaryWithSign = coerceStringToBase(binary, 2, MAX_LENGTH);\r\n            if (binaryWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotBinary);\r\n            }\r\n            return decimalToBaseWithExactPadding(twoComplementToDecimal(binaryWithSign, 2), 16, places);\r\n        });\r\n    }\r\n    oct2dec(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('OCT2DEC'), (octal) => {\r\n            const octalWithSign = coerceStringToBase(octal, 8, MAX_LENGTH);\r\n            if (octalWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotOctal);\r\n            }\r\n            return twoComplementToDecimal(octalWithSign, 8);\r\n        });\r\n    }\r\n    oct2bin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('OCT2BIN'), (octal, places) => {\r\n            const octalWithSign = coerceStringToBase(octal, 8, MAX_LENGTH);\r\n            if (octalWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotOctal);\r\n            }\r\n            return decimalToBaseWithExactPadding(twoComplementToDecimal(octalWithSign, 8), 2, places);\r\n        });\r\n    }\r\n    oct2hex(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('OCT2HEX'), (octal, places) => {\r\n            const octalWithSign = coerceStringToBase(octal, 8, MAX_LENGTH);\r\n            if (octalWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotOctal);\r\n            }\r\n            return decimalToBaseWithExactPadding(twoComplementToDecimal(octalWithSign, 8), 16, places);\r\n        });\r\n    }\r\n    hex2dec(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HEX2DEC'), (hexadecimal) => {\r\n            const hexadecimalWithSign = coerceStringToBase(hexadecimal, 16, MAX_LENGTH);\r\n            if (hexadecimalWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotHex);\r\n            }\r\n            return twoComplementToDecimal(hexadecimalWithSign, 16);\r\n        });\r\n    }\r\n    hex2bin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HEX2BIN'), (hexadecimal, places) => {\r\n            const hexadecimalWithSign = coerceStringToBase(hexadecimal, 16, MAX_LENGTH);\r\n            if (hexadecimalWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotHex);\r\n            }\r\n            return decimalToBaseWithExactPadding(twoComplementToDecimal(hexadecimalWithSign, 16), 2, places);\r\n        });\r\n    }\r\n    hex2oct(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HEX2OCT'), (hexadecimal, places) => {\r\n            const hexadecimalWithSign = coerceStringToBase(hexadecimal, 16, MAX_LENGTH);\r\n            if (hexadecimalWithSign === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotHex);\r\n            }\r\n            return decimalToBaseWithExactPadding(twoComplementToDecimal(hexadecimalWithSign, 16), 8, places);\r\n        });\r\n    }\r\n    base(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BASE'), decimalToBaseWithMinimumPadding);\r\n    }\r\n    decimal(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DECIMAL'), (arg, base) => {\r\n            const input = coerceStringToBase(arg, base, DECIMAL_NUMBER_OF_BITS);\r\n            if (input === undefined) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NotHex);\r\n            }\r\n            return parseInt(input, base);\r\n        });\r\n    }\r\n}\r\nRadixConversionPlugin.implementedFunctions = {\r\n    'DEC2BIN': {\r\n        method: 'dec2bin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 1, maxValue: 10 },\r\n        ],\r\n    },\r\n    'DEC2OCT': {\r\n        method: 'dec2oct',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 1, maxValue: 10 },\r\n        ],\r\n    },\r\n    'DEC2HEX': {\r\n        method: 'dec2hex',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 1, maxValue: 10 },\r\n        ],\r\n    },\r\n    'BIN2DEC': {\r\n        method: 'bin2dec',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ],\r\n    },\r\n    'BIN2OCT': {\r\n        method: 'bin2oct',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: MAX_LENGTH },\r\n        ],\r\n    },\r\n    'BIN2HEX': {\r\n        method: 'bin2hex',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: MAX_LENGTH },\r\n        ],\r\n    },\r\n    'OCT2DEC': {\r\n        method: 'oct2dec',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ],\r\n    },\r\n    'OCT2BIN': {\r\n        method: 'oct2bin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: MAX_LENGTH },\r\n        ],\r\n    },\r\n    'OCT2HEX': {\r\n        method: 'oct2hex',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: MAX_LENGTH },\r\n        ],\r\n    },\r\n    'HEX2DEC': {\r\n        method: 'hex2dec',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ],\r\n    },\r\n    'HEX2BIN': {\r\n        method: 'hex2bin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: MAX_LENGTH },\r\n        ],\r\n    },\r\n    'HEX2OCT': {\r\n        method: 'hex2oct',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: MAX_LENGTH },\r\n        ],\r\n    },\r\n    'DECIMAL': {\r\n        method: 'decimal',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: MIN_BASE, maxValue: MAX_BASE },\r\n        ],\r\n    },\r\n    'BASE': {\r\n        method: 'base',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: MIN_BASE, maxValue: MAX_BASE },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true, minValue: 0, maxValue: DECIMAL_NUMBER_OF_BITS },\r\n        ],\r\n    },\r\n};\r\nfunction coerceStringToBase(value, base, maxLength) {\r\n    const baseAlphabet = ALPHABET.substr(0, base);\r\n    const regex = new RegExp(`^[${baseAlphabet}]+$`);\r\n    if (value.length > maxLength || !regex.test(value)) {\r\n        return undefined;\r\n    }\r\n    return value;\r\n}\r\nfunction decimalToBaseWithExactPadding(value, base, places) {\r\n    if (value > maxValFromBase(base)) {\r\n        return new CellError(ErrorType.NUM, ErrorMessage.ValueBaseLarge);\r\n    }\r\n    if (value < minValFromBase(base)) {\r\n        return new CellError(ErrorType.NUM, ErrorMessage.ValueBaseSmall);\r\n    }\r\n    const result = decimalToRadixComplement(value, base);\r\n    if (places === undefined || value < 0) {\r\n        return result;\r\n    }\r\n    else if (result.length > places) {\r\n        return new CellError(ErrorType.NUM, ErrorMessage.ValueBaseLong);\r\n    }\r\n    else {\r\n        return padLeft(result, places);\r\n    }\r\n}\r\nfunction minValFromBase(base) {\r\n    return -Math.pow(base, MAX_LENGTH) / 2;\r\n}\r\nfunction maxValFromBase(base) {\r\n    return -minValFromBase(base) - 1;\r\n}\r\nfunction decimalToBaseWithMinimumPadding(value, base, places) {\r\n    const result = decimalToRadixComplement(value, base);\r\n    if (places !== undefined && places > result.length) {\r\n        return padLeft(result, places);\r\n    }\r\n    else {\r\n        return result;\r\n    }\r\n}\r\nfunction decimalToRadixComplement(value, base) {\r\n    const offset = value < 0 ? Math.pow(base, MAX_LENGTH) : 0;\r\n    return (value + offset).toString(base).toUpperCase();\r\n}\r\nfunction twoComplementToDecimal(value, base) {\r\n    const parsed = parseInt(value, base);\r\n    const offset = Math.pow(base, MAX_LENGTH);\r\n    return (parsed >= offset / 2) ? parsed - offset : parsed;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class RandomPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to RAND()\r\n     *\r\n     * Returns a pseudo-random floating-point random number\r\n     * in the range [0,1).\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    rand(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('RAND'), Math.random);\r\n    }\r\n    randbetween(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('RANDBETWEEN'), (lower, upper) => {\r\n            if (upper < lower) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.WrongOrder);\r\n            }\r\n            lower = Math.ceil(lower);\r\n            upper = Math.floor(upper) + 1;\r\n            if (lower === upper) {\r\n                upper += 1;\r\n            }\r\n            return lower + Math.floor(Math.random() * (upper - lower));\r\n        });\r\n    }\r\n}\r\nRandomPlugin.implementedFunctions = {\r\n    'RAND': {\r\n        method: 'rand',\r\n        parameters: [],\r\n        isVolatile: true,\r\n    },\r\n    'RANDBETWEEN': {\r\n        method: 'randbetween',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        isVolatile: true,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport function findNextOddNumber(arg) {\r\n    const ceiled = Math.ceil(arg);\r\n    return (ceiled % 2 === 1) ? ceiled : ceiled + 1;\r\n}\r\nexport function findNextEvenNumber(arg) {\r\n    const ceiled = Math.ceil(arg);\r\n    return (ceiled % 2 === 0) ? ceiled : ceiled + 1;\r\n}\r\nexport class RoundingPlugin extends FunctionPlugin {\r\n    roundup(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ROUNDDOWN'), (numberToRound, places) => {\r\n            const placesMultiplier = Math.pow(10, places);\r\n            if (numberToRound < 0) {\r\n                return -Math.ceil(-numberToRound * placesMultiplier) / placesMultiplier;\r\n            }\r\n            else {\r\n                return Math.ceil(numberToRound * placesMultiplier) / placesMultiplier;\r\n            }\r\n        });\r\n    }\r\n    rounddown(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ROUNDDOWN'), (numberToRound, places) => {\r\n            const placesMultiplier = Math.pow(10, places);\r\n            if (numberToRound < 0) {\r\n                return -Math.floor(-numberToRound * placesMultiplier) / placesMultiplier;\r\n            }\r\n            else {\r\n                return Math.floor(numberToRound * placesMultiplier) / placesMultiplier;\r\n            }\r\n        });\r\n    }\r\n    round(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ROUND'), (numberToRound, places) => {\r\n            const placesMultiplier = Math.pow(10, places);\r\n            if (numberToRound < 0) {\r\n                return -Math.round(-numberToRound * placesMultiplier) / placesMultiplier;\r\n            }\r\n            else {\r\n                return Math.round(numberToRound * placesMultiplier) / placesMultiplier;\r\n            }\r\n        });\r\n    }\r\n    intFunc(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('INT'), (coercedNumberToRound) => {\r\n            if (coercedNumberToRound < 0) {\r\n                return -Math.floor(-coercedNumberToRound);\r\n            }\r\n            else {\r\n                return Math.floor(coercedNumberToRound);\r\n            }\r\n        });\r\n    }\r\n    even(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EVEN'), (coercedNumberToRound) => {\r\n            if (coercedNumberToRound < 0) {\r\n                return -findNextEvenNumber(-coercedNumberToRound);\r\n            }\r\n            else {\r\n                return findNextEvenNumber(coercedNumberToRound);\r\n            }\r\n        });\r\n    }\r\n    odd(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ODD'), (coercedNumberToRound) => {\r\n            if (coercedNumberToRound < 0) {\r\n                return -findNextOddNumber(-coercedNumberToRound);\r\n            }\r\n            else {\r\n                return findNextOddNumber(coercedNumberToRound);\r\n            }\r\n        });\r\n    }\r\n    ceilingmath(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CEILING.MATH'), (value, significance, mode) => {\r\n            if (significance === 0 || value === 0) {\r\n                return 0;\r\n            }\r\n            significance = Math.abs(significance);\r\n            if (mode === 1 && value < 0) {\r\n                significance = -significance;\r\n            }\r\n            return Math.ceil(value / significance) * significance;\r\n        });\r\n    }\r\n    ceiling(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CEILING'), (value, significance) => {\r\n            if (value === 0) {\r\n                return 0;\r\n            }\r\n            if (significance === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            if ((value > 0) && (significance < 0)) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.DistinctSigns);\r\n            }\r\n            return Math.ceil(value / significance) * significance;\r\n        });\r\n    }\r\n    ceilingprecise(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CEILING.PRECISE'), (value, significance) => {\r\n            if (significance === 0 || value === 0) {\r\n                return 0;\r\n            }\r\n            significance = Math.abs(significance);\r\n            return Math.ceil(value / significance) * significance;\r\n        });\r\n    }\r\n    floormath(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FLOOR.MATH'), (value, significance, mode) => {\r\n            if (significance === 0 || value === 0) {\r\n                return 0;\r\n            }\r\n            significance = Math.abs(significance);\r\n            if (mode === 1 && value < 0) {\r\n                significance *= -1;\r\n            }\r\n            return Math.floor(value / significance) * significance;\r\n        });\r\n    }\r\n    floor(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FLOOR'), (value, significance) => {\r\n            if (value === 0) {\r\n                return 0;\r\n            }\r\n            if (significance === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            if ((value > 0) && (significance < 0)) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.DistinctSigns);\r\n            }\r\n            return Math.floor(value / significance) * significance;\r\n        });\r\n    }\r\n    floorprecise(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FLOOR.PRECISE'), (value, significance) => {\r\n            if (significance === 0 || value === 0) {\r\n                return 0;\r\n            }\r\n            significance = Math.abs(significance);\r\n            return Math.floor(value / significance) * significance;\r\n        });\r\n    }\r\n}\r\nRoundingPlugin.implementedFunctions = {\r\n    'ROUNDUP': {\r\n        method: 'roundup',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n    },\r\n    'ROUNDDOWN': {\r\n        method: 'rounddown',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n    },\r\n    'ROUND': {\r\n        method: 'round',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n    },\r\n    'INT': {\r\n        method: 'intFunc',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n    'EVEN': {\r\n        method: 'even',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n    'ODD': {\r\n        method: 'odd',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n    'CEILING.MATH': {\r\n        method: 'ceilingmath',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n    },\r\n    'CEILING': {\r\n        method: 'ceiling',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'CEILING.PRECISE': {\r\n        method: 'ceilingprecise',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ],\r\n    },\r\n    'FLOOR.MATH': {\r\n        method: 'floormath',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n        ],\r\n    },\r\n    'FLOOR': {\r\n        method: 'floor',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'FLOOR.PRECISE': {\r\n        method: 'floorprecise',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ],\r\n    },\r\n};\r\nRoundingPlugin.aliases = {\r\n    'ISO.CEILING': 'CEILING.PRECISE',\r\n    'TRUNC': 'ROUNDDOWN',\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class SqrtPlugin extends FunctionPlugin {\r\n    sqrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SQRT'), Math.sqrt);\r\n    }\r\n}\r\nSqrtPlugin.implementedFunctions = {\r\n    'SQRT': {\r\n        method: 'sqrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { Condition, CriterionFunctionCompute } from '../CriterionFunctionCompute';\r\nimport { getRawValue, isExtendedNumber } from '../InterpreterValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nclass AverageResult {\r\n    constructor(sum, count) {\r\n        this.sum = sum;\r\n        this.count = count;\r\n    }\r\n    static single(arg) {\r\n        return new AverageResult(arg, 1);\r\n    }\r\n    compose(other) {\r\n        return new AverageResult(this.sum + other.sum, this.count + other.count);\r\n    }\r\n    averageValue() {\r\n        if (this.count > 0) {\r\n            return this.sum / this.count;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nAverageResult.empty = new AverageResult(0, 0);\r\n/** Computes key for criterion function cache */\r\nfunction conditionalAggregationFunctionCacheKey(functionName) {\r\n    return (conditions) => {\r\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n        const conditionsStrings = conditions.map((c) => `${c.conditionRange.range.sheet},${c.conditionRange.range.start.col},${c.conditionRange.range.start.row}`);\r\n        return [functionName, ...conditionsStrings].join(',');\r\n    };\r\n}\r\nfunction zeroForInfinite(value) {\r\n    if (isExtendedNumber(value) && !Number.isFinite(getRawValue(value))) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\r\nfunction mapToRawScalarValue(arg) {\r\n    if (arg instanceof CellError) {\r\n        return arg;\r\n    }\r\n    if (isExtendedNumber(arg)) {\r\n        return getRawValue(arg);\r\n    }\r\n    return undefined;\r\n}\r\nexport class ConditionalAggregationPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to SUMIF(Range, Criterion, SumRange)\r\n     *\r\n     * Range is the range to which criterion is to be applied.\r\n     * Criterion is the criteria used to choose which cells will be included in sum.\r\n     * SumRange is the range on which adding will be performed.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    sumif(ast, state) {\r\n        const functionName = 'SUMIF';\r\n        const computeFn = (conditionRange, criterion, values) => this.computeConditionalAggregationFunction(values !== null && values !== void 0 ? values : conditionRange, [conditionRange, criterion], functionName, 0, (left, right) => this.arithmeticHelper.nonstrictadd(left, right), mapToRawScalarValue);\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    sumifs(ast, state) {\r\n        const functionName = 'SUMIFS';\r\n        const computeFn = (values, ...args) => this.computeConditionalAggregationFunction(values, args, functionName, 0, (left, right) => this.arithmeticHelper.nonstrictadd(left, right), mapToRawScalarValue);\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    averageif(ast, state) {\r\n        const functionName = 'AVERAGEIF';\r\n        const computeFn = (conditionRange, criterion, values) => {\r\n            const averageResult = this.computeConditionalAggregationFunction(values !== null && values !== void 0 ? values : conditionRange, [conditionRange, criterion], functionName, AverageResult.empty, (left, right) => left.compose(right), (arg) => isExtendedNumber(arg) ? AverageResult.single(getRawValue(arg)) : AverageResult.empty);\r\n            if (averageResult instanceof CellError) {\r\n                return averageResult;\r\n            }\r\n            else {\r\n                return averageResult.averageValue() || new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n        };\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    /**\r\n     * Corresponds to COUNTIF(Range, Criterion)\r\n     *\r\n     * Range is the range to which criterion is to be applied.\r\n     * Criterion is the criteria used to choose which cells will be included in sum.\r\n     *\r\n     * Returns number of cells on which criteria evaluate to true.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    countif(ast, state) {\r\n        const functionName = 'COUNTIF';\r\n        const computeFn = (conditionRange, criterion) => this.computeConditionalAggregationFunction(conditionRange, [conditionRange, criterion], functionName, 0, (left, right) => left + right, () => 1);\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    countifs(ast, state) {\r\n        const functionName = 'COUNTIFS';\r\n        const computeFn = (...args) => this.computeConditionalAggregationFunction(args[0], args, functionName, 0, (left, right) => left + right, () => 1);\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    minifs(ast, state) {\r\n        const functionName = 'MINIFS';\r\n        const composeFunction = (left, right) => {\r\n            if (right === undefined || left === undefined) {\r\n                return right === undefined ? left : right;\r\n            }\r\n            return Math.min(left, right);\r\n        };\r\n        const computeFn = (values, ...args) => {\r\n            const minResult = this.computeConditionalAggregationFunction(values, args, functionName, Number.POSITIVE_INFINITY, composeFunction, mapToRawScalarValue);\r\n            return zeroForInfinite(minResult);\r\n        };\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    maxifs(ast, state) {\r\n        const functionName = 'MAXIFS';\r\n        const composeFunction = (left, right) => {\r\n            if (right === undefined || left === undefined) {\r\n                return right === undefined ? left : right;\r\n            }\r\n            return Math.max(left, right);\r\n        };\r\n        const computeFn = (values, ...args) => {\r\n            const maxResult = this.computeConditionalAggregationFunction(values, args, functionName, Number.NEGATIVE_INFINITY, composeFunction, mapToRawScalarValue);\r\n            return zeroForInfinite(maxResult);\r\n        };\r\n        return this.runFunction(ast.args, state, this.metadata(functionName), computeFn);\r\n    }\r\n    computeConditionalAggregationFunction(valuesRange, conditionArgs, functionName, reduceInitialValue, composeFunction, mapFunction) {\r\n        const conditions = [];\r\n        for (let i = 0; i < conditionArgs.length; i += 2) {\r\n            const conditionArg = conditionArgs[i];\r\n            const criterionPackage = this.interpreter.criterionBuilder.fromCellValue(conditionArgs[i + 1], this.arithmeticHelper);\r\n            if (criterionPackage === undefined) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.BadCriterion);\r\n            }\r\n            conditions.push(new Condition(conditionArg, criterionPackage));\r\n        }\r\n        return new CriterionFunctionCompute(this.interpreter, conditionalAggregationFunctionCacheKey(functionName), reduceInitialValue, composeFunction, mapFunction).compute(valuesRange, conditions);\r\n    }\r\n}\r\nConditionalAggregationPlugin.implementedFunctions = {\r\n    SUMIF: {\r\n        method: 'sumif',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n            { argumentType: FunctionArgumentType.RANGE, optionalArg: true },\r\n        ],\r\n    },\r\n    COUNTIF: {\r\n        method: 'countif',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n        ],\r\n    },\r\n    AVERAGEIF: {\r\n        method: 'averageif',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n            { argumentType: FunctionArgumentType.RANGE, optionalArg: true },\r\n        ],\r\n    },\r\n    SUMIFS: {\r\n        method: 'sumifs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n        ],\r\n        repeatLastArgs: 2,\r\n    },\r\n    COUNTIFS: {\r\n        method: 'countifs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n        ],\r\n        repeatLastArgs: 2,\r\n    },\r\n    MINIFS: {\r\n        method: 'minifs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n        ],\r\n        repeatLastArgs: 2,\r\n    },\r\n    MAXIFS: {\r\n        method: 'maxifs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n        ],\r\n        repeatLastArgs: 2,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType, simpleCellAddress } from '../Cell';\r\nimport { ErrorMessage } from '../error-message';\r\nimport { split } from '../generatorUtils';\r\nimport { getRawValue } from './InterpreterValue';\r\nconst findSmallerRangeForMany = (dependencyGraph, conditionRanges, valuesRange) => {\r\n    if (valuesRange.end.row > valuesRange.start.row) {\r\n        const valuesRangeEndRowLess = simpleCellAddress(valuesRange.end.sheet, valuesRange.end.col, valuesRange.end.row - 1);\r\n        const rowLessVertex = dependencyGraph.getRange(valuesRange.start, valuesRangeEndRowLess);\r\n        if (rowLessVertex !== undefined) {\r\n            return {\r\n                smallerRangeVertex: rowLessVertex,\r\n                restValuesRange: valuesRange.withStart(simpleCellAddress(valuesRange.start.sheet, valuesRange.start.col, valuesRange.end.row)),\r\n                restConditionRanges: conditionRanges.map((conditionRange) => conditionRange.withStart(simpleCellAddress(conditionRange.start.sheet, conditionRange.start.col, conditionRange.end.row))),\r\n            };\r\n        }\r\n    }\r\n    return {\r\n        restValuesRange: valuesRange,\r\n        restConditionRanges: conditionRanges,\r\n    };\r\n};\r\nexport class CriterionFunctionCompute {\r\n    constructor(interpreter, cacheKey, reduceInitialValue, composeFunction, mapFunction) {\r\n        this.interpreter = interpreter;\r\n        this.cacheKey = cacheKey;\r\n        this.reduceInitialValue = reduceInitialValue;\r\n        this.composeFunction = composeFunction;\r\n        this.mapFunction = mapFunction;\r\n        this.dependencyGraph = this.interpreter.dependencyGraph;\r\n    }\r\n    compute(simpleValuesRange, conditions) {\r\n        for (const condition of conditions) {\r\n            if (!condition.conditionRange.sameDimensionsAs(simpleValuesRange)) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.EqualLength);\r\n            }\r\n        }\r\n        const valuesRangeVertex = this.tryToGetRangeVertexForRangeValue(simpleValuesRange);\r\n        const conditionsVertices = conditions.map((c) => this.tryToGetRangeVertexForRangeValue(c.conditionRange));\r\n        if (valuesRangeVertex && conditionsVertices.every((e) => e !== undefined)) {\r\n            const fullCriterionString = conditions.map((c) => c.criterionPackage.raw).join(',');\r\n            const cachedResult = this.findAlreadyComputedValueInCache(valuesRangeVertex, this.cacheKey(conditions), fullCriterionString);\r\n            if (cachedResult !== undefined) {\r\n                this.interpreter.stats.incrementCriterionFunctionFullCacheUsed();\r\n                return cachedResult;\r\n            }\r\n            const cache = this.buildNewCriterionCache(this.cacheKey(conditions), conditions.map((c) => c.conditionRange.range), simpleValuesRange.range);\r\n            if (!cache.has(fullCriterionString)) {\r\n                cache.set(fullCriterionString, [\r\n                    this.evaluateRangeValue(simpleValuesRange, conditions),\r\n                    conditions.map((condition) => condition.criterionPackage.lambda),\r\n                ]);\r\n            }\r\n            valuesRangeVertex.setCriterionFunctionValues(this.cacheKey(conditions), cache);\r\n            conditionsVertices.forEach(range => {\r\n                if (range !== undefined) {\r\n                    range.addDependentCacheRange(valuesRangeVertex);\r\n                }\r\n            });\r\n            return cache.get(fullCriterionString)[0];\r\n        }\r\n        else {\r\n            return this.evaluateRangeValue(simpleValuesRange, conditions);\r\n        }\r\n    }\r\n    tryToGetRangeVertexForRangeValue(rangeValue) {\r\n        const maybeRange = rangeValue.range;\r\n        if (maybeRange === undefined) {\r\n            return undefined;\r\n        }\r\n        else {\r\n            return this.dependencyGraph.getRange(maybeRange.start, maybeRange.end);\r\n        }\r\n    }\r\n    reduceFunction(iterable) {\r\n        let acc = this.reduceInitialValue;\r\n        for (const val of iterable) {\r\n            acc = this.composeFunction(acc, val);\r\n        }\r\n        return acc;\r\n    }\r\n    findAlreadyComputedValueInCache(rangeVertex, cacheKey, criterionString) {\r\n        return rangeVertex.getCriterionFunctionValue(cacheKey, criterionString);\r\n    }\r\n    evaluateRangeValue(simpleValuesRange, conditions) {\r\n        const criterionLambdas = conditions.map((condition) => condition.criterionPackage.lambda);\r\n        const values = Array.from(simpleValuesRange.valuesFromTopLeftCorner()).map(this.mapFunction)[Symbol.iterator]();\r\n        const conditionsIterators = conditions.map((condition) => condition.conditionRange.iterateValuesFromTopLeftCorner());\r\n        const filteredValues = ifFilter(criterionLambdas, conditionsIterators, values);\r\n        return this.reduceFunction(filteredValues);\r\n    }\r\n    buildNewCriterionCache(cacheKey, simpleConditionRanges, simpleValuesRange) {\r\n        const currentRangeVertex = this.dependencyGraph.getRange(simpleValuesRange.start, simpleValuesRange.end);\r\n        const { smallerRangeVertex, restConditionRanges, restValuesRange } = findSmallerRangeForMany(this.dependencyGraph, simpleConditionRanges, simpleValuesRange);\r\n        let smallerCache;\r\n        if (smallerRangeVertex !== undefined && this.dependencyGraph.existsEdge(smallerRangeVertex, currentRangeVertex)) {\r\n            smallerCache = smallerRangeVertex.getCriterionFunctionValues(cacheKey);\r\n        }\r\n        else {\r\n            smallerCache = new Map();\r\n        }\r\n        const newCache = new Map();\r\n        smallerCache.forEach(([value, criterionLambdas], key) => {\r\n            const filteredValues = ifFilter(criterionLambdas, restConditionRanges.map((rcr) => getRangeValues(this.dependencyGraph, rcr)), Array.from(getRangeValues(this.dependencyGraph, restValuesRange)).map(this.mapFunction)[Symbol.iterator]());\r\n            const newCacheValue = this.composeFunction(value, this.reduceFunction(filteredValues));\r\n            this.interpreter.stats.incrementCriterionFunctionPartialCacheUsed();\r\n            newCache.set(key, [newCacheValue, criterionLambdas]);\r\n        });\r\n        return newCache;\r\n    }\r\n}\r\nexport class Condition {\r\n    constructor(conditionRange, criterionPackage) {\r\n        this.conditionRange = conditionRange;\r\n        this.criterionPackage = criterionPackage;\r\n    }\r\n}\r\nfunction* getRangeValues(dependencyGraph, cellRange) {\r\n    for (const cellFromRange of cellRange.addresses(dependencyGraph)) {\r\n        yield getRawValue(dependencyGraph.getScalarValue(cellFromRange));\r\n    }\r\n}\r\nfunction* ifFilter(criterionLambdas, conditionalIterables, computableIterable) {\r\n    for (const computable of computableIterable) {\r\n        const conditionalSplits = conditionalIterables.map((conditionalIterable) => split(conditionalIterable));\r\n        if (!conditionalSplits.every((cs) => Object.prototype.hasOwnProperty.call(cs, 'value'))) {\r\n            return;\r\n        }\r\n        const conditionalFirsts = conditionalSplits.map((cs) => getRawValue(cs.value));\r\n        if (zip(conditionalFirsts, criterionLambdas).every(([conditionalFirst, criterionLambda]) => criterionLambda(conditionalFirst))) {\r\n            yield computable;\r\n        }\r\n        conditionalIterables = conditionalSplits.map((cs) => cs.rest);\r\n    }\r\n}\r\nfunction zip(arr1, arr2) {\r\n    const result = [];\r\n    for (let i = 0; i < Math.min(arr1.length, arr2.length); i++) {\r\n        result.push([arr1[i], arr2[i]]);\r\n    }\r\n    return result;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nexport function* empty() {\r\n}\r\nexport function split(iterable) {\r\n    const iterator = iterable[Symbol.iterator]();\r\n    const { done, value } = iterator.next();\r\n    if (done) {\r\n        return { rest: empty() };\r\n    }\r\n    else {\r\n        return { value, rest: iterator };\r\n    }\r\n}\r\nexport function first(iterable) {\r\n    const iterator = iterable[Symbol.iterator]();\r\n    const { done, value } = iterator.next();\r\n    if (!done) {\r\n        return value;\r\n    }\r\n    return undefined;\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { getRawValue, isExtendedNumber } from '../InterpreterValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class SumprodPlugin extends FunctionPlugin {\r\n    sumproduct(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SUMPRODUCT'), (...args) => {\r\n            const width = args[0].width();\r\n            const height = args[0].height();\r\n            for (const arg of args) {\r\n                if (arg.width() !== width || arg.height() !== height) {\r\n                    return new CellError(ErrorType.VALUE, ErrorMessage.EqualLength);\r\n                }\r\n            }\r\n            let ret = 0;\r\n            const iterators = args.map(arg => arg.iterateValuesFromTopLeftCorner());\r\n            for (let i = 0; i < width * height; i++) {\r\n                let acc = 1;\r\n                for (const it of iterators) {\r\n                    const val = it.next().value;\r\n                    if (val instanceof CellError) {\r\n                        return val;\r\n                    }\r\n                    const coercedVal = this.coerceScalarToNumberOrError(val);\r\n                    if (isExtendedNumber(coercedVal)) {\r\n                        acc *= getRawValue(coercedVal);\r\n                    }\r\n                    else {\r\n                        acc = 0;\r\n                    }\r\n                }\r\n                ret += acc;\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n}\r\nSumprodPlugin.implementedFunctions = {\r\n    'SUMPRODUCT': {\r\n        method: 'sumproduct',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\n/**\r\n * Interpreter plugin containing text-specific functions\r\n */\r\nexport class TextPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to CONCATENATE(value1, [value2, ...])\r\n     *\r\n     * Concatenates provided arguments to one string.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    concatenate(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CONCATENATE'), (...args) => {\r\n            return ''.concat(...args);\r\n        });\r\n    }\r\n    /**\r\n     * Corresponds to SPLIT(string, index)\r\n     *\r\n     * Splits provided string using space separator and returns chunk at zero-based position specified by second argument\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    split(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SPLIT'), (stringToSplit, indexToUse) => {\r\n            const splittedString = stringToSplit.split(' ');\r\n            if (indexToUse >= splittedString.length || indexToUse < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.IndexBounds);\r\n            }\r\n            return splittedString[indexToUse];\r\n        });\r\n    }\r\n    len(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LEN'), (arg) => {\r\n            return arg.length;\r\n        });\r\n    }\r\n    lower(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LOWER'), (arg) => {\r\n            return arg.toLowerCase();\r\n        });\r\n    }\r\n    trim(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TRIM'), (arg) => {\r\n            return arg.replace(/^ +| +$/g, '').replace(/ +/g, ' ');\r\n        });\r\n    }\r\n    proper(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PROPER'), (arg) => {\r\n            return arg.replace(/\\p{L}+/gu, word => word.charAt(0).toUpperCase() + word.substring(1).toLowerCase());\r\n        });\r\n    }\r\n    clean(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CLEAN'), (arg) => {\r\n            // eslint-disable-next-line no-control-regex\r\n            return arg.replace(/[\\u0000-\\u001F]/g, '');\r\n        });\r\n    }\r\n    exact(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EXACT'), (left, right) => {\r\n            return left === right;\r\n        });\r\n    }\r\n    rept(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('REPT'), (text, count) => {\r\n            if (count < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NegativeCount);\r\n            }\r\n            return text.repeat(count);\r\n        });\r\n    }\r\n    right(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('RIGHT'), (text, length) => {\r\n            if (length < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NegativeLength);\r\n            }\r\n            else if (length === 0) {\r\n                return '';\r\n            }\r\n            return text.slice(-length);\r\n        });\r\n    }\r\n    left(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LEFT'), (text, length) => {\r\n            if (length < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NegativeLength);\r\n            }\r\n            return text.slice(0, length);\r\n        });\r\n    }\r\n    mid(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MID'), (text, startPosition, numberOfChars) => {\r\n            if (startPosition < 1) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LessThanOne);\r\n            }\r\n            if (numberOfChars < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NegativeLength);\r\n            }\r\n            return text.substring(startPosition - 1, startPosition + numberOfChars - 1);\r\n        });\r\n    }\r\n    replace(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('REPLACE'), (text, startPosition, numberOfChars, newText) => {\r\n            if (startPosition < 1) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LessThanOne);\r\n            }\r\n            if (numberOfChars < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.NegativeLength);\r\n            }\r\n            return text.substring(0, startPosition - 1) + newText + text.substring(startPosition + numberOfChars - 1);\r\n        });\r\n    }\r\n    search(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SEARCH'), (pattern, text, startIndex) => {\r\n            if (startIndex < 1 || startIndex > text.length) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LengthBounds);\r\n            }\r\n            const normalizedText = text.substring(startIndex - 1).toLowerCase();\r\n            let index;\r\n            if (this.arithmeticHelper.requiresRegex(pattern)) {\r\n                index = this.arithmeticHelper.searchString(pattern, normalizedText);\r\n            }\r\n            else {\r\n                index = normalizedText.indexOf(pattern.toLowerCase());\r\n            }\r\n            index = index + startIndex;\r\n            return index > 0 ? index : new CellError(ErrorType.VALUE, ErrorMessage.PatternNotFound);\r\n        });\r\n    }\r\n    substitute(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SUBSTITUTE'), (text, oldText, newText, occurrence) => {\r\n            const oldTextRegexp = new RegExp(oldText, 'g');\r\n            if (occurrence === undefined) {\r\n                return text.replace(oldTextRegexp, newText);\r\n            }\r\n            if (occurrence < 1) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LessThanOne);\r\n            }\r\n            let match;\r\n            let i = 0;\r\n            while ((match = oldTextRegexp.exec(text)) !== null) {\r\n                if (occurrence === ++i) {\r\n                    return text.substring(0, match.index) + newText + text.substring(oldTextRegexp.lastIndex);\r\n                }\r\n            }\r\n            return text;\r\n        });\r\n    }\r\n    find(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FIND'), (pattern, text, startIndex) => {\r\n            if (startIndex < 1 || startIndex > text.length) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.IndexBounds);\r\n            }\r\n            const shiftedText = text.substring(startIndex - 1);\r\n            const index = shiftedText.indexOf(pattern) + startIndex;\r\n            return index > 0 ? index : new CellError(ErrorType.VALUE, ErrorMessage.PatternNotFound);\r\n        });\r\n    }\r\n    t(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T'), (arg) => {\r\n            if (arg instanceof CellError) {\r\n                return arg;\r\n            }\r\n            return typeof arg === 'string' ? arg : '';\r\n        });\r\n    }\r\n    upper(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('UPPER'), (arg) => {\r\n            return arg.toUpperCase();\r\n        });\r\n    }\r\n}\r\nTextPlugin.implementedFunctions = {\r\n    'CONCATENATE': {\r\n        method: 'concatenate',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n    'EXACT': {\r\n        method: 'exact',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'SPLIT': {\r\n        method: 'split',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ]\r\n    },\r\n    'LEN': {\r\n        method: 'len',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'LOWER': {\r\n        method: 'lower',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'MID': {\r\n        method: 'mid',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ]\r\n    },\r\n    'TRIM': {\r\n        method: 'trim',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'T': {\r\n        method: 't',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.SCALAR }\r\n        ]\r\n    },\r\n    'PROPER': {\r\n        method: 'proper',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'CLEAN': {\r\n        method: 'clean',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'REPT': {\r\n        method: 'rept',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ]\r\n    },\r\n    'RIGHT': {\r\n        method: 'right',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'LEFT': {\r\n        method: 'left',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'REPLACE': {\r\n        method: 'replace',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n    'SEARCH': {\r\n        method: 'search',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'SUBSTITUTE': {\r\n        method: 'substitute',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true }\r\n        ]\r\n    },\r\n    'FIND': {\r\n        method: 'find',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.STRING },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'UPPER': {\r\n        method: 'upper',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nimport { PI } from './MathConstantsPlugin';\r\n/**\r\n * Interpreter plugin containing trigonometric functions\r\n */\r\nexport class TrigonometryPlugin extends FunctionPlugin {\r\n    /**\r\n     * Corresponds to ACOS(value)\r\n     *\r\n     * Returns the arc cosine (or inverse cosine) of a number.\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    acos(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ACOS'), Math.acos);\r\n    }\r\n    asin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ASIN'), Math.asin);\r\n    }\r\n    cos(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COS'), Math.cos);\r\n    }\r\n    sin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SIN'), Math.sin);\r\n    }\r\n    tan(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TAN'), Math.tan);\r\n    }\r\n    atan(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ATAN'), Math.atan);\r\n    }\r\n    atan2(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ATAN2'), (x, y) => {\r\n            if (x === 0 && y === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return Math.atan2(y, x);\r\n        });\r\n    }\r\n    cot(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COT'), (arg) => (arg === 0) ? new CellError(ErrorType.DIV_BY_ZERO) : (1 / Math.tan(arg)));\r\n    }\r\n    acot(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ACOT'), (arg) => (arg === 0) ? PI / 2 : Math.atan(1 / arg));\r\n    }\r\n    sec(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SEC'), (arg) => 1 / Math.cos(arg));\r\n    }\r\n    csc(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CSC'), (arg) => (arg === 0) ? new CellError(ErrorType.DIV_BY_ZERO) : (1 / Math.sin(arg)));\r\n    }\r\n    sinh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SINH'), Math.sinh);\r\n    }\r\n    asinh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ASINH'), Math.asinh);\r\n    }\r\n    cosh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COSH'), Math.cosh);\r\n    }\r\n    acosh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ACOSH'), Math.acosh);\r\n    }\r\n    tanh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TANH'), Math.tanh);\r\n    }\r\n    atanh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ATANH'), Math.atanh);\r\n    }\r\n    coth(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COTH'), (arg) => (arg === 0) ? new CellError(ErrorType.DIV_BY_ZERO) : (1 / Math.tanh(arg)));\r\n    }\r\n    acoth(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ACOTH'), (arg) => (arg === 0) ? new CellError(ErrorType.NUM, ErrorMessage.NonZero) : Math.atanh(1 / arg));\r\n    }\r\n    sech(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SECH'), (arg) => 1 / Math.cosh(arg));\r\n    }\r\n    csch(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CSCH'), (arg) => (arg === 0) ? new CellError(ErrorType.DIV_BY_ZERO) : (1 / Math.sinh(arg)));\r\n    }\r\n}\r\nTrigonometryPlugin.implementedFunctions = {\r\n    'ACOS': {\r\n        method: 'acos',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ASIN': {\r\n        method: 'asin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'COS': {\r\n        method: 'cos',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'SIN': {\r\n        method: 'sin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'TAN': {\r\n        method: 'tan',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ATAN': {\r\n        method: 'atan',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ATAN2': {\r\n        method: 'atan2',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ]\r\n    },\r\n    'COT': {\r\n        method: 'cot',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'SEC': {\r\n        method: 'sec',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'CSC': {\r\n        method: 'csc',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'SINH': {\r\n        method: 'sinh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'COSH': {\r\n        method: 'cosh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'TANH': {\r\n        method: 'tanh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'COTH': {\r\n        method: 'coth',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'SECH': {\r\n        method: 'sech',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'CSCH': {\r\n        method: 'csch',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ACOT': {\r\n        method: 'acot',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ASINH': {\r\n        method: 'asinh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ACOSH': {\r\n        method: 'acosh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ATANH': {\r\n        method: 'atanh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'ACOTH': {\r\n        method: 'acoth',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AbsoluteCellRange } from '../../AbsoluteCellRange';\r\nimport { CellError, ErrorType, simpleCellAddress } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { RowSearchStrategy } from '../../Lookup/RowSearchStrategy';\r\nimport { StatType } from '../../statistics';\r\nimport { zeroIfEmpty } from '../ArithmeticHelper';\r\nimport { SimpleRangeValue } from '../../SimpleRangeValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class LookupPlugin extends FunctionPlugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.rowSearch = new RowSearchStrategy(this.dependencyGraph);\r\n    }\r\n    /**\r\n     * Corresponds to VLOOKUP(key, range, index, [sorted])\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    vlookup(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('VLOOKUP'), (key, rangeValue, index, sorted) => {\r\n            const range = rangeValue.range;\r\n            if (range === undefined) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n            }\r\n            if (index < 1) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LessThanOne);\r\n            }\r\n            if (index > range.width()) {\r\n                return new CellError(ErrorType.REF, ErrorMessage.IndexLarge);\r\n            }\r\n            return this.doVlookup(zeroIfEmpty(key), rangeValue, index - 1, sorted);\r\n        });\r\n    }\r\n    /**\r\n     * Corresponds to HLOOKUP(key, range, index, [sorted])\r\n     *\r\n     * @param ast\r\n     * @param state\r\n     */\r\n    hlookup(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HLOOKUP'), (key, rangeValue, index, sorted) => {\r\n            const range = rangeValue.range;\r\n            if (range === undefined) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n            }\r\n            if (index < 1) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.LessThanOne);\r\n            }\r\n            if (index > range.height()) {\r\n                return new CellError(ErrorType.REF, ErrorMessage.IndexLarge);\r\n            }\r\n            return this.doHlookup(zeroIfEmpty(key), rangeValue, index - 1, sorted);\r\n        });\r\n    }\r\n    match(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MATCH'), (key, rangeValue, type) => {\r\n            return this.doMatch(zeroIfEmpty(key), rangeValue, type);\r\n        });\r\n    }\r\n    searchInRange(key, range, sorted, searchStrategy) {\r\n        if (!sorted && typeof key === 'string' && this.arithmeticHelper.requiresRegex(key)) {\r\n            return searchStrategy.advancedFind(this.arithmeticHelper.eqMatcherFunction(key), range);\r\n        }\r\n        else {\r\n            const searchOptions = sorted ? { ordering: 'asc' } : { ordering: 'none', matchExactly: true };\r\n            return searchStrategy.find(key, range, searchOptions);\r\n        }\r\n    }\r\n    doVlookup(key, rangeValue, index, sorted) {\r\n        this.dependencyGraph.stats.start(StatType.VLOOKUP);\r\n        const range = rangeValue.range;\r\n        let searchedRange;\r\n        if (range === undefined) {\r\n            searchedRange = SimpleRangeValue.onlyValues(rangeValue.data.map((arg) => [arg[0]]));\r\n        }\r\n        else {\r\n            searchedRange = SimpleRangeValue.onlyRange(AbsoluteCellRange.spanFrom(range.start, 1, range.height()), this.dependencyGraph);\r\n        }\r\n        const rowIndex = this.searchInRange(key, searchedRange, sorted, this.columnSearch);\r\n        this.dependencyGraph.stats.end(StatType.VLOOKUP);\r\n        if (rowIndex === -1) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.ValueNotFound);\r\n        }\r\n        let value;\r\n        if (range === undefined) {\r\n            value = rangeValue.data[rowIndex][index];\r\n        }\r\n        else {\r\n            const address = simpleCellAddress(range.sheet, range.start.col + index, range.start.row + rowIndex);\r\n            value = this.dependencyGraph.getCellValue(address);\r\n        }\r\n        if (value instanceof SimpleRangeValue) {\r\n            return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n        }\r\n        return value;\r\n    }\r\n    doHlookup(key, rangeValue, index, sorted) {\r\n        const range = rangeValue.range;\r\n        let searchedRange;\r\n        if (range === undefined) {\r\n            searchedRange = SimpleRangeValue.onlyValues([rangeValue.data[0]]);\r\n        }\r\n        else {\r\n            searchedRange = SimpleRangeValue.onlyRange(AbsoluteCellRange.spanFrom(range.start, range.width(), 1), this.dependencyGraph);\r\n        }\r\n        const colIndex = this.searchInRange(key, searchedRange, sorted, this.rowSearch);\r\n        if (colIndex === -1) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.ValueNotFound);\r\n        }\r\n        let value;\r\n        if (range === undefined) {\r\n            value = rangeValue.data[index][colIndex];\r\n        }\r\n        else {\r\n            const address = simpleCellAddress(range.sheet, range.start.col + colIndex, range.start.row + index);\r\n            value = this.dependencyGraph.getCellValue(address);\r\n        }\r\n        if (value instanceof SimpleRangeValue) {\r\n            return new CellError(ErrorType.VALUE, ErrorMessage.WrongType);\r\n        }\r\n        return value;\r\n    }\r\n    doMatch(key, rangeValue, type) {\r\n        if (![-1, 0, 1].includes(type)) {\r\n            return new CellError(ErrorType.VALUE, ErrorMessage.BadMode);\r\n        }\r\n        if (rangeValue.width() > 1 && rangeValue.height() > 1) {\r\n            return new CellError(ErrorType.NA);\r\n        }\r\n        const searchStrategy = rangeValue.width() === 1 ? this.columnSearch : this.rowSearch;\r\n        const searchOptions = type === 0\r\n            ? { ordering: 'none', matchExactly: true }\r\n            : { ordering: type === -1 ? 'desc' : 'asc' };\r\n        const index = searchStrategy.find(key, rangeValue, searchOptions);\r\n        if (index === -1) {\r\n            return new CellError(ErrorType.NA, ErrorMessage.ValueNotFound);\r\n        }\r\n        return index + 1;\r\n    }\r\n}\r\nLookupPlugin.implementedFunctions = {\r\n    'VLOOKUP': {\r\n        method: 'vlookup',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.BOOLEAN, defaultValue: true },\r\n        ]\r\n    },\r\n    'HLOOKUP': {\r\n        method: 'hlookup',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.BOOLEAN, defaultValue: true },\r\n        ]\r\n    },\r\n    'MATCH': {\r\n        method: 'match',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { AdvancedFind } from './AdvancedFind';\r\nexport class RowSearchStrategy extends AdvancedFind {\r\n    constructor(dependencyGraph) {\r\n        super(dependencyGraph);\r\n        this.dependencyGraph = dependencyGraph;\r\n    }\r\n    /*\r\n     * WARNING: Finding lower/upper bounds in unordered ranges is not supported. When ordering === 'none', assumes matchExactly === true\r\n     */\r\n    find(searchKey, rangeValue, searchOptions) {\r\n        return this.basicFind(searchKey, rangeValue, 'col', searchOptions);\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { getRawValue } from '../InterpreterValue';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class RomanPlugin extends FunctionPlugin {\r\n    roman(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ROMAN'), (val, mode) => {\r\n            val = Math.trunc(val);\r\n            if (mode === false) {\r\n                mode = 4;\r\n            }\r\n            else if (mode === true) {\r\n                mode = 0;\r\n            }\r\n            mode = getRawValue(this.coerceScalarToNumberOrError(mode));\r\n            if (mode instanceof CellError) {\r\n                return mode;\r\n            }\r\n            mode = Math.trunc(mode);\r\n            if (mode < 0) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.ValueSmall);\r\n            }\r\n            if (mode > 4) {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.ValueLarge);\r\n            }\r\n            return romanMode(val, mode);\r\n        });\r\n    }\r\n    arabic(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ARABIC'), (inputString) => {\r\n            inputString = inputString.trim().toUpperCase();\r\n            let minusSign = false;\r\n            if (inputString.startsWith('-')) {\r\n                inputString = inputString.slice(1);\r\n                minusSign = true;\r\n                if (inputString === '') {\r\n                    return new CellError(ErrorType.VALUE, ErrorMessage.InvalidRoman);\r\n                }\r\n            }\r\n            const work = { input: inputString, acc: 0 };\r\n            eatToken(work, { token: 'MMM', val: 3000 }, { token: 'MM', val: 2000 }, { token: 'M', val: 1000 });\r\n            eatToken(work, { token: 'IM', val: 999 }, { token: 'VM', val: 995 }, { token: 'XM', val: 990 }, { token: 'LM', val: 950 }, { token: 'CM', val: 900 });\r\n            eatToken(work, { token: 'D', val: 500 }, { token: 'ID', val: 499 }, { token: 'VD', val: 495 }, { token: 'XD', val: 490 }, { token: 'LD', val: 450 }, { token: 'CD', val: 400 });\r\n            eatToken(work, { token: 'CCC', val: 300 }, { token: 'CC', val: 200 }, { token: 'C', val: 100 });\r\n            eatToken(work, { token: 'IC', val: 99 }, { token: 'VC', val: 95 }, { token: 'XC', val: 90 });\r\n            eatToken(work, { token: 'L', val: 50 }, { token: 'IL', val: 49 }, { token: 'VL', val: 45 }, { token: 'XL', val: 40 });\r\n            eatToken(work, { token: 'XXX', val: 30 }, { token: 'XX', val: 20 }, { token: 'X', val: 10 });\r\n            eatToken(work, { token: 'IX', val: 9 });\r\n            eatToken(work, { token: 'V', val: 5 }, { token: 'IV', val: 4 });\r\n            eatToken(work, { token: 'III', val: 3 }, { token: 'II', val: 2 }, { token: 'I', val: 1 });\r\n            if (work.input !== '') {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.InvalidRoman);\r\n            }\r\n            else {\r\n                return minusSign ? -work.acc : work.acc;\r\n            }\r\n        });\r\n    }\r\n}\r\nRomanPlugin.implementedFunctions = {\r\n    'ROMAN': {\r\n        method: 'roman',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1, lessThan: 4000 },\r\n            { argumentType: FunctionArgumentType.NOERROR, optionalArg: true, defaultValue: 0 }\r\n        ],\r\n    },\r\n    'ARABIC': {\r\n        method: 'arabic',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING },\r\n        ],\r\n    },\r\n};\r\nfunction eatToken(inputAcc, ...tokens) {\r\n    for (const token of tokens) {\r\n        if (inputAcc.input.startsWith(token.token)) {\r\n            inputAcc.input = inputAcc.input.slice(token.token.length);\r\n            inputAcc.acc += token.val;\r\n            break;\r\n        }\r\n    }\r\n}\r\nfunction romanMode(input, mode) {\r\n    const work = { val: input % 1000, acc: 'M'.repeat(Math.floor(input / 1000)) };\r\n    if (mode === 4) {\r\n        absorb(work, 'IM', 999, 1000);\r\n        absorb(work, 'ID', 499, 500);\r\n    }\r\n    if (mode >= 3) {\r\n        absorb(work, 'VM', 995, 1000);\r\n        absorb(work, 'VD', 495, 500);\r\n    }\r\n    if (mode >= 2) {\r\n        absorb(work, 'XM', 990, 1000);\r\n        absorb(work, 'XD', 490, 500);\r\n    }\r\n    if (mode >= 1) {\r\n        absorb(work, 'LM', 950, 1000);\r\n        absorb(work, 'LD', 450, 500);\r\n    }\r\n    absorb(work, 'CM', 900, 1000);\r\n    absorb(work, 'CD', 400, 500);\r\n    absorb(work, 'D', 500, 900);\r\n    work.acc += 'C'.repeat(Math.floor(work.val / 100));\r\n    work.val %= 100;\r\n    if (mode >= 2) {\r\n        absorb(work, 'IC', 99, 100);\r\n        absorb(work, 'IL', 49, 50);\r\n    }\r\n    if (mode >= 1) {\r\n        absorb(work, 'VC', 95, 100);\r\n        absorb(work, 'VL', 45, 50);\r\n    }\r\n    absorb(work, 'XC', 90, 100);\r\n    absorb(work, 'XL', 40, 50);\r\n    absorb(work, 'L', 50, 90);\r\n    work.acc += 'X'.repeat(Math.floor(work.val / 10));\r\n    work.val %= 10;\r\n    absorb(work, 'IX', 9, 10);\r\n    absorb(work, 'IV', 4, 5);\r\n    absorb(work, 'V', 5, 9);\r\n    work.acc += 'I'.repeat(work.val);\r\n    return work.acc;\r\n}\r\nfunction absorb(valAcc, token, lower, upper) {\r\n    if (valAcc.val >= lower && valAcc.val < upper) {\r\n        valAcc.val -= lower;\r\n        valAcc.acc += token;\r\n    }\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class SimpleArithmerticPlugin extends FunctionPlugin {\r\n    add(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.ADD'), this.arithmeticHelper.addWithEpsilon);\r\n    }\r\n    concat(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.CONCAT'), this.arithmeticHelper.concat);\r\n    }\r\n    divide(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.DIVIDE'), this.arithmeticHelper.divide);\r\n    }\r\n    eq(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.EQ'), this.arithmeticHelper.eq);\r\n    }\r\n    gt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.GT'), this.arithmeticHelper.gt);\r\n    }\r\n    gte(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.GTE'), this.arithmeticHelper.geq);\r\n    }\r\n    lt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.LT'), this.arithmeticHelper.lt);\r\n    }\r\n    lte(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.LTE'), this.arithmeticHelper.leq);\r\n    }\r\n    minus(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.MINUS'), this.arithmeticHelper.subtract);\r\n    }\r\n    multiply(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.MULTIPLY'), this.arithmeticHelper.multiply);\r\n    }\r\n    ne(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.NE'), this.arithmeticHelper.neq);\r\n    }\r\n    pow(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.POW'), this.arithmeticHelper.pow);\r\n    }\r\n    uminus(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.UMINUS'), this.arithmeticHelper.unaryMinus);\r\n    }\r\n    upercent(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.UNARY_PERCENT'), this.arithmeticHelper.unaryPercent);\r\n    }\r\n    uplus(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HF.UPLUS'), this.arithmeticHelper.unaryPlus);\r\n    }\r\n}\r\nSimpleArithmerticPlugin.implementedFunctions = {\r\n    'HF.ADD': {\r\n        method: 'add',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.CONCAT': {\r\n        method: 'concat',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.STRING, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.STRING, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.DIVIDE': {\r\n        method: 'divide',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.EQ': {\r\n        method: 'eq',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n        ]\r\n    },\r\n    'HF.GT': {\r\n        method: 'gt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n        ]\r\n    },\r\n    'HF.GTE': {\r\n        method: 'gte',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n        ]\r\n    },\r\n    'HF.LT': {\r\n        method: 'lt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n        ]\r\n    },\r\n    'HF.LTE': {\r\n        method: 'lte',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n        ]\r\n    },\r\n    'HF.MINUS': {\r\n        method: 'minus',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.MULTIPLY': {\r\n        method: 'multiply',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.NE': {\r\n        method: 'ne',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NOERROR, passSubtype: true },\r\n        ]\r\n    },\r\n    'HF.POW': {\r\n        method: 'pow',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.UMINUS': {\r\n        method: 'uminus',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.UNARY_PERCENT': {\r\n        method: 'upercent',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n    'HF.UPLUS': {\r\n        method: 'uplus',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, passSubtype: true },\r\n        ],\r\n    },\r\n};\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { besseli, besselj, besselk, bessely } from './3rdparty/bessel/bessel';\r\nimport { beta, binomial, centralF, chisquare, erf, erfc, exponential, gamma, gammafn, gammaln, hypgeom, lognormal, negbin, normal, normalci, poisson, studentt, tci, weibull } from './3rdparty/jstat/jstat';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class StatisticalPlugin extends FunctionPlugin {\r\n    erf(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ERF'), (lowerBound, upperBound) => {\r\n            if (upperBound === undefined) {\r\n                return erf(lowerBound);\r\n            }\r\n            else {\r\n                return erf(upperBound) - erf(lowerBound);\r\n            }\r\n        });\r\n    }\r\n    erfc(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('ERFC'), erfc);\r\n    }\r\n    expondist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('EXPON.DIST'), (x, lambda, cumulative) => {\r\n            if (cumulative) {\r\n                return exponential.cdf(x, lambda);\r\n            }\r\n            else {\r\n                return exponential.pdf(x, lambda);\r\n            }\r\n        });\r\n    }\r\n    fisher(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FISHER'), (x) => Math.log((1 + x) / (1 - x)) / 2);\r\n    }\r\n    fisherinv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FISHERINV'), (y) => 1 - 2 / (Math.exp(2 * y) + 1));\r\n    }\r\n    gamma(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GAMMA'), gammafn);\r\n    }\r\n    gammadist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GAMMA.DIST'), (value, alphaVal, betaVal, cumulative) => {\r\n            if (cumulative) {\r\n                return gamma.cdf(value, alphaVal, betaVal);\r\n            }\r\n            else {\r\n                return gamma.pdf(value, alphaVal, betaVal);\r\n            }\r\n        });\r\n    }\r\n    gammaln(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GAMMALN'), gammaln);\r\n    }\r\n    gammainv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GAMMA.INV'), gamma.inv);\r\n    }\r\n    gauss(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GAUSS'), (z) => normal.cdf(z, 0, 1) - 0.5);\r\n    }\r\n    betadist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BETA.DIST'), (x, alphaVal, betaVal, cumulative, A, B) => {\r\n            if (x <= A) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n            }\r\n            else if (x >= B) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            x = (x - A) / (B - A);\r\n            if (cumulative) {\r\n                return beta.cdf(x, alphaVal, betaVal);\r\n            }\r\n            else {\r\n                return beta.pdf(x, alphaVal, betaVal);\r\n            }\r\n        });\r\n    }\r\n    betainv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BETA.INV'), (x, alphaVal, betaVal, A, B) => {\r\n            if (A >= B) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.WrongOrder);\r\n            }\r\n            else {\r\n                return beta.inv(x, alphaVal, betaVal) * (B - A) + A;\r\n            }\r\n        });\r\n    }\r\n    binomialdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BINOM.DIST'), (succ, trials, prob, cumulative) => {\r\n            if (succ > trials) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.WrongOrder);\r\n            }\r\n            succ = Math.trunc(succ);\r\n            trials = Math.trunc(trials);\r\n            if (cumulative) {\r\n                return binomial.cdf(succ, trials, prob);\r\n            }\r\n            else {\r\n                return binomial.pdf(succ, trials, prob);\r\n            }\r\n        });\r\n    }\r\n    binomialinv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BINOM.INV'), (trials, prob, alpha) => {\r\n            trials = Math.trunc(trials);\r\n            let lower = -1;\r\n            let upper = trials;\r\n            while (upper > lower + 1) {\r\n                const mid = Math.trunc((lower + upper) / 2);\r\n                if (binomial.cdf(mid, trials, prob) >= alpha) {\r\n                    upper = mid;\r\n                }\r\n                else {\r\n                    lower = mid;\r\n                }\r\n            }\r\n            return upper;\r\n        });\r\n    }\r\n    besselifn(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BESSELI'), (x, n) => besseli(x, Math.trunc(n)));\r\n    }\r\n    besseljfn(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BESSELJ'), (x, n) => besselj(x, Math.trunc(n)));\r\n    }\r\n    besselkfn(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BESSELK'), (x, n) => besselk(x, Math.trunc(n)));\r\n    }\r\n    besselyfn(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('BESSELY'), (x, n) => bessely(x, Math.trunc(n)));\r\n    }\r\n    chisqdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHISQ.DIST'), (x, deg, cumulative) => {\r\n            deg = Math.trunc(deg);\r\n            if (cumulative) {\r\n                return chisquare.cdf(x, deg);\r\n            }\r\n            else {\r\n                return chisquare.pdf(x, deg);\r\n            }\r\n        });\r\n    }\r\n    chisqdistrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHISQ.DIST.RT'), (x, deg) => 1 - chisquare.cdf(x, Math.trunc(deg)));\r\n    }\r\n    chisqinv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHISQ.INV'), (p, deg) => chisquare.inv(p, Math.trunc(deg)));\r\n    }\r\n    chisqinvrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHISQ.INV.RT'), (p, deg) => chisquare.inv(1.0 - p, Math.trunc(deg)));\r\n    }\r\n    fdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('F.DIST'), (x, deg1, deg2, cumulative) => {\r\n            deg1 = Math.trunc(deg1);\r\n            deg2 = Math.trunc(deg2);\r\n            if (cumulative) {\r\n                return centralF.cdf(x, deg1, deg2);\r\n            }\r\n            else {\r\n                return centralF.pdf(x, deg1, deg2);\r\n            }\r\n        });\r\n    }\r\n    fdistrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('F.DIST.RT'), (x, deg1, deg2) => 1 - centralF.cdf(x, Math.trunc(deg1), Math.trunc(deg2)));\r\n    }\r\n    finv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('F.INV'), (p, deg1, deg2) => centralF.inv(p, Math.trunc(deg1), Math.trunc(deg2)));\r\n    }\r\n    finvrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('F.INV.RT'), (p, deg1, deg2) => centralF.inv(1.0 - p, Math.trunc(deg1), Math.trunc(deg2)));\r\n    }\r\n    weibulldist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('WEIBULL.DIST'), (x, shape, scale, cumulative) => {\r\n            if (cumulative) {\r\n                return weibull.cdf(x, scale, shape);\r\n            }\r\n            else {\r\n                return weibull.pdf(x, scale, shape);\r\n            }\r\n        });\r\n    }\r\n    poissondist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('POISSON.DIST'), (x, mean, cumulative) => {\r\n            x = Math.trunc(x);\r\n            if (cumulative) {\r\n                return poisson.cdf(x, mean);\r\n            }\r\n            else {\r\n                return poisson.pdf(x, mean);\r\n            }\r\n        });\r\n    }\r\n    hypgeomdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HYPGEOM.DIST'), (s, numberS, populationS, numberPop, cumulative) => {\r\n            if (s > numberS || s > populationS || numberS > numberPop || populationS > numberPop) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            if (s + numberPop < populationS + numberS) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            s = Math.trunc(s);\r\n            numberS = Math.trunc(numberS);\r\n            populationS = Math.trunc(populationS);\r\n            numberPop = Math.trunc(numberPop);\r\n            if (cumulative) {\r\n                return hypgeom.cdf(s, numberPop, populationS, numberS);\r\n            }\r\n            else {\r\n                return hypgeom.pdf(s, numberPop, populationS, numberS);\r\n            }\r\n        });\r\n    }\r\n    tdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T.DIST'), (x, deg, cumulative) => {\r\n            deg = Math.trunc(deg);\r\n            if (cumulative) {\r\n                return studentt.cdf(x, deg);\r\n            }\r\n            else {\r\n                return studentt.pdf(x, deg);\r\n            }\r\n        });\r\n    }\r\n    tdist2t(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T.DIST.2T'), (x, deg) => (1 - studentt.cdf(x, Math.trunc(deg))) * 2);\r\n    }\r\n    tdistrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T.DIST.RT'), (x, deg) => 1 - studentt.cdf(x, Math.trunc(deg)));\r\n    }\r\n    tdistold(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('TDIST'), (x, deg, mode) => mode * (1 - studentt.cdf(x, Math.trunc(deg))));\r\n    }\r\n    tinv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T.INV'), (p, deg) => studentt.inv(p, Math.trunc(deg)));\r\n    }\r\n    tinv2t(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T.INV.2T'), (p, deg) => studentt.inv(1 - p / 2, Math.trunc(deg)));\r\n    }\r\n    lognormdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LOGNORM.DIST'), (x, mean, stddev, cumulative) => {\r\n            if (cumulative) {\r\n                return lognormal.cdf(x, mean, stddev);\r\n            }\r\n            else {\r\n                return lognormal.pdf(x, mean, stddev);\r\n            }\r\n        });\r\n    }\r\n    lognorminv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LOGNORM.INV'), (p, mean, stddev) => lognormal.inv(p, mean, stddev));\r\n    }\r\n    normdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NORM.DIST'), (x, mean, stddev, cumulative) => {\r\n            if (cumulative) {\r\n                return normal.cdf(x, mean, stddev);\r\n            }\r\n            else {\r\n                return normal.pdf(x, mean, stddev);\r\n            }\r\n        });\r\n    }\r\n    norminv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NORM.INV'), (p, mean, stddev) => normal.inv(p, mean, stddev));\r\n    }\r\n    normsdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NORM.S.DIST'), (x, cumulative) => {\r\n            if (cumulative) {\r\n                return normal.cdf(x, 0, 1);\r\n            }\r\n            else {\r\n                return normal.pdf(x, 0, 1);\r\n            }\r\n        });\r\n    }\r\n    normsinv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NORM.S.INV'), (p) => normal.inv(p, 0, 1));\r\n    }\r\n    phi(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('PHI'), (x) => normal.pdf(x, 0, 1));\r\n    }\r\n    negbinomdist(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('NEGBINOM.DIST'), (nf, ns, p, cumulative) => {\r\n            nf = Math.trunc(nf);\r\n            ns = Math.trunc(ns);\r\n            if (cumulative) {\r\n                return negbin.cdf(nf, ns, p);\r\n            }\r\n            else {\r\n                return negbin.pdf(nf, ns, p);\r\n            }\r\n        });\r\n    }\r\n    confidencenorm(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CONFIDENCE.NORM'), \r\n        // eslint-disable-next-line\r\n        // @ts-ignore\r\n        (alpha, stddev, size) => normalci(1, alpha, stddev, Math.trunc(size))[1] - 1);\r\n    }\r\n    confidencet(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CONFIDENCE.T'), (alpha, stddev, size) => {\r\n            size = Math.trunc(size);\r\n            if (size === 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            // eslint-disable-next-line\r\n            // @ts-ignore\r\n            return tci(1, alpha, stddev, size)[1] - 1;\r\n        });\r\n    }\r\n    standardize(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('STANDARDIZE'), (x, mean, stddev) => (x - mean) / stddev);\r\n    }\r\n}\r\nStatisticalPlugin.implementedFunctions = {\r\n    'ERF': {\r\n        method: 'erf',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true },\r\n        ]\r\n    },\r\n    'ERFC': {\r\n        method: 'erfc',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'EXPON.DIST': {\r\n        method: 'expondist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'FISHER': {\r\n        method: 'fisher',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: -1, lessThan: 1 }\r\n        ]\r\n    },\r\n    'FISHERINV': {\r\n        method: 'fisherinv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'GAMMA': {\r\n        method: 'gamma',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'GAMMA.DIST': {\r\n        method: 'gammadist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'GAMMALN': {\r\n        method: 'gammaln',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 }\r\n        ]\r\n    },\r\n    'GAMMA.INV': {\r\n        method: 'gammainv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, lessThan: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ]\r\n    },\r\n    'GAUSS': {\r\n        method: 'gauss',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'BETA.DIST': {\r\n        method: 'betadist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'BETA.INV': {\r\n        method: 'betainv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, defaultValue: 1 },\r\n        ]\r\n    },\r\n    'BINOM.DIST': {\r\n        method: 'binomialdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'BINOM.INV': {\r\n        method: 'binomialinv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n        ]\r\n    },\r\n    'BESSELI': {\r\n        method: 'besselifn',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'BESSELJ': {\r\n        method: 'besseljfn',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'BESSELK': {\r\n        method: 'besselkfn',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'BESSELY': {\r\n        method: 'besselyfn',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n        ]\r\n    },\r\n    'CHISQ.DIST': {\r\n        method: 'chisqdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1, maxValue: 1e10 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'CHISQ.DIST.RT': {\r\n        method: 'chisqdistrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1, maxValue: 1e10 },\r\n        ]\r\n    },\r\n    'CHISQ.INV': {\r\n        method: 'chisqinv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1, maxValue: 1e10 },\r\n        ]\r\n    },\r\n    'CHISQ.INV.RT': {\r\n        method: 'chisqinvrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'F.DIST': {\r\n        method: 'fdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'F.DIST.RT': {\r\n        method: 'fdistrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'F.INV': {\r\n        method: 'finv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'F.INV.RT': {\r\n        method: 'finvrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'WEIBULL.DIST': {\r\n        method: 'weibulldist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'POISSON.DIST': {\r\n        method: 'poissondist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'HYPGEOM.DIST': {\r\n        method: 'hypgeomdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'T.DIST': {\r\n        method: 'tdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'T.DIST.2T': {\r\n        method: 'tdist2t',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'T.DIST.RT': {\r\n        method: 'tdistrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'TDIST': {\r\n        method: 'tdistold',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1, maxValue: 2 },\r\n        ]\r\n    },\r\n    'T.INV': {\r\n        method: 'tinv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'T.INV.2T': {\r\n        method: 'tinv2t',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ]\r\n    },\r\n    'LOGNORM.DIST': {\r\n        method: 'lognormdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'LOGNORM.INV': {\r\n        method: 'lognorminv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ]\r\n    },\r\n    'NORM.DIST': {\r\n        method: 'normdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'NORM.INV': {\r\n        method: 'norminv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ]\r\n    },\r\n    'NORM.S.DIST': {\r\n        method: 'normsdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'NORM.S.INV': {\r\n        method: 'normsinv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n        ]\r\n    },\r\n    'PHI': {\r\n        method: 'phi',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER }\r\n        ]\r\n    },\r\n    'NEGBINOM.DIST': {\r\n        method: 'negbinomdist',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 1 },\r\n            { argumentType: FunctionArgumentType.BOOLEAN },\r\n        ]\r\n    },\r\n    'CONFIDENCE.NORM': {\r\n        method: 'confidencenorm',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ],\r\n    },\r\n    'CONFIDENCE.T': {\r\n        method: 'confidencet',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0, lessThan: 1 },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 1 },\r\n        ],\r\n    },\r\n    'STANDARDIZE': {\r\n        method: 'standardize',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, greaterThan: 0 },\r\n        ],\r\n    },\r\n};\r\nStatisticalPlugin.aliases = {\r\n    NEGBINOMDIST: 'NEGBINOM.DIST',\r\n    EXPONDIST: 'EXPON.DIST',\r\n    BETADIST: 'BETA.DIST',\r\n    NORMDIST: 'NORM.DIST',\r\n    NORMINV: 'NORM.INV',\r\n    NORMSDIST: 'NORM.S.DIST',\r\n    NORMSINV: 'NORM.S.INV',\r\n    LOGNORMDIST: 'LOGNORM.DIST',\r\n    LOGINV: 'LOGNORM.INV',\r\n    TINV: 'T.INV.2T',\r\n    HYPGEOMDIST: 'HYPGEOM.DIST',\r\n    POISSON: 'POISSON.DIST',\r\n    WEIBULL: 'WEIBULL.DIST',\r\n    FINV: 'F.INV.RT',\r\n    FDIST: 'F.DIST.RT',\r\n    CHIDIST: 'CHISQ.DIST.RT',\r\n    CHIINV: 'CHISQ.INV.RT',\r\n    GAMMADIST: 'GAMMA.DIST',\r\n    'GAMMALN.PRECISE': 'GAMMALN',\r\n    GAMMAINV: 'GAMMA.INV',\r\n    BETAINV: 'BETA.INV',\r\n    BINOMDIST: 'BINOM.DIST',\r\n    CONFIDENCE: 'CONFIDENCE.NORM',\r\n    CRITBINOM: 'BINOM.INV',\r\n    WEIBULLDIST: 'WEIBULL.DIST',\r\n    TINV2T: 'T.INV.2T',\r\n    TDISTRT: 'T.DIST.RT',\r\n    TDIST2T: 'T.DIST.2T',\r\n    FINVRT: 'F.INV.RT',\r\n    FDISTRT: 'F.DIST.RT',\r\n    CHIDISTRT: 'CHISQ.DIST.RT',\r\n    CHIINVRT: 'CHISQ.INV.RT',\r\n    LOGNORMINV: 'LOGNORM.INV',\r\n    POISSONDIST: 'POISSON.DIST',\r\n};\r\n","/**\r\n * @license\r\n bessel.js (C) 2013-present SheetJS -- http://sheetjs.com\r\n\r\n Apache License\r\n Version 2.0, January 2004\r\n http://www.apache.org/licenses/\r\n\r\n TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\r\n\r\n 1. Definitions.\r\n\r\n \"License\" shall mean the terms and conditions for use, reproduction,\r\n and distribution as defined by Sections 1 through 9 of this document.\r\n\r\n \"Licensor\" shall mean the copyright owner or entity authorized by\r\n the copyright owner that is granting the License.\r\n\r\n \"Legal Entity\" shall mean the union of the acting entity and all\r\n other entities that control, are controlled by, or are under common\r\n control with that entity. For the purposes of this definition,\r\n \"control\" means (i) the power, direct or indirect, to cause the\r\n direction or management of such entity, whether by contract or\r\n otherwise, or (ii) ownership of fifty percent (50%) or more of the\r\n outstanding shares, or (iii) beneficial ownership of such entity.\r\n\r\n \"You\" (or \"Your\") shall mean an individual or Legal Entity\r\n exercising permissions granted by this License.\r\n\r\n \"Source\" form shall mean the preferred form for making modifications,\r\n including but not limited to software source code, documentation\r\n source, and configuration files.\r\n\r\n \"Object\" form shall mean any form resulting from mechanical\r\n transformation or translation of a Source form, including but\r\n not limited to compiled object code, generated documentation,\r\n and conversions to other media types.\r\n\r\n \"Work\" shall mean the work of authorship, whether in Source or\r\n Object form, made available under the License, as indicated by a\r\n copyright notice that is included in or attached to the work\r\n (an example is provided in the Appendix below).\r\n\r\n \"Derivative Works\" shall mean any work, whether in Source or Object\r\n form, that is based on (or derived from) the Work and for which the\r\n editorial revisions, annotations, elaborations, or other modifications\r\n represent, as a whole, an original work of authorship. For the purposes\r\n of this License, Derivative Works shall not include works that remain\r\n separable from, or merely link (or bind by name) to the interfaces of,\r\n the Work and Derivative Works thereof.\r\n\r\n \"Contribution\" shall mean any work of authorship, including\r\n the original version of the Work and any modifications or additions\r\n to that Work or Derivative Works thereof, that is intentionally\r\n submitted to Licensor for inclusion in the Work by the copyright owner\r\n or by an individual or Legal Entity authorized to submit on behalf of\r\n the copyright owner. For the purposes of this definition, \"submitted\"\r\n means any form of electronic, verbal, or written communication sent\r\n to the Licensor or its representatives, including but not limited to\r\n communication on electronic mailing lists, source code control systems,\r\n and issue tracking systems that are managed by, or on behalf of, the\r\n Licensor for the purpose of discussing and improving the Work, but\r\n excluding communication that is conspicuously marked or otherwise\r\n designated in writing by the copyright owner as \"Not a Contribution.\"\r\n\r\n \"Contributor\" shall mean Licensor and any individual or Legal Entity\r\n on behalf of whom a Contribution has been received by Licensor and\r\n subsequently incorporated within the Work.\r\n\r\n 2. Grant of Copyright License. Subject to the terms and conditions of\r\n this License, each Contributor hereby grants to You a perpetual,\r\n worldwide, non-exclusive, no-charge, royalty-free, irrevocable\r\n copyright license to reproduce, prepare Derivative Works of,\r\n publicly display, publicly perform, sublicense, and distribute the\r\n Work and such Derivative Works in Source or Object form.\r\n\r\n 3. Grant of Patent License. Subject to the terms and conditions of\r\n this License, each Contributor hereby grants to You a perpetual,\r\n worldwide, non-exclusive, no-charge, royalty-free, irrevocable\r\n (except as stated in this section) patent license to make, have made,\r\n use, offer to sell, sell, import, and otherwise transfer the Work,\r\n where such license applies only to those patent claims licensable\r\n by such Contributor that are necessarily infringed by their\r\n Contribution(s) alone or by combination of their Contribution(s)\r\n with the Work to which such Contribution(s) was submitted. If You\r\n institute patent litigation against any entity (including a\r\n cross-claim or counterclaim in a lawsuit) alleging that the Work\r\n or a Contribution incorporated within the Work constitutes direct\r\n or contributory patent infringement, then any patent licenses\r\n granted to You under this License for that Work shall terminate\r\n as of the date such litigation is filed.\r\n\r\n 4. Redistribution. You may reproduce and distribute copies of the\r\n Work or Derivative Works thereof in any medium, with or without\r\n modifications, and in Source or Object form, provided that You\r\n meet the following conditions:\r\n\r\n (a) You must give any other recipients of the Work or\r\n Derivative Works a copy of this License; and\r\n\r\n (b) You must cause any modified files to carry prominent notices\r\n stating that You changed the files; and\r\n\r\n (c) You must retain, in the Source form of any Derivative Works\r\n that You distribute, all copyright, patent, trademark, and\r\n attribution notices from the Source form of the Work,\r\n excluding those notices that do not pertain to any part of\r\n the Derivative Works; and\r\n\r\n (d) If the Work includes a \"NOTICE\" text file as part of its\r\n distribution, then any Derivative Works that You distribute must\r\n include a readable copy of the attribution notices contained\r\n within such NOTICE file, excluding those notices that do not\r\n pertain to any part of the Derivative Works, in at least one\r\n of the following places: within a NOTICE text file distributed\r\n as part of the Derivative Works; within the Source form or\r\n documentation, if provided along with the Derivative Works; or,\r\n within a display generated by the Derivative Works, if and\r\n wherever such third-party notices normally appear. The contents\r\n of the NOTICE file are for informational purposes only and\r\n do not modify the License. You may add Your own attribution\r\n notices within Derivative Works that You distribute, alongside\r\n or as an addendum to the NOTICE text from the Work, provided\r\n that such additional attribution notices cannot be construed\r\n as modifying the License.\r\n\r\n You may add Your own copyright statement to Your modifications and\r\n may provide additional or different license terms and conditions\r\n for use, reproduction, or distribution of Your modifications, or\r\n for any such Derivative Works as a whole, provided Your use,\r\n reproduction, and distribution of the Work otherwise complies with\r\n the conditions stated in this License.\r\n\r\n 5. Submission of Contributions. Unless You explicitly state otherwise,\r\n any Contribution intentionally submitted for inclusion in the Work\r\n by You to the Licensor shall be under the terms and conditions of\r\n this License, without any additional terms or conditions.\r\n Notwithstanding the above, nothing herein shall supersede or modify\r\n the terms of any separate license agreement you may have executed\r\n with Licensor regarding such Contributions.\r\n\r\n 6. Trademarks. This License does not grant permission to use the trade\r\n names, trademarks, service marks, or product names of the Licensor,\r\n except as required for reasonable and customary use in describing the\r\n origin of the Work and reproducing the content of the NOTICE file.\r\n\r\n 7. Disclaimer of Warranty. Unless required by applicable law or\r\n agreed to in writing, Licensor provides the Work (and each\r\n Contributor provides its Contributions) on an \"AS IS\" BASIS,\r\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\r\n implied, including, without limitation, any warranties or conditions\r\n of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\r\n PARTICULAR PURPOSE. You are solely responsible for determining the\r\n appropriateness of using or redistributing the Work and assume any\r\n risks associated with Your exercise of permissions under this License.\r\n\r\n 8. Limitation of Liability. In no event and under no legal theory,\r\n whether in tort (including negligence), contract, or otherwise,\r\n unless required by applicable law (such as deliberate and grossly\r\n negligent acts) or agreed to in writing, shall any Contributor be\r\n liable to You for damages, including any direct, indirect, special,\r\n incidental, or consequential damages of any character arising as a\r\n result of this License or out of the use or inability to use the\r\n Work (including but not limited to damages for loss of goodwill,\r\n work stoppage, computer failure or malfunction, or any and all\r\n other commercial damages or losses), even if such Contributor\r\n has been advised of the possibility of such damages.\r\n\r\n 9. Accepting Warranty or Additional Liability. While redistributing\r\n the Work or Derivative Works thereof, You may choose to offer,\r\n and charge a fee for, acceptance of support, warranty, indemnity,\r\n or other liability obligations and/or rights consistent with this\r\n License. However, in accepting such obligations, You may act only\r\n on Your own behalf and on Your sole responsibility, not on behalf\r\n of any other Contributor, and only if You agree to indemnify,\r\n defend, and hold each Contributor harmless for any liability\r\n incurred by, or claims asserted against, such Contributor by reason\r\n of your accepting any such warranty or additional liability.\r\n\r\n END OF TERMS AND CONDITIONS\r\n\r\n APPENDIX: How to apply the Apache License to your work.\r\n\r\n To apply the Apache License to your work, attach the following\r\n boilerplate notice, with the fields enclosed by brackets \"{}\"\r\n replaced with your own identifying information. (Don't include\r\n the brackets!)  The text should be enclosed in the appropriate\r\n comment syntax for the file format. We also recommend that a\r\n file or class name and description of purpose be included on the\r\n same \"printed page\" as the copyright notice for easier\r\n identification within third-party archives.\r\n\r\n Copyright (C) 2013-present   SheetJS LLC\r\n\r\n Licensed under the Apache License, Version 2.0 (the \"License\");\r\n you may not use this file except in compliance with the License.\r\n You may obtain a copy of the License at\r\n\r\n http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n Unless required by applicable law or agreed to in writing, software\r\n distributed under the License is distributed on an \"AS IS\" BASIS,\r\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n See the License for the specific language governing permissions and\r\n limitations under the License.\r\n\r\n */\r\nvar M = Math;\r\n// @ts-ignore\r\nfunction _horner(arr, v) {\r\n    for (var i = 0, z = 0; i < arr.length; ++i) {\r\n        z = v * z + arr[i];\r\n    }\r\n    return z;\r\n}\r\n// @ts-ignore\r\nfunction _bessel_iter(x, n, f0, f1, sign) {\r\n    if (n === 0) {\r\n        return f0;\r\n    }\r\n    if (n === 1) {\r\n        return f1;\r\n    }\r\n    var tdx = 2 / x, f2 = f1;\r\n    for (var o = 1; o < n; ++o) {\r\n        f2 = f1 * o * tdx + sign * f0;\r\n        f0 = f1;\r\n        f1 = f2;\r\n    }\r\n    return f2;\r\n}\r\n// @ts-ignore\r\nfunction _bessel_wrap(bessel0, bessel1, name, nonzero, sign) {\r\n    // @ts-ignore\r\n    return function bessel(x, n) {\r\n        if (nonzero) {\r\n            if (x === 0) {\r\n                return (nonzero == 1 ? -Infinity : Infinity);\r\n            }\r\n            else if (x < 0) {\r\n                return NaN;\r\n            }\r\n        }\r\n        if (n === 0) {\r\n            return bessel0(x);\r\n        }\r\n        if (n === 1) {\r\n            return bessel1(x);\r\n        }\r\n        if (n < 0) {\r\n            return NaN;\r\n        }\r\n        n |= 0;\r\n        var b0 = bessel0(x), b1 = bessel1(x);\r\n        return _bessel_iter(x, n, b0, b1, sign);\r\n    };\r\n}\r\nexport var besselj = (function () {\r\n    var W = 0.636619772; // 2 / Math.PI\r\n    var b0_a1a = [57568490574.0, -13362590354.0, 651619640.7, -11214424.18, 77392.33017, -184.9052456].reverse();\r\n    var b0_a2a = [57568490411.0, 1029532985.0, 9494680.718, 59272.64853, 267.8532712, 1.0].reverse();\r\n    var b0_a1b = [1.0, -0.1098628627e-2, 0.2734510407e-4, -0.2073370639e-5, 0.2093887211e-6].reverse();\r\n    var b0_a2b = [-0.1562499995e-1, 0.1430488765e-3, -0.6911147651e-5, 0.7621095161e-6, -0.934935152e-7].reverse();\r\n    // @ts-ignore\r\n    function bessel0(x) {\r\n        var a = 0, a1 = 0, a2 = 0, y = x * x;\r\n        if (x < 8) {\r\n            a1 = _horner(b0_a1a, y);\r\n            a2 = _horner(b0_a2a, y);\r\n            a = a1 / a2;\r\n        }\r\n        else {\r\n            var xx = x - 0.785398164;\r\n            y = 64 / y;\r\n            a1 = _horner(b0_a1b, y);\r\n            a2 = _horner(b0_a2b, y);\r\n            a = M.sqrt(W / x) * (M.cos(xx) * a1 - M.sin(xx) * a2 * 8 / x);\r\n        }\r\n        return a;\r\n    }\r\n    var b1_a1a = [72362614232.0, -7895059235.0, 242396853.1, -2972611.439, 15704.48260, -30.16036606].reverse();\r\n    var b1_a2a = [144725228442.0, 2300535178.0, 18583304.74, 99447.43394, 376.9991397, 1.0].reverse();\r\n    var b1_a1b = [1.0, 0.183105e-2, -0.3516396496e-4, 0.2457520174e-5, -0.240337019e-6].reverse();\r\n    var b1_a2b = [0.04687499995, -0.2002690873e-3, 0.8449199096e-5, -0.88228987e-6, 0.105787412e-6].reverse();\r\n    // @ts-ignore\r\n    function bessel1(x) {\r\n        var a = 0, a1 = 0, a2 = 0, y = x * x, xx = M.abs(x) - 2.356194491;\r\n        if (Math.abs(x) < 8) {\r\n            a1 = x * _horner(b1_a1a, y);\r\n            a2 = _horner(b1_a2a, y);\r\n            a = a1 / a2;\r\n        }\r\n        else {\r\n            y = 64 / y;\r\n            a1 = _horner(b1_a1b, y);\r\n            a2 = _horner(b1_a2b, y);\r\n            a = M.sqrt(W / M.abs(x)) * (M.cos(xx) * a1 - M.sin(xx) * a2 * 8 / M.abs(x));\r\n            if (x < 0) {\r\n                a = -a;\r\n            }\r\n        }\r\n        return a;\r\n    }\r\n    // @ts-ignore\r\n    return function besselj(x, n) {\r\n        n = Math.round(n);\r\n        if (!isFinite(x)) {\r\n            return isNaN(x) ? x : 0;\r\n        }\r\n        if (n < 0) {\r\n            return ((n % 2) ? -1 : 1) * besselj(x, -n);\r\n        }\r\n        if (x < 0) {\r\n            return ((n % 2) ? -1 : 1) * besselj(-x, n);\r\n        }\r\n        if (n === 0) {\r\n            return bessel0(x);\r\n        }\r\n        if (n === 1) {\r\n            return bessel1(x);\r\n        }\r\n        if (x === 0) {\r\n            return 0;\r\n        }\r\n        var ret = 0.0;\r\n        if (x > n) {\r\n            ret = _bessel_iter(x, n, bessel0(x), bessel1(x), -1);\r\n        }\r\n        else {\r\n            var m = 2 * M.floor((n + M.floor(M.sqrt(40 * n))) / 2);\r\n            var jsum = false;\r\n            var bjp = 0.0, sum = 0.0;\r\n            var bj = 1.0, bjm = 0.0;\r\n            var tox = 2 / x;\r\n            for (var j = m; j > 0; j--) {\r\n                bjm = j * tox * bj - bjp;\r\n                bjp = bj;\r\n                bj = bjm;\r\n                if (M.abs(bj) > 1E10) {\r\n                    bj *= 1E-10;\r\n                    bjp *= 1E-10;\r\n                    ret *= 1E-10;\r\n                    sum *= 1E-10;\r\n                }\r\n                if (jsum) {\r\n                    sum += bj;\r\n                }\r\n                jsum = !jsum;\r\n                if (j == n) {\r\n                    ret = bjp;\r\n                }\r\n            }\r\n            sum = 2.0 * sum - bj;\r\n            ret /= sum;\r\n        }\r\n        return ret;\r\n    };\r\n})();\r\nexport var bessely = (function () {\r\n    var W = 0.636619772;\r\n    var b0_a1a = [-2957821389.0, 7062834065.0, -512359803.6, 10879881.29, -86327.92757, 228.4622733].reverse();\r\n    var b0_a2a = [40076544269.0, 745249964.8, 7189466.438, 47447.26470, 226.1030244, 1.0].reverse();\r\n    var b0_a1b = [1.0, -0.1098628627e-2, 0.2734510407e-4, -0.2073370639e-5, 0.2093887211e-6].reverse();\r\n    var b0_a2b = [-0.1562499995e-1, 0.1430488765e-3, -0.6911147651e-5, 0.7621095161e-6, -0.934945152e-7].reverse();\r\n    // @ts-ignore\r\n    function bessel0(x) {\r\n        var a = 0, a1 = 0, a2 = 0, y = x * x, xx = x - 0.785398164;\r\n        if (x < 8) {\r\n            a1 = _horner(b0_a1a, y);\r\n            a2 = _horner(b0_a2a, y);\r\n            a = a1 / a2 + W * besselj(x, 0) * M.log(x);\r\n        }\r\n        else {\r\n            y = 64 / y;\r\n            a1 = _horner(b0_a1b, y);\r\n            a2 = _horner(b0_a2b, y);\r\n            a = M.sqrt(W / x) * (M.sin(xx) * a1 + M.cos(xx) * a2 * 8 / x);\r\n        }\r\n        return a;\r\n    }\r\n    var b1_a1a = [-0.4900604943e13, 0.1275274390e13, -0.5153438139e11, 0.7349264551e9, -0.4237922726e7, 0.8511937935e4].reverse();\r\n    var b1_a2a = [0.2499580570e14, 0.4244419664e12, 0.3733650367e10, 0.2245904002e8, 0.1020426050e6, 0.3549632885e3, 1].reverse();\r\n    var b1_a1b = [1.0, 0.183105e-2, -0.3516396496e-4, 0.2457520174e-5, -0.240337019e-6].reverse();\r\n    var b1_a2b = [0.04687499995, -0.2002690873e-3, 0.8449199096e-5, -0.88228987e-6, 0.105787412e-6].reverse();\r\n    // @ts-ignore\r\n    function bessel1(x) {\r\n        var a = 0, a1 = 0, a2 = 0, y = x * x, xx = x - 2.356194491;\r\n        if (x < 8) {\r\n            a1 = x * _horner(b1_a1a, y);\r\n            a2 = _horner(b1_a2a, y);\r\n            a = a1 / a2 + W * (besselj(x, 1) * M.log(x) - 1 / x);\r\n        }\r\n        else {\r\n            y = 64 / y;\r\n            a1 = _horner(b1_a1b, y);\r\n            a2 = _horner(b1_a2b, y);\r\n            a = M.sqrt(W / x) * (M.sin(xx) * a1 + M.cos(xx) * a2 * 8 / x);\r\n        }\r\n        return a;\r\n    }\r\n    return _bessel_wrap(bessel0, bessel1, 'BESSELY', 1, -1);\r\n})();\r\nexport var besseli = (function () {\r\n    var b0_a = [1.0, 3.5156229, 3.0899424, 1.2067492, 0.2659732, 0.360768e-1, 0.45813e-2].reverse();\r\n    var b0_b = [0.39894228, 0.1328592e-1, 0.225319e-2, -0.157565e-2, 0.916281e-2, -0.2057706e-1, 0.2635537e-1, -0.1647633e-1, 0.392377e-2].reverse();\r\n    // @ts-ignore\r\n    function bessel0(x) {\r\n        if (x <= 3.75) {\r\n            return _horner(b0_a, x * x / (3.75 * 3.75));\r\n        }\r\n        return M.exp(M.abs(x)) / M.sqrt(M.abs(x)) * _horner(b0_b, 3.75 / M.abs(x));\r\n    }\r\n    var b1_a = [0.5, 0.87890594, 0.51498869, 0.15084934, 0.2658733e-1, 0.301532e-2, 0.32411e-3].reverse();\r\n    var b1_b = [0.39894228, -0.3988024e-1, -0.362018e-2, 0.163801e-2, -0.1031555e-1, 0.2282967e-1, -0.2895312e-1, 0.1787654e-1, -0.420059e-2].reverse();\r\n    // @ts-ignore\r\n    function bessel1(x) {\r\n        if (x < 3.75) {\r\n            return x * _horner(b1_a, x * x / (3.75 * 3.75));\r\n        }\r\n        return (x < 0 ? -1 : 1) * M.exp(M.abs(x)) / M.sqrt(M.abs(x)) * _horner(b1_b, 3.75 / M.abs(x));\r\n    }\r\n    // @ts-ignore\r\n    return function besseli(x, n) {\r\n        n = Math.round(n);\r\n        if (n === 0) {\r\n            return bessel0(x);\r\n        }\r\n        if (n === 1) {\r\n            return bessel1(x);\r\n        }\r\n        if (n < 0) {\r\n            return NaN;\r\n        }\r\n        if (M.abs(x) === 0) {\r\n            return 0;\r\n        }\r\n        if (x == Infinity) {\r\n            return Infinity;\r\n        }\r\n        var ret = 0.0, j, tox = 2 / M.abs(x), bip = 0.0, bi = 1.0, bim = 0.0;\r\n        var m = 2 * M.round((n + M.round(M.sqrt(40 * n))) / 2);\r\n        for (j = m; j > 0; j--) {\r\n            bim = j * tox * bi + bip;\r\n            bip = bi;\r\n            bi = bim;\r\n            if (M.abs(bi) > 1E10) {\r\n                bi *= 1E-10;\r\n                bip *= 1E-10;\r\n                ret *= 1E-10;\r\n            }\r\n            if (j == n) {\r\n                ret = bip;\r\n            }\r\n        }\r\n        ret *= besseli(x, 0) / bi;\r\n        return x < 0 && (n % 2) ? -ret : ret;\r\n    };\r\n})();\r\nexport var besselk = (function () {\r\n    var b0_a = [-0.57721566, 0.42278420, 0.23069756, 0.3488590e-1, 0.262698e-2, 0.10750e-3, 0.74e-5].reverse();\r\n    var b0_b = [1.25331414, -0.7832358e-1, 0.2189568e-1, -0.1062446e-1, 0.587872e-2, -0.251540e-2, 0.53208e-3].reverse();\r\n    // @ts-ignore\r\n    function bessel0(x) {\r\n        if (x <= 2) {\r\n            return -M.log(x / 2) * besseli(x, 0) + _horner(b0_a, x * x / 4);\r\n        }\r\n        return M.exp(-x) / M.sqrt(x) * _horner(b0_b, 2 / x);\r\n    }\r\n    var b1_a = [1.0, 0.15443144, -0.67278579, -0.18156897, -0.1919402e-1, -0.110404e-2, -0.4686e-4].reverse();\r\n    var b1_b = [1.25331414, 0.23498619, -0.3655620e-1, 0.1504268e-1, -0.780353e-2, 0.325614e-2, -0.68245e-3].reverse();\r\n    // @ts-ignore\r\n    function bessel1(x) {\r\n        if (x <= 2) {\r\n            return M.log(x / 2) * besseli(x, 1) + (1 / x) * _horner(b1_a, x * x / 4);\r\n        }\r\n        return M.exp(-x) / M.sqrt(x) * _horner(b1_b, 2 / x);\r\n    }\r\n    return _bessel_wrap(bessel0, bessel1, 'BESSELK', 2, 1);\r\n})();\r\n","/**\r\n * @license\r\n Copyright (c) 2013 jStat\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights\r\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n copies of the Software, and to permit persons to whom the Software is\r\n furnished to do so, subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n */\r\nexport function erf(x) {\r\n    const cof = [-1.3026537197817094, 6.4196979235649026e-1, 1.9476473204185836e-2,\r\n        -9.561514786808631e-3, -9.46595344482036e-4, 3.66839497852761e-4,\r\n        4.2523324806907e-5, -2.0278578112534e-5, -1.624290004647e-6,\r\n        1.303655835580e-6, 1.5626441722e-8, -8.5238095915e-8,\r\n        6.529054439e-9, 5.059343495e-9, -9.91364156e-10,\r\n        -2.27365122e-10, 9.6467911e-11, 2.394038e-12,\r\n        -6.886027e-12, 8.94487e-13, 3.13092e-13,\r\n        -1.12708e-13, 3.81e-16, 7.106e-15,\r\n        -1.523e-15, -9.4e-17, 1.21e-16,\r\n        -2.8e-17];\r\n    let j = cof.length - 1;\r\n    let isneg = false;\r\n    let d = 0;\r\n    let dd = 0;\r\n    let t, ty, tmp, res;\r\n    if (x === 0) {\r\n        return 0;\r\n    }\r\n    if (x < 0) {\r\n        x = -x;\r\n        isneg = true;\r\n    }\r\n    t = 2 / (2 + x);\r\n    ty = 4 * t - 2;\r\n    for (; j > 0; j--) {\r\n        tmp = d;\r\n        d = ty * d - dd + cof[j];\r\n        dd = tmp;\r\n    }\r\n    res = t * Math.exp(-x * x + 0.5 * (cof[0] + ty * d) - dd);\r\n    return isneg ? res - 1 : 1 - res;\r\n}\r\nexport function erfc(x) {\r\n    return 1 - erf(x);\r\n}\r\nfunction erfcinv(p) {\r\n    let j = 0;\r\n    let x, err, t, pp;\r\n    if (p >= 2) {\r\n        return -100;\r\n    }\r\n    if (p <= 0) {\r\n        return 100;\r\n    }\r\n    pp = (p < 1) ? p : 2 - p;\r\n    t = Math.sqrt(-2 * Math.log(pp / 2));\r\n    x = -0.70711 * ((2.30753 + t * 0.27061) /\r\n        (1 + t * (0.99229 + t * 0.04481)) - t);\r\n    for (; j < 2; j++) {\r\n        err = erfc(x) - pp;\r\n        x += err / (1.12837916709551257 * Math.exp(-x * x) - x * err);\r\n    }\r\n    return (p < 1) ? x : -x;\r\n}\r\nexport const exponential = {\r\n    pdf: (x, rate) => {\r\n        return x < 0 ? 0 : rate * Math.exp(-rate * x);\r\n    },\r\n    cdf: (x, rate) => {\r\n        return x < 0 ? 0 : 1 - Math.exp(-rate * x);\r\n    },\r\n};\r\nexport function gammafn(x) {\r\n    const p = [-1.716185138865495, 24.76565080557592, -379.80425647094563,\r\n        629.3311553128184, 866.9662027904133, -31451.272968848367,\r\n        -36144.413418691176, 66456.14382024054\r\n    ];\r\n    const q = [-30.8402300119739, 315.35062697960416, -1015.1563674902192,\r\n        -3107.771671572311, 22538.118420980151, 4755.8462775278811,\r\n        -134659.9598649693, -115132.2596755535];\r\n    let fact = false;\r\n    let n = 0;\r\n    let xden = 0;\r\n    let xnum = 0;\r\n    let y = x;\r\n    let i, z, yi, res;\r\n    if (x > 171.6243769536076) {\r\n        return Infinity;\r\n    }\r\n    if (y <= 0) {\r\n        res = y % 1;\r\n        if (res) {\r\n            fact = (!(y & 1) ? 1 : -1) * Math.PI / Math.sin(Math.PI * res);\r\n            y = 1 - y;\r\n        }\r\n        else {\r\n            return Infinity;\r\n        }\r\n    }\r\n    yi = y;\r\n    if (y < 1) {\r\n        z = y++;\r\n    }\r\n    else {\r\n        z = (y -= n = (y | 0) - 1) - 1;\r\n    }\r\n    for (i = 0; i < 8; ++i) {\r\n        xnum = (xnum + p[i]) * z;\r\n        xden = xden * z + q[i];\r\n    }\r\n    res = xnum / xden + 1;\r\n    if (yi < y) {\r\n        res /= yi;\r\n    }\r\n    else if (yi > y) {\r\n        for (i = 0; i < n; ++i) {\r\n            res *= y;\r\n            y++;\r\n        }\r\n    }\r\n    if (fact) {\r\n        res = fact / res;\r\n    }\r\n    return res;\r\n}\r\nexport const gamma = {\r\n    pdf: function pdf(x, shape, scale) {\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        return (x === 0 && shape === 1) ? 1 / scale :\r\n            Math.exp((shape - 1) * Math.log(x) - x / scale -\r\n                gammaln(shape) - shape * Math.log(scale));\r\n    },\r\n    cdf: function cdf(x, shape, scale) {\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        return lowRegGamma(shape, x / scale);\r\n    },\r\n    inv: function (p, shape, scale) {\r\n        return gammapinv(p, shape) * scale;\r\n    }\r\n};\r\nexport function gammaln(x) {\r\n    let j = 0;\r\n    const cof = [\r\n        76.18009172947146, -86.50532032941677, 24.01409824083091,\r\n        -1.231739572450155, 0.1208650973866179e-2, -0.5395239384953e-5\r\n    ];\r\n    let ser = 1.000000000190015;\r\n    let xx, y, tmp;\r\n    tmp = (y = xx = x) + 5.5;\r\n    tmp -= (xx + 0.5) * Math.log(tmp);\r\n    for (; j < 6; j++) {\r\n        ser += cof[j] / ++y;\r\n    }\r\n    return Math.log(2.5066282746310005 * ser / xx) - tmp;\r\n}\r\nfunction lowRegGamma(a, x) {\r\n    const aln = gammaln(a);\r\n    let ap = a;\r\n    let sum = 1 / a;\r\n    let del = sum;\r\n    let b = x + 1 - a;\r\n    let c = 1 / 1.0e-30;\r\n    let d = 1 / b;\r\n    let h = d;\r\n    let i = 1;\r\n    // calculate maximum number of itterations required for a\r\n    const ITMAX = -~(Math.log((a >= 1) ? a : 1 / a) * 8.5 + a * 0.4 + 17);\r\n    let an;\r\n    if (x < 0 || a <= 0) {\r\n        return NaN;\r\n    }\r\n    else if (x < a + 1) {\r\n        for (; i <= ITMAX; i++) {\r\n            sum += del *= x / ++ap;\r\n        }\r\n        return (sum * Math.exp(-x + a * Math.log(x) - (aln)));\r\n    }\r\n    for (; i <= ITMAX; i++) {\r\n        an = -i * (i - a);\r\n        b += 2;\r\n        d = an * d + b;\r\n        c = b + an / c;\r\n        d = 1 / d;\r\n        h *= d * c;\r\n    }\r\n    return (1 - h * Math.exp(-x + a * Math.log(x) - (aln)));\r\n}\r\nfunction gammapinv(p, a) {\r\n    let j = 0;\r\n    const a1 = a - 1;\r\n    const EPS = 1e-8;\r\n    const gln = gammaln(a);\r\n    let x, err, t, u, pp;\r\n    let lna1;\r\n    let afac;\r\n    if (p >= 1) {\r\n        return Math.max(100, a + 100 * Math.sqrt(a));\r\n    }\r\n    if (p <= 0) {\r\n        return 0;\r\n    }\r\n    if (a > 1) {\r\n        lna1 = Math.log(a1);\r\n        afac = Math.exp(a1 * (lna1 - 1) - gln);\r\n        pp = (p < 0.5) ? p : 1 - p;\r\n        t = Math.sqrt(-2 * Math.log(pp));\r\n        x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\r\n        if (p < 0.5) {\r\n            x = -x;\r\n        }\r\n        x = Math.max(1e-3, a * Math.pow(1 - 1 / (9 * a) - x / (3 * Math.sqrt(a)), 3));\r\n    }\r\n    else {\r\n        t = 1 - a * (0.253 + a * 0.12);\r\n        if (p < t) {\r\n            x = Math.pow(p / t, 1 / a);\r\n        }\r\n        else {\r\n            x = 1 - Math.log(1 - (p - t) / (1 - t));\r\n        }\r\n    }\r\n    for (; j < 12; j++) {\r\n        if (x <= 0) {\r\n            return 0;\r\n        }\r\n        err = lowRegGamma(a, x) - p;\r\n        if (a > 1) {\r\n            t = afac * Math.exp(-(x - a1) + a1 * (Math.log(x) - lna1));\r\n        }\r\n        else {\r\n            t = Math.exp(-x + a1 * Math.log(x) - gln);\r\n        }\r\n        u = err / t;\r\n        x -= (t = u / (1 - 0.5 * Math.min(1, u * ((a - 1) / x - 1))));\r\n        if (x <= 0) {\r\n            x = 0.5 * (x + t);\r\n        }\r\n        if (Math.abs(t) < EPS * x) {\r\n            break;\r\n        }\r\n    }\r\n    return x;\r\n}\r\nexport const normal = {\r\n    pdf: function pdf(x, mean, std) {\r\n        return Math.exp(-0.5 * Math.log(2 * Math.PI) -\r\n            Math.log(std) - Math.pow(x - mean, 2) / (2 * std * std));\r\n    },\r\n    cdf: function cdf(x, mean, std) {\r\n        return 0.5 * (1 + erf((x - mean) / Math.sqrt(2 * std * std)));\r\n    },\r\n    inv: function (p, mean, std) {\r\n        return -1.41421356237309505 * std * erfcinv(2 * p) + mean;\r\n    }\r\n};\r\nexport const beta = {\r\n    pdf: function pdf(x, alpha, beta) {\r\n        // PDF is zero outside the support\r\n        if (x > 1 || x < 0) {\r\n            return 0;\r\n        }\r\n        // PDF is one for the uniform case\r\n        if (alpha == 1 && beta == 1) {\r\n            return 1;\r\n        }\r\n        if (alpha < 512 && beta < 512) {\r\n            return (Math.pow(x, alpha - 1) * Math.pow(1 - x, beta - 1)) /\r\n                betafn(alpha, beta);\r\n        }\r\n        else {\r\n            return Math.exp((alpha - 1) * Math.log(x) +\r\n                (beta - 1) * Math.log(1 - x) -\r\n                betaln(alpha, beta));\r\n        }\r\n    },\r\n    cdf: function cdf(x, alpha, beta) {\r\n        return (x > 1 || x < 0) ? +(x > 1) : ibeta(x, alpha, beta);\r\n    },\r\n    inv: function inv(x, alpha, beta) {\r\n        return ibetainv(x, alpha, beta);\r\n    },\r\n};\r\nfunction betafn(x, y) {\r\n    // ensure arguments are positive\r\n    if (x <= 0 || y <= 0) {\r\n        return undefined;\r\n    }\r\n    // make sure x + y doesn't exceed the upper limit of usable values\r\n    return (x + y > 170)\r\n        ? Math.exp(betaln(x, y))\r\n        : gammafn(x) * gammafn(y) / gammafn(x + y);\r\n}\r\nfunction betaln(x, y) {\r\n    return gammaln(x) + gammaln(y) - gammaln(x + y);\r\n}\r\nfunction ibetainv(p, a, b) {\r\n    var EPS = 1e-8;\r\n    var a1 = a - 1;\r\n    var b1 = b - 1;\r\n    var j = 0;\r\n    var lna, lnb, pp, t, u, err, x, al, h, w, afac;\r\n    if (p <= 0) {\r\n        return 0;\r\n    }\r\n    if (p >= 1) {\r\n        return 1;\r\n    }\r\n    if (a >= 1 && b >= 1) {\r\n        pp = (p < 0.5) ? p : 1 - p;\r\n        t = Math.sqrt(-2 * Math.log(pp));\r\n        x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\r\n        if (p < 0.5) {\r\n            x = -x;\r\n        }\r\n        al = (x * x - 3) / 6;\r\n        h = 2 / (1 / (2 * a - 1) + 1 / (2 * b - 1));\r\n        w = (x * Math.sqrt(al + h) / h) - (1 / (2 * b - 1) - 1 / (2 * a - 1)) *\r\n            (al + 5 / 6 - 2 / (3 * h));\r\n        x = a / (a + b * Math.exp(2 * w));\r\n    }\r\n    else {\r\n        lna = Math.log(a / (a + b));\r\n        lnb = Math.log(b / (a + b));\r\n        t = Math.exp(a * lna) / a;\r\n        u = Math.exp(b * lnb) / b;\r\n        w = t + u;\r\n        if (p < t / w) {\r\n            x = Math.pow(a * w * p, 1 / a);\r\n        }\r\n        else {\r\n            x = 1 - Math.pow(b * w * (1 - p), 1 / b);\r\n        }\r\n    }\r\n    afac = -gammaln(a) - gammaln(b) + gammaln(a + b);\r\n    for (; j < 10; j++) {\r\n        if (x === 0 || x === 1) {\r\n            return x;\r\n        }\r\n        // @ts-ignore\r\n        err = ibeta(x, a, b) - p;\r\n        t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\r\n        u = err / t;\r\n        x -= (t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x)))));\r\n        if (x <= 0) {\r\n            x = 0.5 * (x + t);\r\n        }\r\n        if (x >= 1) {\r\n            x = 0.5 * (x + t + 1);\r\n        }\r\n        if (Math.abs(t) < EPS * x && j > 0) {\r\n            break;\r\n        }\r\n    }\r\n    return x;\r\n}\r\nfunction ibeta(x, a, b) {\r\n    // Factors in front of the continued fraction.\r\n    var bt = (x === 0 || x === 1) ? 0 :\r\n        Math.exp(gammaln(a + b) - gammaln(a) -\r\n            gammaln(b) + a * Math.log(x) + b *\r\n            Math.log(1 - x));\r\n    if (x < 0 || x > 1) {\r\n        return false;\r\n    }\r\n    if (x < (a + 1) / (a + b + 2)) \r\n    // Use continued fraction directly.\r\n    {\r\n        return bt * betacf(x, a, b) / a;\r\n    }\r\n    // else use continued fraction after making the symmetry transformation.\r\n    return 1 - bt * betacf(1 - x, b, a) / b;\r\n}\r\nfunction betacf(x, a, b) {\r\n    var fpmin = 1e-30;\r\n    var m = 1;\r\n    var qab = a + b;\r\n    var qap = a + 1;\r\n    var qam = a - 1;\r\n    var c = 1;\r\n    var d = 1 - qab * x / qap;\r\n    var m2, aa, del, h;\r\n    // These q's will be used in factors that occur in the coefficients\r\n    if (Math.abs(d) < fpmin) {\r\n        d = fpmin;\r\n    }\r\n    d = 1 / d;\r\n    h = d;\r\n    for (; m <= 100; m++) {\r\n        m2 = 2 * m;\r\n        aa = m * (b - m) * x / ((qam + m2) * (a + m2));\r\n        // One step (the even one) of the recurrence\r\n        d = 1 + aa * d;\r\n        if (Math.abs(d) < fpmin) {\r\n            d = fpmin;\r\n        }\r\n        c = 1 + aa / c;\r\n        if (Math.abs(c) < fpmin) {\r\n            c = fpmin;\r\n        }\r\n        d = 1 / d;\r\n        h *= d * c;\r\n        aa = -(a + m) * (qab + m) * x / ((a + m2) * (qap + m2));\r\n        // Next step of the recurrence (the odd one)\r\n        d = 1 + aa * d;\r\n        if (Math.abs(d) < fpmin) {\r\n            d = fpmin;\r\n        }\r\n        c = 1 + aa / c;\r\n        if (Math.abs(c) < fpmin) {\r\n            c = fpmin;\r\n        }\r\n        d = 1 / d;\r\n        del = d * c;\r\n        h *= del;\r\n        if (Math.abs(del - 1.0) < 3e-7) {\r\n            break;\r\n        }\r\n    }\r\n    return h;\r\n}\r\nexport const binomial = {\r\n    pdf: function (k, n, p) {\r\n        return (p === 0 || p === 1) ?\r\n            ((n * p) === k ? 1 : 0) :\r\n            combination(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);\r\n    },\r\n    cdf: function (x, n, p) {\r\n        var betacdf;\r\n        var eps = 1e-10;\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        if (x >= n) {\r\n            return 1;\r\n        }\r\n        if (p < 0 || p > 1 || n <= 0) {\r\n            return NaN;\r\n        }\r\n        x = Math.floor(x);\r\n        var z = p;\r\n        var a = x + 1;\r\n        var b = n - x;\r\n        var s = a + b;\r\n        var bt = Math.exp(gammaln(s) - gammaln(b) -\r\n            gammaln(a) + a * Math.log(z) + b * Math.log(1 - z));\r\n        if (z < (a + 1) / (s + 2)) {\r\n            betacdf = bt * betinc(z, a, b, eps);\r\n        }\r\n        else {\r\n            betacdf = 1 - bt * betinc(1 - z, b, a, eps);\r\n        }\r\n        return Math.round((1 - betacdf) * (1 / eps)) / (1 / eps);\r\n    }\r\n};\r\nfunction betinc(x, a, b, eps) {\r\n    var a0 = 0;\r\n    var b0 = 1;\r\n    var a1 = 1;\r\n    var b1 = 1;\r\n    var m9 = 0;\r\n    var a2 = 0;\r\n    var c9;\r\n    while (Math.abs((a1 - a2) / a1) > eps) {\r\n        a2 = a1;\r\n        c9 = -(a + m9) * (a + b + m9) * x / (a + 2 * m9) / (a + 2 * m9 + 1);\r\n        a0 = a1 + c9 * a0;\r\n        b0 = b1 + c9 * b0;\r\n        m9 = m9 + 1;\r\n        c9 = m9 * (b - m9) * x / (a + 2 * m9 - 1) / (a + 2 * m9);\r\n        a1 = a0 + c9 * a1;\r\n        b1 = b0 + c9 * b1;\r\n        a0 = a0 / b1;\r\n        b0 = b0 / b1;\r\n        a1 = a1 / b1;\r\n        b1 = 1;\r\n    }\r\n    return a1 / a;\r\n}\r\nfunction combination(n, m) {\r\n    // make sure n or m don't exceed the upper limit of usable values\r\n    return (n > 170 || m > 170)\r\n        ? Math.exp(combinationln(n, m))\r\n        : (factorial(n) / factorial(m)) / factorial(n - m);\r\n}\r\nfunction combinationln(n, m) {\r\n    return factorialln(n) - factorialln(m) - factorialln(n - m);\r\n}\r\n// natural log factorial of n\r\nexport function factorialln(n) {\r\n    return n < 0 ? NaN : gammaln(n + 1);\r\n}\r\n// factorial of n\r\nexport function factorial(n) {\r\n    return n < 0 ? NaN : gammafn(n + 1);\r\n}\r\nexport const chisquare = {\r\n    pdf: function pdf(x, dof) {\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        return (x === 0 && dof === 2) ? 0.5 :\r\n            Math.exp((dof / 2 - 1) * Math.log(x) - x / 2 - (dof / 2) *\r\n                Math.log(2) - gammaln(dof / 2));\r\n    },\r\n    cdf: function cdf(x, dof) {\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        return lowRegGamma(dof / 2, x / 2);\r\n    },\r\n    inv: function (p, dof) {\r\n        return 2 * gammapinv(p, 0.5 * dof);\r\n    }\r\n};\r\nexport const centralF = {\r\n    // This implementation of the pdf function avoids float overflow\r\n    // See the way that R calculates this value:\r\n    // https://svn.r-project.org/R/trunk/src/nmath/df.c\r\n    pdf: function pdf(x, df1, df2) {\r\n        var p, q, f;\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        if (df1 <= 2) {\r\n            if (x === 0 && df1 < 2) {\r\n                return Infinity;\r\n            }\r\n            if (x === 0 && df1 === 2) {\r\n                return 1;\r\n            }\r\n            return (1 / betafn(df1 / 2, df2 / 2)) *\r\n                Math.pow(df1 / df2, df1 / 2) *\r\n                Math.pow(x, (df1 / 2) - 1) *\r\n                Math.pow((1 + (df1 / df2) * x), -(df1 + df2) / 2);\r\n        }\r\n        p = (df1 * x) / (df2 + x * df1);\r\n        q = df2 / (df2 + x * df1);\r\n        f = df1 * q / 2.0;\r\n        return f * binomial.pdf((df1 - 2) / 2, (df1 + df2 - 2) / 2, p);\r\n    },\r\n    cdf: function cdf(x, df1, df2) {\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        return ibeta((df1 * x) / (df1 * x + df2), df1 / 2, df2 / 2);\r\n    },\r\n    inv: function inv(x, df1, df2) {\r\n        return df2 / (df1 * (1 / ibetainv(x, df1 / 2, df2 / 2) - 1));\r\n    },\r\n};\r\nexport const weibull = {\r\n    pdf: function pdf(x, scale, shape) {\r\n        if (x < 0 || scale < 0 || shape < 0) {\r\n            return 0;\r\n        }\r\n        return (shape / scale) * Math.pow((x / scale), (shape - 1)) *\r\n            Math.exp(-(Math.pow((x / scale), shape)));\r\n    },\r\n    cdf: function cdf(x, scale, shape) {\r\n        return x < 0 ? 0 : 1 - Math.exp(-Math.pow((x / scale), shape));\r\n    },\r\n};\r\nexport const poisson = {\r\n    pdf: function pdf(k, l) {\r\n        if (l < 0 || (k % 1) !== 0 || k < 0) {\r\n            return 0;\r\n        }\r\n        return Math.pow(l, k) * Math.exp(-l) / factorial(k);\r\n    },\r\n    cdf: function cdf(x, l) {\r\n        var k = 0;\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        var sum = 0;\r\n        for (; k <= x; k++) {\r\n            sum += poisson.pdf(k, l);\r\n        }\r\n        return sum;\r\n    },\r\n};\r\nexport const hypgeom = {\r\n    pdf: function pdf(k, N, m, n) {\r\n        // Hypergeometric PDF.\r\n        // A simplification of the CDF algorithm below.\r\n        // k = number of successes drawn\r\n        // N = population size\r\n        // m = number of successes in population\r\n        // n = number of items drawn from population\r\n        // if(k !== k | 0) {\r\n        //   return false;\r\n        // } else\r\n        if (k < 0 || k < m - (N - n)) {\r\n            // It's impossible to have this few successes drawn.\r\n            return 0;\r\n        }\r\n        else if (k > n || k > m) {\r\n            // It's impossible to have this many successes drawn.\r\n            return 0;\r\n        }\r\n        else if (m * 2 > N) {\r\n            // More than half the population is successes.\r\n            if (n * 2 > N) {\r\n                // More than half the population is sampled.\r\n                return hypgeom.pdf(N - m - n + k, N, N - m, N - n);\r\n            }\r\n            else {\r\n                // Half or less of the population is sampled.\r\n                return hypgeom.pdf(n - k, N, N - m, n);\r\n            }\r\n        }\r\n        else if (n * 2 > N) {\r\n            // Half or less is successes.\r\n            return hypgeom.pdf(m - k, N, m, N - n);\r\n        }\r\n        else if (m < n) {\r\n            // We want to have the number of things sampled to be less than the\r\n            // successes available. So swap the definitions of successful and sampled.\r\n            return hypgeom.pdf(k, N, n, m);\r\n        }\r\n        else {\r\n            // If we get here, half or less of the population was sampled, half or\r\n            // less of it was successes, and we had fewer sampled things than\r\n            // successes. Now we can do this complicated iterative algorithm in an\r\n            // efficient way.\r\n            // The basic premise of the algorithm is that we partially normalize our\r\n            // intermediate product to keep it in a numerically good region, and then\r\n            // finish the normalization at the end.\r\n            // This variable holds the scaled probability of the current number of\r\n            // successes.\r\n            var scaledPDF = 1;\r\n            // This keeps track of how much we have normalized.\r\n            var samplesDone = 0;\r\n            for (var i = 0; i < k; i++) {\r\n                // For every possible number of successes up to that observed...\r\n                while (scaledPDF > 1 && samplesDone < n) {\r\n                    // Intermediate result is growing too big. Apply some of the\r\n                    // normalization to shrink everything.\r\n                    scaledPDF *= 1 - (m / (N - samplesDone));\r\n                    // Say we've normalized by this sample already.\r\n                    samplesDone++;\r\n                }\r\n                // Work out the partially-normalized hypergeometric PDF for the next\r\n                // number of successes\r\n                scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\r\n            }\r\n            for (; samplesDone < n; samplesDone++) {\r\n                // Apply all the rest of the normalization\r\n                scaledPDF *= 1 - (m / (N - samplesDone));\r\n            }\r\n            // Bound answer sanely before returning.\r\n            return Math.min(1, Math.max(0, scaledPDF));\r\n        }\r\n    },\r\n    cdf: function cdf(x, N, m, n) {\r\n        // Hypergeometric CDF.\r\n        // This algorithm is due to Prof. Thomas S. Ferguson, <tom@math.ucla.edu>,\r\n        // and comes from his hypergeometric test calculator at\r\n        // <http://www.math.ucla.edu/~tom/distributions/Hypergeometric.html>.\r\n        // x = number of successes drawn\r\n        // N = population size\r\n        // m = number of successes in population\r\n        // n = number of items drawn from population\r\n        if (x < 0 || x < m - (N - n)) {\r\n            // It's impossible to have this few successes drawn or fewer.\r\n            return 0;\r\n        }\r\n        else if (x >= n || x >= m) {\r\n            // We will always have this many successes or fewer.\r\n            return 1;\r\n        }\r\n        else if (m * 2 > N) {\r\n            // More than half the population is successes.\r\n            if (n * 2 > N) {\r\n                // More than half the population is sampled.\r\n                return cdf(N - m - n + x, N, N - m, N - n);\r\n            }\r\n            else {\r\n                // Half or less of the population is sampled.\r\n                return 1 - hypgeom.cdf(n - x - 1, N, N - m, n);\r\n            }\r\n        }\r\n        else if (n * 2 > N) {\r\n            // Half or less is successes.\r\n            return 1 - hypgeom.cdf(m - x - 1, N, m, N - n);\r\n        }\r\n        else if (m < n) {\r\n            // We want to have the number of things sampled to be less than the\r\n            // successes available. So swap the definitions of successful and sampled.\r\n            return hypgeom.cdf(x, N, n, m);\r\n        }\r\n        else {\r\n            // If we get here, half or less of the population was sampled, half or\r\n            // less of it was successes, and we had fewer sampled things than\r\n            // successes. Now we can do this complicated iterative algorithm in an\r\n            // efficient way.\r\n            // The basic premise of the algorithm is that we partially normalize our\r\n            // intermediate sum to keep it in a numerically good region, and then\r\n            // finish the normalization at the end.\r\n            // Holds the intermediate, scaled total CDF.\r\n            var scaledCDF = 1;\r\n            // This variable holds the scaled probability of the current number of\r\n            // successes.\r\n            var scaledPDF = 1;\r\n            // This keeps track of how much we have normalized.\r\n            var samplesDone = 0;\r\n            for (var i = 0; i < x; i++) {\r\n                // For every possible number of successes up to that observed...\r\n                while (scaledCDF > 1 && samplesDone < n) {\r\n                    // Intermediate result is growing too big. Apply some of the\r\n                    // normalization to shrink everything.\r\n                    var factor = 1 - (m / (N - samplesDone));\r\n                    scaledPDF *= factor;\r\n                    scaledCDF *= factor;\r\n                    // Say we've normalized by this sample already.\r\n                    samplesDone++;\r\n                }\r\n                // Work out the partially-normalized hypergeometric PDF for the next\r\n                // number of successes\r\n                scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\r\n                // Add to the CDF answer.\r\n                scaledCDF += scaledPDF;\r\n            }\r\n            for (; samplesDone < n; samplesDone++) {\r\n                // Apply all the rest of the normalization\r\n                scaledCDF *= 1 - (m / (N - samplesDone));\r\n            }\r\n            // Bound answer sanely before returning.\r\n            return Math.min(1, Math.max(0, scaledCDF));\r\n        }\r\n    }\r\n};\r\nexport const studentt = {\r\n    pdf: function pdf(x, dof) {\r\n        dof = dof > 1e100 ? 1e100 : dof;\r\n        return (1 / (Math.sqrt(dof) * betafn(0.5, dof / 2))) *\r\n            Math.pow(1 + ((x * x) / dof), -((dof + 1) / 2));\r\n    },\r\n    cdf: function cdf(x, dof) {\r\n        var dof2 = dof / 2;\r\n        return ibeta((x + Math.sqrt(x * x + dof)) /\r\n            (2 * Math.sqrt(x * x + dof)), dof2, dof2);\r\n    },\r\n    inv: function (p, dof) {\r\n        var x = ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\r\n        x = Math.sqrt(dof * (1 - x) / x);\r\n        return (p > 0.5) ? x : -x;\r\n    },\r\n};\r\nexport const lognormal = {\r\n    pdf: function pdf(x, mu, sigma) {\r\n        if (x <= 0) {\r\n            return 0;\r\n        }\r\n        return Math.exp(-Math.log(x) - 0.5 * Math.log(2 * Math.PI) -\r\n            Math.log(sigma) - Math.pow(Math.log(x) - mu, 2) /\r\n            (2 * sigma * sigma));\r\n    },\r\n    cdf: function cdf(x, mu, sigma) {\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        return 0.5 +\r\n            (0.5 * erf((Math.log(x) - mu) / Math.sqrt(2 * sigma * sigma)));\r\n    },\r\n    inv: function (p, mu, sigma) {\r\n        return Math.exp(-1.41421356237309505 * sigma * erfcinv(2 * p) + mu);\r\n    },\r\n};\r\nexport const negbin = {\r\n    pdf: function pdf(k, r, p) {\r\n        if (k !== k >>> 0) {\r\n            return false;\r\n        }\r\n        if (k < 0) {\r\n            return 0;\r\n        }\r\n        return combination(k + r - 1, r - 1) *\r\n            Math.pow(1 - p, k) * Math.pow(p, r);\r\n    },\r\n    cdf: function cdf(x, r, p) {\r\n        var sum = 0, k = 0;\r\n        if (x < 0) {\r\n            return 0;\r\n        }\r\n        for (; k <= x; k++) {\r\n            sum += negbin.pdf(k, r, p);\r\n        }\r\n        return sum;\r\n    }\r\n};\r\nfunction sum(arr) {\r\n    var sum = 0;\r\n    var i = arr.length;\r\n    while (--i >= 0) {\r\n        sum += arr[i];\r\n    }\r\n    return sum;\r\n}\r\nexport function mean(arr) {\r\n    return sum(arr) / arr.length;\r\n}\r\nexport function sumsqerr(arr) {\r\n    var meanv = mean(arr);\r\n    var sum = 0;\r\n    var i = arr.length;\r\n    var tmp;\r\n    while (--i >= 0) {\r\n        tmp = arr[i] - meanv;\r\n        sum += tmp * tmp;\r\n    }\r\n    return sum;\r\n}\r\nexport function variance(arr, flag) {\r\n    return sumsqerr(arr) / (arr.length - (flag ? 1 : 0));\r\n}\r\nexport function stdev(arr, flag) {\r\n    return Math.sqrt(variance(arr, flag));\r\n}\r\n// 2 different parameter setups\r\n// (value, alpha, sd, n)\r\n// (value, alpha, array)\r\nexport function normalci() {\r\n    var args = [].slice.call(arguments), ans = new Array(2), change;\r\n    if (args.length === 4) {\r\n        change = Math.abs(normal.inv(args[1] / 2, 0, 1) *\r\n            args[2] / Math.sqrt(args[3]));\r\n    }\r\n    else {\r\n        // @ts-ignore\r\n        change = Math.abs(normal.inv(args[1] / 2, 0, 1) * stdev(args[2]) / Math.sqrt(args[2].length));\r\n    }\r\n    ans[0] = args[0] - change;\r\n    ans[1] = args[0] + change;\r\n    return ans;\r\n}\r\nexport function tci() {\r\n    var args = [].slice.call(arguments), ans = new Array(2), change;\r\n    if (args.length === 4) {\r\n        change = Math.abs(studentt.inv(args[1] / 2, args[3] - 1) *\r\n            args[2] / Math.sqrt(args[3]));\r\n    }\r\n    else {\r\n        // @ts-ignore\r\n        change = Math.abs(studentt.inv(args[1] / 2, args[2].length - 1) * stdev(args[2], true) / Math.sqrt(args[2].length));\r\n    }\r\n    ans[0] = args[0] - change;\r\n    ans[1] = args[0] + change;\r\n    return ans;\r\n}\r\nfunction product(arr) {\r\n    var prod = 1;\r\n    var i = arr.length;\r\n    while (--i >= 0) {\r\n        prod *= arr[i];\r\n    }\r\n    return prod;\r\n}\r\nexport function geomean(arr) {\r\n    return Math.pow(product(arr), 1 / arr.length);\r\n}\r\nexport function covariance(arr1, arr2) {\r\n    var u = mean(arr1);\r\n    var v = mean(arr2);\r\n    var arr1Len = arr1.length;\r\n    var sq_dev = new Array(arr1Len);\r\n    var i;\r\n    for (i = 0; i < arr1Len; i++) {\r\n        sq_dev[i] = (arr1[i] - u) * (arr2[i] - v);\r\n    }\r\n    return sum(sq_dev) / (arr1Len - 1);\r\n}\r\nexport function corrcoeff(arr1, arr2) {\r\n    return covariance(arr1, arr2) /\r\n        stdev(arr1, 1) /\r\n        stdev(arr2, 1);\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class MathPlugin extends FunctionPlugin {\r\n    fact(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FACT'), (arg) => {\r\n            arg = Math.trunc(arg);\r\n            let ret = 1;\r\n            for (let i = 1; i <= arg; i++) {\r\n                ret *= i;\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    factdouble(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('FACTDOUBLE'), (arg) => {\r\n            arg = Math.trunc(arg);\r\n            let ret = 1;\r\n            for (let i = arg; i >= 1; i -= 2) {\r\n                ret *= i;\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    combin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COMBIN'), (n, m) => {\r\n            if (m > n) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.WrongOrder);\r\n            }\r\n            n = Math.trunc(n);\r\n            m = Math.trunc(m);\r\n            return combin(n, m);\r\n        });\r\n    }\r\n    combina(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COMBINA'), (n, m) => {\r\n            n = Math.trunc(n);\r\n            m = Math.trunc(m);\r\n            if (n + m - 1 >= 1030) {\r\n                //Product #2 does not enforce this\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            if (n === 0 && m === 0) {\r\n                return 1;\r\n            }\r\n            return combin(n + m - 1, m);\r\n        });\r\n    }\r\n    gcd(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GCD'), (...args) => {\r\n            const processedArgs = this.arithmeticHelper.coerceNumbersCoerceRangesDropNulls(args);\r\n            if (processedArgs instanceof CellError) {\r\n                return processedArgs;\r\n            }\r\n            let ret = 0;\r\n            for (const val of processedArgs) {\r\n                if (val < 0) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                }\r\n                ret = binaryGCD(ret, Math.trunc(val));\r\n            }\r\n            if (ret > Number.MAX_SAFE_INTEGER) {\r\n                //inconsistency with product #1\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    lcm(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('LCM'), (...args) => {\r\n            const processedArgs = this.arithmeticHelper.coerceNumbersCoerceRangesDropNulls(args);\r\n            if (processedArgs instanceof CellError) {\r\n                return processedArgs;\r\n            }\r\n            let ret = 1;\r\n            for (const val of processedArgs) {\r\n                if (val < 0) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                }\r\n                ret = binaryLCM(ret, Math.trunc(val));\r\n            }\r\n            if (ret > Number.MAX_SAFE_INTEGER) {\r\n                //inconsistency with product #1\r\n                return new CellError(ErrorType.NUM, ErrorMessage.ValueLarge);\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    mround(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MROUND'), (nom, denom) => {\r\n            if (denom === 0) {\r\n                return 0;\r\n            }\r\n            if ((nom > 0 && denom < 0) || (nom < 0 && denom > 0)) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.DistinctSigns);\r\n            }\r\n            return Math.round(nom / denom) * denom;\r\n        });\r\n    }\r\n    multinomial(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('MULTINOMIAL'), (...args) => {\r\n            let n = 0;\r\n            let ans = 1;\r\n            for (let arg of args) {\r\n                if (arg < 0) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                }\r\n                arg = Math.trunc(arg);\r\n                for (let i = 1; i <= arg; i++) {\r\n                    ans *= (n + i) / i;\r\n                }\r\n                n += arg;\r\n            }\r\n            return Math.round(ans);\r\n        });\r\n    }\r\n    quotient(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('QUOTIENT'), (nom, denom) => {\r\n            if (denom === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return Math.trunc(nom / denom);\r\n        });\r\n    }\r\n    seriessum(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SERIESSUM'), (x, n, m, range) => {\r\n            const coefs = this.arithmeticHelper.manyToOnlyNumbersDropNulls(range.valuesFromTopLeftCorner());\r\n            if (coefs instanceof CellError) {\r\n                return coefs;\r\n            }\r\n            let ret = 0;\r\n            coefs.reverse();\r\n            for (const coef of coefs) {\r\n                ret *= Math.pow(x, m);\r\n                ret += coef;\r\n            }\r\n            return ret * Math.pow(x, n);\r\n        });\r\n    }\r\n    sign(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SIGN'), (arg) => {\r\n            if (arg > 0) {\r\n                return 1;\r\n            }\r\n            else if (arg < 0) {\r\n                return -1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n    }\r\n    sumx2my2(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SUMX2MY2'), (rangeX, rangeY) => {\r\n            const valsX = rangeX.valuesFromTopLeftCorner();\r\n            const valsY = rangeY.valuesFromTopLeftCorner();\r\n            if (valsX.length !== valsY.length) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const n = valsX.length;\r\n            let ret = 0;\r\n            for (let i = 0; i < n; i++) {\r\n                const valX = valsX[i];\r\n                const valY = valsY[i];\r\n                if (valX instanceof CellError) {\r\n                    return valX;\r\n                }\r\n                if (valY instanceof CellError) {\r\n                    return valY;\r\n                }\r\n                if (typeof valX === 'number' && typeof valY === 'number') {\r\n                    ret += Math.pow(valX, 2) - Math.pow(valY, 2);\r\n                }\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    sumx2py2(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SUMX2PY2'), (rangeX, rangeY) => {\r\n            const valsX = rangeX.valuesFromTopLeftCorner();\r\n            const valsY = rangeY.valuesFromTopLeftCorner();\r\n            if (valsX.length !== valsY.length) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const n = valsX.length;\r\n            let ret = 0;\r\n            for (let i = 0; i < n; i++) {\r\n                const valX = valsX[i];\r\n                const valY = valsY[i];\r\n                if (valX instanceof CellError) {\r\n                    return valX;\r\n                }\r\n                if (valY instanceof CellError) {\r\n                    return valY;\r\n                }\r\n                if (typeof valX === 'number' && typeof valY === 'number') {\r\n                    ret += Math.pow(valX, 2) + Math.pow(valY, 2);\r\n                }\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    sumxmy2(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SUMXMY2'), (rangeX, rangeY) => {\r\n            const valsX = rangeX.valuesFromTopLeftCorner();\r\n            const valsY = rangeY.valuesFromTopLeftCorner();\r\n            if (valsX.length !== valsY.length) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const n = valsX.length;\r\n            let ret = 0;\r\n            for (let i = 0; i < n; i++) {\r\n                const valX = valsX[i];\r\n                const valY = valsY[i];\r\n                if (valX instanceof CellError) {\r\n                    return valX;\r\n                }\r\n                if (valY instanceof CellError) {\r\n                    return valY;\r\n                }\r\n                if (typeof valX === 'number' && typeof valY === 'number') {\r\n                    ret += Math.pow(valX - valY, 2);\r\n                }\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n}\r\nMathPlugin.implementedFunctions = {\r\n    'FACT': {\r\n        method: 'fact',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 170 }\r\n        ]\r\n    },\r\n    'FACTDOUBLE': {\r\n        method: 'factdouble',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, maxValue: 288 }\r\n        ]\r\n    },\r\n    'COMBIN': {\r\n        method: 'combin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0, lessThan: 1030 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 }\r\n        ]\r\n    },\r\n    'COMBINA': {\r\n        method: 'combina',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 },\r\n            { argumentType: FunctionArgumentType.NUMBER, minValue: 0 }\r\n        ]\r\n    },\r\n    'GCD': {\r\n        method: 'gcd',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1\r\n    },\r\n    'LCM': {\r\n        method: 'lcm',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1\r\n    },\r\n    'MROUND': {\r\n        method: 'mround',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'MULTINOMIAL': {\r\n        method: 'multinomial',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n        repeatLastArgs: 1,\r\n        expandRanges: true,\r\n    },\r\n    'QUOTIENT': {\r\n        method: 'quotient',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'SERIESSUM': {\r\n        method: 'seriessum',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'SIGN': {\r\n        method: 'sign',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'SUMX2MY2': {\r\n        method: 'sumx2my2',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'SUMX2PY2': {\r\n        method: 'sumx2py2',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'SUMXMY2': {\r\n        method: 'sumxmy2',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n};\r\nfunction combin(n, m) {\r\n    if (2 * m > n) {\r\n        m = n - m;\r\n    }\r\n    let ret = 1;\r\n    for (let i = 1; i <= m; i++) {\r\n        ret *= (n - m + i) / i;\r\n    }\r\n    return Math.round(ret);\r\n}\r\nfunction binaryGCD(a, b) {\r\n    if (a < b) {\r\n        [a, b] = [b, a];\r\n    }\r\n    while (b > 0) {\r\n        [a, b] = [b, a % b];\r\n    }\r\n    return a;\r\n}\r\nfunction binaryLCM(a, b) {\r\n    if (a === 0 || b === 0) {\r\n        return 0;\r\n    }\r\n    return a * (b / binaryGCD(a, b));\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { coerceComplexToString } from '../ArithmeticHelper';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class ComplexPlugin extends FunctionPlugin {\r\n    complex(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COMPLEX'), (re, im, unit) => {\r\n            if (unit !== 'i' && unit !== 'j') {\r\n                return new CellError(ErrorType.VALUE, ErrorMessage.ShouldBeIorJ);\r\n            }\r\n            return coerceComplexToString([re, im], unit);\r\n        });\r\n    }\r\n    imabs(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMABS'), abs);\r\n    }\r\n    imaginary(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMAGINARY'), ([_re, im]) => im);\r\n    }\r\n    imreal(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMREAL'), ([re, _im]) => re);\r\n    }\r\n    imargument(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMARGUMENT'), ([re, im]) => {\r\n            if (re === 0 && im === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return Math.atan2(im, re);\r\n        });\r\n    }\r\n    imconjugate(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMCONJUGATE'), ([re, im]) => coerceComplexToString([re, -im]));\r\n    }\r\n    imcos(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMCOS'), (arg) => coerceComplexToString(cos(arg)));\r\n    }\r\n    imcosh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMCOSH'), (arg) => coerceComplexToString(cosh(arg)));\r\n    }\r\n    imcot(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMCOT'), (arg) => coerceComplexToString(div(cos(arg), sin(arg))));\r\n    }\r\n    imcsc(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMCSC'), (arg) => coerceComplexToString(div([1, 0], sin(arg))));\r\n    }\r\n    imcsch(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMCSCH'), (arg) => coerceComplexToString(div([1, 0], sinh(arg))));\r\n    }\r\n    imsec(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSEC'), (arg) => coerceComplexToString(div([1, 0], cos(arg))));\r\n    }\r\n    imsech(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSECH'), (arg) => coerceComplexToString(div([1, 0], cosh(arg))));\r\n    }\r\n    imsin(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSIN'), (arg) => coerceComplexToString(sin(arg)));\r\n    }\r\n    imsinh(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSINH'), (arg) => coerceComplexToString(sinh(arg)));\r\n    }\r\n    imtan(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMTAN'), (arg) => coerceComplexToString(div(sin(arg), cos(arg))));\r\n    }\r\n    imdiv(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMDIV'), (arg1, arg2) => coerceComplexToString(div(arg1, arg2)));\r\n    }\r\n    improduct(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMPRODUCT'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceComplexExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            let prod = [1, 0];\r\n            for (const val of coerced) {\r\n                prod = mul(prod, val);\r\n            }\r\n            return coerceComplexToString(prod);\r\n        });\r\n    }\r\n    imsum(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSUM'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceComplexExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            let sum = [0, 0];\r\n            for (const val of coerced) {\r\n                sum = add(sum, val);\r\n            }\r\n            return coerceComplexToString(sum);\r\n        });\r\n    }\r\n    imsub(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSUB'), (arg1, arg2) => coerceComplexToString(sub(arg1, arg2)));\r\n    }\r\n    imexp(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMEXP'), (arg) => coerceComplexToString(exp(arg)));\r\n    }\r\n    imln(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMLN'), (arg) => coerceComplexToString(ln(arg)));\r\n    }\r\n    imlog10(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMLOG10'), (arg) => {\r\n            const [re, im] = ln(arg);\r\n            const c = Math.log(10);\r\n            return coerceComplexToString([re / c, im / c]);\r\n        });\r\n    }\r\n    imlog2(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMLOG2'), (arg) => {\r\n            const [re, im] = ln(arg);\r\n            const c = Math.log(2);\r\n            return coerceComplexToString([re / c, im / c]);\r\n        });\r\n    }\r\n    impower(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMPOWER'), (arg, n) => coerceComplexToString(power(arg, n)));\r\n    }\r\n    imsqrt(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('IMSQRT'), (arg) => coerceComplexToString(power(arg, 0.5)));\r\n    }\r\n}\r\nComplexPlugin.implementedFunctions = {\r\n    'COMPLEX': {\r\n        method: 'complex',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.STRING, defaultValue: 'i' },\r\n        ],\r\n    },\r\n    'IMABS': {\r\n        method: 'imabs',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMAGINARY': {\r\n        method: 'imaginary',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMREAL': {\r\n        method: 'imreal',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMARGUMENT': {\r\n        method: 'imargument',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMCONJUGATE': {\r\n        method: 'imconjugate',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMCOS': {\r\n        method: 'imcos',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMCOSH': {\r\n        method: 'imcosh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMCOT': {\r\n        method: 'imcot',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMCSC': {\r\n        method: 'imcsc',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMCSCH': {\r\n        method: 'imcsch',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMSEC': {\r\n        method: 'imsec',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMSECH': {\r\n        method: 'imsech',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMSIN': {\r\n        method: 'imsin',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMSINH': {\r\n        method: 'imsinh',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMTAN': {\r\n        method: 'imtan',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMDIV': {\r\n        method: 'imdiv',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMPRODUCT': {\r\n        method: 'improduct',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'IMSUM': {\r\n        method: 'imsum',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'IMSUB': {\r\n        method: 'imsub',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMEXP': {\r\n        method: 'imexp',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMLN': {\r\n        method: 'imln',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMLOG10': {\r\n        method: 'imlog10',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMLOG2': {\r\n        method: 'imlog2',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n    'IMPOWER': {\r\n        method: 'impower',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n        ],\r\n    },\r\n    'IMSQRT': {\r\n        method: 'imsqrt',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.COMPLEX },\r\n        ],\r\n    },\r\n};\r\nfunction add([re1, im1], [re2, im2]) {\r\n    return [re1 + re2, im1 + im2];\r\n}\r\nfunction sub([re1, im1], [re2, im2]) {\r\n    return [re1 - re2, im1 - im2];\r\n}\r\nfunction mul([re1, im1], [re2, im2]) {\r\n    return [re1 * re2 - im1 * im2, re1 * im2 + re2 * im1];\r\n}\r\nfunction div([re1, im1], [re2, im2]) {\r\n    const denom = Math.pow(re2, 2) + Math.pow(im2, 2);\r\n    const [nomRe, nomIm] = mul([re1, im1], [re2, -im2]);\r\n    return [nomRe / denom, nomIm / denom];\r\n}\r\nfunction cos([re, im]) {\r\n    return [Math.cos(re) * Math.cosh(im), -Math.sin(re) * Math.sinh(im)];\r\n}\r\nfunction cosh([re, im]) {\r\n    return [Math.cosh(re) * Math.cos(im), Math.sinh(re) * Math.sin(im)];\r\n}\r\nfunction sin([re, im]) {\r\n    return [Math.sin(re) * Math.cosh(im), Math.cos(re) * Math.sinh(im)];\r\n}\r\nfunction sinh([re, im]) {\r\n    return [Math.sinh(re) * Math.cos(im), Math.cosh(re) * Math.sin(im)];\r\n}\r\nfunction exp([re, im]) {\r\n    return [Math.exp(re) * Math.cos(im), Math.exp(re) * Math.sin(im)];\r\n}\r\nfunction abs([re, im]) {\r\n    return Math.sqrt(re * re + im * im);\r\n}\r\nfunction ln([re, im]) {\r\n    return [Math.log(abs([re, im])), Math.atan2(im, re)];\r\n}\r\nfunction power(arg, n) {\r\n    const [re, im] = ln(arg);\r\n    return exp([n * re, n * im]);\r\n}\r\n","/**\r\n * @license\r\n * Copyright (c) 2023 Handsoncode. All rights reserved.\r\n */\r\nimport { CellError, ErrorType } from '../../Cell';\r\nimport { ErrorMessage } from '../../error-message';\r\nimport { getRawValue, isExtendedNumber } from '../InterpreterValue';\r\nimport { centralF, chisquare, corrcoeff, covariance, geomean, mean, normal, stdev, studentt, sumsqerr, variance } from './3rdparty/jstat/jstat';\r\nimport { FunctionArgumentType, FunctionPlugin } from './FunctionPlugin';\r\nexport class StatisticalAggregationPlugin extends FunctionPlugin {\r\n    avedev(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('AVEDEV'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            if (coerced.length === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            const avg = mean(coerced);\r\n            return coerced.reduce((a, b) => a + Math.abs(b - avg), 0) / coerced.length;\r\n        });\r\n    }\r\n    devsq(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('DEVSQ'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            if (coerced.length === 0) {\r\n                return 0;\r\n            }\r\n            return sumsqerr(coerced);\r\n        });\r\n    }\r\n    geomean(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('GEOMEAN'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            if (coerced.length === 0) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\r\n            }\r\n            for (const val of coerced) {\r\n                if (val <= 0) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                }\r\n            }\r\n            return geomean(coerced);\r\n        });\r\n    }\r\n    harmean(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('HARMEAN'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            if (coerced.length === 0) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.OneValue);\r\n            }\r\n            for (const val of coerced) {\r\n                if (val <= 0) {\r\n                    return new CellError(ErrorType.NUM, ErrorMessage.ValueSmall);\r\n                }\r\n            }\r\n            return coerced.length / (coerced.reduce((a, b) => a + 1 / b, 0));\r\n        });\r\n    }\r\n    correl(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CORREL'), (dataX, dataY) => {\r\n            if (dataX.numberOfElements() !== dataY.numberOfElements()) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            const n = ret[0].length;\r\n            if (n <= 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n            }\r\n            return corrcoeff(ret[0], ret[1]);\r\n        });\r\n    }\r\n    rsq(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('RSQ'), (dataX, dataY) => {\r\n            if (dataX.numberOfElements() !== dataY.numberOfElements()) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            const n = ret[0].length;\r\n            if (n <= 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n            }\r\n            return Math.pow(corrcoeff(ret[0], ret[1]), 2);\r\n        });\r\n    }\r\n    covariancep(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COVARIANCE.P'), (dataX, dataY) => {\r\n            if (dataX.numberOfElements() !== dataY.numberOfElements()) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            const n = ret[0].length;\r\n            if (n < 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.OneValue);\r\n            }\r\n            if (n === 1) {\r\n                return 0;\r\n            }\r\n            return covariance(ret[0], ret[1]) * (n - 1) / n;\r\n        });\r\n    }\r\n    covariances(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('COVARIANCE.S'), (dataX, dataY) => {\r\n            if (dataX.numberOfElements() !== dataY.numberOfElements()) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            const n = ret[0].length;\r\n            if (n <= 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n            }\r\n            return covariance(ret[0], ret[1]);\r\n        });\r\n    }\r\n    ztest(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('Z.TEST'), (range, x, sigma) => {\r\n            const vals = this.arithmeticHelper.manyToExactNumbers(range.valuesFromTopLeftCorner());\r\n            if (vals instanceof CellError) {\r\n                return vals;\r\n            }\r\n            const n = vals.length;\r\n            if (sigma === undefined) {\r\n                if (n < 2) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n                }\r\n                sigma = stdev(vals, true);\r\n            }\r\n            if (n < 1) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.OneValue);\r\n            }\r\n            if (sigma === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return 1 - normal.cdf((mean(vals) - x) / (sigma / Math.sqrt(n)), 0, 1);\r\n        });\r\n    }\r\n    ftest(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('F.TEST'), (dataX, dataY) => {\r\n            const arrX = this.arithmeticHelper.manyToExactNumbers(dataX.valuesFromTopLeftCorner());\r\n            const arrY = this.arithmeticHelper.manyToExactNumbers(dataY.valuesFromTopLeftCorner());\r\n            if (arrX instanceof CellError) {\r\n                return arrX;\r\n            }\r\n            if (arrY instanceof CellError) {\r\n                return arrY;\r\n            }\r\n            if (arrX.length <= 1 || arrY.length <= 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            const vx = variance(arrX, true);\r\n            const vy = variance(arrY, true);\r\n            if (vx === 0 || vy === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            const r = vx / vy;\r\n            const v = centralF.cdf(r, arrX.length - 1, arrY.length - 1);\r\n            return 2 * Math.min(v, 1 - v);\r\n        });\r\n    }\r\n    steyx(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('STEYX'), (dataX, dataY) => {\r\n            if (dataX.numberOfElements() !== dataY.numberOfElements()) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            const n = ret[0].length;\r\n            if (n <= 2) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\r\n            }\r\n            return Math.sqrt((sumsqerr(ret[0]) - Math.pow(covariance(ret[0], ret[1]) * (n - 1), 2) / sumsqerr(ret[1])) / (n - 2));\r\n        });\r\n    }\r\n    slope(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SLOPE'), (dataX, dataY) => {\r\n            if (dataX.numberOfElements() !== dataY.numberOfElements()) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            const n = ret[0].length;\r\n            if (n <= 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n            }\r\n            return covariance(ret[0], ret[1]) * (n - 1) / sumsqerr(ret[1]);\r\n        });\r\n    }\r\n    chisqtest(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('CHISQ.TEST'), (dataX, dataY) => {\r\n            const r = dataX.height();\r\n            const c = dataX.width();\r\n            if (dataY.height() !== r || dataY.width() !== c) {\r\n                return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n            }\r\n            const ret = parseTwoArrays(dataX, dataY);\r\n            if (ret instanceof CellError) {\r\n                return ret;\r\n            }\r\n            if (ret[0].length <= 1) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n            }\r\n            let sum = 0;\r\n            for (let i = 0; i < ret[0].length; i++) {\r\n                if (ret[1][i] === 0) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO);\r\n                }\r\n                sum += Math.pow(ret[0][i] - ret[1][i], 2) / ret[1][i];\r\n            }\r\n            if (sum < 0) {\r\n                return new CellError(ErrorType.NUM, ErrorMessage.NaN);\r\n            }\r\n            return 1 - chisquare.cdf(sum, (r > 1 && c > 1) ? (r - 1) * (c - 1) : r * c - 1);\r\n        });\r\n    }\r\n    ttest(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('T.TEST'), (dataX, dataY, tails, type) => {\r\n            const arrX = this.arithmeticHelper.manyToExactNumbers(dataX.valuesFromTopLeftCorner());\r\n            const arrY = this.arithmeticHelper.manyToExactNumbers(dataY.valuesFromTopLeftCorner());\r\n            if (arrX instanceof CellError) {\r\n                return arrX;\r\n            }\r\n            if (arrY instanceof CellError) {\r\n                return arrY;\r\n            }\r\n            const n = arrX.length;\r\n            const m = arrY.length;\r\n            if (type === 1) {\r\n                if (m !== n) {\r\n                    return new CellError(ErrorType.NA, ErrorMessage.EqualLength);\r\n                }\r\n                if (n <= 1) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n                }\r\n                const sub = Array(n);\r\n                for (let i = 0; i < n; i++) {\r\n                    sub[i] = arrX[i] - arrY[i];\r\n                }\r\n                const s = stdev(sub, true);\r\n                if (s === 0) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO);\r\n                }\r\n                const t = Math.abs(Math.sqrt(n) * mean(sub) / s);\r\n                return tails * (1 - studentt.cdf(t, n - 1));\r\n            }\r\n            else if (type === 2) {\r\n                if (n <= 1 || m <= 1) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n                }\r\n                const s = (sumsqerr(arrX) + sumsqerr(arrY)) / (n + m - 2);\r\n                if (s === 0) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO);\r\n                }\r\n                const t = Math.abs((mean(arrX) - mean(arrY)) / Math.sqrt(s * (1 / n + 1 / m)));\r\n                return tails * (1 - studentt.cdf(t, n + m - 2));\r\n            }\r\n            else { //type === 3\r\n                if (n <= 1 || m <= 1) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.TwoValues);\r\n                }\r\n                const sx = variance(arrX, true);\r\n                const sy = variance(arrY, true);\r\n                if (sx === 0 && sy === 0) {\r\n                    return new CellError(ErrorType.DIV_BY_ZERO);\r\n                }\r\n                const t = Math.abs((mean(arrX) - mean(arrY)) / Math.sqrt(sx / n + sy / m));\r\n                const v = Math.pow(sx / n + sy / m, 2) / (Math.pow(sx / n, 2) / (n - 1) + Math.pow(sy / m, 2) / (m - 1));\r\n                return tails * (1 - studentt.cdf(t, v));\r\n            }\r\n        });\r\n    }\r\n    skew(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SKEW'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            const n = coerced.length;\r\n            if (n < 3) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\r\n            }\r\n            const avg = mean(coerced);\r\n            const s = stdev(coerced, true);\r\n            if (s === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return coerced.reduce((a, b) => a + Math.pow((b - avg) / s, 3), 0) * n / (n - 1) / (n - 2);\r\n        });\r\n    }\r\n    skewp(ast, state) {\r\n        return this.runFunction(ast.args, state, this.metadata('SKEW.P'), (...args) => {\r\n            const coerced = this.arithmeticHelper.coerceNumbersExactRanges(args);\r\n            if (coerced instanceof CellError) {\r\n                return coerced;\r\n            }\r\n            const n = coerced.length;\r\n            if (n < 3) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO, ErrorMessage.ThreeValues);\r\n            }\r\n            const avg = mean(coerced);\r\n            const s = stdev(coerced, false);\r\n            if (s === 0) {\r\n                return new CellError(ErrorType.DIV_BY_ZERO);\r\n            }\r\n            return coerced.reduce((a, b) => a + Math.pow((b - avg) / s, 3), 0) / n;\r\n        });\r\n    }\r\n}\r\nStatisticalAggregationPlugin.implementedFunctions = {\r\n    'AVEDEV': {\r\n        method: 'avedev',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'DEVSQ': {\r\n        method: 'devsq',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'GEOMEAN': {\r\n        method: 'geomean',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'HARMEAN': {\r\n        method: 'harmean',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'CORREL': {\r\n        method: 'correl',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'RSQ': {\r\n        method: 'rsq',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'COVARIANCE.P': {\r\n        method: 'covariancep',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'COVARIANCE.S': {\r\n        method: 'covariances',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'Z.TEST': {\r\n        method: 'ztest',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.NUMBER },\r\n            { argumentType: FunctionArgumentType.NUMBER, optionalArg: true },\r\n        ],\r\n    },\r\n    'F.TEST': {\r\n        method: 'ftest',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'STEYX': {\r\n        method: 'steyx',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'SLOPE': {\r\n        method: 'slope',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'CHISQ.TEST': {\r\n        method: 'chisqtest',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n        ],\r\n    },\r\n    'T.TEST': {\r\n        method: 'ttest',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.RANGE },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1, maxValue: 2 },\r\n            { argumentType: FunctionArgumentType.INTEGER, minValue: 1, maxValue: 3 },\r\n        ],\r\n    },\r\n    'SKEW': {\r\n        method: 'skew',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n    'SKEW.P': {\r\n        method: 'skewp',\r\n        parameters: [\r\n            { argumentType: FunctionArgumentType.ANY },\r\n        ],\r\n        repeatLastArgs: 1,\r\n    },\r\n};\r\nStatisticalAggregationPlugin.aliases = {\r\n    COVAR: 'COVARIANCE.P',\r\n    FTEST: 'F.TEST',\r\n    PEARSON: 'CORREL',\r\n    ZTEST: 'Z.TEST',\r\n    CHITEST: 'CHISQ.TEST',\r\n    TTEST: 'T.TEST',\r\n    COVARIANCEP: 'COVARIANCE.P',\r\n    COVARIANCES: 'COVARIANCE.S',\r\n    SKEWP: 'SKEW.P',\r\n};\r\nfunction parseTwoArrays(dataX, dataY) {\r\n    const xit = dataX.iterateValuesFromTopLeftCorner();\r\n    const yit = dataY.iterateValuesFromTopLeftCorner();\r\n    let x, y;\r\n    const arrX = [];\r\n    const arrY = [];\r\n    while (x = xit.next(), y = yit.next(), !x.done && !y.done) {\r\n        const xval = x.value;\r\n        const yval = y.value;\r\n        if (xval instanceof CellError) {\r\n            return xval;\r\n        }\r\n        else if (yval instanceof CellError) {\r\n            return yval;\r\n        }\r\n        else if (isExtendedNumber(xval) && isExtendedNumber(yval)) {\r\n            arrX.push(getRawValue(xval));\r\n            arrY.push(getRawValue(yval));\r\n        }\r\n    }\r\n    return [arrX, arrY];\r\n}\r\n"],"sourceRoot":""}